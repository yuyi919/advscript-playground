import{c as e,g as t,a as n}from"./parserc148129d.js";var r,i,o={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */r=o,i=o.exports,function(){var t,n="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,c=32,u=64,l=128,f=256,d=1/0,p=9007199254740991,h=NaN,m=4294967295,g=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",c],["partialRight",u],["rearg",f]],y="[object Arguments]",v="[object Array]",R="[object Boolean]",T="[object Date]",_="[object Error]",E="[object Function]",b="[object GeneratorFunction]",k="[object Map]",C="[object Number]",P="[object Object]",x="[object Promise]",w="[object RegExp]",A="[object Set]",O="[object String]",N="[object Symbol]",S="[object WeakMap]",D="[object ArrayBuffer]",I="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",q="[object Int16Array]",$="[object Int32Array]",j="[object Uint8Array]",U="[object Uint8ClampedArray]",W="[object Uint16Array]",K="[object Uint32Array]",G=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,Y=RegExp(H.source),X=RegExp(V.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(re.source),oe=/^\s+/,ae=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,he=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,Te=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",Pe="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",we="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="['’]",Oe="[\\ud800-\\udfff]",Ne="["+we+"]",Se="["+be+"]",De="\\d+",Ie="[\\u2700-\\u27bf]",Le="["+Ce+"]",Me="[^\\ud800-\\udfff"+we+De+ke+Ce+Pe+"]",Fe="\\ud83c[\\udffb-\\udfff]",qe="[^\\ud800-\\udfff]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+Pe+"]",We="(?:"+Le+"|"+Me+")",Ke="(?:"+Ue+"|"+Me+")",Ge="(?:['’](?:d|ll|m|re|s|t|ve))?",ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",Be="(?:"+Se+"|"+Fe+")?",He="[\\ufe0e\\ufe0f]?",Ve=He+Be+"(?:\\u200d(?:"+[qe,$e,je].join("|")+")"+He+Be+")*",Ye="(?:"+[Ie,$e,je].join("|")+")"+Ve,Xe="(?:"+[qe+Se+"?",Se,$e,je,Oe].join("|")+")",Je=RegExp(Ae,"g"),Ze=RegExp(Se,"g"),Qe=RegExp(Fe+"(?="+Fe+")|"+Xe+Ve,"g"),et=RegExp([Ue+"?"+Le+"+"+Ge+"(?="+[Ne,Ue,"$"].join("|")+")",Ke+"+"+ze+"(?="+[Ne,Ue+We,"$"].join("|")+")",Ue+"?"+We+"+"+Ge,Ue+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Ye].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+be+xe+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[L]=ot[M]=ot[F]=ot[q]=ot[$]=ot[j]=ot[U]=ot[W]=ot[K]=!0,ot[y]=ot[v]=ot[D]=ot[R]=ot[I]=ot[T]=ot[_]=ot[E]=ot[k]=ot[C]=ot[P]=ot[w]=ot[A]=ot[O]=ot[S]=!1;var at={};at[y]=at[v]=at[D]=at[I]=at[R]=at[T]=at[L]=at[M]=at[F]=at[q]=at[$]=at[k]=at[C]=at[P]=at[w]=at[A]=at[O]=at[N]=at[j]=at[U]=at[W]=at[K]=!0,at[_]=at[E]=at[S]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,ut=parseInt,lt="object"==typeof e&&e&&e.Object===Object&&e,ft="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||ft||Function("return this")(),pt=i&&!i.nodeType&&i,ht=pt&&r&&!r.nodeType&&r,mt=ht&&ht.exports===pt,gt=mt&&lt.process,yt=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),vt=yt&&yt.isArrayBuffer,Rt=yt&&yt.isDate,Tt=yt&&yt.isMap,_t=yt&&yt.isRegExp,Et=yt&&yt.isSet,bt=yt&&yt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function xt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function wt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function At(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Ot(e,t){return!(null==e||!e.length)&&jt(e,t,0)>-1}function Nt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function St(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function It(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Lt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Gt("length");function qt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function $t(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function jt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):$t(e,Wt,n)}function Ut(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Wt(e){return e!=e}function Kt(e,t){var n=null==e?0:e.length;return n?Ht(e,t)/n:h}function Gt(e){return function(n){return null==n?t:n[e]}}function zt(e){return function(n){return null==e?t:e[n]}}function Bt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ht(e,n){for(var r,i=-1,o=e.length;++i<o;){var a=n(e[i]);a!==t&&(r=r===t?a:r+a)}return r}function Vt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Yt(e){return e?e.slice(0,pn(e)+1).replace(oe,""):e}function Xt(e){return function(t){return e(t)}}function Jt(e,t){return St(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var nn=zt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+st[e]}function an(e){return tt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){return an(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Ft(e)}function dn(e){return an(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var hn=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),mn=function e(r){var i,ae=(r=null==r?dt:mn.defaults(dt.Object(),r,mn.pick(dt,rt))).Array,be=r.Date,ke=r.Error,Ce=r.Function,Pe=r.Math,xe=r.Object,we=r.RegExp,Ae=r.String,Oe=r.TypeError,Ne=ae.prototype,Se=Ce.prototype,De=xe.prototype,Ie=r["__core-js_shared__"],Le=Se.toString,Me=De.hasOwnProperty,Fe=0,qe=(i=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",$e=De.toString,je=Le.call(xe),Ue=dt._,We=we("^"+Le.call(Me).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=mt?r.Buffer:t,Ge=r.Symbol,ze=r.Uint8Array,Be=Ke?Ke.allocUnsafe:t,He=cn(xe.getPrototypeOf,xe),Ve=xe.create,Ye=De.propertyIsEnumerable,Xe=Ne.splice,Qe=Ge?Ge.isConcatSpreadable:t,tt=Ge?Ge.iterator:t,st=Ge?Ge.toStringTag:t,lt=function(){try{var e=po(xe,"defineProperty");return e({},"",{}),e}catch(t){}}(),ft=r.clearTimeout!==dt.clearTimeout&&r.clearTimeout,pt=be&&be.now!==dt.Date.now&&be.now,ht=r.setTimeout!==dt.setTimeout&&r.setTimeout,gt=Pe.ceil,yt=Pe.floor,Ft=xe.getOwnPropertySymbols,zt=Ke?Ke.isBuffer:t,gn=r.isFinite,yn=Ne.join,vn=cn(xe.keys,xe),Rn=Pe.max,Tn=Pe.min,_n=be.now,En=r.parseInt,bn=Pe.random,kn=Ne.reverse,Cn=po(r,"DataView"),Pn=po(r,"Map"),xn=po(r,"Promise"),wn=po(r,"Set"),An=po(r,"WeakMap"),On=po(xe,"create"),Nn=An&&new An,Sn={},Dn=Ko(Cn),In=Ko(Pn),Ln=Ko(xn),Mn=Ko(wn),Fn=Ko(An),qn=Ge?Ge.prototype:t,$n=qn?qn.valueOf:t,jn=qn?qn.toString:t;function Un(e){if(as(e)&&!Ya(e)&&!(e instanceof zn)){if(e instanceof Gn)return e;if(Me.call(e,"__wrapped__"))return Go(e)}return new Gn(e)}var Wn=function(){function e(){}return function(n){if(!os(n))return{};if(Ve)return Ve(n);e.prototype=n;var r=new e;return e.prototype=t,r}}();function Kn(){}function Gn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Bn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Vn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Hn(e);this.size=t.size}function Jn(e,t){var n=Ya(e),r=!n&&Va(e),i=!n&&!r&&Qa(e),o=!n&&!r&&!i&&hs(e),a=n||r||i||o,s=a?Vt(e.length,Ae):[],c=s.length;for(var u in e)!t&&!Me.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||To(u,c))||s.push(u);return s}function Zn(e){var n=e.length;return n?e[Yr(0,n-1)]:t}function Qn(e,t){return Fo(Oi(e),cr(t,0,e.length))}function er(e){return Fo(Oi(e))}function tr(e,n,r){(r!==t&&!za(e[n],r)||r===t&&!(n in e))&&ar(e,n,r)}function nr(e,n,r){var i=e[n];Me.call(e,n)&&za(i,r)&&(r!==t||n in e)||ar(e,n,r)}function rr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function ir(e,t,n,r){return pr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Ni(t,Ms(t),e)}function ar(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,n){for(var r=-1,i=n.length,o=ae(i),a=null==e;++r<i;)o[r]=a?t:Ns(e,n[r]);return o}function cr(e,n,r){return e==e&&(r!==t&&(e=e<=r?e:r),n!==t&&(e=e>=n?e:n)),e}function ur(e,n,r,i,o,a){var s,c=1&n,u=2&n,l=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),s!==t)return s;if(!os(e))return e;var f=Ya(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Me.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return Oi(e,s)}else{var d=go(e),p=d==E||d==b;if(Qa(e))return ki(e,c);if(d==P||d==y||p&&!o){if(s=u||p?{}:vo(e),!c)return u?function(e,t){return Ni(e,mo(e),t)}(e,function(e,t){return e&&Ni(t,Fs(t),e)}(s,e)):function(e,t){return Ni(e,ho(e),t)}(e,or(s,e))}else{if(!at[d])return o?e:{};s=function(e,t,n){var r,i=e.constructor;switch(t){case D:return Ci(e);case R:case T:return new i(+e);case I:return function(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case M:case F:case q:case $:case j:case U:case W:case K:return Pi(e,n);case k:return new i;case C:case O:return new i(e);case w:return function(e){var t=new e.constructor(e.source,he.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new i;case N:return r=e,$n?xe($n.call(r)):{}}}(e,d,c)}}a||(a=new Xn);var h=a.get(e);if(h)return h;a.set(e,s),fs(e)?e.forEach((function(t){s.add(ur(t,n,r,t,e,a))})):ss(e)&&e.forEach((function(t,i){s.set(i,ur(t,n,r,i,e,a))}));var m=f?t:(l?u?oo:io:u?Fs:Ms)(e);return Pt(m||e,(function(t,i){m&&(t=e[i=t]),nr(s,i,ur(t,n,r,i,e,a))})),s}function lr(e,n,r){var i=r.length;if(null==e)return!i;for(e=xe(e);i--;){var o=r[i],a=n[o],s=e[o];if(s===t&&!(o in e)||!a(s))return!1}return!0}function fr(e,r,i){if("function"!=typeof e)throw new Oe(n);return Do((function(){e.apply(t,i)}),r)}function dr(e,t,n,r){var i=-1,o=Ot,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=St(t,Xt(n))),r?(o=Nt,a=!1):t.length>=200&&(o=Zt,a=!1,t=new Yn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=u;d--;)if(t[d]===f)continue e;c.push(l)}else o(t,f,r)||c.push(l)}return c}Un.templateSettings={escape:J,evaluate:Z,interpolate:Q,variable:"",imports:{_:Un}},Un.prototype=Kn.prototype,Un.prototype.constructor=Un,Gn.prototype=Wn(Kn.prototype),Gn.prototype.constructor=Gn,zn.prototype=Wn(Kn.prototype),zn.prototype.constructor=zn,Bn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Bn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bn.prototype.get=function(e){var n=this.__data__;if(On){var r=n[e];return r===o?t:r}return Me.call(n,e)?n[e]:t},Bn.prototype.has=function(e){var n=this.__data__;return On?n[e]!==t:Me.call(n,e)},Bn.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=On&&n===t?o:n,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0||(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,0))},Hn.prototype.get=function(e){var n=this.__data__,r=rr(n,e);return r<0?t:n[r][1]},Hn.prototype.has=function(e){return rr(this.__data__,e)>-1},Hn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new Bn,map:new(Pn||Hn),string:new Bn}},Vn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Vn.prototype.get=function(e){return lo(this,e).get(e)},Vn.prototype.has=function(e){return lo(this,e).has(e)},Vn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(e){return this.__data__.set(e,o),this},Yn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!Pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vn(r)}return n.set(e,t),this.size=n.size,this};var pr=Ii(_r),hr=Ii(Er,!0);function mr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,n,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=n(a);if(null!=s&&(c===t?s==s&&!ps(s):r(s,c)))var c=s,u=a}return u}function yr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Ro),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?vr(s,t-1,n,r,i):Dt(i,s):r||(i[i.length]=s)}return i}var Rr=Li(),Tr=Li(!0);function _r(e,t){return e&&Rr(e,t,Ms)}function Er(e,t){return e&&Tr(e,t,Ms)}function br(e,t){return At(t,(function(t){return ns(e[t])}))}function kr(e,n){for(var r=0,i=(n=Ti(n,e)).length;null!=e&&r<i;)e=e[Wo(n[r++])];return r&&r==i?e:t}function Cr(e,t,n){var r=t(e);return Ya(e)?r:Dt(r,n(e))}function Pr(e){return null==e?e===t?"[object Undefined]":"[object Null]":st&&st in xe(e)?function(e){var n=Me.call(e,st),r=e[st];try{e[st]=t;var i=!0}catch(a){}var o=$e.call(e);return i&&(n?e[st]=r:delete e[st]),o}(e):function(e){return $e.call(e)}(e)}function xr(e,t){return e>t}function wr(e,t){return null!=e&&Me.call(e,t)}function Ar(e,t){return null!=e&&t in xe(e)}function Or(e,n,r){for(var i=r?Nt:Ot,o=e[0].length,a=e.length,s=a,c=ae(a),u=1/0,l=[];s--;){var f=e[s];s&&n&&(f=St(f,Xt(n))),u=Tn(f.length,u),c[s]=!r&&(n||o>=120&&f.length>=120)?new Yn(s&&f):t}f=e[0];var d=-1,p=c[0];e:for(;++d<o&&l.length<u;){var h=f[d],m=n?n(h):h;if(h=r||0!==h?h:0,!(p?Zt(p,m):i(l,m,r))){for(s=a;--s;){var g=c[s];if(!(g?Zt(g,m):i(e[s],m,r)))continue e}p&&p.push(m),l.push(h)}}return l}function Nr(e,n,r){var i=null==(e=Ao(e,n=Ti(n,e)))?e:e[Wo(ta(n))];return null==i?t:kt(i,e,r)}function Sr(e){return as(e)&&Pr(e)==y}function Dr(e,n,r,i,o){return e===n||(null==e||null==n||!as(e)&&!as(n)?e!=e&&n!=n:function(e,n,r,i,o,a){var s=Ya(e),c=Ya(n),u=s?v:go(e),l=c?v:go(n),f=(u=u==y?P:u)==P,d=(l=l==y?P:l)==P,p=u==l;if(p&&Qa(e)){if(!Qa(n))return!1;s=!0,f=!1}if(p&&!f)return a||(a=new Xn),s||hs(e)?no(e,n,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!o(new ze(e),new ze(t)));case R:case T:case C:return za(+e,+t);case _:return e.name==t.name&&e.message==t.message;case w:case O:return e==t+"";case k:var s=sn;case A:var c=1&r;if(s||(s=ln),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var l=no(s(e),s(t),r,i,o,a);return a.delete(e),l;case N:if($n)return $n.call(e)==$n.call(t)}return!1}(e,n,u,r,i,o,a);if(!(1&r)){var h=f&&Me.call(e,"__wrapped__"),m=d&&Me.call(n,"__wrapped__");if(h||m){var g=h?e.value():e,E=m?n.value():n;return a||(a=new Xn),o(g,E,r,i,a)}}return!!p&&(a||(a=new Xn),function(e,n,r,i,o,a){var s=1&r,c=io(e),u=c.length,l=io(n).length;if(u!=l&&!s)return!1;for(var f=u;f--;){var d=c[f];if(!(s?d in n:Me.call(n,d)))return!1}var p=a.get(e),h=a.get(n);if(p&&h)return p==n&&h==e;var m=!0;a.set(e,n),a.set(n,e);for(var g=s;++f<u;){var y=e[d=c[f]],v=n[d];if(i)var R=s?i(v,y,d,n,e,a):i(y,v,d,e,n,a);if(!(R===t?y===v||o(y,v,r,i,a):R)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var T=e.constructor,_=n.constructor;T==_||!("constructor"in e)||!("constructor"in n)||"function"==typeof T&&T instanceof T&&"function"==typeof _&&_ instanceof _||(m=!1)}return a.delete(e),a.delete(n),m}(e,n,r,i,o,a))}(e,n,r,i,Dr,o))}function Ir(e,n,r,i){var o=r.length,a=o,s=!i;if(null==e)return!a;for(e=xe(e);o--;){var c=r[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=r[o])[0],l=e[u],f=c[1];if(s&&c[2]){if(l===t&&!(u in e))return!1}else{var d=new Xn;if(i)var p=i(l,f,u,e,n,d);if(!(p===t?Dr(f,l,3,i,d):p))return!1}}return!0}function Lr(e){return!(!os(e)||(t=e,qe&&qe in t))&&(ns(e)?We:ye).test(Ko(e));var t}function Mr(e){return"function"==typeof e?e:null==e?cc:"object"==typeof e?Ya(e)?Wr(e[0],e[1]):Ur(e):yc(e)}function Fr(e){if(!Co(e))return vn(e);var t=[];for(var n in xe(e))Me.call(e,n)&&"constructor"!=n&&t.push(n);return t}function qr(e){if(!os(e))return function(e){var t=[];if(null!=e)for(var n in xe(e))t.push(n);return t}(e);var t=Co(e),n=[];for(var r in e)("constructor"!=r||!t&&Me.call(e,r))&&n.push(r);return n}function $r(e,t){return e<t}function jr(e,t){var n=-1,r=Ja(e)?ae(e.length):[];return pr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Ur(e){var t=fo(e);return 1==t.length&&t[0][2]?xo(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Wr(e,n){return Eo(e)&&Po(n)?xo(Wo(e),n):function(r){var i=Ns(r,e);return i===t&&i===n?Ss(r,e):Dr(n,i,3)}}function Kr(e,n,r,i,o){e!==n&&Rr(n,(function(a,s){if(o||(o=new Xn),os(a))!function(e,n,r,i,o,a,s){var c=No(e,r),u=No(n,r),l=s.get(u);if(l)tr(e,r,l);else{var f=a?a(c,u,r+"",e,n,s):t,d=f===t;if(d){var p=Ya(u),h=!p&&Qa(u),m=!p&&!h&&hs(u);f=u,p||h||m?Ya(c)?f=c:Za(c)?f=Oi(c):h?(d=!1,f=ki(u,!0)):m?(d=!1,f=Pi(u,!0)):f=[]:us(u)||Va(u)?(f=c,Va(c)?f=Es(c):os(c)&&!ns(c)||(f=vo(u))):d=!1}d&&(s.set(u,f),o(f,u,i,a,s),s.delete(u)),tr(e,r,f)}}(e,n,s,r,Kr,i,o);else{var c=i?i(No(e,s),a,s+"",e,n,o):t;c===t&&(c=a),tr(e,s,c)}}),Fs)}function Gr(e,n){var r=e.length;if(r)return To(n+=n<0?r:0,r)?e[n]:t}function zr(e,t,n){t=t.length?St(t,(function(e){return Ya(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[cc];var r=-1;return t=St(t,Xt(uo())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(jr(e,(function(e,n,i){return{criteria:St(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var c=xi(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Br(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=kr(e,a);n(s,a)&&ei(o,Ti(a,e),s)}return o}function Hr(e,t,n,r){var i=r?Ut:jt,o=-1,a=t.length,s=e;for(e===t&&(t=Oi(t)),n&&(s=St(e,Xt(n)));++o<a;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Xe.call(s,c,1),Xe.call(e,c,1);return e}function Vr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;To(i)?Xe.call(e,i,1):di(e,i)}}return e}function Yr(e,t){return e+yt(bn()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=yt(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Io(wo(e,t,cc),e+"")}function Zr(e){return Zn(zs(e))}function Qr(e,t){var n=zs(e);return Fo(n,cr(t,0,n.length))}function ei(e,n,r,i){if(!os(e))return e;for(var o=-1,a=(n=Ti(n,e)).length,s=a-1,c=e;null!=c&&++o<a;){var u=Wo(n[o]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var f=c[u];(l=i?i(f,u,c):t)===t&&(l=os(f)?f:To(n[o+1])?[]:{})}nr(c,u,l),c=c[u]}return e}var ti=Nn?function(e,t){return Nn.set(e,t),e}:cc,ni=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:oc(t),writable:!0})}:cc;function ri(e){return Fo(zs(e))}function ii(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=ae(i);++r<i;)o[r]=e[r+t];return o}function oi(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ps(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,cc,n)}function si(e,n,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(n=r(n))!=n,c=null===n,u=ps(n),l=n===t;o<a;){var f=yt((o+a)/2),d=r(e[f]),p=d!==t,h=null===d,m=d==d,g=ps(d);if(s)var y=i||m;else y=l?m&&(i||p):c?m&&p&&(i||!h):u?m&&p&&!h&&(i||!g):!h&&!g&&(i?d<=n:d<n);y?o=f+1:a=f}return Tn(a,4294967294)}function ci(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!za(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function ui(e){return"number"==typeof e?e:ps(e)?h:+e}function li(e){if("string"==typeof e)return e;if(Ya(e))return St(e,li)+"";if(ps(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Ot,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=Nt;else if(o>=200){var u=t?null:Xi(e);if(u)return ln(u);a=!1,i=Zt,c=new Yn}else c=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var d=c.length;d--;)if(c[d]===f)continue e;t&&c.push(f),s.push(l)}else i(c,f,n)||(c!==s&&c.push(f),s.push(l))}return s}function di(e,t){return null==(e=Ao(e,t=Ti(t,e)))||delete e[Wo(ta(t))]}function pi(e,t,n,r){return ei(e,t,n(kr(e,t)),r)}function hi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function mi(e,t){var n=e;return n instanceof zn&&(n=n.value()),It(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function gi(e,t,n){var r=e.length;if(r<2)return r?fi(e[0]):[];for(var i=-1,o=ae(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=dr(o[i]||a,e[s],t,n));return fi(vr(o,1),t,n)}function yi(e,n,r){for(var i=-1,o=e.length,a=n.length,s={};++i<o;){var c=i<a?n[i]:t;r(s,e[i],c)}return s}function vi(e){return Za(e)?e:[]}function Ri(e){return"function"==typeof e?e:cc}function Ti(e,t){return Ya(e)?e:Eo(e,t)?[e]:Uo(bs(e))}var _i=Jr;function Ei(e,n,r){var i=e.length;return r=r===t?i:r,!n&&r>=i?e:ii(e,n,r)}var bi=ft||function(e){return dt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=Be?Be(n):new e.constructor(n);return e.copy(r),r}function Ci(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function Pi(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function xi(e,n){if(e!==n){var r=e!==t,i=null===e,o=e==e,a=ps(e),s=n!==t,c=null===n,u=n==n,l=ps(n);if(!c&&!l&&!a&&e>n||a&&s&&u&&!c&&!l||i&&s&&u||!r&&u||!o)return 1;if(!i&&!a&&!l&&e<n||l&&r&&o&&!i&&!a||c&&r&&o||!s&&o||!u)return-1}return 0}function wi(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,c=t.length,u=Rn(o-a,0),l=ae(c+u),f=!r;++s<c;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;u--;)l[s++]=e[i++];return l}function Ai(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,c=-1,u=t.length,l=Rn(o-s,0),f=ae(l+u),d=!r;++i<l;)f[i]=e[i];for(var p=i;++c<u;)f[p+c]=t[c];for(;++a<s;)(d||i<o)&&(f[p+n[a]]=e[i++]);return f}function Oi(e,t){var n=-1,r=e.length;for(t||(t=ae(r));++n<r;)t[n]=e[n];return t}function Ni(e,n,r,i){var o=!r;r||(r={});for(var a=-1,s=n.length;++a<s;){var c=n[a],u=i?i(r[c],e[c],c,r,e):t;u===t&&(u=e[c]),o?ar(r,c,u):nr(r,c,u)}return r}function Si(e,t){return function(n,r){var i=Ya(n)?Ct:ir,o=t?t():{};return i(n,e,uo(r,2),o)}}function Di(e){return Jr((function(n,r){var i=-1,o=r.length,a=o>1?r[o-1]:t,s=o>2?r[2]:t;for(a=e.length>3&&"function"==typeof a?(o--,a):t,s&&_o(r[0],r[1],s)&&(a=o<3?t:a,o=1),n=xe(n);++i<o;){var c=r[i];c&&e(n,c,i,a)}return n}))}function Ii(e,t){return function(n,r){if(null==n)return n;if(!Ja(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=xe(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Li(e){return function(t,n,r){for(var i=-1,o=xe(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function Mi(e){return function(n){var r=an(n=bs(n))?dn(n):t,i=r?r[0]:n.charAt(0),o=r?Ei(r,1).join(""):n.slice(1);return i[e]()+o}}function Fi(e){return function(t){return It(nc(Vs(t).replace(Je,"")),e,"")}}function qi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wn(e.prototype),r=e.apply(n,t);return os(r)?r:n}}function $i(e){return function(n,r,i){var o=xe(n);if(!Ja(n)){var a=uo(r,3);n=Ms(n),r=function(e){return a(o[e],e,o)}}var s=e(n,r,i);return s>-1?o[a?n[s]:s]:t}}function ji(e){return ro((function(r){var i=r.length,o=i,a=Gn.prototype.thru;for(e&&r.reverse();o--;){var s=r[o];if("function"!=typeof s)throw new Oe(n);if(a&&!c&&"wrapper"==so(s))var c=new Gn([],!0)}for(o=c?o:i;++o<i;){var u=so(s=r[o]),l="wrapper"==u?ao(s):t;c=l&&bo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[so(l[0])].apply(c,l[3]):1==s.length&&bo(s)?c[u]():c.thru(s)}return function(){var e=arguments,t=e[0];if(c&&1==e.length&&Ya(t))return c.plant(t).value();for(var n=0,o=i?r[n].apply(this,e):t;++n<i;)o=r[n].call(this,o);return o}}))}function Ui(e,n,r,i,o,a,s,c,u,f){var d=n&l,p=1&n,h=2&n,m=24&n,g=512&n,y=h?t:qi(e);return function t(){for(var l=arguments.length,v=ae(l),R=l;R--;)v[R]=arguments[R];if(m)var T=co(t),_=tn(v,T);if(i&&(v=wi(v,i,o,m)),a&&(v=Ai(v,a,s,m)),l-=_,m&&l<f){var E=un(v,T);return Vi(e,n,Ui,t.placeholder,r,v,E,c,u,f-l)}var b=p?r:this,k=h?b[e]:e;return l=v.length,c?v=Oo(v,c):g&&l>1&&v.reverse(),d&&u<l&&(v.length=u),this&&this!==dt&&this instanceof t&&(k=y||qi(k)),k.apply(b,v)}}function Wi(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Ki(e,n){return function(r,i){var o;if(r===t&&i===t)return n;if(r!==t&&(o=r),i!==t){if(o===t)return i;"string"==typeof r||"string"==typeof i?(r=li(r),i=li(i)):(r=ui(r),i=ui(i)),o=e(r,i)}return o}}function Gi(e){return ro((function(t){return t=St(t,Xt(uo())),Jr((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function zi(e,n){var r=(n=n===t?" ":li(n)).length;if(r<2)return r?Xr(n,e):n;var i=Xr(n,gt(e/fn(n)));return an(n)?Ei(dn(i),0,e).join(""):i.slice(0,e)}function Bi(e){return function(n,r,i){return i&&"number"!=typeof i&&_o(n,r,i)&&(r=i=t),n=vs(n),r===t?(r=n,n=0):r=vs(r),function(e,t,n,r){for(var i=-1,o=Rn(gt((t-e)/(n||1)),0),a=ae(o);o--;)a[r?o:++i]=e,e+=n;return a}(n,r,i=i===t?n<r?1:-1:vs(i),e)}}function Hi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=_s(t),n=_s(n)),e(t,n)}}function Vi(e,n,r,i,o,a,s,l,f,d){var p=8&n;n|=p?c:u,4&(n&=~(p?u:c))||(n&=-4);var h=[e,n,o,p?a:t,p?s:t,p?t:a,p?t:s,l,f,d],m=r.apply(t,h);return bo(e)&&So(m,h),m.placeholder=i,Lo(m,e,n)}function Yi(e){var t=Pe[e];return function(e,n){if(e=_s(e),(n=null==n?0:Tn(Rs(n),292))&&gn(e)){var r=(bs(e)+"e").split("e");return+((r=(bs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=wn&&1/ln(new wn([,-0]))[1]==d?function(e){return new wn(e)}:pc;function Ji(e){return function(t){var n=go(t);return n==k?sn(t):n==A?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return St(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(e,r,i,o,d,p,h,m){var g=2&r;if(!g&&"function"!=typeof e)throw new Oe(n);var y=o?o.length:0;if(y||(r&=-97,o=d=t),h=h===t?h:Rn(Rs(h),0),m=m===t?m:Rs(m),y-=d?d.length:0,r&u){var v=o,R=d;o=d=t}var T=g?t:ao(e),_=[e,r,i,o,d,v,R,p,h,m];if(T&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==l&&8==n||r==l&&n==f&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?wi(u,c,t[4]):c,e[4]=u?un(e[3],a):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ai(u,c,t[6]):c,e[6]=u?un(e[5],a):t[6]),(c=t[7])&&(e[7]=c),r&l&&(e[8]=null==e[8]?t[8]:Tn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(_,T),e=_[0],r=_[1],i=_[2],o=_[3],d=_[4],!(m=_[9]=_[9]===t?g?0:e.length:Rn(_[9]-y,0))&&24&r&&(r&=-25),r&&1!=r)E=8==r||r==s?function(e,n,r){var i=qi(e);return function o(){for(var a=arguments.length,s=ae(a),c=a,u=co(o);c--;)s[c]=arguments[c];var l=a<3&&s[0]!==u&&s[a-1]!==u?[]:un(s,u);return(a-=l.length)<r?Vi(e,n,Ui,o.placeholder,t,s,l,t,t,r-a):kt(this&&this!==dt&&this instanceof o?i:e,this,s)}}(e,r,m):r!=c&&33!=r||d.length?Ui.apply(t,_):function(e,t,n,r){var i=1&t,o=qi(e);return function t(){for(var a=-1,s=arguments.length,c=-1,u=r.length,l=ae(u+s),f=this&&this!==dt&&this instanceof t?o:e;++c<u;)l[c]=r[c];for(;s--;)l[c++]=arguments[++a];return kt(f,i?n:this,l)}}(e,r,i,o);else var E=function(e,t,n){var r=1&t,i=qi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,r,i);return Lo((T?ti:So)(E,_),e,r)}function Qi(e,n,r,i){return e===t||za(e,De[r])&&!Me.call(i,r)?n:e}function eo(e,n,r,i,o,a){return os(e)&&os(n)&&(a.set(n,e),Kr(e,n,t,eo,a),a.delete(n)),e}function to(e){return us(e)?t:e}function no(e,n,r,i,o,a){var s=1&r,c=e.length,u=n.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(e),f=a.get(n);if(l&&f)return l==n&&f==e;var d=-1,p=!0,h=2&r?new Yn:t;for(a.set(e,n),a.set(n,e);++d<c;){var m=e[d],g=n[d];if(i)var y=s?i(g,m,d,n,e,a):i(m,g,d,e,n,a);if(y!==t){if(y)continue;p=!1;break}if(h){if(!Mt(n,(function(e,t){if(!Zt(h,t)&&(m===e||o(m,e,r,i,a)))return h.push(t)}))){p=!1;break}}else if(m!==g&&!o(m,g,r,i,a)){p=!1;break}}return a.delete(e),a.delete(n),p}function ro(e){return Io(wo(e,t,Xo),e+"")}function io(e){return Cr(e,Ms,ho)}function oo(e){return Cr(e,Fs,mo)}var ao=Nn?function(e){return Nn.get(e)}:pc;function so(e){for(var t=e.name+"",n=Sn[t],r=Me.call(Sn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(Me.call(Un,"placeholder")?Un:e).placeholder}function uo(){var e=Un.iteratee||uc;return e=e===uc?Mr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fo(e){for(var t=Ms(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Po(i)]}return t}function po(e,n){var r=function(e,n){return null==e?t:e[n]}(e,n);return Lr(r)?r:t}var ho=Ft?function(e){return null==e?[]:(e=xe(e),At(Ft(e),(function(t){return Ye.call(e,t)})))}:Tc,mo=Ft?function(e){for(var t=[];e;)Dt(t,ho(e)),e=He(e);return t}:Tc,go=Pr;function yo(e,t,n){for(var r=-1,i=(t=Ti(t,e)).length,o=!1;++r<i;){var a=Wo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&is(i)&&To(a,i)&&(Ya(e)||Va(e))}function vo(e){return"function"!=typeof e.constructor||Co(e)?{}:Wn(He(e))}function Ro(e){return Ya(e)||Va(e)||!!(Qe&&e&&e[Qe])}function To(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&Re.test(e))&&e>-1&&e%1==0&&e<t}function _o(e,t,n){if(!os(n))return!1;var r=typeof t;return!!("number"==r?Ja(n)&&To(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function Eo(e,t){if(Ya(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ps(e))||te.test(e)||!ee.test(e)||null!=t&&e in xe(t)}function bo(e){var t=so(e),n=Un[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(Cn&&go(new Cn(new ArrayBuffer(1)))!=I||Pn&&go(new Pn)!=k||xn&&go(xn.resolve())!=x||wn&&go(new wn)!=A||An&&go(new An)!=S)&&(go=function(e){var n=Pr(e),r=n==P?e.constructor:t,i=r?Ko(r):"";if(i)switch(i){case Dn:return I;case In:return k;case Ln:return x;case Mn:return A;case Fn:return S}return n});var ko=Ie?ns:_c;function Co(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function Po(e){return e==e&&!os(e)}function xo(e,n){return function(r){return null!=r&&r[e]===n&&(n!==t||e in xe(r))}}function wo(e,n,r){return n=Rn(n===t?e.length-1:n,0),function(){for(var t=arguments,i=-1,o=Rn(t.length-n,0),a=ae(o);++i<o;)a[i]=t[n+i];i=-1;for(var s=ae(n+1);++i<n;)s[i]=t[i];return s[n]=r(a),kt(e,this,s)}}function Ao(e,t){return t.length<2?e:kr(e,ii(t,0,-1))}function Oo(e,n){for(var r=e.length,i=Tn(n.length,r),o=Oi(e);i--;){var a=n[i];e[i]=To(a,r)?o[a]:t}return e}function No(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var So=Mo(ti),Do=ht||function(e,t){return dt.setTimeout(e,t)},Io=Mo(ni);function Lo(e,t,n){var r=t+"";return Io(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Pt(g,(function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Mo(e){var n=0,r=0;return function(){var i=_n(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Fo(e,n){var r=-1,i=e.length,o=i-1;for(n=n===t?i:n;++r<n;){var a=Yr(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=n,e}var qo,$o,jo,Uo=(qo=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t},$o=$a(qo,(function(e){return 500===jo.size&&jo.clear(),e})),jo=$o.cache,$o);function Wo(e){if("string"==typeof e||ps(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ko(e){if(null!=e){try{return Le.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Go(e){if(e instanceof zn)return e.clone();var t=new Gn(e.__wrapped__,e.__chain__);return t.__actions__=Oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zo=Jr((function(e,t){return Za(e)?dr(e,vr(t,1,Za,!0)):[]})),Bo=Jr((function(e,n){var r=ta(n);return Za(r)&&(r=t),Za(e)?dr(e,vr(n,1,Za,!0),uo(r,2)):[]})),Ho=Jr((function(e,n){var r=ta(n);return Za(r)&&(r=t),Za(e)?dr(e,vr(n,1,Za,!0),t,r):[]}));function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Rs(n);return i<0&&(i=Rn(r+i,0)),$t(e,uo(t,3),i)}function Yo(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==t&&(o=Rs(r),o=r<0?Rn(i+o,0):Tn(o,i-1)),$t(e,uo(n,3),o,!0)}function Xo(e){return null!=e&&e.length?vr(e,1):[]}function Jo(e){return e&&e.length?e[0]:t}var Zo=Jr((function(e){var t=St(e,vi);return t.length&&t[0]===e[0]?Or(t):[]})),Qo=Jr((function(e){var n=ta(e),r=St(e,vi);return n===ta(r)?n=t:r.pop(),r.length&&r[0]===e[0]?Or(r,uo(n,2)):[]})),ea=Jr((function(e){var n=ta(e),r=St(e,vi);return(n="function"==typeof n?n:t)&&r.pop(),r.length&&r[0]===e[0]?Or(r,t,n):[]}));function ta(e){var n=null==e?0:e.length;return n?e[n-1]:t}var na=Jr(ra);function ra(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var ia=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Vr(e,St(t,(function(e){return To(e,n)?+e:e})).sort(xi)),r}));function oa(e){return null==e?e:kn.call(e)}var aa=Jr((function(e){return fi(vr(e,1,Za,!0))})),sa=Jr((function(e){var n=ta(e);return Za(n)&&(n=t),fi(vr(e,1,Za,!0),uo(n,2))})),ca=Jr((function(e){var n=ta(e);return n="function"==typeof n?n:t,fi(vr(e,1,Za,!0),t,n)}));function ua(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if(Za(e))return t=Rn(e.length,t),!0})),Vt(t,(function(t){return St(e,Gt(t))}))}function la(e,n){if(!e||!e.length)return[];var r=ua(e);return null==n?r:St(r,(function(e){return kt(n,t,e)}))}var fa=Jr((function(e,t){return Za(e)?dr(e,t):[]})),da=Jr((function(e){return gi(At(e,Za))})),pa=Jr((function(e){var n=ta(e);return Za(n)&&(n=t),gi(At(e,Za),uo(n,2))})),ha=Jr((function(e){var n=ta(e);return n="function"==typeof n?n:t,gi(At(e,Za),t,n)})),ma=Jr(ua),ga=Jr((function(e){var n=e.length,r=n>1?e[n-1]:t;return r="function"==typeof r?(e.pop(),r):t,la(e,r)}));function ya(e){var t=Un(e);return t.__chain__=!0,t}function va(e,t){return t(e)}var Ra=ro((function(e){var n=e.length,r=n?e[0]:0,i=this.__wrapped__,o=function(t){return sr(t,e)};return!(n>1||this.__actions__.length)&&i instanceof zn&&To(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:va,args:[o],thisArg:t}),new Gn(i,this.__chain__).thru((function(e){return n&&!e.length&&e.push(t),e}))):this.thru(o)})),Ta=Si((function(e,t,n){Me.call(e,n)?++e[n]:ar(e,n,1)})),_a=$i(Vo),Ea=$i(Yo);function ba(e,t){return(Ya(e)?Pt:pr)(e,uo(t,3))}function ka(e,t){return(Ya(e)?xt:hr)(e,uo(t,3))}var Ca=Si((function(e,t,n){Me.call(e,n)?e[n].push(t):ar(e,n,[t])})),Pa=Jr((function(e,t,n){var r=-1,i="function"==typeof t,o=Ja(e)?ae(e.length):[];return pr(e,(function(e){o[++r]=i?kt(t,e,n):Nr(e,t,n)})),o})),xa=Si((function(e,t,n){ar(e,n,t)}));function wa(e,t){return(Ya(e)?St:jr)(e,uo(t,3))}var Aa=Si((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Oa=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_o(e,t[0],t[1])?t=[]:n>2&&_o(t[0],t[1],t[2])&&(t=[t[0]]),zr(e,vr(t,1),[])})),Na=pt||function(){return dt.Date.now()};function Sa(e,n,r){return n=r?t:n,n=e&&null==n?e.length:n,Zi(e,l,t,t,t,t,n)}function Da(e,r){var i;if("function"!=typeof r)throw new Oe(n);return e=Rs(e),function(){return--e>0&&(i=r.apply(this,arguments)),e<=1&&(r=t),i}}var Ia=Jr((function(e,t,n){var r=1;if(n.length){var i=un(n,co(Ia));r|=c}return Zi(e,r,t,n,i)})),La=Jr((function(e,t,n){var r=3;if(n.length){var i=un(n,co(La));r|=c}return Zi(t,r,e,n,i)}));function Ma(e,r,i){var o,a,s,c,u,l,f=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw new Oe(n);function m(n){var r=o,i=a;return o=a=t,f=n,c=e.apply(i,r)}function g(e){return f=e,u=Do(v,r),d?m(e):c}function y(e){var n=e-l;return l===t||n>=r||n<0||p&&e-f>=s}function v(){var e=Na();if(y(e))return R(e);u=Do(v,function(e){var t=r-(e-l);return p?Tn(t,s-(e-f)):t}(e))}function R(e){return u=t,h&&o?m(e):(o=a=t,c)}function T(){var e=Na(),n=y(e);if(o=arguments,a=this,l=e,n){if(u===t)return g(l);if(p)return bi(u),u=Do(v,r),m(l)}return u===t&&(u=Do(v,r)),c}return r=_s(r)||0,os(i)&&(d=!!i.leading,s=(p="maxWait"in i)?Rn(_s(i.maxWait)||0,r):s,h="trailing"in i?!!i.trailing:h),T.cancel=function(){u!==t&&bi(u),f=0,o=l=a=u=t},T.flush=function(){return u===t?c:R(Na())},T}var Fa=Jr((function(e,t){return fr(e,1,t)})),qa=Jr((function(e,t,n){return fr(e,_s(t)||0,n)}));function $a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new($a.Cache||Vn),r}function ja(e){if("function"!=typeof e)throw new Oe(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}$a.Cache=Vn;var Ua=_i((function(e,t){var n=(t=1==t.length&&Ya(t[0])?St(t[0],Xt(uo())):St(vr(t,1),Xt(uo()))).length;return Jr((function(r){for(var i=-1,o=Tn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),Wa=Jr((function(e,n){var r=un(n,co(Wa));return Zi(e,c,t,n,r)})),Ka=Jr((function(e,n){var r=un(n,co(Ka));return Zi(e,u,t,n,r)})),Ga=ro((function(e,n){return Zi(e,f,t,t,t,n)}));function za(e,t){return e===t||e!=e&&t!=t}var Ba=Hi(xr),Ha=Hi((function(e,t){return e>=t})),Va=Sr(function(){return arguments}())?Sr:function(e){return as(e)&&Me.call(e,"callee")&&!Ye.call(e,"callee")},Ya=ae.isArray,Xa=vt?Xt(vt):function(e){return as(e)&&Pr(e)==D};function Ja(e){return null!=e&&is(e.length)&&!ns(e)}function Za(e){return as(e)&&Ja(e)}var Qa=zt||_c,es=Rt?Xt(Rt):function(e){return as(e)&&Pr(e)==T};function ts(e){if(!as(e))return!1;var t=Pr(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!us(e)}function ns(e){if(!os(e))return!1;var t=Pr(e);return t==E||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function rs(e){return"number"==typeof e&&e==Rs(e)}function is(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function os(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function as(e){return null!=e&&"object"==typeof e}var ss=Tt?Xt(Tt):function(e){return as(e)&&go(e)==k};function cs(e){return"number"==typeof e||as(e)&&Pr(e)==C}function us(e){if(!as(e)||Pr(e)!=P)return!1;var t=He(e);if(null===t)return!0;var n=Me.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Le.call(n)==je}var ls=_t?Xt(_t):function(e){return as(e)&&Pr(e)==w},fs=Et?Xt(Et):function(e){return as(e)&&go(e)==A};function ds(e){return"string"==typeof e||!Ya(e)&&as(e)&&Pr(e)==O}function ps(e){return"symbol"==typeof e||as(e)&&Pr(e)==N}var hs=bt?Xt(bt):function(e){return as(e)&&is(e.length)&&!!ot[Pr(e)]},ms=Hi($r),gs=Hi((function(e,t){return e<=t}));function ys(e){if(!e)return[];if(Ja(e))return ds(e)?dn(e):Oi(e);if(tt&&e[tt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[tt]());var t=go(e);return(t==k?sn:t==A?ln:zs)(e)}function vs(e){return e?(e=_s(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Rs(e){var t=vs(e),n=t%1;return t==t?n?t-n:t:0}function Ts(e){return e?cr(Rs(e),0,m):0}function _s(e){if("number"==typeof e)return e;if(ps(e))return h;if(os(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=os(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var n=ge.test(e);return n||ve.test(e)?ut(e.slice(2),n?2:8):me.test(e)?h:+e}function Es(e){return Ni(e,Fs(e))}function bs(e){return null==e?"":li(e)}var ks=Di((function(e,t){if(Co(t)||Ja(t))Ni(t,Ms(t),e);else for(var n in t)Me.call(t,n)&&nr(e,n,t[n])})),Cs=Di((function(e,t){Ni(t,Fs(t),e)})),Ps=Di((function(e,t,n,r){Ni(t,Fs(t),e,r)})),xs=Di((function(e,t,n,r){Ni(t,Ms(t),e,r)})),ws=ro(sr),As=Jr((function(e,n){e=xe(e);var r=-1,i=n.length,o=i>2?n[2]:t;for(o&&_o(n[0],n[1],o)&&(i=1);++r<i;)for(var a=n[r],s=Fs(a),c=-1,u=s.length;++c<u;){var l=s[c],f=e[l];(f===t||za(f,De[l])&&!Me.call(e,l))&&(e[l]=a[l])}return e})),Os=Jr((function(e){return e.push(t,eo),kt($s,t,e)}));function Ns(e,n,r){var i=null==e?t:kr(e,n);return i===t?r:i}function Ss(e,t){return null!=e&&yo(e,t,Ar)}var Ds=Wi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=$e.call(t)),e[t]=n}),oc(cc)),Is=Wi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=$e.call(t)),Me.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Ls=Jr(Nr);function Ms(e){return Ja(e)?Jn(e):Fr(e)}function Fs(e){return Ja(e)?Jn(e,!0):qr(e)}var qs=Di((function(e,t,n){Kr(e,t,n)})),$s=Di((function(e,t,n,r){Kr(e,t,n,r)})),js=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=St(t,(function(t){return t=Ti(t,e),r||(r=t.length>1),t})),Ni(e,oo(e),n),r&&(n=ur(n,7,to));for(var i=t.length;i--;)di(n,t[i]);return n})),Us=ro((function(e,t){return null==e?{}:function(e,t){return Br(e,t,(function(t,n){return Ss(e,n)}))}(e,t)}));function Ws(e,t){if(null==e)return{};var n=St(oo(e),(function(e){return[e]}));return t=uo(t),Br(e,n,(function(e,n){return t(e,n[0])}))}var Ks=Ji(Ms),Gs=Ji(Fs);function zs(e){return null==e?[]:Jt(e,Ms(e))}var Bs=Fi((function(e,t,n){return t=t.toLowerCase(),e+(n?Hs(t):t)}));function Hs(e){return tc(bs(e).toLowerCase())}function Vs(e){return(e=bs(e))&&e.replace(Te,nn).replace(Ze,"")}var Ys=Fi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Xs=Fi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Js=Mi("toLowerCase"),Zs=Fi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Qs=Fi((function(e,t,n){return e+(n?" ":"")+tc(t)})),ec=Fi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),tc=Mi("toUpperCase");function nc(e,n,r){return e=bs(e),(n=r?t:n)===t?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(n)||[]}var rc=Jr((function(e,n){try{return kt(e,t,n)}catch(r){return ts(r)?r:new ke(r)}})),ic=ro((function(e,t){return Pt(t,(function(t){t=Wo(t),ar(e,t,Ia(e[t],e))})),e}));function oc(e){return function(){return e}}var ac=ji(),sc=ji(!0);function cc(e){return e}function uc(e){return Mr("function"==typeof e?e:ur(e,1))}var lc=Jr((function(e,t){return function(n){return Nr(n,e,t)}})),fc=Jr((function(e,t){return function(n){return Nr(e,n,t)}}));function dc(e,t,n){var r=Ms(t),i=br(t,r);null!=n||os(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=br(t,Ms(t)));var o=!(os(n)&&"chain"in n&&!n.chain),a=ns(e);return Pt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Oi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function pc(){}var hc=Gi(St),mc=Gi(wt),gc=Gi(Mt);function yc(e){return Eo(e)?Gt(Wo(e)):function(e){return function(t){return kr(t,e)}}(e)}var vc=Bi(),Rc=Bi(!0);function Tc(){return[]}function _c(){return!1}var Ec,bc=Ki((function(e,t){return e+t}),0),kc=Yi("ceil"),Cc=Ki((function(e,t){return e/t}),1),Pc=Yi("floor"),xc=Ki((function(e,t){return e*t}),1),wc=Yi("round"),Ac=Ki((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Oe(n);return e=Rs(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Sa,Un.assign=ks,Un.assignIn=Cs,Un.assignInWith=Ps,Un.assignWith=xs,Un.at=ws,Un.before=Da,Un.bind=Ia,Un.bindAll=ic,Un.bindKey=La,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ya(e)?e:[e]},Un.chain=ya,Un.chunk=function(e,n,r){n=(r?_o(e,n,r):n===t)?1:Rn(Rs(n),0);var i=null==e?0:e.length;if(!i||n<1)return[];for(var o=0,a=0,s=ae(gt(i/n));o<i;)s[a++]=ii(e,o,o+=n);return s},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ae(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Dt(Ya(n)?Oi(n):[n],vr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,r=uo();return e=t?St(e,(function(e){if("function"!=typeof e[1])throw new Oe(n);return[r(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Ms(e);return function(n){return lr(n,e,t)}}(ur(e,1))},Un.constant=oc,Un.countBy=Ta,Un.create=function(e,t){var n=Wn(e);return null==t?n:or(n,t)},Un.curry=function e(n,r,i){var o=Zi(n,8,t,t,t,t,t,r=i?t:r);return o.placeholder=e.placeholder,o},Un.curryRight=function e(n,r,i){var o=Zi(n,s,t,t,t,t,t,r=i?t:r);return o.placeholder=e.placeholder,o},Un.debounce=Ma,Un.defaults=As,Un.defaultsDeep=Os,Un.defer=Fa,Un.delay=qa,Un.difference=zo,Un.differenceBy=Bo,Un.differenceWith=Ho,Un.drop=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,(n=r||n===t?1:Rs(n))<0?0:n,i):[]},Un.dropRight=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,0,(n=i-(n=r||n===t?1:Rs(n)))<0?0:n):[]},Un.dropRightWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!0):[]},Un.fill=function(e,n,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&_o(e,n,r)&&(r=0,i=o),function(e,n,r,i){var o=e.length;for((r=Rs(r))<0&&(r=-r>o?0:o+r),(i=i===t||i>o?o:Rs(i))<0&&(i+=o),i=r>i?0:Ts(i);r<i;)e[r++]=n;return e}(e,n,r,i)):[]},Un.filter=function(e,t){return(Ya(e)?At:yr)(e,uo(t,3))},Un.flatMap=function(e,t){return vr(wa(e,t),1)},Un.flatMapDeep=function(e,t){return vr(wa(e,t),d)},Un.flatMapDepth=function(e,n,r){return r=r===t?1:Rs(r),vr(wa(e,n),r)},Un.flatten=Xo,Un.flattenDeep=function(e){return null!=e&&e.length?vr(e,d):[]},Un.flattenDepth=function(e,n){return null!=e&&e.length?vr(e,n=n===t?1:Rs(n)):[]},Un.flip=function(e){return Zi(e,512)},Un.flow=ac,Un.flowRight=sc,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:br(e,Ms(e))},Un.functionsIn=function(e){return null==e?[]:br(e,Fs(e))},Un.groupBy=Ca,Un.initial=function(e){return null!=e&&e.length?ii(e,0,-1):[]},Un.intersection=Zo,Un.intersectionBy=Qo,Un.intersectionWith=ea,Un.invert=Ds,Un.invertBy=Is,Un.invokeMap=Pa,Un.iteratee=uc,Un.keyBy=xa,Un.keys=Ms,Un.keysIn=Fs,Un.map=wa,Un.mapKeys=function(e,t){var n={};return t=uo(t,3),_r(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=uo(t,3),_r(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Un.matches=function(e){return Ur(ur(e,1))},Un.matchesProperty=function(e,t){return Wr(e,ur(t,1))},Un.memoize=$a,Un.merge=qs,Un.mergeWith=$s,Un.method=lc,Un.methodOf=fc,Un.mixin=dc,Un.negate=ja,Un.nthArg=function(e){return e=Rs(e),Jr((function(t){return Gr(t,e)}))},Un.omit=js,Un.omitBy=function(e,t){return Ws(e,ja(uo(t)))},Un.once=function(e){return Da(2,e)},Un.orderBy=function(e,n,r,i){return null==e?[]:(Ya(n)||(n=null==n?[]:[n]),Ya(r=i?t:r)||(r=null==r?[]:[r]),zr(e,n,r))},Un.over=hc,Un.overArgs=Ua,Un.overEvery=mc,Un.overSome=gc,Un.partial=Wa,Un.partialRight=Ka,Un.partition=Aa,Un.pick=Us,Un.pickBy=Ws,Un.property=yc,Un.propertyOf=function(e){return function(n){return null==e?t:kr(e,n)}},Un.pull=na,Un.pullAll=ra,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,uo(n,2)):e},Un.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?Hr(e,n,t,r):e},Un.pullAt=ia,Un.range=vc,Un.rangeRight=Rc,Un.rearg=Ga,Un.reject=function(e,t){return(Ya(e)?At:yr)(e,ja(uo(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Vr(e,i),n},Un.rest=function(e,r){if("function"!=typeof e)throw new Oe(n);return Jr(e,r=r===t?r:Rs(r))},Un.reverse=oa,Un.sampleSize=function(e,n,r){return n=(r?_o(e,n,r):n===t)?1:Rs(n),(Ya(e)?Qn:Qr)(e,n)},Un.set=function(e,t,n){return null==e?e:ei(e,t,n)},Un.setWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:ei(e,n,r,i)},Un.shuffle=function(e){return(Ya(e)?er:ri)(e)},Un.slice=function(e,n,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&_o(e,n,r)?(n=0,r=i):(n=null==n?0:Rs(n),r=r===t?i:Rs(r)),ii(e,n,r)):[]},Un.sortBy=Oa,Un.sortedUniq=function(e){return e&&e.length?ci(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?ci(e,uo(t,2)):[]},Un.split=function(e,n,r){return r&&"number"!=typeof r&&_o(e,n,r)&&(n=r=t),(r=r===t?m:r>>>0)?(e=bs(e))&&("string"==typeof n||null!=n&&!ls(n))&&!(n=li(n))&&an(e)?Ei(dn(e),0,r):e.split(n,r):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Oe(n);return t=null==t?0:Rn(Rs(t),0),Jr((function(n){var r=n[t],i=Ei(n,0,t);return r&&Dt(i,r),kt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Un.take=function(e,n,r){return e&&e.length?ii(e,0,(n=r||n===t?1:Rs(n))<0?0:n):[]},Un.takeRight=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,(n=i-(n=r||n===t?1:Rs(n)))<0?0:n,i):[]},Un.takeRightWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?hi(e,uo(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new Oe(n);return os(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Ma(e,t,{leading:i,maxWait:t,trailing:o})},Un.thru=va,Un.toArray=ys,Un.toPairs=Ks,Un.toPairsIn=Gs,Un.toPath=function(e){return Ya(e)?St(e,Wo):ps(e)?[e]:Oi(Uo(bs(e)))},Un.toPlainObject=Es,Un.transform=function(e,t,n){var r=Ya(e),i=r||Qa(e)||hs(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:os(e)&&ns(o)?Wn(He(e)):{}}return(i?Pt:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return Sa(e,1)},Un.union=aa,Un.unionBy=sa,Un.unionWith=ca,Un.uniq=function(e){return e&&e.length?fi(e):[]},Un.uniqBy=function(e,t){return e&&e.length?fi(e,uo(t,2)):[]},Un.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?fi(e,t,n):[]},Un.unset=function(e,t){return null==e||di(e,t)},Un.unzip=ua,Un.unzipWith=la,Un.update=function(e,t,n){return null==e?e:pi(e,t,Ri(n))},Un.updateWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:pi(e,n,Ri(r),i)},Un.values=zs,Un.valuesIn=function(e){return null==e?[]:Jt(e,Fs(e))},Un.without=fa,Un.words=nc,Un.wrap=function(e,t){return Wa(Ri(t),e)},Un.xor=da,Un.xorBy=pa,Un.xorWith=ha,Un.zip=ma,Un.zipObject=function(e,t){return yi(e||[],t||[],nr)},Un.zipObjectDeep=function(e,t){return yi(e||[],t||[],ei)},Un.zipWith=ga,Un.entries=Ks,Un.entriesIn=Gs,Un.extend=Cs,Un.extendWith=Ps,dc(Un,Un),Un.add=bc,Un.attempt=rc,Un.camelCase=Bs,Un.capitalize=Hs,Un.ceil=kc,Un.clamp=function(e,n,r){return r===t&&(r=n,n=t),r!==t&&(r=(r=_s(r))==r?r:0),n!==t&&(n=(n=_s(n))==n?n:0),cr(_s(e),n,r)},Un.clone=function(e){return ur(e,4)},Un.cloneDeep=function(e){return ur(e,5)},Un.cloneDeepWith=function(e,n){return ur(e,5,n="function"==typeof n?n:t)},Un.cloneWith=function(e,n){return ur(e,4,n="function"==typeof n?n:t)},Un.conformsTo=function(e,t){return null==t||lr(e,t,Ms(t))},Un.deburr=Vs,Un.defaultTo=function(e,t){return null==e||e!=e?t:e},Un.divide=Cc,Un.endsWith=function(e,n,r){e=bs(e),n=li(n);var i=e.length,o=r=r===t?i:cr(Rs(r),0,i);return(r-=n.length)>=0&&e.slice(r,o)==n},Un.eq=za,Un.escape=function(e){return(e=bs(e))&&X.test(e)?e.replace(V,rn):e},Un.escapeRegExp=function(e){return(e=bs(e))&&ie.test(e)?e.replace(re,"\\$&"):e},Un.every=function(e,n,r){var i=Ya(e)?wt:mr;return r&&_o(e,n,r)&&(n=t),i(e,uo(n,3))},Un.find=_a,Un.findIndex=Vo,Un.findKey=function(e,t){return qt(e,uo(t,3),_r)},Un.findLast=Ea,Un.findLastIndex=Yo,Un.findLastKey=function(e,t){return qt(e,uo(t,3),Er)},Un.floor=Pc,Un.forEach=ba,Un.forEachRight=ka,Un.forIn=function(e,t){return null==e?e:Rr(e,uo(t,3),Fs)},Un.forInRight=function(e,t){return null==e?e:Tr(e,uo(t,3),Fs)},Un.forOwn=function(e,t){return e&&_r(e,uo(t,3))},Un.forOwnRight=function(e,t){return e&&Er(e,uo(t,3))},Un.get=Ns,Un.gt=Ba,Un.gte=Ha,Un.has=function(e,t){return null!=e&&yo(e,t,wr)},Un.hasIn=Ss,Un.head=Jo,Un.identity=cc,Un.includes=function(e,t,n,r){e=Ja(e)?e:zs(e),n=n&&!r?Rs(n):0;var i=e.length;return n<0&&(n=Rn(i+n,0)),ds(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&jt(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Rs(n);return i<0&&(i=Rn(r+i,0)),jt(e,t,i)},Un.inRange=function(e,n,r){return n=vs(n),r===t?(r=n,n=0):r=vs(r),function(e,t,n){return e>=Tn(t,n)&&e<Rn(t,n)}(e=_s(e),n,r)},Un.invoke=Ls,Un.isArguments=Va,Un.isArray=Ya,Un.isArrayBuffer=Xa,Un.isArrayLike=Ja,Un.isArrayLikeObject=Za,Un.isBoolean=function(e){return!0===e||!1===e||as(e)&&Pr(e)==R},Un.isBuffer=Qa,Un.isDate=es,Un.isElement=function(e){return as(e)&&1===e.nodeType&&!us(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Ja(e)&&(Ya(e)||"string"==typeof e||"function"==typeof e.splice||Qa(e)||hs(e)||Va(e)))return!e.length;var t=go(e);if(t==k||t==A)return!e.size;if(Co(e))return!Fr(e).length;for(var n in e)if(Me.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Dr(e,t)},Un.isEqualWith=function(e,n,r){var i=(r="function"==typeof r?r:t)?r(e,n):t;return i===t?Dr(e,n,t,r):!!i},Un.isError=ts,Un.isFinite=function(e){return"number"==typeof e&&gn(e)},Un.isFunction=ns,Un.isInteger=rs,Un.isLength=is,Un.isMap=ss,Un.isMatch=function(e,t){return e===t||Ir(e,t,fo(t))},Un.isMatchWith=function(e,n,r){return r="function"==typeof r?r:t,Ir(e,n,fo(n),r)},Un.isNaN=function(e){return cs(e)&&e!=+e},Un.isNative=function(e){if(ko(e))throw new ke("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=cs,Un.isObject=os,Un.isObjectLike=as,Un.isPlainObject=us,Un.isRegExp=ls,Un.isSafeInteger=function(e){return rs(e)&&e>=-9007199254740991&&e<=p},Un.isSet=fs,Un.isString=ds,Un.isSymbol=ps,Un.isTypedArray=hs,Un.isUndefined=function(e){return e===t},Un.isWeakMap=function(e){return as(e)&&go(e)==S},Un.isWeakSet=function(e){return as(e)&&"[object WeakSet]"==Pr(e)},Un.join=function(e,t){return null==e?"":yn.call(e,t)},Un.kebabCase=Ys,Un.last=ta,Un.lastIndexOf=function(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==t&&(o=(o=Rs(r))<0?Rn(i+o,0):Tn(o,i-1)),n==n?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,n,o):$t(e,Wt,o,!0)},Un.lowerCase=Xs,Un.lowerFirst=Js,Un.lt=ms,Un.lte=gs,Un.max=function(e){return e&&e.length?gr(e,cc,xr):t},Un.maxBy=function(e,n){return e&&e.length?gr(e,uo(n,2),xr):t},Un.mean=function(e){return Kt(e,cc)},Un.meanBy=function(e,t){return Kt(e,uo(t,2))},Un.min=function(e){return e&&e.length?gr(e,cc,$r):t},Un.minBy=function(e,n){return e&&e.length?gr(e,uo(n,2),$r):t},Un.stubArray=Tc,Un.stubFalse=_c,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=xc,Un.nth=function(e,n){return e&&e.length?Gr(e,Rs(n)):t},Un.noConflict=function(){return dt._===this&&(dt._=Ue),this},Un.noop=pc,Un.now=Na,Un.pad=function(e,t,n){e=bs(e);var r=(t=Rs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return zi(yt(i),n)+e+zi(gt(i),n)},Un.padEnd=function(e,t,n){e=bs(e);var r=(t=Rs(t))?fn(e):0;return t&&r<t?e+zi(t-r,n):e},Un.padStart=function(e,t,n){e=bs(e);var r=(t=Rs(t))?fn(e):0;return t&&r<t?zi(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),En(bs(e).replace(oe,""),t||0)},Un.random=function(e,n,r){if(r&&"boolean"!=typeof r&&_o(e,n,r)&&(n=r=t),r===t&&("boolean"==typeof n?(r=n,n=t):"boolean"==typeof e&&(r=e,e=t)),e===t&&n===t?(e=0,n=1):(e=vs(e),n===t?(n=e,e=0):n=vs(n)),e>n){var i=e;e=n,n=i}if(r||e%1||n%1){var o=bn();return Tn(e+o*(n-e+ct("1e-"+((o+"").length-1))),n)}return Yr(e,n)},Un.reduce=function(e,t,n){var r=Ya(e)?It:Bt,i=arguments.length<3;return r(e,uo(t,4),n,i,pr)},Un.reduceRight=function(e,t,n){var r=Ya(e)?Lt:Bt,i=arguments.length<3;return r(e,uo(t,4),n,i,hr)},Un.repeat=function(e,n,r){return n=(r?_o(e,n,r):n===t)?1:Rs(n),Xr(bs(e),n)},Un.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,n,r){var i=-1,o=(n=Ti(n,e)).length;for(o||(o=1,e=t);++i<o;){var a=null==e?t:e[Wo(n[i])];a===t&&(i=o,a=r),e=ns(a)?a.call(e):a}return e},Un.round=wc,Un.runInContext=e,Un.sample=function(e){return(Ya(e)?Zn:Zr)(e)},Un.size=function(e){if(null==e)return 0;if(Ja(e))return ds(e)?fn(e):e.length;var t=go(e);return t==k||t==A?e.size:Fr(e).length},Un.snakeCase=Zs,Un.some=function(e,n,r){var i=Ya(e)?Mt:oi;return r&&_o(e,n,r)&&(n=t),i(e,uo(n,3))},Un.sortedIndex=function(e,t){return ai(e,t)},Un.sortedIndexBy=function(e,t,n){return si(e,t,uo(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&za(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return ai(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return si(e,t,uo(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ai(e,t,!0)-1;if(za(e[n],t))return n}return-1},Un.startCase=Qs,Un.startsWith=function(e,t,n){return e=bs(e),n=null==n?0:cr(Rs(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},Un.subtract=Ac,Un.sum=function(e){return e&&e.length?Ht(e,cc):0},Un.sumBy=function(e,t){return e&&e.length?Ht(e,uo(t,2)):0},Un.template=function(e,n,r){var i=Un.templateSettings;r&&_o(e,n,r)&&(n=t),e=bs(e),n=Ps({},n,i,Qi);var o,a,s=Ps({},n.imports,i.imports,Qi),c=Ms(s),u=Jt(s,c),l=0,f=n.interpolate||_e,d="__p += '",p=we((n.escape||_e).source+"|"+f.source+"|"+(f===Q?pe:_e).source+"|"+(n.evaluate||_e).source+"|$","g"),h="//# sourceURL="+(Me.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,n,r,i,s,c){return r||(r=i),d+=e.slice(l,c).replace(Ee,on),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var m=Me.call(n,"variable")&&n.variable;if(m){if(fe.test(m))throw new ke("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(G,""):d).replace(z,"$1").replace(B,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=rc((function(){return Ce(c,h+"return "+d).apply(t,u)}));if(g.source=d,ts(g))throw g;return g},Un.times=function(e,t){if((e=Rs(e))<1||e>p)return[];var n=m,r=Tn(e,m);t=uo(t),e-=m;for(var i=Vt(r,t);++n<e;)t(n);return i},Un.toFinite=vs,Un.toInteger=Rs,Un.toLength=Ts,Un.toLower=function(e){return bs(e).toLowerCase()},Un.toNumber=_s,Un.toSafeInteger=function(e){return e?cr(Rs(e),-9007199254740991,p):0===e?e:0},Un.toString=bs,Un.toUpper=function(e){return bs(e).toUpperCase()},Un.trim=function(e,n,r){if((e=bs(e))&&(r||n===t))return Yt(e);if(!e||!(n=li(n)))return e;var i=dn(e),o=dn(n);return Ei(i,Qt(i,o),en(i,o)+1).join("")},Un.trimEnd=function(e,n,r){if((e=bs(e))&&(r||n===t))return e.slice(0,pn(e)+1);if(!e||!(n=li(n)))return e;var i=dn(e);return Ei(i,0,en(i,dn(n))+1).join("")},Un.trimStart=function(e,n,r){if((e=bs(e))&&(r||n===t))return e.replace(oe,"");if(!e||!(n=li(n)))return e;var i=dn(e);return Ei(i,Qt(i,dn(n))).join("")},Un.truncate=function(e,n){var r=30,i="...";if(os(n)){var o="separator"in n?n.separator:o;r="length"in n?Rs(n.length):r,i="omission"in n?li(n.omission):i}var a=(e=bs(e)).length;if(an(e)){var s=dn(e);a=s.length}if(r>=a)return e;var c=r-fn(i);if(c<1)return i;var u=s?Ei(s,0,c).join(""):e.slice(0,c);if(o===t)return u+i;if(s&&(c+=u.length-c),ls(o)){if(e.slice(c).search(o)){var l,f=u;for(o.global||(o=we(o.source,bs(he.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var d=l.index;u=u.slice(0,d===t?c:d)}}else if(e.indexOf(li(o),c)!=c){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+i},Un.unescape=function(e){return(e=bs(e))&&Y.test(e)?e.replace(H,hn):e},Un.uniqueId=function(e){var t=++Fe;return bs(e)+t},Un.upperCase=ec,Un.upperFirst=tc,Un.each=ba,Un.eachRight=ka,Un.first=Jo,dc(Un,(Ec={},_r(Un,(function(e,t){Me.call(Un.prototype,t)||(Ec[t]=e)})),Ec),{chain:!1}),Un.VERSION="4.17.21",Pt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),Pt(["drop","take"],(function(e,n){zn.prototype[e]=function(r){r=r===t?1:Rn(Rs(r),0);var i=this.__filtered__&&!n?new zn(this):this.clone();return i.__filtered__?i.__takeCount__=Tn(r,i.__takeCount__):i.__views__.push({size:Tn(r,m),type:e+(i.__dir__<0?"Right":"")}),i},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Pt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Pt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),Pt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(cc)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Nr(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(ja(uo(e)))},zn.prototype.slice=function(e,n){e=Rs(e);var r=this;return r.__filtered__&&(e>0||n<0)?new zn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(n=Rs(n))<0?r.dropRight(-n):r.take(n-e)),r)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(m)},_r(zn.prototype,(function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),o=Un[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);o&&(Un.prototype[n]=function(){var n=this.__wrapped__,s=i?[1]:arguments,c=n instanceof zn,u=s[0],l=c||Ya(n),f=function(e){var t=o.apply(Un,Dt([e],s));return i&&d?t[0]:t};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,p=!!this.__actions__.length,h=a&&!d,m=c&&!p;if(!a&&l){n=m?n:new zn(this);var g=e.apply(n,s);return g.__actions__.push({func:va,args:[f],thisArg:t}),new Gn(g,d)}return h&&m?e.apply(this,s):(g=this.thru(f),h?i?g.value()[0]:g.value():g)})})),Pt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ne[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ya(i)?i:[],e)}return this[n]((function(n){return t.apply(Ya(n)?n:[],e)}))}})),_r(zn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Me.call(Sn,r)||(Sn[r]=[]),Sn[r].push({name:t,func:n})}})),Sn[Ui(t,2).name]=[{name:"wrapper",func:t}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oi(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ya(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Tn(t,e+a);break;case"takeRight":e=Rn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,p=Tn(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return mi(e,this.__actions__);var h=[];e:for(;c--&&d<p;){for(var m=-1,g=e[u+=t];++m<f;){var y=l[m],v=y.iteratee,R=y.type,T=v(g);if(2==R)g=T;else if(!T){if(1==R)continue e;break e}}h[d++]=g}return h},Un.prototype.at=Ra,Un.prototype.chain=function(){return ya(this)},Un.prototype.commit=function(){return new Gn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===t&&(this.__values__=ys(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var n,r=this;r instanceof Kn;){var i=Go(r);i.__index__=0,i.__values__=t,n?o.__wrapped__=i:n=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,n},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var n=e;return this.__actions__.length&&(n=new zn(this)),(n=n.reverse()).__actions__.push({func:va,args:[oa],thisArg:t}),new Gn(n,this.__chain__)}return this.thru(oa)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,tt&&(Un.prototype[tt]=function(){return this}),Un}();ht?((ht.exports=mn)._=mn,pt._=mn):dt._=mn}.call(e);var a={},s={},c={},u={};let l;function f(){if(void 0===l)throw new Error("No runtime abstraction layer installed");return l}Object.defineProperty(u,"__esModule",{value:!0}),(f||(f={})).install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");l=e},u.default=f;var d={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0,(e.Disposable||(e.Disposable={})).create=function(e){return{dispose:e}}}(d);var p={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=u;!function(e){const t={dispose(){}};e.None=function(){return t}}(e.Event||(e.Event={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,s=r.length;a<s;a++)try{n.push(r[a].apply(i[a],e))}catch(o){t.default().console.error(o)}return n}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const o={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),o.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}e.Emitter=r,r._noop=function(){}}(p);var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.AbstractMessageBuffer=void 0;h.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=i.byteLength,t++}if(4!==e)return;const i=this._read(r+n),o=new Map,a=this.toString(i,"ascii").split("\r\n");if(a.length<2)return o;for(let s=0;s<a.length-2;s++){const e=a[s],t=e.indexOf(":");if(-1===t)throw new Error("Message header must separate key and value using :");const n=e.substr(0,t),r=e.substr(t+1).trim();o.set(n,r)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}},Object.defineProperty(c,"__esModule",{value:!0});const m=u,g=d,y=p,v=h;class R extends v.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return R.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}R.emptyBuffer=new Uint8Array(0);class T{constructor(e){this.socket=e,this._onData=new y.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),g.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),g.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),g.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class _{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),g.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),g.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),g.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const E=new TextEncoder,b=Object.freeze({messageBuffer:Object.freeze({create:e=>new R(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${t.charset}`);return Promise.resolve(E.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new T(e),asWritableStream:e=>new _(e)}),console:console,timer:Object.freeze({setTimeout:(e,t,...n)=>setTimeout(e,t,...n),clearTimeout(e){clearTimeout(e)},setImmediate:(e,...t)=>setTimeout(e,0,...t),clearImmediate(e){clearTimeout(e)}})});function k(){return b}(k||(k={})).install=function(){m.default.install(b)},c.default=k;var C={},P={},x={};function w(e){return"string"==typeof e||e instanceof String}function A(e){return Array.isArray(e)}Object.defineProperty(x,"__esModule",{value:!0}),x.stringArray=x.array=x.func=x.error=x.number=x.string=x.boolean=void 0,x.boolean=function(e){return!0===e||!1===e},x.string=w,x.number=function(e){return"number"==typeof e||e instanceof Number},x.error=function(e){return e instanceof Error},x.func=function(e){return"function"==typeof e},x.array=A,x.stringArray=function(e){return A(e)&&e.every((e=>w(e)))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isResponseMessage=e.isNotificationMessage=e.isRequestMessage=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=x;var n,r;(r=n=e.ErrorCodes||(e.ErrorCodes={})).ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.jsonrpcReservedErrorRangeStart=-32099,r.serverErrorStart=r.jsonrpcReservedErrorRangeStart,r.MessageWriteError=-32099,r.MessageReadError=-32098,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.jsonrpcReservedErrorRangeEnd=-32e3,r.serverErrorEnd=r.jsonrpcReservedErrorRangeEnd;class i extends Error{constructor(e,r,o){super(r),this.code=t.number(e)?e:n.UnknownErrorCode,this.data=o,Object.setPrototypeOf(this,i.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}e.ResponseError=i;class o{constructor(e){this.kind=e}static is(e){return e===o.auto||e===o.byName||e===o.byPosition}toString(){return this.kind}}e.ParameterStructures=o,o.auto=new o("auto"),o.byPosition=new o("byPosition"),o.byName=new o("byName");class a{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return o.auto}}e.AbstractMessageSignature=a;e.RequestType0=class extends a{constructor(e){super(e,0)}};e.RequestType=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.RequestType1=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.RequestType2=class extends a{constructor(e){super(e,2)}};e.RequestType3=class extends a{constructor(e){super(e,3)}};e.RequestType4=class extends a{constructor(e){super(e,4)}};e.RequestType5=class extends a{constructor(e){super(e,5)}};e.RequestType6=class extends a{constructor(e){super(e,6)}};e.RequestType7=class extends a{constructor(e){super(e,7)}};e.RequestType8=class extends a{constructor(e){super(e,8)}};e.RequestType9=class extends a{constructor(e){super(e,9)}};e.NotificationType=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.NotificationType0=class extends a{constructor(e){super(e,0)}};e.NotificationType1=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.NotificationType2=class extends a{constructor(e){super(e,2)}};e.NotificationType3=class extends a{constructor(e){super(e,3)}};e.NotificationType4=class extends a{constructor(e){super(e,4)}};e.NotificationType5=class extends a{constructor(e){super(e,5)}};e.NotificationType6=class extends a{constructor(e){super(e,6)}};e.NotificationType7=class extends a{constructor(e){super(e,7)}};e.NotificationType8=class extends a{constructor(e){super(e,8)}};e.NotificationType9=class extends a{constructor(e){super(e,9)}},e.isRequestMessage=function(e){const n=e;return n&&t.string(n.method)&&(t.string(n.id)||t.number(n.id))},e.isNotificationMessage=function(e){const n=e;return n&&t.string(n.method)&&void 0===e.id},e.isResponseMessage=function(e){const n=e;return n&&(void 0!==n.result||!!n.error)&&(t.string(n.id)||t.number(n.id)||null===n.id)}}(P);var O={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=u,n=x,r=p;var i,o;(o=i=e.CancellationToken||(e.CancellationToken={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),o.is=function(e){const t=e;return t&&(t===o.None||t===o.Cancelled||n.boolean(t.isCancellationRequested)&&!!t.onCancellationRequested)};const a=Object.freeze((function(e,n){const r=t.default().timer.setTimeout(e.bind(n),0);return{dispose(){t.default().timer.clearTimeout(r)}}}));class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}e.CancellationTokenSource=class{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=i.None}}}(O);var N={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=u,n=x,r=p;var i;(e.MessageReader||(e.MessageReader={})).is=function(e){let t=e;return t&&n.func(t.listen)&&n.func(t.dispose)&&n.func(t.onError)&&n.func(t.onClose)&&n.func(t.onPartialMessage)};class o{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}e.AbstractMessageReader=o,(i||(i={})).fromOptions=function(e){var n;let r,i;const o=new Map;let a;const s=new Map;if(void 0===e||"string"==typeof e)r=null!=e?e:"utf-8";else{if(r=null!==(n=e.charset)&&void 0!==n?n:"utf-8",void 0!==e.contentDecoder&&(i=e.contentDecoder,o.set(i.name,i)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)o.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(a=e.contentTypeDecoder,s.set(a.name,a)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===a&&(a=t.default().applicationJson.decoder,s.set(a.name,a)),{charset:r,contentDecoder:i,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:s}};e.ReadableStreamMessageReader=class extends o{constructor(e,n){super(),this.readable=e,this.options=i.fromOptions(n),this.buffer=t.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(t.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=t.default().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}}(N);var S={},D={};Object.defineProperty(D,"__esModule",{value:!0}),D.Semaphore=void 0;const I=u;D.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&I.default().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=u,n=x,r=D,i=p;var o;(e.MessageWriter||(e.MessageWriter={})).is=function(e){let t=e;return t&&n.func(t.dispose)&&n.func(t.onClose)&&n.func(t.onError)&&n.func(t.write)};class a{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}e.AbstractMessageWriter=a,(o||(o={})).fromOptions=function(e){var n,r;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:t.default().applicationJson.encoder}:{charset:null!==(n=e.charset)&&void 0!==n?n:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!==(r=e.contentTypeEncoder)&&void 0!==r?r:t.default().applicationJson.encoder}};e.WriteableStreamMessageWriter=class extends a{constructor(e,t){super(),this.writable=e,this.options=o.fromOptions(t),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}}(S);var L={},M={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0,(n=t=e.Touch||(e.Touch={})).None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last;class r{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,n=t.None){const r=this._map.get(e);if(r)return n!==t.None&&this.touch(r,n),r.value}set(e,n,r=t.None){let i=this._map.get(e);if(i)i.value=n,r!==t.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case t.None:this.addItemLast(i);break;case t.First:this.addItemFirst(i);break;case t.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(n===t.First||n===t.Last)if(n===t.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===t.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}e.LinkedMap=r;e.LRUCache=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=t.AsNew){return super.get(e,n)}peek(e){return super.get(e,t.None)}set(e,n){return super.set(e,n,t.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}}(M),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.Trace=e.NullLogger=e.ProgressType=void 0;const t=u,n=x,r=P,i=M,o=p,a=O;var s,c,l,f,d,h,m,g,y,v,R,T,_,E,b,k,C,w,A,N;(s||(s={})).type=new r.NotificationType("$/cancelRequest"),(c||(c={})).type=new r.NotificationType("$/progress");e.ProgressType=class{constructor(){}},(l||(l={})).is=function(e){return n.func(e)},e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),(d=f=e.Trace||(e.Trace={}))[d.Off=0]="Off",d[d.Messages=1]="Messages",d[d.Verbose=2]="Verbose",function(e){e.fromString=function(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(f=e.Trace||(e.Trace={})),(m=e.TraceFormat||(e.TraceFormat={})).Text="text",m.JSON="json",function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=e.TraceFormat||(e.TraceFormat={})),(g=e.SetTraceNotification||(e.SetTraceNotification={})).type=new r.NotificationType("$/setTrace"),(y=e.LogTraceNotification||(e.LogTraceNotification={})).type=new r.NotificationType("$/logTrace"),(R=v=e.ConnectionErrors||(e.ConnectionErrors={}))[R.Closed=1]="Closed",R[R.Disposed=2]="Disposed",R[R.AlreadyListening=3]="AlreadyListening";class S extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,S.prototype)}}e.ConnectionError=S,(T=e.ConnectionStrategy||(e.ConnectionStrategy={})).is=function(e){const t=e;return t&&n.func(t.cancelUndispatched)},(E=_=e.CancellationReceiverStrategy||(e.CancellationReceiverStrategy={})).Message=Object.freeze({createCancellationTokenSource:e=>new a.CancellationTokenSource}),E.is=function(e){const t=e;return t&&n.func(t.createCancellationTokenSource)},(k=b=e.CancellationSenderStrategy||(e.CancellationSenderStrategy={})).Message=Object.freeze({sendCancellation(e,t){e.sendNotification(s.type,{id:t})},cleanup(e){}}),k.is=function(e){const t=e;return t&&n.func(t.sendCancellation)&&n.func(t.cleanup)},(w=C=e.CancellationStrategy||(e.CancellationStrategy={})).Message=Object.freeze({receiver:_.Message,sender:b.Message}),w.is=function(e){const t=e;return t&&_.is(t.receiver)&&b.is(t.sender)},(e.ConnectionOptions||(e.ConnectionOptions={})).is=function(e){const t=e;return t&&(C.is(t.cancellationStrategy)||T.is(t.connectionStrategy))},(N=A||(A={}))[N.New=1]="New",N[N.Listening=2]="Listening",N[N.Closed=3]="Closed",N[N.Disposed=4]="Disposed",e.createMessageConnection=function(u,d,p,m){const R=void 0!==p?p:e.NullLogger;let T=0,_=0,E=0;const b="2.0";let k;const P=Object.create(null);let x;const w=Object.create(null),O=new Map;let N,D,I=new i.LinkedMap,L=Object.create(null),M=Object.create(null),F=f.Off,q=h.Text,$=A.New;const j=new o.Emitter,U=new o.Emitter,W=new o.Emitter,K=new o.Emitter,G=new o.Emitter,z=m&&m.cancellationStrategy?m.cancellationStrategy:C.Message;function B(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function H(e,t){var n;r.isRequestMessage(t)?e.set(B(t.id),t):r.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++E).toString():"res-"+n.toString(),t):e.set("not-"+(++_).toString(),t)}function V(e){}function Y(){return $===A.Listening}function X(){return $===A.Closed}function J(){return $===A.Disposed}function Z(){$!==A.New&&$!==A.Listening||($=A.Closed,U.fire(void 0))}function Q(){N||0===I.size||(N=t.default().timer.setImmediate((()=>{N=void 0,function(){if(0===I.size)return;const e=I.shift();try{r.isRequestMessage(e)?function(e){if(J())return;function t(t,n,i){const o={jsonrpc:b,id:e.id};t instanceof r.ResponseError?o.error=t.toJson():o.result=void 0===t?null:t,te(o,n,i),d.write(o)}function i(t,n,r){const i={jsonrpc:b,id:e.id,error:t.toJson()};te(i,n,r),d.write(i)}function o(t,n,r){void 0===t&&(t=null);const i={jsonrpc:b,id:e.id,result:t};te(i,n,r),d.write(i)}!function(e){if(F===f.Off||!D)return;if(q===h.Text){let t;F===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),D.log(`Received request '${e.method} - (${e.id})'.`,t)}else ne("receive-request",e)}(e);const a=P[e.method];let s,c;a&&(s=a.type,c=a.handler);const u=Date.now();if(c||k){const a=String(e.id),f=z.receiver.createCancellationTokenSource(a);M[a]=f;try{let l;if(c)if(void 0===e.params){if(void 0!==s&&0!==s.numberOfParams)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${s.numberOfParams} params but recevied none.`),e.method,u);l=c(f.token)}else if(Array.isArray(e.params)){if(void 0!==s&&s.parameterStructures===r.ParameterStructures.byName)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,u);l=c(...e.params,f.token)}else{if(void 0!==s&&s.parameterStructures===r.ParameterStructures.byPosition)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,u);l=c(e.params,f.token)}else k&&(l=k(e.method,e.params,f.token));const d=l;l?d.then?d.then((n=>{delete M[a],t(n,e.method,u)}),(t=>{delete M[a],t instanceof r.ResponseError?i(t,e.method,u):t&&n.string(t.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(delete M[a],t(l,e.method,u)):(delete M[a],o(l,e.method,u))}catch(l){delete M[a],l instanceof r.ResponseError?t(l,e.method,u):l&&n.string(l.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${l.message}`),e.method,u):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else i(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):r.isNotificationMessage(e)?function(e){if(J())return;let t,n;if(e.method===s.type.method)n=e=>{const t=e.id,n=M[String(t)];n&&n.cancel()};else{const r=w[e.method];r&&(n=r.handler,t=r.type)}if(n||x)try{!function(e){if(F===f.Off||!D||e.method===y.type.method)return;if(q===h.Text){let t;F===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),D.log(`Received notification '${e.method}'.`,t)}else ne("receive-notification",e)}(e),n?void 0===e.params?(void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==r.ParameterStructures.byName&&R.error(`Notification ${e.method} defines ${t.numberOfParams} params but recevied none.`),n()):Array.isArray(e.params)?(void 0!==t&&(t.parameterStructures===r.ParameterStructures.byName&&R.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&R.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${e.params.length} argumennts`)),n(...e.params)):(void 0!==t&&t.parameterStructures===r.ParameterStructures.byPosition&&R.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params)):x&&x(e.method,e.params)}catch(i){i.message?R.error(`Notification handler '${e.method}' failed with message: ${i.message}`):R.error(`Notification handler '${e.method}' failed unexpectedly.`)}else W.fire(e)}(e):r.isResponseMessage(e)?function(e){if(J())return;if(null===e.id)e.error?R.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):R.error("Received response message without id. No further error information provided.");else{const n=String(e.id),i=L[n];if(function(e,t){if(F===f.Off||!D)return;if(q===h.Text){let n;if(F===f.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";D.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else D.log(`Received response ${e.id} without active response promise.`,n)}else ne("receive-response",e)}(e,i),i){delete L[n];try{if(e.error){const t=e.error;i.reject(new r.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");i.resolve(e.result)}}catch(t){t.message?R.error(`Response handler '${i.method}' failed with message: ${t.message}`):R.error(`Response handler '${i.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void R.error("Received empty message.");R.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(n.string(t.id)||n.number(t.id)){const e=String(t.id),n=L[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{Q()}}()})))}u.onClose(Z),u.onError((function(e){j.fire([e,void 0,void 0])})),d.onClose(Z),d.onError((function(e){j.fire(e)}));const ee=e=>{try{if(r.isNotificationMessage(e)&&e.method===s.type.method){const t=B(e.params.id),n=I.get(t);if(r.isRequestMessage(n)){const r=null==m?void 0:m.connectionStrategy,i=r&&r.cancelUndispatched?r.cancelUndispatched(n,V):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return I.delete(t),i.id=n.id,te(i,e.method,Date.now()),void d.write(i)}}H(I,e)}finally{Q()}};function te(e,t,n){if(F!==f.Off&&D)if(q===h.Text){let r;F===f.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),D.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else ne("send-response",e)}function ne(e,t){if(!D||F===f.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};D.log(n)}function re(){if(X())throw new S(v.Closed,"Connection is closed.");if(J())throw new S(v.Disposed,"Connection is disposed.")}function ie(e){return void 0===e?null:e}function oe(e){return null===e?void 0:e}function ae(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function se(e,t){switch(e){case r.ParameterStructures.auto:return ae(t)?oe(t):[ie(t)];case r.ParameterStructures.byName:if(!ae(t))throw new Error("Recevied parameters by name but param is not an object literal.");return oe(t);case r.ParameterStructures.byPosition:return[ie(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ce(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=se(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(ie(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const ue={sendNotification:(e,...t)=>{let i,o;if(re(),n.string(e)){i=e;const n=t[0];let a=0,s=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(a=1,s=n);let c=t.length;const u=c-a;switch(u){case 0:o=void 0;break;case 1:o=se(s,t[a]);break;default:if(s===r.ParameterStructures.byName)throw new Error(`Recevied ${u} parameters for 'by Name' notification parameter structure.`);o=t.slice(a,c).map((e=>ie(e)))}}else{const n=t;i=e.method,o=ce(e,n)}const a={jsonrpc:b,method:i,params:o};!function(e){if(F!==f.Off&&D)if(q===h.Text){let t;F===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),D.log(`Sending notification '${e.method}'.`,t)}else ne("send-notification",e)}(a),d.write(a)},onNotification:(e,t)=>{let r;return re(),n.func(e)?x=e:t&&(n.string(e)?(r=e,w[e]={type:void 0,handler:t}):(r=e.method,w[e.method]={type:e,handler:t})),{dispose:()=>{void 0!==r?delete w[r]:x=void 0}}},onProgress:(e,t,n)=>{if(O.has(t))throw new Error(`Progress handler for token ${t} already registered`);return O.set(t,n),{dispose:()=>{O.delete(t)}}},sendProgress:(e,t,n)=>{ue.sendNotification(c.type,{token:t,value:n})},onUnhandledProgress:K.event,sendRequest:(e,...t)=>{let i,o,s;if(re(),function(){if(!Y())throw new Error("Call listen() first.")}(),n.string(e)){i=e;const n=t[0],c=t[t.length-1];let u=0,l=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(u=1,l=n);let f=t.length;a.CancellationToken.is(c)&&(f-=1,s=c);const d=f-u;switch(d){case 0:o=void 0;break;case 1:o=se(l,t[u]);break;default:if(l===r.ParameterStructures.byName)throw new Error(`Recevied ${d} parameters for 'by Name' request parameter structure.`);o=t.slice(u,f).map((e=>ie(e)))}}else{const n=t;i=e.method,o=ce(e,n);const r=e.numberOfParams;s=a.CancellationToken.is(n[r])?n[r]:void 0}const c=T++;let u;s&&(u=s.onCancellationRequested((()=>{z.sender.sendCancellation(ue,c)})));return new Promise(((e,t)=>{const n={jsonrpc:b,id:c,method:i,params:o};let a={method:i,timerStart:Date.now(),resolve:t=>{e(t),z.sender.cleanup(c),null==u||u.dispose()},reject:e=>{t(e),z.sender.cleanup(c),null==u||u.dispose()}};!function(e){if(F!==f.Off&&D)if(q===h.Text){let t;F===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),D.log(`Sending request '${e.method} - (${e.id})'.`,t)}else ne("send-request",e)}(n);try{d.write(n)}catch(s){a.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,s.message?s.message:"Unknown reason")),a=null}a&&(L[String(c)]=a)}))},onRequest:(e,t)=>{re();let r=null;return l.is(e)?(r=void 0,k=e):n.string(e)?(r=null,void 0!==t&&(r=e,P[e]={handler:t,type:void 0})):void 0!==t&&(r=e.method,P[e.method]={type:e,handler:t}),{dispose:()=>{null!==r&&(void 0!==r?delete P[r]:k=void 0)}}},trace:(e,t,r)=>{let i=!1,o=h.Text;void 0!==r&&(n.boolean(r)?i=r:(i=r.sendNotification||!1,o=r.traceFormat||h.Text)),F=e,q=o,D=F===f.Off?void 0:t,!i||X()||J()||ue.sendNotification(g.type,{value:f.toString(e)})},onError:j.event,onClose:U.event,onUnhandledNotification:W.event,onDispose:G.event,end:()=>{d.end()},dispose:()=>{if(J())return;$=A.Disposed,G.fire(void 0);const e=new Error("Connection got disposed.");Object.keys(L).forEach((t=>{L[t].reject(e)})),L=Object.create(null),M=Object.create(null),I=new i.LinkedMap,n.func(d.dispose)&&d.dispose(),n.func(u.dispose)&&u.dispose()},listen:()=>{re(),function(){if(Y())throw new S(v.AlreadyListening,"Connection is already listening")}(),$=A.Listening,u.listen(ee)},inspect:()=>{t.default().console.log("inspect")}};return ue.onNotification(y.type,(e=>{F!==f.Off&&D&&D.log(e.message,F===f.Verbose?e.verbose:void 0)})),ue.onNotification(c.type,(e=>{const t=O.get(e.token);t?t(e.value):K.fire(e)})),ue}}(L),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.Trace=e.ProgressType=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.RAL=void 0,e.CancellationStrategy=void 0;const t=P;Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=d;Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return n.Disposable}});const r=p;Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return r.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return r.Emitter}});const i=O;Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return i.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return i.CancellationToken}});const o=N;Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return o.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return o.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return o.ReadableStreamMessageReader}});const a=S;Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return a.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return a.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return a.WriteableStreamMessageWriter}});const s=L;Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return s.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return s.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return s.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return s.createMessageConnection}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return s.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return s.Trace}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return s.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return s.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return s.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return s.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return s.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return s.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return s.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return s.CancellationStrategy}});const c=u;e.RAL=c.default}(C),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0;c.default.install();const i=C;r(C,t);class o extends i.AbstractMessageReader{constructor(e){super(),this._onData=new i.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=o;class a extends i.AbstractMessageWriter{constructor(e){super(),this.context=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.context.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=i.NullLogger),i.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),i.createMessageConnection(e,t,n,r)}}(s);var F,q,$,j,U,W,K,G,z,B,H,V,Y,X,J,Z,Q,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,fe,de,pe,he,me,ge,ye,ve,Re,Te,_e,Ee,be,ke,Ce,Pe,xe,we,Ae,Oe,Ne,Se=s,De={};(q=F||(F={})).MIN_VALUE=-2147483648,q.MAX_VALUE=2147483647,(j=$||($={})).MIN_VALUE=0,j.MAX_VALUE=2147483647,(W=U||(U={})).create=function(e,t){return e===Number.MAX_VALUE&&(e=$.MAX_VALUE),t===Number.MAX_VALUE&&(t=$.MAX_VALUE),{line:e,character:t}},W.is=function(e){var t=e;return It.objectLiteral(t)&&It.uinteger(t.line)&&It.uinteger(t.character)},(G=K||(K={})).create=function(e,t,n,r){if(It.uinteger(e)&&It.uinteger(t)&&It.uinteger(n)&&It.uinteger(r))return{start:U.create(e,t),end:U.create(n,r)};if(U.is(e)&&U.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")},G.is=function(e){var t=e;return It.objectLiteral(t)&&U.is(t.start)&&U.is(t.end)},(B=z||(z={})).create=function(e,t){return{uri:e,range:t}},B.is=function(e){var t=e;return It.defined(t)&&K.is(t.range)&&(It.string(t.uri)||It.undefined(t.uri))},(V=H||(H={})).create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},V.is=function(e){var t=e;return It.defined(t)&&K.is(t.targetRange)&&It.string(t.targetUri)&&(K.is(t.targetSelectionRange)||It.undefined(t.targetSelectionRange))&&(K.is(t.originSelectionRange)||It.undefined(t.originSelectionRange))},(X=Y||(Y={})).create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},X.is=function(e){var t=e;return It.numberRange(t.red,0,1)&&It.numberRange(t.green,0,1)&&It.numberRange(t.blue,0,1)&&It.numberRange(t.alpha,0,1)},(Z=J||(J={})).create=function(e,t){return{range:e,color:t}},Z.is=function(e){var t=e;return K.is(t.range)&&Y.is(t.color)},(ee=Q||(Q={})).create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},ee.is=function(e){var t=e;return It.string(t.label)&&(It.undefined(t.textEdit)||ge.is(t))&&(It.undefined(t.additionalTextEdits)||It.typedArray(t.additionalTextEdits,ge.is))},(ne=te||(te={})).Comment="comment",ne.Imports="imports",ne.Region="region",(ie=re||(re={})).create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return It.defined(n)&&(o.startCharacter=n),It.defined(r)&&(o.endCharacter=r),It.defined(i)&&(o.kind=i),o},ie.is=function(e){var t=e;return It.uinteger(t.startLine)&&It.uinteger(t.startLine)&&(It.undefined(t.startCharacter)||It.uinteger(t.startCharacter))&&(It.undefined(t.endCharacter)||It.uinteger(t.endCharacter))&&(It.undefined(t.kind)||It.string(t.kind))},(ae=oe||(oe={})).create=function(e,t){return{location:e,message:t}},ae.is=function(e){var t=e;return It.defined(t)&&z.is(t.location)&&It.string(t.message)},(ce=se||(se={})).Error=1,ce.Warning=2,ce.Information=3,ce.Hint=4,(le=ue||(ue={})).Unnecessary=1,le.Deprecated=2,(fe||(fe={})).is=function(e){var t=e;return null!=t&&It.string(t.href)},(pe=de||(de={})).create=function(e,t,n,r,i,o){var a={range:e,message:t};return It.defined(n)&&(a.severity=n),It.defined(r)&&(a.code=r),It.defined(i)&&(a.source=i),It.defined(o)&&(a.relatedInformation=o),a},pe.is=function(e){var t,n=e;return It.defined(n)&&K.is(n.range)&&It.string(n.message)&&(It.number(n.severity)||It.undefined(n.severity))&&(It.integer(n.code)||It.string(n.code)||It.undefined(n.code))&&(It.undefined(n.codeDescription)||It.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(It.string(n.source)||It.undefined(n.source))&&(It.undefined(n.relatedInformation)||It.typedArray(n.relatedInformation,oe.is))},(me=he||(he={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return It.defined(n)&&n.length>0&&(i.arguments=n),i},me.is=function(e){var t=e;return It.defined(t)&&It.string(t.title)&&It.string(t.command)},(ye=ge||(ge={})).replace=function(e,t){return{range:e,newText:t}},ye.insert=function(e,t){return{range:{start:e,end:e},newText:t}},ye.del=function(e){return{range:e,newText:""}},ye.is=function(e){var t=e;return It.objectLiteral(t)&&It.string(t.newText)&&K.is(t.range)},(Re=ve||(ve={})).create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},Re.is=function(e){var t=e;return void 0!==t&&It.objectLiteral(t)&&It.string(t.label)&&(It.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(It.string(t.description)||void 0===t.description)},(Te||(Te={})).is=function(e){return"string"==typeof e},(Ee=_e||(_e={})).replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},Ee.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},Ee.del=function(e,t){return{range:e,newText:"",annotationId:t}},Ee.is=function(e){var t=e;return ge.is(t)&&(ve.is(t.annotationId)||Te.is(t.annotationId))},(ke=be||(be={})).create=function(e,t){return{textDocument:e,edits:t}},ke.is=function(e){var t=e;return It.defined(t)&&qe.is(t.textDocument)&&Array.isArray(t.edits)},(Pe=Ce||(Ce={})).create=function(e,t,n){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},Pe.is=function(e){var t=e;return t&&"create"===t.kind&&It.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||It.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||It.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||Te.is(t.annotationId))},(we=xe||(xe={})).create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},we.is=function(e){var t=e;return t&&"rename"===t.kind&&It.string(t.oldUri)&&It.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||It.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||It.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||Te.is(t.annotationId))},(Oe=Ae||(Ae={})).create=function(e,t,n){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},Oe.is=function(e){var t=e;return t&&"delete"===t.kind&&It.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||It.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||It.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||Te.is(t.annotationId))},(Ne||(Ne={})).is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return It.string(e.kind)?Ce.is(e)||xe.is(e)||Ae.is(e):be.is(e)})))};var Ie,Le,Me,Fe,qe,$e,je,Ue,We,Ke,Ge,ze,Be,He,Ve,Ye,Xe,Je,Ze,Qe,et,tt,nt,rt,it,ot,at,st,ct,ut,lt,ft,dt,pt,ht,mt,gt,yt,vt,Rt,Tt,_t,Et,bt,kt,Ct,Pt,xt,wt,At,Ot=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=ge.insert(e,t):Te.is(n)?(i=n,r=_e.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=_e.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=ge.replace(e,t):Te.is(n)?(i=n,r=_e.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=_e.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=ge.del(e):Te.is(t)?(r=t,n=_e.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=_e.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Nt=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(Te.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id "+n+" is already in use.");if(void 0===t)throw new Error("No annotation provided for id "+n);return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),St=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Nt(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(be.is(e)){var n=new Ot(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new Ot(e.changes[n]);t._textEditChanges[n]=r}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(qe.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new Ot(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new Ot(i),this._textEditChanges[e]=r}return r},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Nt,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(ve.is(t)||Te.is(t)?r=t:n=t,void 0===r?i=Ce.create(e,n):(o=Te.is(r)?r:this._changeAnnotations.manage(r),i=Ce.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,a;if(ve.is(n)||Te.is(n)?i=n:r=n,void 0===i?o=xe.create(e,t,r):(a=Te.is(i)?i:this._changeAnnotations.manage(i),o=xe.create(e,t,r,a)),this._workspaceEdit.documentChanges.push(o),void 0!==a)return a},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(ve.is(t)||Te.is(t)?r=t:n=t,void 0===r?i=Ae.create(e,n):(o=Te.is(r)?r:this._changeAnnotations.manage(r),i=Ae.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e}();(Le=Ie||(Ie={})).create=function(e){return{uri:e}},Le.is=function(e){var t=e;return It.defined(t)&&It.string(t.uri)},(Fe=Me||(Me={})).create=function(e,t){return{uri:e,version:t}},Fe.is=function(e){var t=e;return It.defined(t)&&It.string(t.uri)&&It.integer(t.version)},($e=qe||(qe={})).create=function(e,t){return{uri:e,version:t}},$e.is=function(e){var t=e;return It.defined(t)&&It.string(t.uri)&&(null===t.version||It.integer(t.version))},(Ue=je||(je={})).create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},Ue.is=function(e){var t=e;return It.defined(t)&&It.string(t.uri)&&It.string(t.languageId)&&It.integer(t.version)&&It.string(t.text)},(Ke=We||(We={})).PlainText="plaintext",Ke.Markdown="markdown",function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(We||(We={})),(Ge||(Ge={})).is=function(e){var t=e;return It.objectLiteral(e)&&We.is(t.kind)&&It.string(t.value)},(Be=ze||(ze={})).Text=1,Be.Method=2,Be.Function=3,Be.Constructor=4,Be.Field=5,Be.Variable=6,Be.Class=7,Be.Interface=8,Be.Module=9,Be.Property=10,Be.Unit=11,Be.Value=12,Be.Enum=13,Be.Keyword=14,Be.Snippet=15,Be.Color=16,Be.File=17,Be.Reference=18,Be.Folder=19,Be.EnumMember=20,Be.Constant=21,Be.Struct=22,Be.Event=23,Be.Operator=24,Be.TypeParameter=25,(Ve=He||(He={})).PlainText=1,Ve.Snippet=2,(Ye||(Ye={})).Deprecated=1,(Je=Xe||(Xe={})).create=function(e,t,n){return{newText:e,insert:t,replace:n}},Je.is=function(e){var t=e;return t&&It.string(t.newText)&&K.is(t.insert)&&K.is(t.replace)},(Qe=Ze||(Ze={})).asIs=1,Qe.adjustIndentation=2,(et||(et={})).create=function(e){return{label:e}},(tt||(tt={})).create=function(e,t){return{items:e||[],isIncomplete:!!t}},(rt=nt||(nt={})).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},rt.is=function(e){var t=e;return It.string(t)||It.objectLiteral(t)&&It.string(t.language)&&It.string(t.value)},(it||(it={})).is=function(e){var t=e;return!!t&&It.objectLiteral(t)&&(Ge.is(t.contents)||nt.is(t.contents)||It.typedArray(t.contents,nt.is))&&(void 0===e.range||K.is(e.range))},(ot||(ot={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},(at||(at={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return It.defined(t)&&(i.documentation=t),It.defined(n)?i.parameters=n:i.parameters=[],i},(ct=st||(st={})).Text=1,ct.Read=2,ct.Write=3,(ut||(ut={})).create=function(e,t){var n={range:e};return It.number(t)&&(n.kind=t),n},(ft=lt||(lt={})).File=1,ft.Module=2,ft.Namespace=3,ft.Package=4,ft.Class=5,ft.Method=6,ft.Property=7,ft.Field=8,ft.Constructor=9,ft.Enum=10,ft.Interface=11,ft.Function=12,ft.Variable=13,ft.Constant=14,ft.String=15,ft.Number=16,ft.Boolean=17,ft.Array=18,ft.Object=19,ft.Key=20,ft.Null=21,ft.EnumMember=22,ft.Struct=23,ft.Event=24,ft.Operator=25,ft.TypeParameter=26,(dt||(dt={})).Deprecated=1,(pt||(pt={})).create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o},(mt=ht||(ht={})).create=function(e,t,n,r,i,o){var a={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(a.children=o),a},mt.is=function(e){var t=e;return t&&It.string(t.name)&&It.number(t.kind)&&K.is(t.range)&&K.is(t.selectionRange)&&(void 0===t.detail||It.string(t.detail))&&(void 0===t.deprecated||It.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))},(yt=gt||(gt={})).Empty="",yt.QuickFix="quickfix",yt.Refactor="refactor",yt.RefactorExtract="refactor.extract",yt.RefactorInline="refactor.inline",yt.RefactorRewrite="refactor.rewrite",yt.Source="source",yt.SourceOrganizeImports="source.organizeImports",yt.SourceFixAll="source.fixAll",(Rt=vt||(vt={})).create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},Rt.is=function(e){var t=e;return It.defined(t)&&It.typedArray(t.diagnostics,de.is)&&(void 0===t.only||It.typedArray(t.only,It.string))},(_t=Tt||(Tt={})).create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):he.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},_t.is=function(e){var t=e;return t&&It.string(t.title)&&(void 0===t.diagnostics||It.typedArray(t.diagnostics,de.is))&&(void 0===t.kind||It.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||he.is(t.command))&&(void 0===t.isPreferred||It.boolean(t.isPreferred))&&(void 0===t.edit||Ne.is(t.edit))},(bt=Et||(Et={})).create=function(e,t){var n={range:e};return It.defined(t)&&(n.data=t),n},bt.is=function(e){var t=e;return It.defined(t)&&K.is(t.range)&&(It.undefined(t.command)||he.is(t.command))},(Ct=kt||(kt={})).create=function(e,t){return{tabSize:e,insertSpaces:t}},Ct.is=function(e){var t=e;return It.defined(t)&&It.uinteger(t.tabSize)&&It.boolean(t.insertSpaces)},(xt=Pt||(Pt={})).create=function(e,t,n){return{range:e,target:t,data:n}},xt.is=function(e){var t=e;return It.defined(t)&&K.is(t.range)&&(It.undefined(t.target)||It.string(t.target))},(At=wt||(wt={})).create=function(e,t){return{range:e,parent:t}},At.is=function(e){var t=e;return void 0!==t&&K.is(t.range)&&(void 0===t.parent||At.is(t.parent))};var Dt;!function(e){function t(e,n){if(e.length<=1)return e;var r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);for(var a=0,s=0,c=0;a<i.length&&s<o.length;){var u=n(i[a],o[s]);e[c++]=u<=0?i[a++]:o[s++]}for(;a<i.length;)e[c++]=i[a++];for(;s<o.length;)e[c++]=o[s++];return e}e.create=function(e,t,n,r){return new Ft(e,t,n,r)},e.is=function(e){var t=e;return!!(It.defined(t)&&It.string(t.uri)&&(It.undefined(t.languageId)||It.string(t.languageId))&&It.uinteger(t.lineCount)&&It.func(t.getText)&&It.func(t.positionAt)&&It.func(t.offsetAt))},e.applyEdits=function(e,n){for(var r=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length,a=i.length-1;a>=0;a--){var s=i[a],c=e.offsetAt(s.range.start),u=e.offsetAt(s.range.end);if(!(u<=o))throw new Error("Overlapping edit");r=r.substring(0,c)+s.newText+r.substring(u,r.length),o=c}return r}}(Dt||(Dt={}));var It,Lt,Mt,Ft=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return U.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return U.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();Lt=It||(It={}),Mt=Object.prototype.toString,Lt.defined=function(e){return void 0!==e},Lt.undefined=function(e){return void 0===e},Lt.boolean=function(e){return!0===e||!1===e},Lt.string=function(e){return"[object String]"===Mt.call(e)},Lt.number=function(e){return"[object Number]"===Mt.call(e)},Lt.numberRange=function(e,t,n){return"[object Number]"===Mt.call(e)&&t<=e&&e<=n},Lt.integer=function(e){return"[object Number]"===Mt.call(e)&&-2147483648<=e&&e<=2147483647},Lt.uinteger=function(e){return"[object Number]"===Mt.call(e)&&0<=e&&e<=2147483647},Lt.func=function(e){return"[object Function]"===Mt.call(e)},Lt.objectLiteral=function(e){return null!==e&&"object"==typeof e},Lt.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)};var qt=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get integer(){return F},get uinteger(){return $},get Position(){return U},get Range(){return K},get Location(){return z},get LocationLink(){return H},get Color(){return Y},get ColorInformation(){return J},get ColorPresentation(){return Q},get FoldingRangeKind(){return te},get FoldingRange(){return re},get DiagnosticRelatedInformation(){return oe},get DiagnosticSeverity(){return se},get DiagnosticTag(){return ue},get CodeDescription(){return fe},get Diagnostic(){return de},get Command(){return he},get TextEdit(){return ge},get ChangeAnnotation(){return ve},get ChangeAnnotationIdentifier(){return Te},get AnnotatedTextEdit(){return _e},get TextDocumentEdit(){return be},get CreateFile(){return Ce},get RenameFile(){return xe},get DeleteFile(){return Ae},get WorkspaceEdit(){return Ne},WorkspaceChange:St,get TextDocumentIdentifier(){return Ie},get VersionedTextDocumentIdentifier(){return Me},get OptionalVersionedTextDocumentIdentifier(){return qe},get TextDocumentItem(){return je},get MarkupKind(){return We},get MarkupContent(){return Ge},get CompletionItemKind(){return ze},get InsertTextFormat(){return He},get CompletionItemTag(){return Ye},get InsertReplaceEdit(){return Xe},get InsertTextMode(){return Ze},get CompletionItem(){return et},get CompletionList(){return tt},get MarkedString(){return nt},get Hover(){return it},get ParameterInformation(){return ot},get SignatureInformation(){return at},get DocumentHighlightKind(){return st},get DocumentHighlight(){return ut},get SymbolKind(){return lt},get SymbolTag(){return dt},get SymbolInformation(){return pt},get DocumentSymbol(){return ht},get CodeActionKind(){return gt},get CodeActionContext(){return vt},get CodeAction(){return Tt},get CodeLens(){return Et},get FormattingOptions(){return kt},get DocumentLink(){return Pt},get SelectionRange(){return wt},EOL:["\n","\r\n","\r"],get TextDocument(){return Dt}})),$t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.ProtocolNotificationType=$t.ProtocolNotificationType0=$t.ProtocolRequestType=$t.ProtocolRequestType0=$t.RegistrationType=void 0;const jt=s;$t.RegistrationType=class{constructor(e){this.method=e}};$t.ProtocolRequestType0=class extends jt.RequestType0{constructor(e){super(e)}};$t.ProtocolRequestType=class extends jt.RequestType{constructor(e){super(e,jt.ParameterStructures.byName)}};$t.ProtocolNotificationType0=class extends jt.NotificationType0{constructor(e){super(e)}};$t.ProtocolNotificationType=class extends jt.NotificationType{constructor(e){super(e,jt.ParameterStructures.byName)}};var Ut={},Wt={};function Kt(e){return"string"==typeof e||e instanceof String}Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.objectLiteral=Wt.typedArray=Wt.stringArray=Wt.array=Wt.func=Wt.error=Wt.number=Wt.string=Wt.boolean=void 0,Wt.boolean=function(e){return!0===e||!1===e};var Gt=Wt.string=Kt;var zt=Wt.number=function(e){return"number"==typeof e||e instanceof Number};function Bt(e){return Array.isArray(e)}Wt.error=function(e){return e instanceof Error},Wt.func=function(e){return"function"==typeof e};var Ht=Wt.array=Bt;var Vt=Wt.stringArray=function(e){return Bt(e)&&e.every((e=>Kt(e)))};Wt.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},Wt.objectLiteral=function(e){return null!==e&&"object"==typeof e};var Yt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=$t;var n;(n=e.ImplementationRequest||(e.ImplementationRequest={})).method="textDocument/implementation",n.type=new t.ProtocolRequestType(n.method)}(Yt);var Xt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=$t;var n;(n=e.TypeDefinitionRequest||(e.TypeDefinitionRequest={})).method="textDocument/typeDefinition",n.type=new t.ProtocolRequestType(n.method)}(Xt);var Jt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=$t;(e.WorkspaceFoldersRequest||(e.WorkspaceFoldersRequest={})).type=new t.ProtocolRequestType0("workspace/workspaceFolders"),(e.DidChangeWorkspaceFoldersNotification||(e.DidChangeWorkspaceFoldersNotification={})).type=new t.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(Jt);var Zt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=$t;(e.ConfigurationRequest||(e.ConfigurationRequest={})).type=new t.ProtocolRequestType("workspace/configuration")}(Zt);var Qt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=$t;var n;(n=e.DocumentColorRequest||(e.DocumentColorRequest={})).method="textDocument/documentColor",n.type=new t.ProtocolRequestType(n.method),(e.ColorPresentationRequest||(e.ColorPresentationRequest={})).type=new t.ProtocolRequestType("textDocument/colorPresentation")}(Qt);var en={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRequest=e.FoldingRangeKind=void 0;const t=$t;var n;!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(e.FoldingRangeKind||(e.FoldingRangeKind={})),(n=e.FoldingRangeRequest||(e.FoldingRangeRequest={})).method="textDocument/foldingRange",n.type=new t.ProtocolRequestType(n.method)}(en);var tn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=$t;var n;(n=e.DeclarationRequest||(e.DeclarationRequest={})).method="textDocument/declaration",n.type=new t.ProtocolRequestType(n.method)}(tn);var nn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=$t;var n;(n=e.SelectionRangeRequest||(e.SelectionRangeRequest={})).method="textDocument/selectionRange",n.type=new t.ProtocolRequestType(n.method)}(nn);var rn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=s,n=$t;var r;(r=e.WorkDoneProgress||(e.WorkDoneProgress={})).type=new t.ProgressType,r.is=function(e){return e===r.type},(e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})).type=new n.ProtocolRequestType("window/workDoneProgress/create"),(e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={})).type=new n.ProtocolNotificationType("window/workDoneProgress/cancel")}(rn);var on={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=$t;var n,r,i;(n=e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",n.type=new t.ProtocolRequestType(n.method),(r=e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",r.type=new t.ProtocolRequestType(r.method),(i=e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",i.type=new t.ProtocolRequestType(i.method)}(on);var an={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=void 0;const t=$t;var n,r,i,o,a,s,c;(n=e.SemanticTokenTypes||(e.SemanticTokenTypes={})).namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator",(r=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={})).declaration="declaration",r.definition="definition",r.readonly="readonly",r.static="static",r.deprecated="deprecated",r.abstract="abstract",r.async="async",r.modification="modification",r.documentation="documentation",r.defaultLibrary="defaultLibrary",(e.SemanticTokens||(e.SemanticTokens={})).is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])},(e.TokenFormat||(e.TokenFormat={})).Relative="relative",(i=e.SemanticTokensRegistrationType||(e.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",i.type=new t.RegistrationType(i.method),(o=e.SemanticTokensRequest||(e.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",o.type=new t.ProtocolRequestType(o.method),(a=e.SemanticTokensDeltaRequest||(e.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",a.type=new t.ProtocolRequestType(a.method),(s=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",s.type=new t.ProtocolRequestType(s.method),(c=e.SemanticTokensRefreshRequest||(e.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",c.type=new t.ProtocolRequestType0(c.method)}(an);var sn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=$t;var n;(n=e.ShowDocumentRequest||(e.ShowDocumentRequest={})).method="window/showDocument",n.type=new t.ProtocolRequestType(n.method)}(sn);var cn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=$t;var n;(n=e.LinkedEditingRangeRequest||(e.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",n.type=new t.ProtocolRequestType(n.method)}(cn);var un={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=$t;var n,r,i,o,a,s,c;(n=e.FileOperationPatternKind||(e.FileOperationPatternKind={})).file="file",n.folder="folder",(r=e.WillCreateFilesRequest||(e.WillCreateFilesRequest={})).method="workspace/willCreateFiles",r.type=new t.ProtocolRequestType(r.method),(i=e.DidCreateFilesNotification||(e.DidCreateFilesNotification={})).method="workspace/didCreateFiles",i.type=new t.ProtocolNotificationType(i.method),(o=e.WillRenameFilesRequest||(e.WillRenameFilesRequest={})).method="workspace/willRenameFiles",o.type=new t.ProtocolRequestType(o.method),(a=e.DidRenameFilesNotification||(e.DidRenameFilesNotification={})).method="workspace/didRenameFiles",a.type=new t.ProtocolNotificationType(a.method),(s=e.DidDeleteFilesNotification||(e.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",s.type=new t.ProtocolNotificationType(s.method),(c=e.WillDeleteFilesRequest||(e.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",c.type=new t.ProtocolRequestType(c.method)}(un);var ln={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=$t;var n,r,i;(n=e.UniquenessLevel||(e.UniquenessLevel={})).document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global",(r=e.MonikerKind||(e.MonikerKind={})).import="import",r.export="export",r.local="local",(i=e.MonikerRequest||(e.MonikerRequest={})).method="textDocument/moniker",i.type=new t.ProtocolRequestType(i.method)}(ln),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeError=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.DocumentFilter=void 0,e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=void 0;const t=Wt,n=$t,r=Yt;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return r.ImplementationRequest}});const i=Xt;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return i.TypeDefinitionRequest}});const o=Jt;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});const a=Zt;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const s=Qt;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return s.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return s.ColorPresentationRequest}});const c=en;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return c.FoldingRangeRequest}});const u=tn;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return u.DeclarationRequest}});const l=nn;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return l.SelectionRangeRequest}});const f=rn;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const d=on;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return d.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return d.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return d.CallHierarchyPrepareRequest}});const p=an;Object.defineProperty(e,"SemanticTokenTypes",{enumerable:!0,get:function(){return p.SemanticTokenTypes}}),Object.defineProperty(e,"SemanticTokenModifiers",{enumerable:!0,get:function(){return p.SemanticTokenModifiers}}),Object.defineProperty(e,"SemanticTokens",{enumerable:!0,get:function(){return p.SemanticTokens}}),Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return p.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return p.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p.SemanticTokensRegistrationType}});const h=sn;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return h.ShowDocumentRequest}});const m=cn;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return m.LinkedEditingRangeRequest}});const g=un;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return g.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return g.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return g.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return g.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return g.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return g.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return g.WillDeleteFilesRequest}});const y=ln;var v,R,T,_,E,b,k,C,P,x,w,A,O,N,S,D,I,L,M,F,q,$,j,U,W,K,G,z,B,H,V,Y,X,J,Z,Q,ee,te,ne,re;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return y.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return y.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return y.MonikerRequest}}),(v=e.DocumentFilter||(e.DocumentFilter={})).is=function(e){const n=e;return t.string(n.language)||t.string(n.scheme)||t.string(n.pattern)},(R=e.DocumentSelector||(e.DocumentSelector={})).is=function(e){if(!Array.isArray(e))return!1;for(let n of e)if(!t.string(n)&&!v.is(n))return!1;return!0},(e.RegistrationRequest||(e.RegistrationRequest={})).type=new n.ProtocolRequestType("client/registerCapability"),(e.UnregistrationRequest||(e.UnregistrationRequest={})).type=new n.ProtocolRequestType("client/unregisterCapability"),(T=e.ResourceOperationKind||(e.ResourceOperationKind={})).Create="create",T.Rename="rename",T.Delete="delete",(_=e.FailureHandlingKind||(e.FailureHandlingKind={})).Abort="abort",_.Transactional="transactional",_.TextOnlyTransactional="textOnlyTransactional",_.Undo="undo",(e.StaticRegistrationOptions||(e.StaticRegistrationOptions={})).hasId=function(e){const n=e;return n&&t.string(n.id)&&n.id.length>0},(e.TextDocumentRegistrationOptions||(e.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||R.is(t.documentSelector))},(E=e.WorkDoneProgressOptions||(e.WorkDoneProgressOptions={})).is=function(e){const n=e;return t.objectLiteral(n)&&(void 0===n.workDoneProgress||t.boolean(n.workDoneProgress))},E.hasWorkDoneProgress=function(e){const n=e;return n&&t.boolean(n.workDoneProgress)},(e.InitializeRequest||(e.InitializeRequest={})).type=new n.ProtocolRequestType("initialize"),(e.InitializeError||(e.InitializeError={})).unknownProtocolVersion=1,(e.InitializedNotification||(e.InitializedNotification={})).type=new n.ProtocolNotificationType("initialized"),(e.ShutdownRequest||(e.ShutdownRequest={})).type=new n.ProtocolRequestType0("shutdown"),(e.ExitNotification||(e.ExitNotification={})).type=new n.ProtocolNotificationType0("exit"),(e.DidChangeConfigurationNotification||(e.DidChangeConfigurationNotification={})).type=new n.ProtocolNotificationType("workspace/didChangeConfiguration"),(b=e.MessageType||(e.MessageType={})).Error=1,b.Warning=2,b.Info=3,b.Log=4,(e.ShowMessageNotification||(e.ShowMessageNotification={})).type=new n.ProtocolNotificationType("window/showMessage"),(e.ShowMessageRequest||(e.ShowMessageRequest={})).type=new n.ProtocolRequestType("window/showMessageRequest"),(e.LogMessageNotification||(e.LogMessageNotification={})).type=new n.ProtocolNotificationType("window/logMessage"),(e.TelemetryEventNotification||(e.TelemetryEventNotification={})).type=new n.ProtocolNotificationType("telemetry/event"),(k=e.TextDocumentSyncKind||(e.TextDocumentSyncKind={})).None=0,k.Full=1,k.Incremental=2,(C=e.DidOpenTextDocumentNotification||(e.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",C.type=new n.ProtocolNotificationType(C.method),(P=e.TextDocumentContentChangeEvent||(e.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},P.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(x=e.DidChangeTextDocumentNotification||(e.DidChangeTextDocumentNotification={})).method="textDocument/didChange",x.type=new n.ProtocolNotificationType(x.method),(w=e.DidCloseTextDocumentNotification||(e.DidCloseTextDocumentNotification={})).method="textDocument/didClose",w.type=new n.ProtocolNotificationType(w.method),(A=e.DidSaveTextDocumentNotification||(e.DidSaveTextDocumentNotification={})).method="textDocument/didSave",A.type=new n.ProtocolNotificationType(A.method),(O=e.TextDocumentSaveReason||(e.TextDocumentSaveReason={})).Manual=1,O.AfterDelay=2,O.FocusOut=3,(N=e.WillSaveTextDocumentNotification||(e.WillSaveTextDocumentNotification={})).method="textDocument/willSave",N.type=new n.ProtocolNotificationType(N.method),(S=e.WillSaveTextDocumentWaitUntilRequest||(e.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",S.type=new n.ProtocolRequestType(S.method),(e.DidChangeWatchedFilesNotification||(e.DidChangeWatchedFilesNotification={})).type=new n.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(D=e.FileChangeType||(e.FileChangeType={})).Created=1,D.Changed=2,D.Deleted=3,(I=e.WatchKind||(e.WatchKind={})).Create=1,I.Change=2,I.Delete=4,(e.PublishDiagnosticsNotification||(e.PublishDiagnosticsNotification={})).type=new n.ProtocolNotificationType("textDocument/publishDiagnostics"),(L=e.CompletionTriggerKind||(e.CompletionTriggerKind={})).Invoked=1,L.TriggerCharacter=2,L.TriggerForIncompleteCompletions=3,(M=e.CompletionRequest||(e.CompletionRequest={})).method="textDocument/completion",M.type=new n.ProtocolRequestType(M.method),(F=e.CompletionResolveRequest||(e.CompletionResolveRequest={})).method="completionItem/resolve",F.type=new n.ProtocolRequestType(F.method),(q=e.HoverRequest||(e.HoverRequest={})).method="textDocument/hover",q.type=new n.ProtocolRequestType(q.method),($=e.SignatureHelpTriggerKind||(e.SignatureHelpTriggerKind={})).Invoked=1,$.TriggerCharacter=2,$.ContentChange=3,(j=e.SignatureHelpRequest||(e.SignatureHelpRequest={})).method="textDocument/signatureHelp",j.type=new n.ProtocolRequestType(j.method),(U=e.DefinitionRequest||(e.DefinitionRequest={})).method="textDocument/definition",U.type=new n.ProtocolRequestType(U.method),(W=e.ReferencesRequest||(e.ReferencesRequest={})).method="textDocument/references",W.type=new n.ProtocolRequestType(W.method),(K=e.DocumentHighlightRequest||(e.DocumentHighlightRequest={})).method="textDocument/documentHighlight",K.type=new n.ProtocolRequestType(K.method),(G=e.DocumentSymbolRequest||(e.DocumentSymbolRequest={})).method="textDocument/documentSymbol",G.type=new n.ProtocolRequestType(G.method),(z=e.CodeActionRequest||(e.CodeActionRequest={})).method="textDocument/codeAction",z.type=new n.ProtocolRequestType(z.method),(B=e.CodeActionResolveRequest||(e.CodeActionResolveRequest={})).method="codeAction/resolve",B.type=new n.ProtocolRequestType(B.method),(H=e.WorkspaceSymbolRequest||(e.WorkspaceSymbolRequest={})).method="workspace/symbol",H.type=new n.ProtocolRequestType(H.method),(V=e.CodeLensRequest||(e.CodeLensRequest={})).method="textDocument/codeLens",V.type=new n.ProtocolRequestType(V.method),(Y=e.CodeLensResolveRequest||(e.CodeLensResolveRequest={})).method="codeLens/resolve",Y.type=new n.ProtocolRequestType(Y.method),(X=e.CodeLensRefreshRequest||(e.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",X.type=new n.ProtocolRequestType0(X.method),(J=e.DocumentLinkRequest||(e.DocumentLinkRequest={})).method="textDocument/documentLink",J.type=new n.ProtocolRequestType(J.method),(Z=e.DocumentLinkResolveRequest||(e.DocumentLinkResolveRequest={})).method="documentLink/resolve",Z.type=new n.ProtocolRequestType(Z.method),(Q=e.DocumentFormattingRequest||(e.DocumentFormattingRequest={})).method="textDocument/formatting",Q.type=new n.ProtocolRequestType(Q.method),(ee=e.DocumentRangeFormattingRequest||(e.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",ee.type=new n.ProtocolRequestType(ee.method),(te=e.DocumentOnTypeFormattingRequest||(e.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",te.type=new n.ProtocolRequestType(te.method),(e.PrepareSupportDefaultBehavior||(e.PrepareSupportDefaultBehavior={})).Identifier=1,(ne=e.RenameRequest||(e.RenameRequest={})).method="textDocument/rename",ne.type=new n.ProtocolRequestType(ne.method),(re=e.PrepareRenameRequest||(e.PrepareRenameRequest={})).method="textDocument/prepareRename",re.type=new n.ProtocolRequestType(re.method),(e.ExecuteCommandRequest||(e.ExecuteCommandRequest={})).type=new n.ProtocolRequestType("workspace/executeCommand"),(e.ApplyWorkspaceEditRequest||(e.ApplyWorkspaceEditRequest={})).type=new n.ProtocolRequestType("workspace/applyEdit")}(Ut);var fn={};Object.defineProperty(fn,"__esModule",{value:!0}),fn.createProtocolConnection=void 0;const dn=s;fn.createProtocolConnection=function(e,t,n,r){return dn.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),dn.createMessageConnection(e,t,n,r)},function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,r(s,t),r(qt,t),r($t,t),r(Ut,t);var i,o=fn;Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return o.createProtocolConnection}}),(i=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,i.ContentModified=-32801,i.RequestCancelled=-32800,i.lspReservedErrorRangeEnd=-32800}(De),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const i=Se;r(Se,t),r(De,t),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}}(a);var pn,hn,mn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},gn=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(t,n){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e.isIncremental(o)){var a=Rn(o.range),s=this.offsetAt(a.start),c=this.offsetAt(a.end);this._content=this._content.substring(0,s)+o.text+this._content.substring(c,this._content.length);var u=Math.max(a.start.line,0),l=Math.max(a.end.line,0),f=this._lineOffsets,d=vn(o.text,!1,s);if(l-u===d.length)for(var p=0,h=d.length;p<h;p++)f[p+u+1]=d[p];else d.length<1e4?f.splice.apply(f,mn([u+1,l-u],d,!1)):this._lineOffsets=f=f.slice(0,u+1).concat(d,f.slice(l+1));var m=o.text.length-(c-s);if(0!==m)for(p=u+1+d.length,h=f.length;p<h;p++)f[p]=f[p]+m}else{if(!e.isFull(o))throw new Error("Unknown change event received");this._content=o.text,this._lineOffsets=void 0}}this._version=n},e.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=vn(this._content,!0)),this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return{line:o,character:e-t[o]}},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e.isIncremental=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},e}();function yn(e,t){if(e.length<=1)return e;var n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);yn(r,t),yn(i,t);for(var o=0,a=0,s=0;o<r.length&&a<i.length;){var c=t(r[o],i[a]);e[s++]=c<=0?r[o++]:i[a++]}for(;o<r.length;)e[s++]=r[o++];for(;a<i.length;)e[s++]=i[a++];return e}function vn(e,t,n){void 0===n&&(n=0);for(var r=t?[n]:[],i=0;i<e.length;i++){var o=e.charCodeAt(i);13!==o&&10!==o||(13===o&&i+1<e.length&&10===e.charCodeAt(i+1)&&i++,r.push(n+i+1))}return r}function Rn(e){var t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function Tn(e){var t=Rn(e.range);return t!==e.range?{newText:e.newText,range:t}:e}(hn=pn||(pn={})).create=function(e,t,n,r){return new gn(e,t,n,r)},hn.update=function(e,t,n){if(e instanceof gn)return e.update(t,n),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},hn.applyEdits=function(e,t){for(var n=e.getText(),r=0,i=[],o=0,a=yn(t.map(Tn),(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}));o<a.length;o++){var s=a[o],c=e.offsetAt(s.range.start);if(c<r)throw new Error("Overlapping edit");c>r&&i.push(n.substring(r,c)),s.newText.length&&i.push(s.newText),r=e.offsetAt(s.range.end)}return i.push(n.substr(r)),i.join("")};var _n={},En={},bn={},kn={},Cn={},Pn={},xn={};let wn;function An(){if(void 0===wn)throw new Error("No runtime abstraction layer installed");return wn}Object.defineProperty(xn,"__esModule",{value:!0}),(An||(An={})).install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");wn=e},xn.default=An;var On={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0,(e.Disposable||(e.Disposable={})).create=function(e){return{dispose:e}}}(On);var Nn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=xn;!function(e){const t={dispose(){}};e.None=function(){return t}}(e.Event||(e.Event={}));class n{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,s=r.length;a<s;a++)try{n.push(r[a].apply(i[a],e))}catch(o){t.default().console.error(o)}return n}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const o={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),o.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}e.Emitter=r,r._noop=function(){}}(Nn);var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.AbstractMessageBuffer=void 0;Sn.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=i.byteLength,t++}if(4!==e)return;const i=this._read(r+n),o=new Map,a=this.toString(i,"ascii").split("\r\n");if(a.length<2)return o;for(let s=0;s<a.length-2;s++){const e=a[s],t=e.indexOf(":");if(-1===t)throw new Error("Message header must separate key and value using :");const n=e.substr(0,t),r=e.substr(t+1).trim();o.set(n,r)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}},Object.defineProperty(Pn,"__esModule",{value:!0});const Dn=xn,In=On,Ln=Nn,Mn=Sn;class Fn extends Mn.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Fn.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}Fn.emptyBuffer=new Uint8Array(0);class qn{constructor(e){this.socket=e,this._onData=new Ln.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),In.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),In.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),In.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class $n{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),In.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),In.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),In.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const jn=new TextEncoder,Un=Object.freeze({messageBuffer:Object.freeze({create:e=>new Fn(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${t.charset}`);return Promise.resolve(jn.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new qn(e),asWritableStream:e=>new $n(e)}),console:console,timer:Object.freeze({setTimeout:(e,t,...n)=>setTimeout(e,t,...n),clearTimeout(e){clearTimeout(e)},setImmediate:(e,...t)=>setTimeout(e,0,...t),clearImmediate(e){clearTimeout(e)}})});function Wn(){return Un}(Wn||(Wn={})).install=function(){Dn.default.install(Un)},Pn.default=Wn;var Kn={},Gn={},zn={};function Bn(e){return"string"==typeof e||e instanceof String}function Hn(e){return Array.isArray(e)}Object.defineProperty(zn,"__esModule",{value:!0}),zn.stringArray=zn.array=zn.func=zn.error=zn.number=zn.string=zn.boolean=void 0,zn.boolean=function(e){return!0===e||!1===e},zn.string=Bn,zn.number=function(e){return"number"==typeof e||e instanceof Number},zn.error=function(e){return e instanceof Error},zn.func=function(e){return"function"==typeof e},zn.array=Hn,zn.stringArray=function(e){return Hn(e)&&e.every((e=>Bn(e)))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isResponseMessage=e.isNotificationMessage=e.isRequestMessage=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=zn;var n,r;(r=n=e.ErrorCodes||(e.ErrorCodes={})).ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.jsonrpcReservedErrorRangeStart=-32099,r.serverErrorStart=r.jsonrpcReservedErrorRangeStart,r.MessageWriteError=-32099,r.MessageReadError=-32098,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.jsonrpcReservedErrorRangeEnd=-32e3,r.serverErrorEnd=r.jsonrpcReservedErrorRangeEnd;class i extends Error{constructor(e,r,o){super(r),this.code=t.number(e)?e:n.UnknownErrorCode,this.data=o,Object.setPrototypeOf(this,i.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}e.ResponseError=i;class o{constructor(e){this.kind=e}static is(e){return e===o.auto||e===o.byName||e===o.byPosition}toString(){return this.kind}}e.ParameterStructures=o,o.auto=new o("auto"),o.byPosition=new o("byPosition"),o.byName=new o("byName");class a{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return o.auto}}e.AbstractMessageSignature=a;e.RequestType0=class extends a{constructor(e){super(e,0)}};e.RequestType=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.RequestType1=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.RequestType2=class extends a{constructor(e){super(e,2)}};e.RequestType3=class extends a{constructor(e){super(e,3)}};e.RequestType4=class extends a{constructor(e){super(e,4)}};e.RequestType5=class extends a{constructor(e){super(e,5)}};e.RequestType6=class extends a{constructor(e){super(e,6)}};e.RequestType7=class extends a{constructor(e){super(e,7)}};e.RequestType8=class extends a{constructor(e){super(e,8)}};e.RequestType9=class extends a{constructor(e){super(e,9)}};e.NotificationType=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.NotificationType0=class extends a{constructor(e){super(e,0)}};e.NotificationType1=class extends a{constructor(e,t=o.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};e.NotificationType2=class extends a{constructor(e){super(e,2)}};e.NotificationType3=class extends a{constructor(e){super(e,3)}};e.NotificationType4=class extends a{constructor(e){super(e,4)}};e.NotificationType5=class extends a{constructor(e){super(e,5)}};e.NotificationType6=class extends a{constructor(e){super(e,6)}};e.NotificationType7=class extends a{constructor(e){super(e,7)}};e.NotificationType8=class extends a{constructor(e){super(e,8)}};e.NotificationType9=class extends a{constructor(e){super(e,9)}},e.isRequestMessage=function(e){const n=e;return n&&t.string(n.method)&&(t.string(n.id)||t.number(n.id))},e.isNotificationMessage=function(e){const n=e;return n&&t.string(n.method)&&void 0===e.id},e.isResponseMessage=function(e){const n=e;return n&&(void 0!==n.result||!!n.error)&&(t.string(n.id)||t.number(n.id)||null===n.id)}}(Gn);var Vn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=xn,n=zn,r=Nn;var i,o;(o=i=e.CancellationToken||(e.CancellationToken={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),o.is=function(e){const t=e;return t&&(t===o.None||t===o.Cancelled||n.boolean(t.isCancellationRequested)&&!!t.onCancellationRequested)};const a=Object.freeze((function(e,n){const r=t.default().timer.setTimeout(e.bind(n),0);return{dispose(){t.default().timer.clearTimeout(r)}}}));class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}e.CancellationTokenSource=class{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=i.None}}}(Vn);var Yn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=xn,n=zn,r=Nn;var i;(e.MessageReader||(e.MessageReader={})).is=function(e){let t=e;return t&&n.func(t.listen)&&n.func(t.dispose)&&n.func(t.onError)&&n.func(t.onClose)&&n.func(t.onPartialMessage)};class o{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}e.AbstractMessageReader=o,(i||(i={})).fromOptions=function(e){var n;let r,i;const o=new Map;let a;const s=new Map;if(void 0===e||"string"==typeof e)r=null!=e?e:"utf-8";else{if(r=null!==(n=e.charset)&&void 0!==n?n:"utf-8",void 0!==e.contentDecoder&&(i=e.contentDecoder,o.set(i.name,i)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)o.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(a=e.contentTypeDecoder,s.set(a.name,a)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===a&&(a=t.default().applicationJson.decoder,s.set(a.name,a)),{charset:r,contentDecoder:i,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:s}};e.ReadableStreamMessageReader=class extends o{constructor(e,n){super(),this.readable=e,this.options=i.fromOptions(n),this.buffer=t.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(t.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=t.default().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}}(Yn);var Xn={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.Semaphore=void 0;const Zn=xn;Jn.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&Zn.default().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=xn,n=zn,r=Jn,i=Nn;var o;(e.MessageWriter||(e.MessageWriter={})).is=function(e){let t=e;return t&&n.func(t.dispose)&&n.func(t.onClose)&&n.func(t.onError)&&n.func(t.write)};class a{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${n.string(e.message)?e.message:"unknown"}`)}}e.AbstractMessageWriter=a,(o||(o={})).fromOptions=function(e){var n,r;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:t.default().applicationJson.encoder}:{charset:null!==(n=e.charset)&&void 0!==n?n:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!==(r=e.contentTypeEncoder)&&void 0!==r?r:t.default().applicationJson.encoder}};e.WriteableStreamMessageWriter=class extends a{constructor(e,t){super(),this.writable=e,this.options=o.fromOptions(t),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}}(Xn);var Qn={},er={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0,(n=t=e.Touch||(e.Touch={})).None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last;class r{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,n=t.None){const r=this._map.get(e);if(r)return n!==t.None&&this.touch(r,n),r.value}set(e,n,r=t.None){let i=this._map.get(e);if(i)i.value=n,r!==t.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case t.None:this.addItemLast(i);break;case t.First:this.addItemFirst(i);break;case t.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(n===t.First||n===t.Last)if(n===t.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===t.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}e.LinkedMap=r;e.LRUCache=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=t.AsNew){return super.get(e,n)}peek(e){return super.get(e,t.None)}set(e,n){return super.set(e,n,t.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}}(er),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.Trace=e.NullLogger=e.ProgressType=void 0;const t=xn,n=zn,r=Gn,i=er,o=Nn,a=Vn;var s,c,u,l,f,d,p,h,m,g,y,v,R,T,_,E,b,k,C,P;(s||(s={})).type=new r.NotificationType("$/cancelRequest"),(c||(c={})).type=new r.NotificationType("$/progress");e.ProgressType=class{constructor(){}},(u||(u={})).is=function(e){return n.func(e)},e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),(f=l=e.Trace||(e.Trace={}))[f.Off=0]="Off",f[f.Messages=1]="Messages",f[f.Verbose=2]="Verbose",function(e){e.fromString=function(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(l=e.Trace||(e.Trace={})),(p=e.TraceFormat||(e.TraceFormat={})).Text="text",p.JSON="json",function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(d=e.TraceFormat||(e.TraceFormat={})),(h=e.SetTraceNotification||(e.SetTraceNotification={})).type=new r.NotificationType("$/setTrace"),(m=e.LogTraceNotification||(e.LogTraceNotification={})).type=new r.NotificationType("$/logTrace"),(y=g=e.ConnectionErrors||(e.ConnectionErrors={}))[y.Closed=1]="Closed",y[y.Disposed=2]="Disposed",y[y.AlreadyListening=3]="AlreadyListening";class x extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,x.prototype)}}e.ConnectionError=x,(v=e.ConnectionStrategy||(e.ConnectionStrategy={})).is=function(e){const t=e;return t&&n.func(t.cancelUndispatched)},(T=R=e.CancellationReceiverStrategy||(e.CancellationReceiverStrategy={})).Message=Object.freeze({createCancellationTokenSource:e=>new a.CancellationTokenSource}),T.is=function(e){const t=e;return t&&n.func(t.createCancellationTokenSource)},(E=_=e.CancellationSenderStrategy||(e.CancellationSenderStrategy={})).Message=Object.freeze({sendCancellation(e,t){e.sendNotification(s.type,{id:t})},cleanup(e){}}),E.is=function(e){const t=e;return t&&n.func(t.sendCancellation)&&n.func(t.cleanup)},(k=b=e.CancellationStrategy||(e.CancellationStrategy={})).Message=Object.freeze({receiver:R.Message,sender:_.Message}),k.is=function(e){const t=e;return t&&R.is(t.receiver)&&_.is(t.sender)},(e.ConnectionOptions||(e.ConnectionOptions={})).is=function(e){const t=e;return t&&(b.is(t.cancellationStrategy)||v.is(t.connectionStrategy))},(P=C||(C={}))[P.New=1]="New",P[P.Listening=2]="Listening",P[P.Closed=3]="Closed",P[P.Disposed=4]="Disposed",e.createMessageConnection=function(f,p,y,v){const R=void 0!==y?y:e.NullLogger;let T=0,_=0,E=0;const k="2.0";let P;const w=Object.create(null);let A;const O=Object.create(null),N=new Map;let S,D,I=new i.LinkedMap,L=Object.create(null),M=Object.create(null),F=l.Off,q=d.Text,$=C.New;const j=new o.Emitter,U=new o.Emitter,W=new o.Emitter,K=new o.Emitter,G=new o.Emitter,z=v&&v.cancellationStrategy?v.cancellationStrategy:b.Message;function B(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function H(e,t){var n;r.isRequestMessage(t)?e.set(B(t.id),t):r.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++E).toString():"res-"+n.toString(),t):e.set("not-"+(++_).toString(),t)}function V(e){}function Y(){return $===C.Listening}function X(){return $===C.Closed}function J(){return $===C.Disposed}function Z(){$!==C.New&&$!==C.Listening||($=C.Closed,U.fire(void 0))}function Q(){S||0===I.size||(S=t.default().timer.setImmediate((()=>{S=void 0,function(){if(0===I.size)return;const e=I.shift();try{r.isRequestMessage(e)?function(e){if(J())return;function t(t,n,i){const o={jsonrpc:k,id:e.id};t instanceof r.ResponseError?o.error=t.toJson():o.result=void 0===t?null:t,te(o,n,i),p.write(o)}function i(t,n,r){const i={jsonrpc:k,id:e.id,error:t.toJson()};te(i,n,r),p.write(i)}function o(t,n,r){void 0===t&&(t=null);const i={jsonrpc:k,id:e.id,result:t};te(i,n,r),p.write(i)}!function(e){if(F===l.Off||!D)return;if(q===d.Text){let t;F===l.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),D.log(`Received request '${e.method} - (${e.id})'.`,t)}else ne("receive-request",e)}(e);const a=w[e.method];let s,c;a&&(s=a.type,c=a.handler);const u=Date.now();if(c||P){const a=String(e.id),l=z.receiver.createCancellationTokenSource(a);M[a]=l;try{let f;if(c)if(void 0===e.params){if(void 0!==s&&0!==s.numberOfParams)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${s.numberOfParams} params but recevied none.`),e.method,u);f=c(l.token)}else if(Array.isArray(e.params)){if(void 0!==s&&s.parameterStructures===r.ParameterStructures.byName)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,u);f=c(...e.params,l.token)}else{if(void 0!==s&&s.parameterStructures===r.ParameterStructures.byPosition)return void i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,u);f=c(e.params,l.token)}else P&&(f=P(e.method,e.params,l.token));const d=f;f?d.then?d.then((n=>{delete M[a],t(n,e.method,u)}),(t=>{delete M[a],t instanceof r.ResponseError?i(t,e.method,u):t&&n.string(t.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(delete M[a],t(f,e.method,u)):(delete M[a],o(f,e.method,u))}catch(f){delete M[a],f instanceof r.ResponseError?t(f,e.method,u):f&&n.string(f.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${f.message}`),e.method,u):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else i(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):r.isNotificationMessage(e)?function(e){if(J())return;let t,n;if(e.method===s.type.method)n=e=>{const t=e.id,n=M[String(t)];n&&n.cancel()};else{const r=O[e.method];r&&(n=r.handler,t=r.type)}if(n||A)try{!function(e){if(F===l.Off||!D||e.method===m.type.method)return;if(q===d.Text){let t;F===l.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),D.log(`Received notification '${e.method}'.`,t)}else ne("receive-notification",e)}(e),n?void 0===e.params?(void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==r.ParameterStructures.byName&&R.error(`Notification ${e.method} defines ${t.numberOfParams} params but recevied none.`),n()):Array.isArray(e.params)?(void 0!==t&&(t.parameterStructures===r.ParameterStructures.byName&&R.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&R.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${e.params.length} argumennts`)),n(...e.params)):(void 0!==t&&t.parameterStructures===r.ParameterStructures.byPosition&&R.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params)):A&&A(e.method,e.params)}catch(i){i.message?R.error(`Notification handler '${e.method}' failed with message: ${i.message}`):R.error(`Notification handler '${e.method}' failed unexpectedly.`)}else W.fire(e)}(e):r.isResponseMessage(e)?function(e){if(J())return;if(null===e.id)e.error?R.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):R.error("Received response message without id. No further error information provided.");else{const n=String(e.id),i=L[n];if(function(e,t){if(F===l.Off||!D)return;if(q===d.Text){let n;if(F===l.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";D.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else D.log(`Received response ${e.id} without active response promise.`,n)}else ne("receive-response",e)}(e,i),i){delete L[n];try{if(e.error){const t=e.error;i.reject(new r.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");i.resolve(e.result)}}catch(t){t.message?R.error(`Response handler '${i.method}' failed with message: ${t.message}`):R.error(`Response handler '${i.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void R.error("Received empty message.");R.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(n.string(t.id)||n.number(t.id)){const e=String(t.id),n=L[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{Q()}}()})))}f.onClose(Z),f.onError((function(e){j.fire([e,void 0,void 0])})),p.onClose(Z),p.onError((function(e){j.fire(e)}));const ee=e=>{try{if(r.isNotificationMessage(e)&&e.method===s.type.method){const t=B(e.params.id),n=I.get(t);if(r.isRequestMessage(n)){const r=null==v?void 0:v.connectionStrategy,i=r&&r.cancelUndispatched?r.cancelUndispatched(n,V):void 0;if(i&&(void 0!==i.error||void 0!==i.result))return I.delete(t),i.id=n.id,te(i,e.method,Date.now()),void p.write(i)}}H(I,e)}finally{Q()}};function te(e,t,n){if(F!==l.Off&&D)if(q===d.Text){let r;F===l.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),D.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else ne("send-response",e)}function ne(e,t){if(!D||F===l.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};D.log(n)}function re(){if(X())throw new x(g.Closed,"Connection is closed.");if(J())throw new x(g.Disposed,"Connection is disposed.")}function ie(e){return void 0===e?null:e}function oe(e){return null===e?void 0:e}function ae(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function se(e,t){switch(e){case r.ParameterStructures.auto:return ae(t)?oe(t):[ie(t)];case r.ParameterStructures.byName:if(!ae(t))throw new Error("Recevied parameters by name but param is not an object literal.");return oe(t);case r.ParameterStructures.byPosition:return[ie(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ce(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=se(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(ie(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const ue={sendNotification:(e,...t)=>{let i,o;if(re(),n.string(e)){i=e;const n=t[0];let a=0,s=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(a=1,s=n);let c=t.length;const u=c-a;switch(u){case 0:o=void 0;break;case 1:o=se(s,t[a]);break;default:if(s===r.ParameterStructures.byName)throw new Error(`Recevied ${u} parameters for 'by Name' notification parameter structure.`);o=t.slice(a,c).map((e=>ie(e)))}}else{const n=t;i=e.method,o=ce(e,n)}const a={jsonrpc:k,method:i,params:o};!function(e){if(F!==l.Off&&D)if(q===d.Text){let t;F===l.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),D.log(`Sending notification '${e.method}'.`,t)}else ne("send-notification",e)}(a),p.write(a)},onNotification:(e,t)=>{let r;return re(),n.func(e)?A=e:t&&(n.string(e)?(r=e,O[e]={type:void 0,handler:t}):(r=e.method,O[e.method]={type:e,handler:t})),{dispose:()=>{void 0!==r?delete O[r]:A=void 0}}},onProgress:(e,t,n)=>{if(N.has(t))throw new Error(`Progress handler for token ${t} already registered`);return N.set(t,n),{dispose:()=>{N.delete(t)}}},sendProgress:(e,t,n)=>{ue.sendNotification(c.type,{token:t,value:n})},onUnhandledProgress:K.event,sendRequest:(e,...t)=>{let i,o,s;if(re(),function(){if(!Y())throw new Error("Call listen() first.")}(),n.string(e)){i=e;const n=t[0],c=t[t.length-1];let u=0,l=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(u=1,l=n);let f=t.length;a.CancellationToken.is(c)&&(f-=1,s=c);const d=f-u;switch(d){case 0:o=void 0;break;case 1:o=se(l,t[u]);break;default:if(l===r.ParameterStructures.byName)throw new Error(`Recevied ${d} parameters for 'by Name' request parameter structure.`);o=t.slice(u,f).map((e=>ie(e)))}}else{const n=t;i=e.method,o=ce(e,n);const r=e.numberOfParams;s=a.CancellationToken.is(n[r])?n[r]:void 0}const c=T++;let u;s&&(u=s.onCancellationRequested((()=>{z.sender.sendCancellation(ue,c)})));return new Promise(((e,t)=>{const n={jsonrpc:k,id:c,method:i,params:o};let a={method:i,timerStart:Date.now(),resolve:t=>{e(t),z.sender.cleanup(c),null==u||u.dispose()},reject:e=>{t(e),z.sender.cleanup(c),null==u||u.dispose()}};!function(e){if(F!==l.Off&&D)if(q===d.Text){let t;F===l.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),D.log(`Sending request '${e.method} - (${e.id})'.`,t)}else ne("send-request",e)}(n);try{p.write(n)}catch(s){a.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,s.message?s.message:"Unknown reason")),a=null}a&&(L[String(c)]=a)}))},onRequest:(e,t)=>{re();let r=null;return u.is(e)?(r=void 0,P=e):n.string(e)?(r=null,void 0!==t&&(r=e,w[e]={handler:t,type:void 0})):void 0!==t&&(r=e.method,w[e.method]={type:e,handler:t}),{dispose:()=>{null!==r&&(void 0!==r?delete w[r]:P=void 0)}}},trace:(e,t,r)=>{let i=!1,o=d.Text;void 0!==r&&(n.boolean(r)?i=r:(i=r.sendNotification||!1,o=r.traceFormat||d.Text)),F=e,q=o,D=F===l.Off?void 0:t,!i||X()||J()||ue.sendNotification(h.type,{value:l.toString(e)})},onError:j.event,onClose:U.event,onUnhandledNotification:W.event,onDispose:G.event,end:()=>{p.end()},dispose:()=>{if(J())return;$=C.Disposed,G.fire(void 0);const e=new Error("Connection got disposed.");Object.keys(L).forEach((t=>{L[t].reject(e)})),L=Object.create(null),M=Object.create(null),I=new i.LinkedMap,n.func(p.dispose)&&p.dispose(),n.func(f.dispose)&&f.dispose()},listen:()=>{re(),function(){if(Y())throw new x(g.AlreadyListening,"Connection is already listening")}(),$=C.Listening,f.listen(ee)},inspect:()=>{t.default().console.log("inspect")}};return ue.onNotification(m.type,(e=>{F!==l.Off&&D&&D.log(e.message,F===l.Verbose?e.verbose:void 0)})),ue.onNotification(c.type,(e=>{const t=N.get(e.token);t?t(e.value):K.fire(e)})),ue}}(Qn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.Trace=e.ProgressType=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.RAL=void 0,e.CancellationStrategy=void 0;const t=Gn;Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=On;Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return n.Disposable}});const r=Nn;Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return r.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return r.Emitter}});const i=Vn;Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return i.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return i.CancellationToken}});const o=Yn;Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return o.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return o.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return o.ReadableStreamMessageReader}});const a=Xn;Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return a.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return a.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return a.WriteableStreamMessageWriter}});const s=Qn;Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return s.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return s.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return s.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return s.createMessageConnection}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return s.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return s.Trace}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return s.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return s.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return s.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return s.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return s.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return s.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return s.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return s.CancellationStrategy}});const c=xn;e.RAL=c.default}(Kn),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0;Pn.default.install();const i=Kn;r(Kn,t);class o extends i.AbstractMessageReader{constructor(e){super(),this._onData=new i.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=o;class a extends i.AbstractMessageWriter{constructor(e){super(),this.context=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.context.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=i.NullLogger),i.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),i.createMessageConnection(e,t,n,r)}}(Cn);var tr,nr,rr,ir,or,ar,sr,cr,ur,lr,fr,dr,pr,hr,mr,gr,yr,vr,Rr,Tr,_r,Er,br,kr,Cr,Pr,xr=Cn,wr={};!function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647}(tr||(tr={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647}(nr||(nr={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=nr.MAX_VALUE),t===Number.MAX_VALUE&&(t=nr.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return ui.objectLiteral(t)&&ui.uinteger(t.line)&&ui.uinteger(t.character)}}(rr||(rr={})),function(e){e.create=function(e,t,n,r){if(ui.uinteger(e)&&ui.uinteger(t)&&ui.uinteger(n)&&ui.uinteger(r))return{start:rr.create(e,t),end:rr.create(n,r)};if(rr.is(e)&&rr.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")},e.is=function(e){var t=e;return ui.objectLiteral(t)&&rr.is(t.start)&&rr.is(t.end)}}(ir||(ir={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ui.defined(t)&&ir.is(t.range)&&(ui.string(t.uri)||ui.undefined(t.uri))}}(or||(or={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return ui.defined(t)&&ir.is(t.targetRange)&&ui.string(t.targetUri)&&(ir.is(t.targetSelectionRange)||ui.undefined(t.targetSelectionRange))&&(ir.is(t.originSelectionRange)||ui.undefined(t.originSelectionRange))}}(ar||(ar={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return ui.numberRange(t.red,0,1)&&ui.numberRange(t.green,0,1)&&ui.numberRange(t.blue,0,1)&&ui.numberRange(t.alpha,0,1)}}(sr||(sr={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return ir.is(t.range)&&sr.is(t.color)}}(cr||(cr={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ui.string(t.label)&&(ui.undefined(t.textEdit)||vr.is(t))&&(ui.undefined(t.additionalTextEdits)||ui.typedArray(t.additionalTextEdits,vr.is))}}(ur||(ur={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(lr||(lr={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return ui.defined(n)&&(o.startCharacter=n),ui.defined(r)&&(o.endCharacter=r),ui.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return ui.uinteger(t.startLine)&&ui.uinteger(t.startLine)&&(ui.undefined(t.startCharacter)||ui.uinteger(t.startCharacter))&&(ui.undefined(t.endCharacter)||ui.uinteger(t.endCharacter))&&(ui.undefined(t.kind)||ui.string(t.kind))}}(fr||(fr={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ui.defined(t)&&or.is(t.location)&&ui.string(t.message)}}(dr||(dr={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(pr||(pr={})),function(e){e.Unnecessary=1,e.Deprecated=2}(hr||(hr={})),(mr||(mr={})).is=function(e){var t=e;return null!=t&&ui.string(t.href)},function(e){e.create=function(e,t,n,r,i,o){var a={range:e,message:t};return ui.defined(n)&&(a.severity=n),ui.defined(r)&&(a.code=r),ui.defined(i)&&(a.source=i),ui.defined(o)&&(a.relatedInformation=o),a},e.is=function(e){var t,n=e;return ui.defined(n)&&ir.is(n.range)&&ui.string(n.message)&&(ui.number(n.severity)||ui.undefined(n.severity))&&(ui.integer(n.code)||ui.string(n.code)||ui.undefined(n.code))&&(ui.undefined(n.codeDescription)||ui.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(ui.string(n.source)||ui.undefined(n.source))&&(ui.undefined(n.relatedInformation)||ui.typedArray(n.relatedInformation,dr.is))}}(gr||(gr={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return ui.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return ui.defined(t)&&ui.string(t.title)&&ui.string(t.command)}}(yr||(yr={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ui.objectLiteral(t)&&ui.string(t.newText)&&ir.is(t.range)}}(vr||(vr={})),function(e){e.create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){var t=e;return void 0!==t&&ui.objectLiteral(t)&&ui.string(t.label)&&(ui.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(ui.string(t.description)||void 0===t.description)}}(Rr||(Rr={})),(Tr||(Tr={})).is=function(e){return"string"==typeof e},function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return vr.is(t)&&(Rr.is(t.annotationId)||Tr.is(t.annotationId))}}(_r||(_r={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ui.defined(t)&&Nr.is(t.textDocument)&&Array.isArray(t.edits)}}(Er||(Er={})),function(e){e.create=function(e,t,n){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"create"===t.kind&&ui.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ui.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ui.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||Tr.is(t.annotationId))}}(br||(br={})),function(e){e.create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ui.string(t.oldUri)&&ui.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ui.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ui.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||Tr.is(t.annotationId))}}(kr||(kr={})),function(e){e.create=function(e,t,n){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ui.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ui.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ui.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||Tr.is(t.annotationId))}}(Cr||(Cr={})),(Pr||(Pr={})).is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ui.string(e.kind)?br.is(e)||kr.is(e)||Cr.is(e):Er.is(e)})))};var Ar,Or,Nr,Sr,Dr,Ir,Lr,Mr,Fr,qr,$r,jr,Ur,Wr,Kr,Gr,zr,Br,Hr,Vr,Yr,Xr,Jr,Zr,Qr,ei,ti,ni,ri,ii,oi=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=vr.insert(e,t):Tr.is(n)?(i=n,r=_r.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=_r.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=vr.replace(e,t):Tr.is(n)?(i=n,r=_r.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=_r.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=vr.del(e):Tr.is(t)?(r=t,n=_r.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=_r.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),ai=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(Tr.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id "+n+" is already in use.");if(void 0===t)throw new Error("No annotation provided for id "+n);return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),si=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new ai(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(Er.is(e)){var n=new oi(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new oi(e.changes[n]);t._textEditChanges[n]=r}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(Nr.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new oi(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new oi(i),this._textEditChanges[e]=r}return r},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new ai,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(Rr.is(t)||Tr.is(t)?r=t:n=t,void 0===r?i=br.create(e,n):(o=Tr.is(r)?r:this._changeAnnotations.manage(r),i=br.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,a;if(Rr.is(n)||Tr.is(n)?i=n:r=n,void 0===i?o=kr.create(e,t,r):(a=Tr.is(i)?i:this._changeAnnotations.manage(i),o=kr.create(e,t,r,a)),this._workspaceEdit.documentChanges.push(o),void 0!==a)return a},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(Rr.is(t)||Tr.is(t)?r=t:n=t,void 0===r?i=Cr.create(e,n):(o=Tr.is(r)?r:this._changeAnnotations.manage(r),i=Cr.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ui.defined(t)&&ui.string(t.uri)}}(Ar||(Ar={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ui.defined(t)&&ui.string(t.uri)&&ui.integer(t.version)}}(Or||(Or={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ui.defined(t)&&ui.string(t.uri)&&(null===t.version||ui.integer(t.version))}}(Nr||(Nr={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return ui.defined(t)&&ui.string(t.uri)&&ui.string(t.languageId)&&ui.integer(t.version)&&ui.string(t.text)}}(Sr||(Sr={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(Dr||(Dr={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(Dr||(Dr={})),(Ir||(Ir={})).is=function(e){var t=e;return ui.objectLiteral(e)&&Dr.is(t.kind)&&ui.string(t.value)},function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(Lr||(Lr={})),function(e){e.PlainText=1,e.Snippet=2}(Mr||(Mr={})),(Fr||(Fr={})).Deprecated=1,function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&ui.string(t.newText)&&ir.is(t.insert)&&ir.is(t.replace)}}(qr||(qr={})),function(e){e.asIs=1,e.adjustIndentation=2}($r||($r={})),(jr||(jr={})).create=function(e){return{label:e}},(Ur||(Ur={})).create=function(e,t){return{items:e||[],isIncomplete:!!t}},function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ui.string(t)||ui.objectLiteral(t)&&ui.string(t.language)&&ui.string(t.value)}}(Wr||(Wr={})),(Kr||(Kr={})).is=function(e){var t=e;return!!t&&ui.objectLiteral(t)&&(Ir.is(t.contents)||Wr.is(t.contents)||ui.typedArray(t.contents,Wr.is))&&(void 0===e.range||ir.is(e.range))},(Gr||(Gr={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},(zr||(zr={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return ui.defined(t)&&(i.documentation=t),ui.defined(n)?i.parameters=n:i.parameters=[],i},function(e){e.Text=1,e.Read=2,e.Write=3}(Br||(Br={})),(Hr||(Hr={})).create=function(e,t){var n={range:e};return ui.number(t)&&(n.kind=t),n},function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(Vr||(Vr={})),(Yr||(Yr={})).Deprecated=1,(Xr||(Xr={})).create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o},function(e){e.create=function(e,t,n,r,i,o){var a={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(a.children=o),a},e.is=function(e){var t=e;return t&&ui.string(t.name)&&ui.number(t.kind)&&ir.is(t.range)&&ir.is(t.selectionRange)&&(void 0===t.detail||ui.string(t.detail))&&(void 0===t.deprecated||ui.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(Jr||(Jr={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(Zr||(Zr={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return ui.defined(t)&&ui.typedArray(t.diagnostics,gr.is)&&(void 0===t.only||ui.typedArray(t.only,ui.string))}}(Qr||(Qr={})),function(e){e.create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):yr.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&ui.string(t.title)&&(void 0===t.diagnostics||ui.typedArray(t.diagnostics,gr.is))&&(void 0===t.kind||ui.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||yr.is(t.command))&&(void 0===t.isPreferred||ui.boolean(t.isPreferred))&&(void 0===t.edit||Pr.is(t.edit))}}(ei||(ei={})),function(e){e.create=function(e,t){var n={range:e};return ui.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ui.defined(t)&&ir.is(t.range)&&(ui.undefined(t.command)||yr.is(t.command))}}(ti||(ti={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ui.defined(t)&&ui.uinteger(t.tabSize)&&ui.boolean(t.insertSpaces)}}(ni||(ni={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ui.defined(t)&&ir.is(t.range)&&(ui.undefined(t.target)||ui.string(t.target))}}(ri||(ri={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&ir.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(ii||(ii={}));var ci;!function(e){function t(e,n){if(e.length<=1)return e;var r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);for(var a=0,s=0,c=0;a<i.length&&s<o.length;){var u=n(i[a],o[s]);e[c++]=u<=0?i[a++]:o[s++]}for(;a<i.length;)e[c++]=i[a++];for(;s<o.length;)e[c++]=o[s++];return e}e.create=function(e,t,n,r){return new li(e,t,n,r)},e.is=function(e){var t=e;return!!(ui.defined(t)&&ui.string(t.uri)&&(ui.undefined(t.languageId)||ui.string(t.languageId))&&ui.uinteger(t.lineCount)&&ui.func(t.getText)&&ui.func(t.positionAt)&&ui.func(t.offsetAt))},e.applyEdits=function(e,n){for(var r=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length,a=i.length-1;a>=0;a--){var s=i[a],c=e.offsetAt(s.range.start),u=e.offsetAt(s.range.end);if(!(u<=o))throw new Error("Overlapping edit");r=r.substring(0,c)+s.newText+r.substring(u,r.length),o=c}return r}}(ci||(ci={}));var ui,li=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return rr.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return rr.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ui||(ui={}));var fi=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get integer(){return tr},get uinteger(){return nr},get Position(){return rr},get Range(){return ir},get Location(){return or},get LocationLink(){return ar},get Color(){return sr},get ColorInformation(){return cr},get ColorPresentation(){return ur},get FoldingRangeKind(){return lr},get FoldingRange(){return fr},get DiagnosticRelatedInformation(){return dr},get DiagnosticSeverity(){return pr},get DiagnosticTag(){return hr},get CodeDescription(){return mr},get Diagnostic(){return gr},get Command(){return yr},get TextEdit(){return vr},get ChangeAnnotation(){return Rr},get ChangeAnnotationIdentifier(){return Tr},get AnnotatedTextEdit(){return _r},get TextDocumentEdit(){return Er},get CreateFile(){return br},get RenameFile(){return kr},get DeleteFile(){return Cr},get WorkspaceEdit(){return Pr},WorkspaceChange:si,get TextDocumentIdentifier(){return Ar},get VersionedTextDocumentIdentifier(){return Or},get OptionalVersionedTextDocumentIdentifier(){return Nr},get TextDocumentItem(){return Sr},get MarkupKind(){return Dr},get MarkupContent(){return Ir},get CompletionItemKind(){return Lr},get InsertTextFormat(){return Mr},get CompletionItemTag(){return Fr},get InsertReplaceEdit(){return qr},get InsertTextMode(){return $r},get CompletionItem(){return jr},get CompletionList(){return Ur},get MarkedString(){return Wr},get Hover(){return Kr},get ParameterInformation(){return Gr},get SignatureInformation(){return zr},get DocumentHighlightKind(){return Br},get DocumentHighlight(){return Hr},get SymbolKind(){return Vr},get SymbolTag(){return Yr},get SymbolInformation(){return Xr},get DocumentSymbol(){return Jr},get CodeActionKind(){return Zr},get CodeActionContext(){return Qr},get CodeAction(){return ei},get CodeLens(){return ti},get FormattingOptions(){return ni},get DocumentLink(){return ri},get SelectionRange(){return ii},EOL:["\n","\r\n","\r"],get TextDocument(){return ci}})),di={};Object.defineProperty(di,"__esModule",{value:!0}),di.ProtocolNotificationType=di.ProtocolNotificationType0=di.ProtocolRequestType=di.ProtocolRequestType0=di.RegistrationType=void 0;const pi=Cn;di.RegistrationType=class{constructor(e){this.method=e}};di.ProtocolRequestType0=class extends pi.RequestType0{constructor(e){super(e)}};di.ProtocolRequestType=class extends pi.RequestType{constructor(e){super(e,pi.ParameterStructures.byName)}};di.ProtocolNotificationType0=class extends pi.NotificationType0{constructor(e){super(e)}};di.ProtocolNotificationType=class extends pi.NotificationType{constructor(e){super(e,pi.ParameterStructures.byName)}};var hi={},mi={};function gi(e){return"string"==typeof e||e instanceof String}function yi(e){return Array.isArray(e)}Object.defineProperty(mi,"__esModule",{value:!0}),mi.objectLiteral=mi.typedArray=mi.stringArray=mi.array=mi.func=mi.error=mi.number=mi.string=mi.boolean=void 0,mi.boolean=function(e){return!0===e||!1===e},mi.string=gi,mi.number=function(e){return"number"==typeof e||e instanceof Number},mi.error=function(e){return e instanceof Error},mi.func=function(e){return"function"==typeof e},mi.array=yi,mi.stringArray=function(e){return yi(e)&&e.every((e=>gi(e)))},mi.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},mi.objectLiteral=function(e){return null!==e&&"object"==typeof e};var vi={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=di;var n;(n=e.ImplementationRequest||(e.ImplementationRequest={})).method="textDocument/implementation",n.type=new t.ProtocolRequestType(n.method)}(vi);var Ri={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=di;var n;(n=e.TypeDefinitionRequest||(e.TypeDefinitionRequest={})).method="textDocument/typeDefinition",n.type=new t.ProtocolRequestType(n.method)}(Ri);var Ti={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=di;(e.WorkspaceFoldersRequest||(e.WorkspaceFoldersRequest={})).type=new t.ProtocolRequestType0("workspace/workspaceFolders"),(e.DidChangeWorkspaceFoldersNotification||(e.DidChangeWorkspaceFoldersNotification={})).type=new t.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(Ti);var _i={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=di;(e.ConfigurationRequest||(e.ConfigurationRequest={})).type=new t.ProtocolRequestType("workspace/configuration")}(_i);var Ei={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=di;var n;(n=e.DocumentColorRequest||(e.DocumentColorRequest={})).method="textDocument/documentColor",n.type=new t.ProtocolRequestType(n.method),(e.ColorPresentationRequest||(e.ColorPresentationRequest={})).type=new t.ProtocolRequestType("textDocument/colorPresentation")}(Ei);var bi={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRequest=e.FoldingRangeKind=void 0;const t=di;var n;!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(e.FoldingRangeKind||(e.FoldingRangeKind={})),(n=e.FoldingRangeRequest||(e.FoldingRangeRequest={})).method="textDocument/foldingRange",n.type=new t.ProtocolRequestType(n.method)}(bi);var ki={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=di;var n;(n=e.DeclarationRequest||(e.DeclarationRequest={})).method="textDocument/declaration",n.type=new t.ProtocolRequestType(n.method)}(ki);var Ci={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=di;var n;(n=e.SelectionRangeRequest||(e.SelectionRangeRequest={})).method="textDocument/selectionRange",n.type=new t.ProtocolRequestType(n.method)}(Ci);var Pi={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=Cn,n=di;var r;(r=e.WorkDoneProgress||(e.WorkDoneProgress={})).type=new t.ProgressType,r.is=function(e){return e===r.type},(e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})).type=new n.ProtocolRequestType("window/workDoneProgress/create"),(e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={})).type=new n.ProtocolNotificationType("window/workDoneProgress/cancel")}(Pi);var xi={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=di;var n,r,i;(n=e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",n.type=new t.ProtocolRequestType(n.method),(r=e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",r.type=new t.ProtocolRequestType(r.method),(i=e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",i.type=new t.ProtocolRequestType(i.method)}(xi);var wi={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=void 0;const t=di;var n,r,i,o,a,s,c;(n=e.SemanticTokenTypes||(e.SemanticTokenTypes={})).namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator",(r=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={})).declaration="declaration",r.definition="definition",r.readonly="readonly",r.static="static",r.deprecated="deprecated",r.abstract="abstract",r.async="async",r.modification="modification",r.documentation="documentation",r.defaultLibrary="defaultLibrary",(e.SemanticTokens||(e.SemanticTokens={})).is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])},(e.TokenFormat||(e.TokenFormat={})).Relative="relative",(i=e.SemanticTokensRegistrationType||(e.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",i.type=new t.RegistrationType(i.method),(o=e.SemanticTokensRequest||(e.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",o.type=new t.ProtocolRequestType(o.method),(a=e.SemanticTokensDeltaRequest||(e.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",a.type=new t.ProtocolRequestType(a.method),(s=e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",s.type=new t.ProtocolRequestType(s.method),(c=e.SemanticTokensRefreshRequest||(e.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",c.type=new t.ProtocolRequestType0(c.method)}(wi);var Ai={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=di;var n;(n=e.ShowDocumentRequest||(e.ShowDocumentRequest={})).method="window/showDocument",n.type=new t.ProtocolRequestType(n.method)}(Ai);var Oi={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=di;var n;(n=e.LinkedEditingRangeRequest||(e.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",n.type=new t.ProtocolRequestType(n.method)}(Oi);var Ni={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=di;var n,r,i,o,a,s,c;(n=e.FileOperationPatternKind||(e.FileOperationPatternKind={})).file="file",n.folder="folder",(r=e.WillCreateFilesRequest||(e.WillCreateFilesRequest={})).method="workspace/willCreateFiles",r.type=new t.ProtocolRequestType(r.method),(i=e.DidCreateFilesNotification||(e.DidCreateFilesNotification={})).method="workspace/didCreateFiles",i.type=new t.ProtocolNotificationType(i.method),(o=e.WillRenameFilesRequest||(e.WillRenameFilesRequest={})).method="workspace/willRenameFiles",o.type=new t.ProtocolRequestType(o.method),(a=e.DidRenameFilesNotification||(e.DidRenameFilesNotification={})).method="workspace/didRenameFiles",a.type=new t.ProtocolNotificationType(a.method),(s=e.DidDeleteFilesNotification||(e.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",s.type=new t.ProtocolNotificationType(s.method),(c=e.WillDeleteFilesRequest||(e.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",c.type=new t.ProtocolRequestType(c.method)}(Ni);var Si={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=di;var n,r,i;(n=e.UniquenessLevel||(e.UniquenessLevel={})).document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global",(r=e.MonikerKind||(e.MonikerKind={})).import="import",r.export="export",r.local="local",(i=e.MonikerRequest||(e.MonikerRequest={})).method="textDocument/moniker",i.type=new t.ProtocolRequestType(i.method)}(Si),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeError=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.DocumentFilter=void 0,e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=void 0;const t=mi,n=di,r=vi;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return r.ImplementationRequest}});const i=Ri;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return i.TypeDefinitionRequest}});const o=Ti;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});const a=_i;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const s=Ei;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return s.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return s.ColorPresentationRequest}});const c=bi;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return c.FoldingRangeRequest}});const u=ki;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return u.DeclarationRequest}});const l=Ci;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return l.SelectionRangeRequest}});const f=Pi;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const d=xi;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return d.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return d.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return d.CallHierarchyPrepareRequest}});const p=wi;Object.defineProperty(e,"SemanticTokenTypes",{enumerable:!0,get:function(){return p.SemanticTokenTypes}}),Object.defineProperty(e,"SemanticTokenModifiers",{enumerable:!0,get:function(){return p.SemanticTokenModifiers}}),Object.defineProperty(e,"SemanticTokens",{enumerable:!0,get:function(){return p.SemanticTokens}}),Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return p.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return p.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p.SemanticTokensRegistrationType}});const h=Ai;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return h.ShowDocumentRequest}});const m=Oi;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return m.LinkedEditingRangeRequest}});const g=Ni;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return g.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return g.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return g.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return g.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return g.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return g.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return g.WillDeleteFilesRequest}});const y=Si;var v,R,T,_,E,b,k,C,P,x,w,A,O,N,S,D,I,L,M,F,q,$,j,U,W,K,G,z,B,H,V,Y,X,J,Z,Q,ee,te,ne,re;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return y.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return y.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return y.MonikerRequest}}),(v=e.DocumentFilter||(e.DocumentFilter={})).is=function(e){const n=e;return t.string(n.language)||t.string(n.scheme)||t.string(n.pattern)},(R=e.DocumentSelector||(e.DocumentSelector={})).is=function(e){if(!Array.isArray(e))return!1;for(let n of e)if(!t.string(n)&&!v.is(n))return!1;return!0},(e.RegistrationRequest||(e.RegistrationRequest={})).type=new n.ProtocolRequestType("client/registerCapability"),(e.UnregistrationRequest||(e.UnregistrationRequest={})).type=new n.ProtocolRequestType("client/unregisterCapability"),(T=e.ResourceOperationKind||(e.ResourceOperationKind={})).Create="create",T.Rename="rename",T.Delete="delete",(_=e.FailureHandlingKind||(e.FailureHandlingKind={})).Abort="abort",_.Transactional="transactional",_.TextOnlyTransactional="textOnlyTransactional",_.Undo="undo",(e.StaticRegistrationOptions||(e.StaticRegistrationOptions={})).hasId=function(e){const n=e;return n&&t.string(n.id)&&n.id.length>0},(e.TextDocumentRegistrationOptions||(e.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||R.is(t.documentSelector))},(E=e.WorkDoneProgressOptions||(e.WorkDoneProgressOptions={})).is=function(e){const n=e;return t.objectLiteral(n)&&(void 0===n.workDoneProgress||t.boolean(n.workDoneProgress))},E.hasWorkDoneProgress=function(e){const n=e;return n&&t.boolean(n.workDoneProgress)},(e.InitializeRequest||(e.InitializeRequest={})).type=new n.ProtocolRequestType("initialize"),(e.InitializeError||(e.InitializeError={})).unknownProtocolVersion=1,(e.InitializedNotification||(e.InitializedNotification={})).type=new n.ProtocolNotificationType("initialized"),(e.ShutdownRequest||(e.ShutdownRequest={})).type=new n.ProtocolRequestType0("shutdown"),(e.ExitNotification||(e.ExitNotification={})).type=new n.ProtocolNotificationType0("exit"),(e.DidChangeConfigurationNotification||(e.DidChangeConfigurationNotification={})).type=new n.ProtocolNotificationType("workspace/didChangeConfiguration"),(b=e.MessageType||(e.MessageType={})).Error=1,b.Warning=2,b.Info=3,b.Log=4,(e.ShowMessageNotification||(e.ShowMessageNotification={})).type=new n.ProtocolNotificationType("window/showMessage"),(e.ShowMessageRequest||(e.ShowMessageRequest={})).type=new n.ProtocolRequestType("window/showMessageRequest"),(e.LogMessageNotification||(e.LogMessageNotification={})).type=new n.ProtocolNotificationType("window/logMessage"),(e.TelemetryEventNotification||(e.TelemetryEventNotification={})).type=new n.ProtocolNotificationType("telemetry/event"),(k=e.TextDocumentSyncKind||(e.TextDocumentSyncKind={})).None=0,k.Full=1,k.Incremental=2,(C=e.DidOpenTextDocumentNotification||(e.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",C.type=new n.ProtocolNotificationType(C.method),(P=e.TextDocumentContentChangeEvent||(e.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},P.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(x=e.DidChangeTextDocumentNotification||(e.DidChangeTextDocumentNotification={})).method="textDocument/didChange",x.type=new n.ProtocolNotificationType(x.method),(w=e.DidCloseTextDocumentNotification||(e.DidCloseTextDocumentNotification={})).method="textDocument/didClose",w.type=new n.ProtocolNotificationType(w.method),(A=e.DidSaveTextDocumentNotification||(e.DidSaveTextDocumentNotification={})).method="textDocument/didSave",A.type=new n.ProtocolNotificationType(A.method),(O=e.TextDocumentSaveReason||(e.TextDocumentSaveReason={})).Manual=1,O.AfterDelay=2,O.FocusOut=3,(N=e.WillSaveTextDocumentNotification||(e.WillSaveTextDocumentNotification={})).method="textDocument/willSave",N.type=new n.ProtocolNotificationType(N.method),(S=e.WillSaveTextDocumentWaitUntilRequest||(e.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",S.type=new n.ProtocolRequestType(S.method),(e.DidChangeWatchedFilesNotification||(e.DidChangeWatchedFilesNotification={})).type=new n.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(D=e.FileChangeType||(e.FileChangeType={})).Created=1,D.Changed=2,D.Deleted=3,(I=e.WatchKind||(e.WatchKind={})).Create=1,I.Change=2,I.Delete=4,(e.PublishDiagnosticsNotification||(e.PublishDiagnosticsNotification={})).type=new n.ProtocolNotificationType("textDocument/publishDiagnostics"),(L=e.CompletionTriggerKind||(e.CompletionTriggerKind={})).Invoked=1,L.TriggerCharacter=2,L.TriggerForIncompleteCompletions=3,(M=e.CompletionRequest||(e.CompletionRequest={})).method="textDocument/completion",M.type=new n.ProtocolRequestType(M.method),(F=e.CompletionResolveRequest||(e.CompletionResolveRequest={})).method="completionItem/resolve",F.type=new n.ProtocolRequestType(F.method),(q=e.HoverRequest||(e.HoverRequest={})).method="textDocument/hover",q.type=new n.ProtocolRequestType(q.method),($=e.SignatureHelpTriggerKind||(e.SignatureHelpTriggerKind={})).Invoked=1,$.TriggerCharacter=2,$.ContentChange=3,(j=e.SignatureHelpRequest||(e.SignatureHelpRequest={})).method="textDocument/signatureHelp",j.type=new n.ProtocolRequestType(j.method),(U=e.DefinitionRequest||(e.DefinitionRequest={})).method="textDocument/definition",U.type=new n.ProtocolRequestType(U.method),(W=e.ReferencesRequest||(e.ReferencesRequest={})).method="textDocument/references",W.type=new n.ProtocolRequestType(W.method),(K=e.DocumentHighlightRequest||(e.DocumentHighlightRequest={})).method="textDocument/documentHighlight",K.type=new n.ProtocolRequestType(K.method),(G=e.DocumentSymbolRequest||(e.DocumentSymbolRequest={})).method="textDocument/documentSymbol",G.type=new n.ProtocolRequestType(G.method),(z=e.CodeActionRequest||(e.CodeActionRequest={})).method="textDocument/codeAction",z.type=new n.ProtocolRequestType(z.method),(B=e.CodeActionResolveRequest||(e.CodeActionResolveRequest={})).method="codeAction/resolve",B.type=new n.ProtocolRequestType(B.method),(H=e.WorkspaceSymbolRequest||(e.WorkspaceSymbolRequest={})).method="workspace/symbol",H.type=new n.ProtocolRequestType(H.method),(V=e.CodeLensRequest||(e.CodeLensRequest={})).method="textDocument/codeLens",V.type=new n.ProtocolRequestType(V.method),(Y=e.CodeLensResolveRequest||(e.CodeLensResolveRequest={})).method="codeLens/resolve",Y.type=new n.ProtocolRequestType(Y.method),(X=e.CodeLensRefreshRequest||(e.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",X.type=new n.ProtocolRequestType0(X.method),(J=e.DocumentLinkRequest||(e.DocumentLinkRequest={})).method="textDocument/documentLink",J.type=new n.ProtocolRequestType(J.method),(Z=e.DocumentLinkResolveRequest||(e.DocumentLinkResolveRequest={})).method="documentLink/resolve",Z.type=new n.ProtocolRequestType(Z.method),(Q=e.DocumentFormattingRequest||(e.DocumentFormattingRequest={})).method="textDocument/formatting",Q.type=new n.ProtocolRequestType(Q.method),(ee=e.DocumentRangeFormattingRequest||(e.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",ee.type=new n.ProtocolRequestType(ee.method),(te=e.DocumentOnTypeFormattingRequest||(e.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",te.type=new n.ProtocolRequestType(te.method),(e.PrepareSupportDefaultBehavior||(e.PrepareSupportDefaultBehavior={})).Identifier=1,(ne=e.RenameRequest||(e.RenameRequest={})).method="textDocument/rename",ne.type=new n.ProtocolRequestType(ne.method),(re=e.PrepareRenameRequest||(e.PrepareRenameRequest={})).method="textDocument/prepareRename",re.type=new n.ProtocolRequestType(re.method),(e.ExecuteCommandRequest||(e.ExecuteCommandRequest={})).type=new n.ProtocolRequestType("workspace/executeCommand"),(e.ApplyWorkspaceEditRequest||(e.ApplyWorkspaceEditRequest={})).type=new n.ProtocolRequestType("workspace/applyEdit")}(hi);var Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Di.createProtocolConnection=void 0;const Ii=Cn;Di.createProtocolConnection=function(e,t,n,r){return Ii.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Ii.createMessageConnection(e,t,n,r)},function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,r(Cn,t),r(fi,t),r(di,t),r(hi,t);var i,o=Di;Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return o.createProtocolConnection}}),(i=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,i.ContentModified=-32801,i.RequestCancelled=-32800,i.lspReservedErrorRangeEnd=-32800}(wr),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const i=xr;r(xr,t),r(wr,t),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}}(kn),Object.defineProperty(bn,"__esModule",{value:!0}),bn.SemanticTokensBuilder=bn.SemanticTokensFeature=void 0;const Li=kn;bn.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:e=>{const t=Li.SemanticTokensRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onDelta:e=>{const t=Li.SemanticTokensDeltaRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onRange:e=>{const t=Li.SemanticTokensRangeRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};bn.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,i){let o=e,a=t;this._dataLen>0&&(o-=this._prevLine,0===o&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0!==this._prevData){const e=this._prevData.length,t=this._data.length;let n=0;for(;n<t&&n<e&&this._prevData[n]===this._data[n];)n++;if(n<t&&n<e){let r=0;for(;r<t&&r<e&&this._prevData[e-1-r]===this._data[t-1-r];)r++;const i=this._data.slice(n,t-r);return{resultId:this.id,edits:[{start:n,deleteCount:e-r-n,data:i}]}}return n<t?{resultId:this.id,edits:[{start:n,deleteCount:0,data:this._data.slice(n)}]}:n<e?{resultId:this.id,edits:[{start:n,deleteCount:e-n}]}:{resultId:this.id,edits:[]}}return this.build()}};var Mi={},Fi={};function qi(e){return"string"==typeof e||e instanceof String}function $i(e){return"function"==typeof e}function ji(e){return Array.isArray(e)}Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.thenable=Fi.typedArray=Fi.stringArray=Fi.array=Fi.func=Fi.error=Fi.number=Fi.string=Fi.boolean=void 0,Fi.boolean=function(e){return!0===e||!1===e},Fi.string=qi,Fi.number=function(e){return"number"==typeof e||e instanceof Number},Fi.error=function(e){return e instanceof Error},Fi.func=$i,Fi.array=ji,Fi.stringArray=function(e){return ji(e)&&e.every((e=>qi(e)))},Fi.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},Fi.thenable=function(e){return e&&$i(e.then)};var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.generateUuid=Ui.parse=Ui.isUUID=Ui.v4=Ui.empty=void 0;class Wi{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class Ki extends Wi{constructor(){super([Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),"-",Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),"-","4",Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),"-",Ki._oneOf(Ki._timeHighBits),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),"-",Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex(),Ki._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Ki._oneOf(Ki._chars)}}function Gi(){return new Ki}Ki._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],Ki._timeHighBits=["8","9","a","b"],Ui.empty=new Wi("00000000-0000-0000-0000-000000000000"),Ui.v4=Gi;const zi=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Bi(e){return zi.test(e)}Ui.isUUID=Bi,Ui.parse=function(e){if(!Bi(e))throw new Error("invalid uuid");return new Wi(e)},Ui.generateUuid=function(){return Gi().asHex()};var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.attachPartialResult=Hi.ProgressFeature=Hi.attachWorkDone=void 0;const Vi=kn,Yi=Ui;class Xi{constructor(e,t){this._connection=e,this._token=t,Xi.Instances.set(this._token,this)}begin(e,t,n,r){let i={kind:"begin",title:e,percentage:t,message:n,cancellable:r};this._connection.sendProgress(Vi.WorkDoneProgress.type,this._token,i)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(Vi.WorkDoneProgress.type,this._token,n)}done(){Xi.Instances.delete(this._token),this._connection.sendProgress(Vi.WorkDoneProgress.type,this._token,{kind:"end"})}}Xi.Instances=new Map;class Ji extends Xi{constructor(e,t){super(e,t),this._source=new Vi.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class Zi{constructor(){}begin(){}report(){}done(){}}class Qi extends Zi{constructor(){super(),this._source=new Vi.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}Hi.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new Zi;const n=t.workDoneToken;return delete t.workDoneToken,new Xi(e,n)};var eo;Hi.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){var t;!0===(null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(Vi.WorkDoneProgressCancelNotification.type,(e=>{let t=Xi.Instances.get(e.token);(t instanceof Ji||t instanceof Qi)&&t.cancel()})))}attachWorkDoneProgress(e){return void 0===e?new Zi:new Xi(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=Yi.generateUuid();return this.connection.sendRequest(Vi.WorkDoneProgressCreateRequest.type,{token:e}).then((()=>new Ji(this.connection,e)))}return Promise.resolve(new Qi)}},(eo||(eo={})).type=new Vi.ProgressType;class to{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(eo.type,this._token,e)}}Hi.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new to(e,n)};var no={};Object.defineProperty(no,"__esModule",{value:!0}),no.ConfigurationFeature=void 0;const ro=kn,io=Fi;no.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?io.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(ro.ConfigurationRequest.type,t).then((t=>Array.isArray(e)?t:t[0]))}};var oo={};Object.defineProperty(oo,"__esModule",{value:!0}),oo.WorkspaceFoldersFeature=void 0;const ao=kn;oo.WorkspaceFoldersFeature=e=>class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new ao.Emitter,this.connection.onNotification(ao.DidChangeWorkspaceFoldersNotification.type,(e=>{this._onDidChangeWorkspaceFolders.fire(e.event)})))}getWorkspaceFolders(){return this.connection.sendRequest(ao.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(ao.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};var so={};Object.defineProperty(so,"__esModule",{value:!0}),so.CallHierarchyFeature=void 0;const co=kn;so.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(co.CallHierarchyPrepareRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))},onIncomingCalls:e=>{const t=co.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onOutgoingCalls:e=>{const t=co.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};var uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.ShowDocumentFeature=void 0;const lo=kn;uo.ShowDocumentFeature=e=>class extends e{showDocument(e){return this.connection.sendRequest(lo.ShowDocumentRequest.type,e)}};var fo={};Object.defineProperty(fo,"__esModule",{value:!0}),fo.FileOperationsFeature=void 0;const po=kn;fo.FileOperationsFeature=e=>class extends e{onDidCreateFiles(e){this.connection.onNotification(po.DidCreateFilesNotification.type,(t=>{e(t)}))}onDidRenameFiles(e){this.connection.onNotification(po.DidRenameFilesNotification.type,(t=>{e(t)}))}onDidDeleteFiles(e){this.connection.onNotification(po.DidDeleteFilesNotification.type,(t=>{e(t)}))}onWillCreateFiles(e){return this.connection.onRequest(po.WillCreateFilesRequest.type,((t,n)=>e(t,n)))}onWillRenameFiles(e){return this.connection.onRequest(po.WillRenameFilesRequest.type,((t,n)=>e(t,n)))}onWillDeleteFiles(e){return this.connection.onRequest(po.WillDeleteFilesRequest.type,((t,n)=>e(t,n)))}};var ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.LinkedEditingRangeFeature=void 0;const mo=kn;ho.LinkedEditingRangeFeature=e=>class extends e{onLinkedEditingRange(e){this.connection.onRequest(mo.LinkedEditingRangeRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))}};var go={};Object.defineProperty(go,"__esModule",{value:!0}),go.MonikerFeature=void 0;const yo=kn;go.MonikerFeature=e=>class extends e{get moniker(){return{on:e=>{const t=yo.MonikerRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=e.combineFeatures=e.combineLanguagesFeatures=e.combineWorkspaceFeatures=e.combineWindowFeatures=e.combineClientFeatures=e.combineTracerFeatures=e.combineTelemetryFeatures=e.combineConsoleFeatures=e._LanguagesImpl=e.BulkUnregistration=e.BulkRegistration=e.ErrorMessageTracker=e.TextDocuments=void 0;const t=kn,n=Fi,r=Ui,i=Hi,o=no,a=oo,s=so,c=bn,u=uo,l=fo,f=ho,d=go;function p(e){if(null!==e)return e}e.TextDocuments=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map((e=>this._documents[e]))}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=t.TextDocumentSyncKind.Full,e.onDidOpenTextDocument((e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=n;let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)})),e.onDidChangeTextDocument((e=>{let t=e.textDocument,n=e.contentChanges;if(0===n.length)return;let r=this._documents[t.uri];const{version:i}=t;if(null==i)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);r=this._configuration.update(r,n,i),this._documents[t.uri]=r,this._onDidChangeContent.fire(Object.freeze({document:r}))})),e.onDidCloseTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))})),e.onWillSaveTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))})),e.onWillSaveTextDocumentWaitUntil(((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]})),e.onDidSaveTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))}))}};e.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach((t=>{e.window.showErrorMessage(t)}))}};class h{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(t.MessageType.Error,e)}warn(e){this.send(t.MessageType.Warning,e)}info(e){this.send(t.MessageType.Info,e)}log(e){this.send(t.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:e,message:n})}}const m=u.ShowDocumentFeature(i.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(p)}showWarningMessage(e,...n){let r={type:t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(p)}showInformationMessage(e,...n){let r={type:t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(p)}}));(e.BulkRegistration||(e.BulkRegistration={})).create=function(){return new g};class g{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const i=n.string(e)?e:e.method;if(this._registered.has(i))throw new Error(`${i} is already added to this registration`);const o=r.generateUuid();this._registrations.push({id:o,method:i,registerOptions:t||{}}),this._registered.add(i)}asRegistrationParams(){return{registrations:this._registrations}}}(e.BulkUnregistration||(e.BulkUnregistration={})).create=function(){return new y(void 0,[])};class y{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach((e=>{this._unregistrations.set(e.method,e)}))}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let n={unregisterations:e};this._connection.sendRequest(t.UnregistrationRequest.type,n).then(void 0,(e=>{this._connection.console.info("Bulk unregistration failed.")}))}disposeSingle(e){const r=n.string(e)?e:e.method,i=this._unregistrations.get(r);if(!i)return!1;let o={unregisterations:[i]};return this._connection.sendRequest(t.UnregistrationRequest.type,o).then((()=>{this._unregistrations.delete(r)}),(e=>{this._connection.console.info(`Un-registering request handler for ${i.id} failed.`)})),!0}}class v{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof g?this.registerMany(e):e instanceof y?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,i,o){const a=n.string(i)?i:i.method,s=r.generateUuid();let c={registrations:[{id:s,method:a,registerOptions:o||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,c).then((t=>(e.add({id:s,method:a}),e)),(e=>(this.connection.console.info(`Registering request handler for ${a} failed.`),Promise.reject(e))))}registerSingle2(e,i){const o=n.string(e)?e:e.method,a=r.generateUuid();let s={registrations:[{id:a,method:o,registerOptions:i||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,s).then((e=>t.Disposable.create((()=>{this.unregisterSingle(a,o)}))),(e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e))))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(t.UnregistrationRequest.type,r).then(void 0,(t=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)}))}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,n).then((()=>new y(this._connection,n.registrations.map((e=>({id:e.id,method:e.method}))))),(e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e))))}}const R=l.FileOperationsFeature(a.WorkspaceFoldersFeature(o.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let n=(r=e)&&r.edit?e:{edit:e};var r;return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,n)}})));class T{constructor(){this._trace=t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:e,verbose:this._trace===t.Trace.Verbose?n:void 0})}}class _{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(t.TelemetryEventNotification.type,e)}}class E{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return i.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return i.attachPartialResult(this.connection,t)}}e._LanguagesImpl=E;const b=d.MonikerFeature(f.LinkedEditingRangeFeature(c.SemanticTokensFeature(s.CallHierarchyFeature(E))));function k(e,t){return function(n){return t(e(n))}}function C(e,t){return function(n){return t(e(n))}}function P(e,t){return function(n){return t(e(n))}}function x(e,t){return function(n){return t(e(n))}}function w(e,t){return function(n){return t(e(n))}}function A(e,t){return function(n){return t(e(n))}}e.combineConsoleFeatures=k,e.combineTelemetryFeatures=C,e.combineTracerFeatures=P,e.combineClientFeatures=x,e.combineWindowFeatures=w,e.combineWorkspaceFeatures=A,e.combineLanguagesFeatures=function(e,t){return function(n){return t(e(n))}},e.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,k),tracer:n(e.tracer,t.tracer,P),telemetry:n(e.telemetry,t.telemetry,C),client:n(e.client,t.client,x),window:n(e.window,t.window,w),workspace:n(e.workspace,t.workspace,A)}},e.createConnection=function(e,r,o){const a=o&&o.console?new(o.console(h)):new h,s=e(a);a.rawAttach(s);const c=o&&o.tracer?new(o.tracer(T)):new T,u=o&&o.telemetry?new(o.telemetry(_)):new _,l=o&&o.client?new(o.client(v)):new v,f=o&&o.window?new(o.window(m)):new m,d=o&&o.workspace?new(o.workspace(R)):new R,p=o&&o.languages?new(o.languages(b)):new b,g=[a,c,u,l,f,d,p];function y(e){return e instanceof Promise?e:n.thenable(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}let E,k,C,P={listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(n.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(e,t),sendNotification:(e,t)=>{const r=n.string(e)?e:e.method;1===arguments.length?s.sendNotification(r):s.sendNotification(r,t)},onNotification:(e,t)=>s.onNotification(e,t),onProgress:s.onProgress,sendProgress:s.sendProgress,onInitialize:e=>k=e,onInitialized:e=>s.onNotification(t.InitializedNotification.type,e),onShutdown:e=>E=e,onExit:e=>C=e,get console(){return a},get telemetry(){return u},get tracer(){return c},get client(){return l},get window(){return f},get workspace(){return d},get languages(){return p},onDidChangeConfiguration:e=>s.onNotification(t.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>s.onNotification(t.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>s.onNotification(t.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>s.onNotification(t.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>s.onNotification(t.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>s.onNotification(t.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>s.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>s.onNotification(t.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>s.sendNotification(t.PublishDiagnosticsNotification.type,e),onHover:e=>s.onRequest(t.HoverRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),void 0))),onCompletion:e=>s.onRequest(t.CompletionRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onCompletionResolve:e=>s.onRequest(t.CompletionResolveRequest.type,e),onSignatureHelp:e=>s.onRequest(t.SignatureHelpRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),void 0))),onDeclaration:e=>s.onRequest(t.DeclarationRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onDefinition:e=>s.onRequest(t.DefinitionRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onTypeDefinition:e=>s.onRequest(t.TypeDefinitionRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onImplementation:e=>s.onRequest(t.ImplementationRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onReferences:e=>s.onRequest(t.ReferencesRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onDocumentHighlight:e=>s.onRequest(t.DocumentHighlightRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onDocumentSymbol:e=>s.onRequest(t.DocumentSymbolRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onWorkspaceSymbol:e=>s.onRequest(t.WorkspaceSymbolRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onCodeAction:e=>s.onRequest(t.CodeActionRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onCodeActionResolve:e=>s.onRequest(t.CodeActionResolveRequest.type,((t,n)=>e(t,n))),onCodeLens:e=>s.onRequest(t.CodeLensRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onCodeLensResolve:e=>s.onRequest(t.CodeLensResolveRequest.type,((t,n)=>e(t,n))),onDocumentFormatting:e=>s.onRequest(t.DocumentFormattingRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),void 0))),onDocumentRangeFormatting:e=>s.onRequest(t.DocumentRangeFormattingRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),void 0))),onDocumentOnTypeFormatting:e=>s.onRequest(t.DocumentOnTypeFormattingRequest.type,((t,n)=>e(t,n))),onRenameRequest:e=>s.onRequest(t.RenameRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),void 0))),onPrepareRename:e=>s.onRequest(t.PrepareRenameRequest.type,((t,n)=>e(t,n))),onDocumentLinks:e=>s.onRequest(t.DocumentLinkRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onDocumentLinkResolve:e=>s.onRequest(t.DocumentLinkResolveRequest.type,((t,n)=>e(t,n))),onDocumentColor:e=>s.onRequest(t.DocumentColorRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onColorPresentation:e=>s.onRequest(t.ColorPresentationRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onFoldingRanges:e=>s.onRequest(t.FoldingRangeRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onSelectionRanges:e=>s.onRequest(t.SelectionRangeRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),i.attachPartialResult(s,t)))),onExecuteCommand:e=>s.onRequest(t.ExecuteCommandRequest.type,((t,n)=>e(t,n,i.attachWorkDone(s,t),void 0))),dispose:()=>s.dispose()};for(let t of g)t.attach(P);return s.onRequest(t.InitializeRequest.type,(e=>{r.initialize(e),n.string(e.trace)&&(c.trace=t.Trace.fromString(e.trace));for(let t of g)t.initialize(e.capabilities);if(k){return y(k(e,(new t.CancellationTokenSource).token,i.attachWorkDone(s,e),void 0)).then((e=>{if(e instanceof t.ResponseError)return e;let r=e;r||(r={capabilities:{}});let i=r.capabilities;i||(i={},r.capabilities=i),void 0===i.textDocumentSync||null===i.textDocumentSync?i.textDocumentSync=n.number(P.__textDocumentSync)?P.__textDocumentSync:t.TextDocumentSyncKind.None:n.number(i.textDocumentSync)||n.number(i.textDocumentSync.change)||(i.textDocumentSync.change=n.number(P.__textDocumentSync)?P.__textDocumentSync:t.TextDocumentSyncKind.None);for(let t of g)t.fillServerCapabilities(i);return r}))}{let e={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let t of g)t.fillServerCapabilities(e.capabilities);return e}})),s.onRequest(t.ShutdownRequest.type,(()=>(r.shutdownReceived=!0,E?E((new t.CancellationTokenSource).token):void 0))),s.onNotification(t.ExitNotification.type,(()=>{try{C&&C()}finally{r.shutdownReceived?r.exit(0):r.exit(1)}})),s.onNotification(t.SetTraceNotification.type,(e=>{c.trace=t.Trace.fromString(e.value)})),P}}(Mi),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.SemanticTokensBuilder=void 0;const i=bn;Object.defineProperty(t,"SemanticTokensBuilder",{enumerable:!0,get:function(){return i.SemanticTokensBuilder}}),r(kn,t),r(Mi,t),(t.ProposedFeatures||(t.ProposedFeatures={})).all={__brand:"features"}}(En);var vo=kn;!function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=void 0;const i=En;r(vo,t),r(En,t);let o=!1;const a={initialize:e=>{},get shutdownReceived(){return o},set shutdownReceived(e){o=e},exit:e=>{}};t.createConnection=function(e,t,n,r){let o,s,c,u;return void 0!==e&&"features"===e.__brand&&(o=e,e=t,t=n,n=r),i.ConnectionStrategy.is(e)||i.ConnectionOptions.is(e)?u=e:(s=e,c=t,u=n),i.createConnection((e=>i.createProtocolConnection(s,c,e,u)),a,o)}}(_n);var Ro,To={};Ro=(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=s,a=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=s,a=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,s):r=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=process.cwd()),a=e),t(a),0!==a.length&&(r=a+"/"+r,i=47===a.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var c=n.length-s,u=a<c?a:c,l=-1,f=0;f<=u;++f){if(f===u){if(c>u){if(47===n.charCodeAt(s+f))return n.slice(s+f+1);if(0===f)return n.slice(s+f)}else a>u&&(47===e.charCodeAt(i+f)?l=f:0===f&&(l=0));break}var d=e.charCodeAt(i+f);if(d!==n.charCodeAt(s+f))break;47===d&&(l=f)}var p="";for(f=i+l+1;f<=o;++f)f!==o&&47!==e.charCodeAt(f)||(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(s+l):(s+=l,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(n=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,o=-1,a=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var s=n.length-1,c=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!a){i=r+1;break}}else-1===c&&(a=!1,c=r+1),s>=0&&(u===n.charCodeAt(s)?-1==--s&&(o=r):(s=-1,o=c))}return i===o?o=c:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){i=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(47!==c)-1===i&&(o=!1,i=s+1),46===c?-1===n?n=s:1!==a&&(a=1):-1!==n&&(a=-1);else if(!o){r=s+1;break}}return-1===n||-1===i||0===a||1===a&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return n=(t=e).dir||t.root,r=t.base||(t.name||"")+(t.ext||""),n?n===t.root?n+r:n+"/"+r:r;var t,n,r},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var a=-1,s=0,c=-1,u=!0,l=e.length-1,f=0;l>=r;--l)if(47!==(i=e.charCodeAt(l)))-1===c&&(u=!1,c=l+1),46===i?-1===a?a=l:1!==f&&(f=1):-1!==a&&(f=-1);else if(!u){s=l+1;break}return-1===a||-1===c||0===f||1===f&&a===c-1&&a===s+1?-1!==c&&(n.base=n.name=0===s&&o?e.slice(1,c):e.slice(s,c)):(0===s&&o?(n.name=e.slice(1,a),n.base=e.slice(1,c)):(n.name=e.slice(s,a),n.base=e.slice(s,c)),n.ext=e.slice(a,c)),s>0?n.dir=e.slice(0,s-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},447:(e,t,n)=>{var r;if(n.r(t),n.d(t,{URI:()=>h,Utils:()=>C}),"object"==typeof process)r="win32"===process.platform;else if("object"==typeof navigator){var i=navigator.userAgent;r=i.indexOf("Windows")>=0}var o,a,s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=/^\w[\w\d+.-]*$/,u=/^\//,l=/^\/\//,f="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,h=function(){function e(e,t,n,r,i,o){var a,s;void 0===o&&(o=!1),"object"==typeof e?(this.scheme=e.scheme||f,this.authority=e.authority||f,this.path=e.path||f,this.query=e.query||f,this.fragment=e.fragment||f):(this.scheme=(s=o,(a=e)||s?a:"file"),this.authority=t||f,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==d&&(t=d+t):t=d}return t}(this.scheme,n||f),this.query=r||f,this.fragment=i||f,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!u.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return T(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,r=e.path,i=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=f),void 0===n?n=this.authority:null===n&&(n=f),void 0===r?r=this.path:null===r&&(r=f),void 0===i?i=this.query:null===i&&(i=f),void 0===o?o=this.fragment:null===o&&(o=f),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&o===this.fragment?this:new g(t,n,r,i,o)},e.parse=function(e,t){void 0===t&&(t=!1);var n=p.exec(e);return n?new g(n[2]||f,k(n[4]||f),k(n[5]||f),k(n[7]||f),k(n[9]||f),t):new g(f,f,f,f,f)},e.file=function(e){var t=f;if(r&&(e=e.replace(/\\/g,d)),e[0]===d&&e[1]===d){var n=e.indexOf(d,2);-1===n?(t=e.substring(2),e=d):(t=e.substring(2,n),e=e.substring(n)||d)}return new g("file",t,e,f,f)},e.from=function(e){return new g(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),_(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new g(t);return n._formatted=t.external,n._fsPath=t._sep===m?t.fsPath:null,n}return t},e}(),m=r?1:void 0,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return s(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=T(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=m),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(h),y=((a={})[58]="%3A",a[47]="%2F",a[63]="%3F",a[35]="%23",a[91]="%5B",a[93]="%5D",a[64]="%40",a[33]="%21",a[36]="%24",a[38]="%26",a[39]="%27",a[40]="%28",a[41]="%29",a[42]="%2A",a[43]="%2B",a[44]="%2C",a[59]="%3B",a[61]="%3D",a[32]="%20",a);function v(e,t){for(var n=void 0,r=-1,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),void 0!==n&&(n+=e.charAt(i));else{void 0===n&&(n=e.substr(0,i));var a=y[o];void 0!==a?(-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n+=a):-1===r&&(r=i)}}return-1!==r&&(n+=encodeURIComponent(e.substring(r))),void 0!==n?n:e}function R(e){for(var t=void 0,n=0;n<e.length;n++){var r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=y[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function T(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,r&&(n=n.replace(/\//g,"\\")),n}function _(e,t){var n=t?R:v,r="",i=e.scheme,o=e.authority,a=e.path,s=e.query,c=e.fragment;if(i&&(r+=i,r+=":"),(o||"file"===i)&&(r+=d,r+=d),o){var u=o.indexOf("@");if(-1!==u){var l=o.substr(0,u);o=o.substr(u+1),-1===(u=l.indexOf(":"))?r+=n(l,!1):(r+=n(l.substr(0,u),!1),r+=":",r+=n(l.substr(u+1),!1)),r+="@"}-1===(u=(o=o.toLowerCase()).indexOf(":"))?r+=n(o,!1):(r+=n(o.substr(0,u),!1),r+=o.substr(u))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2))(f=a.charCodeAt(1))>=65&&f<=90&&(a="/"+String.fromCharCode(f+32)+":"+a.substr(3));else if(a.length>=2&&58===a.charCodeAt(1)){var f;(f=a.charCodeAt(0))>=65&&f<=90&&(a=String.fromCharCode(f+32)+":"+a.substr(2))}r+=n(a,!0)}return s&&(r+="?",r+=n(s,!1)),c&&(r+="#",r+=t?c:v(c,!1)),r}function E(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+E(e.substr(3)):e}}var b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function k(e){return e.match(b)?e.replace(b,(function(e){return E(e)})):e}var C,P,x=n(470),w=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},A=x.posix||x;(P=C||(C={})).joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:A.join.apply(A,w([e.path],t))})},P.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.path||"/";return e.with({path:A.resolve.apply(A,w([r],t))})},P.dirname=function(e){var t=A.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)?e:e.with({path:t})},P.basename=function(e){return A.basename(e.path)},P.extname=function(e){return A.extname(e.path)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(447)})();const{URI:_o,Utils:Eo}=Ro;class bo{constructor(e,t){this.startFn=e,this.nextFn=t}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let t=0,n=e.next();for(;!n.done;)t++,n=e.next();return t}toArray(){const e=[],t=this.iterator();let n;do{n=t.next(),void 0!==n.value&&e.push(n.value)}while(!n.done);return e}toSet(){return new Set(this)}toMap(e,t){const n=this.map((n=>[e?e(n):n,t?t(n):n]));return new Map(n)}toString(){return this.join()}concat(e){const t=e[Symbol.iterator]();return new bo((()=>({first:this.startFn(),firstDone:!1})),(e=>{let n;if(!e.firstDone){do{if(n=this.nextFn(e.first),!n.done)return n}while(!n.done);e.firstDone=!0}do{if(n=t.next(),!n.done)return n}while(!n.done);return xo}))}join(e=","){const t=this.iterator();let n,r="",i=!1;do{n=t.next(),n.done||(i&&(r+=e),r+=ko(n.value)),i=!0}while(!n.done);return r}indexOf(e,t=0){const n=this.iterator();let r=0,i=n.next();for(;!i.done;){if(r>=t&&i.value===e)return r;i=n.next(),r++}return-1}every(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(!e(n.value))return!1;n=t.next()}return!0}some(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(e(n.value))return!0;n=t.next()}return!1}forEach(e){const t=this.iterator();let n=0,r=t.next();for(;!r.done;)e(r.value,n),r=t.next(),n++}map(e){return new bo(this.startFn,(t=>{const{done:n,value:r}=this.nextFn(t);return n?xo:{done:!1,value:e(r)}}))}filter(e){return new bo(this.startFn,(t=>{let n;do{if(n=this.nextFn(t),!n.done&&e(n.value))return n}while(!n.done);return xo}))}reduce(e,t){const n=this.iterator();let r=t,i=n.next();for(;!i.done;)r=void 0===r?i.value:e(r,i.value),i=n.next();return r}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(e,t,n){const r=e.next();if(r.done)return n;const i=this.recursiveReduce(e,t,n);return void 0===i?r.value:t(i,r.value)}find(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(e(n.value))return n.value;n=t.next()}}findIndex(e){const t=this.iterator();let n=0,r=t.next();for(;!r.done;){if(e(r.value))return n;r=t.next(),n++}return-1}includes(e){const t=this.iterator();let n=t.next();for(;!n.done;){if(n.value===e)return!0;n=t.next()}return!1}flatMap(e){return new bo((()=>({this:this.startFn()})),(t=>{do{if(t.iterator){const e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}const{done:n,value:r}=this.nextFn(t.this);if(!n){const n=e(r);if(!Co(n))return{done:!1,value:n};t.iterator=n[Symbol.iterator]()}}while(t.iterator);return xo}))}flat(e=1){if(e<=0)return this;const t=e>1?this.flat(e-1):this;return new bo((()=>({this:t.startFn()})),(e=>{do{if(e.iterator){const t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}const{done:n,value:r}=t.nextFn(e.this);if(!n){if(!Co(r))return{done:!1,value:r};e.iterator=r[Symbol.iterator]()}}while(e.iterator);return xo}))}head(){const e=this.iterator().next();if(!e.done)return e.value}tail(e=1){return new bo((()=>{const t=this.startFn();for(let n=0;n<e;n++){if(this.nextFn(t).done)return t}return t}),this.nextFn)}limit(e){return new bo((()=>({size:0,state:this.startFn()})),(t=>(t.size++,t.size>e?xo:this.nextFn(t.state))))}distinct(e){const t=new Set;return this.filter((n=>{const r=e?e(n):n;return!t.has(r)&&(t.add(r),!0)}))}}function ko(e){return"string"==typeof e?e:void 0===e?"undefined":"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function Co(e){return!!e&&"function"==typeof e[Symbol.iterator]}const Po=new bo((()=>{}),(()=>xo)),xo=Object.freeze({done:!0,value:void 0});function wo(...e){if(1===e.length){const t=e[0];if(t instanceof bo)return t;if(Co(t))return new bo((()=>t[Symbol.iterator]()),(e=>e.next()));if("number"==typeof t.length)return new bo((()=>({index:0})),(e=>e.index<t.length?{done:!1,value:t[e.index++]}:xo))}return e.length>1?new bo((()=>({collIndex:0,arrIndex:0})),(t=>{do{if(t.iterator){const e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}if(t.array){if(t.arrIndex<t.array.length)return{done:!1,value:t.array[t.arrIndex++]};t.array=void 0,t.arrIndex=0}if(t.collIndex<e.length){const n=e[t.collIndex++];Co(n)?t.iterator=n[Symbol.iterator]():n&&"number"==typeof n.length&&(t.array=n)}}while(t.iterator||t.array||t.collIndex<e.length);return xo})):Po}class Ao extends bo{constructor(e,t){super((()=>({iterators:[t(e)[Symbol.iterator]()],pruned:!1})),(e=>{for(e.pruned&&(e.iterators.pop(),e.pruned=!1);e.iterators.length>0;){const n=e.iterators[e.iterators.length-1].next();if(!n.done)return e.iterators.push(t(n.value)[Symbol.iterator]()),n;e.iterators.pop()}return xo}))}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}var Oo,No;function So(e,t){const n={parseResult:t,textDocument:e,uri:_o.parse(e.uri),state:1,references:[]};return t.value.$document=n,n}(No=Oo||(Oo={}))[No.Changed=0]="Changed",No[No.Parsed=1]="Parsed",No[No.Indexed=2]="Indexed",No[No.Processed=3]="Processed",No[No.Linked=4]="Linked",No[No.Validated=5]="Validated";class Do{constructor(e){this.languageMetaData=e.LanguageMetaData}fromUri(e){const t=To.readFileSync(e.fsPath,"utf-8");return pn.create(e.toString(),this.languageMetaData.languageId,0,t)}}class Io{constructor(e){this.parser=e.parser.LangiumParser}fromTextDocument(e){return So(e,this.parser.parse(e.getText()))}}class Lo{constructor(e){this.documentMap=new Map,this.textDocuments=e.documents.TextDocuments,this.textDocumentFactory=e.documents.TextDocumentFactory,this.langiumDocumentFactory=e.documents.LangiumDocumentFactory}get all(){return wo(this.documentMap.values())}getOrCreateDocument(e){const t=e.toString();let n=this.documentMap.get(t);if(n)return n;let r=this.textDocuments.get(t);return r||(r=this.textDocumentFactory.fromUri(e)),n=this.langiumDocumentFactory.fromTextDocument(r),this.documentMap.set(t,n),n}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){const t=e.toString(),n=this.documentMap.get(t);n&&(n.state=0,this.documentMap.delete(t))}}let Mo=0;const Fo=Symbol("OperationCancelled");async function qo(e){if(e===Cn.CancellationToken.None)return;const t=Date.now();if(t-Mo>=10&&(Mo=t,await new Promise((e=>{setImmediate(e)}))),e.isCancellationRequested)throw Fo}class $o{constructor(e){this.connection=e.lsp.Connection,this.linker=e.references.Linker,this.scopeComputation=e.references.ScopeComputation,this.documentValidator=e.validation.DocumentValidator,this.langiumDocuments=e.documents.LangiumDocuments,this.indexManager=e.index.IndexManager}async build(e,t=_n.CancellationToken.None){return await this.buildDocuments([e],t),{document:e,diagnostics:await this.validate(e,t,!0)}}async validate(e,t=_n.CancellationToken.None,n=!1){let r=[];const i=this.documentValidator;return(this.connection||n)&&(r=await i.validateDocument(e,t),this.connection&&this.connection.sendDiagnostics({uri:e.textDocument.uri,diagnostics:r}),e.state=Oo.Validated),r}async update(e,t,n=_n.CancellationToken.None){for(const o of t)this.langiumDocuments.invalidateDocument(o);this.indexManager.remove(t);for(const o of e)this.langiumDocuments.invalidateDocument(o);await qo(n);const r=e.map((e=>this.langiumDocuments.getOrCreateDocument(e))),i=this.collectDocuments(r,t);await this.buildDocuments(i,n)}collectDocuments(e,t){const n=e.map((e=>e.uri)).concat(t),r=this.indexManager.getAffectedDocuments(n).toArray();r.forEach((e=>{this.linker.unlink(e),e.state=Oo.Indexed}));const i=new Set([...e,...r,...this.langiumDocuments.all.filter((e=>e.state<Oo.Validated))]);return Array.from(i)}async buildDocuments(e,t){await this.indexManager.update(e.filter((e=>e.state<Oo.Indexed)),t),await this.runCancelable(e,Oo.Processed,t,(e=>this.process(e,t))),await this.runCancelable(e,Oo.Linked,t,(e=>this.linker.link(e,t))),await this.runCancelable(e,Oo.Validated,t,(e=>this.validate(e,t)))}async runCancelable(e,t,n,r){for(const i of e.filter((e=>e.state<t)))await qo(n),await r(i)}async process(e,t){e.precomputedScopes=await this.scopeComputation.computeScope(e,t),e.state=Oo.Processed}}var jo={exports:{}};!function(t){var n,r;n="undefined"!=typeof self?self:e,r=function(){function e(){}e.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},e.prototype.restoreState=function(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx},e.prototype.pattern=function(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");var t=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":s(n,"global");break;case"i":s(n,"ignoreCase");break;case"m":s(n,"multiLine");break;case"u":s(n,"unicode");break;case"y":s(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:t,loc:this.loc(0)}},e.prototype.disjunction=function(){var e=[],t=this.idx;for(e.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}},e.prototype.alternative=function(){for(var e=[],t=this.idx;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}},e.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},e.prototype.assertion=function(){var e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":var t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}c(t);var n=this.disjunction();return this.consumeChar(")"),{type:t,value:n,loc:this.loc(e)}}!function(){throw Error("Internal Error - Should never get here!")}()},e.prototype.quantifier=function(e){var t,n=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":var r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":t=this.isDigit()?{atLeast:r,atMost:this.integerIncludingZero()}:{atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===e&&void 0===t)return;c(t)}if(!0!==e||void 0!==t)return c(t),"?"===this.peekChar(0)?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(n),t},e.prototype.atom=function(){var e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}return void 0===e&&this.isPatternCharacter()&&(e=this.patternCharacter()),c(e),e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e},e.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[o("\n"),o("\r"),o("\u2028"),o("\u2029")]}},e.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},e.prototype.characterClassEscape=function(){var e,t=!1;switch(this.popChar()){case"d":e=u;break;case"D":e=u,t=!0;break;case"s":e=f;break;case"S":e=f,t=!0;break;case"w":e=l;break;case"W":e=l,t=!0}return c(e),{type:"Set",value:e,complement:t}},e.prototype.controlEscapeAtom=function(){var e;switch(this.popChar()){case"f":e=o("\f");break;case"n":e=o("\n");break;case"r":e=o("\r");break;case"t":e=o("\t");break;case"v":e=o("\v")}return c(e),{type:"Character",value:e}},e.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var e=this.popChar();if(!1===/[a-zA-Z]/.test(e))throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}},e.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:o("\0")}},e.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},e.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},e.prototype.identityEscapeAtom=function(){return{type:"Character",value:o(this.popChar())}},e.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:o(this.popChar())}}},e.prototype.characterClass=function(){var e=[],t=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),t=!0);this.isClassAtom();){var n=this.classAtom();if("Character"===n.type&&this.isRangeDash()){this.consumeChar("-");var r=this.classAtom();if("Character"===r.type){if(r.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:r.value})}else a(n.value,e),e.push(o("-")),a(r.value,e)}else a(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}},e.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},e.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:o("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.group=function(){var e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++}var t=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:e,value:t};return e&&(n.idx=this.groupIdx),n},e.prototype.positiveInteger=function(){var e=this.popChar();if(!1===i.test(e))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},e.prototype.integerIncludingZero=function(){var e=this.popChar();if(!1===r.test(e))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)},e.prototype.patternCharacter=function(){var e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:o(e)}}},e.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},e.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},e.prototype.isDigit=function(){return r.test(this.peekChar(0))},e.prototype.isClassAtom=function(e){switch(void 0===e&&(e=0),this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},e.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},e.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},e.prototype.isQuantifier=function(){var e=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(e)}},e.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.parseHexDigits=function(e){for(var t="",r=0;r<e;r++){var i=this.popChar();if(!1===n.test(i))throw Error("Expecting a HexDecimal digits");t+=i}return{type:"Character",value:parseInt(t,16)}},e.prototype.peekChar=function(e){return void 0===e&&(e=0),this.input[this.idx+e]},e.prototype.popChar=function(){var e=this.peekChar(0);return this.consumeChar(),e},e.prototype.consumeChar=function(e){if(void 0!==e&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},e.prototype.loc=function(e){return{begin:e,end:this.idx}};var t,n=/[0-9a-fA-F]/,r=/[0-9]/,i=/[1-9]/;function o(e){return e.charCodeAt(0)}function a(e,t){void 0!==e.length?e.forEach((function(e){t.push(e)})):t.push(e)}function s(e,t){if(!0===e[t])throw"duplicate flag "+t;e[t]=!0}function c(e){if(void 0===e)throw Error("Internal Error - Should never get here!")}var u=[];for(t=o("0");t<=o("9");t++)u.push(t);var l=[o("_")].concat(u);for(t=o("a");t<=o("z");t++)l.push(t);for(t=o("A");t<=o("Z");t++)l.push(t);var f=[o(" "),o("\f"),o("\n"),o("\r"),o("\t"),o("\v"),o("\t"),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o(" "),o("\u2028"),o("\u2029"),o(" "),o(" "),o("　"),o("\ufeff")];function d(){}return d.prototype.visitChildren=function(e){for(var t in e){var n=e[t];e.hasOwnProperty(t)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((function(e){this.visit(e)}),this))}},d.prototype.visit=function(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)},d.prototype.visitPattern=function(e){},d.prototype.visitFlags=function(e){},d.prototype.visitDisjunction=function(e){},d.prototype.visitAlternative=function(e){},d.prototype.visitStartAnchor=function(e){},d.prototype.visitEndAnchor=function(e){},d.prototype.visitWordBoundary=function(e){},d.prototype.visitNonWordBoundary=function(e){},d.prototype.visitLookahead=function(e){},d.prototype.visitNegativeLookahead=function(e){},d.prototype.visitCharacter=function(e){},d.prototype.visitSet=function(e){},d.prototype.visitGroup=function(e){},d.prototype.visitGroupBackReference=function(e){},d.prototype.visitQuantifier=function(e){},{RegExpParser:e,BaseRegExpVisitor:d,VERSION:"0.5.0"}},t.exports?t.exports=r():n.regexpToAst=r()}(jo);const Uo=new jo.exports.RegExpParser;class Wo extends jo.exports.BaseRegExpVisitor{constructor(){super(...arguments),this.isStarting=!0,this.endRegexStack=[],this.multiline=!1}get endRegex(){return this.endRegexStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegex="",this.isStarting=!0,this.endRegexStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexStack=[])}visitCharacter(e){const t=String.fromCharCode(e.value);if(this.multiline||"\n"!==t||(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexStack=[];else{const e=zo(t);this.endRegexStack.push(e),this.isStarting&&(this.startRegex+=e)}}visitSet(e){if(!this.multiline){const t=this.regex.substring(e.loc.begin,e.loc.end),n=new RegExp(t);this.multiline=!!"\n".match(n)}if(e.quantifier)this.isStarting=!1,this.endRegexStack=[];else{const t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexStack.push(t),this.isStarting&&(this.startRegex+=t)}}}const Ko=new Wo;function Go(e){try{return"string"!=typeof e&&(e=e.source),e=`/${e}/`,Ko.reset(e),Ko.visit(Uo.pattern(e)),Ko.multiline}catch{return!1}}function zo(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Bo(e,t){const n=function(e){"string"==typeof e&&(e=new RegExp(e));const t=e,n=e.source;let r=0;function i(){let e,o="";function a(e){o+=n.substr(r,e),r+=e}function s(e){o+="(?:"+n.substr(r,e)+"|$)",r+=e}for(;r<n.length;)switch(n[r]){case"\\":switch(n[r+1]){case"c":s(3);break;case"x":s(4);break;case"u":t.unicode?"{"===n[r+2]?s(n.indexOf("}",r)-r+1):s(6):s(2);break;case"p":case"P":t.unicode?s(n.indexOf("}",r)-r+1):s(2);break;case"k":s(n.indexOf(">",r)-r+1);break;default:s(2)}break;case"[":e=/\[(?:\\.|.)*?\]/g,e.lastIndex=r,e=e.exec(n)||[],s(e[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":a(1);break;case"{":e=/\{\d+,?\d*\}/g,e.lastIndex=r,e=e.exec(n),e?a(e[0].length):s(1);break;case"(":if("?"===n[r+1])switch(n[r+2]){case":":o+="(?:",r+=3,o+=i()+"|$)";break;case"=":o+="(?=",r+=3,o+=i()+")";break;case"!":e=r,r+=3,i(),o+=n.substr(e,r-e);break;case"<":switch(n[r+3]){case"=":case"!":e=r,r+=4,i(),o+=n.substr(e,r-e);break;default:a(n.indexOf(">",r)-r+1),o+=i()+"|$)"}}else a(1),o+=i()+"|$)";break;case")":return++r,o;default:s(1)}return o}return new RegExp(i(),e.flags)}(e),r=t.match(n);return!!r&&r[0].length>0}var Ho={},Vo={};Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.VERSION=void 0,Vo.VERSION="9.1.0";var Yo={},Xo={},Jo=e&&e.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function Zo(e){return e&&0===e.length}function Qo(e){return null==e?[]:Object.keys(e)}function ea(e){for(var t=[],n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}function ta(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t.call(null,e[n],n);else{if(!la(e))throw Error("non exhaustive match");var r=Qo(e);for(n=0;n<r.length;n++){var i=r[n],o=e[i];t.call(null,o,i)}}}function na(e,t){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r];t.call(null,i)&&n.push(i)}return n}function ra(e,t){return na(e,(function(e){return!t(e)}))}function ia(e,t){return!!la(e)&&e.hasOwnProperty(t)}function oa(e,t){return void 0!==ca(e,(function(e){return e===t}))}function aa(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function sa(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function ca(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t.call(null,r))return r}}function ua(e,t,n){for(var r=Array.isArray(e),i=r?e:ea(e),o=r?[]:Qo(e),a=n,s=0;s<i.length;s++)a=t.call(null,a,i[s],r?s:o[s]);return a}function la(e){return e instanceof Object}function fa(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=Qo(i),a=0;a<o.length;a++){var s=o[a];ia(e,s)||(e[s]=i[s])}return e}Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.toFastProperties=Xo.timer=Xo.peek=Xo.isES2015MapSupported=Xo.PRINT_WARNING=Xo.PRINT_ERROR=Xo.packArray=Xo.IDENTITY=Xo.NOOP=Xo.merge=Xo.groupBy=Xo.defaults=Xo.assignNoOverwrite=Xo.assign=Xo.zipObject=Xo.sortBy=Xo.indexOf=Xo.some=Xo.difference=Xo.every=Xo.isObject=Xo.isRegExp=Xo.isArray=Xo.partial=Xo.uniq=Xo.compact=Xo.reduce=Xo.findAll=Xo.find=Xo.cloneObj=Xo.cloneArr=Xo.contains=Xo.has=Xo.pick=Xo.reject=Xo.filter=Xo.dropRight=Xo.drop=Xo.isFunction=Xo.isUndefined=Xo.isString=Xo.forEach=Xo.last=Xo.first=Xo.flatten=Xo.map=Xo.mapValues=Xo.values=Xo.keys=Xo.isEmpty=void 0,Xo.upperFirst=void 0,Xo.isEmpty=Zo,Xo.keys=Qo,Xo.values=ea,Xo.mapValues=function(e,t){for(var n=[],r=Qo(e),i=0;i<r.length;i++){var o=r[i];n.push(t.call(null,e[o],o))}return n},Xo.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t.call(null,e[r],r));return n},Xo.flatten=function e(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?n=n.concat(e(i)):n.push(i)}return n},Xo.first=function(e){return Zo(e)?void 0:e[0]},Xo.last=function(e){var t=e&&e.length;return t?e[t-1]:void 0},Xo.forEach=ta,Xo.isString=function(e){return"string"==typeof e},Xo.isUndefined=function(e){return void 0===e},Xo.isFunction=function(e){return e instanceof Function},Xo.drop=function(e,t){return void 0===t&&(t=1),e.slice(t,e.length)},Xo.dropRight=function(e,t){return void 0===t&&(t=1),e.slice(0,e.length-t)},Xo.filter=na,Xo.reject=ra,Xo.pick=function(e,t){for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];t(a)&&(r[o]=a)}return r},Xo.has=ia,Xo.contains=oa,Xo.cloneArr=aa,Xo.cloneObj=sa,Xo.find=ca,Xo.findAll=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];t.call(null,i)&&n.push(i)}return n},Xo.reduce=ua,Xo.compact=function(e){return ra(e,(function(e){return null==e}))},Xo.uniq=function(e,t){void 0===t&&(t=function(e){return e});var n=[];return ua(e,(function(e,r){var i=t(r);return oa(n,i)?e:(n.push(i),e.concat(r))}),[])},Xo.partial=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=[null],i=r.concat(t);return Function.bind.apply(e,i)},Xo.isArray=function(e){return Array.isArray(e)},Xo.isRegExp=function(e){return e instanceof RegExp},Xo.isObject=la,Xo.every=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},Xo.difference=function(e,t){return ra(e,(function(e){return oa(t,e)}))},Xo.some=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1},Xo.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},Xo.sortBy=function(e,t){var n=aa(e);return n.sort((function(e,n){return t(e)-t(n)})),n},Xo.zipObject=function(e,t){if(e.length!==t.length)throw Error("can't zipObject with different number of keys and values!");for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n},Xo.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=Qo(i),a=0;a<o.length;a++){var s=o[a];e[s]=i[s]}return e},Xo.assignNoOverwrite=fa,Xo.defaults=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fa.apply(void 0,Jo([{}],e,!1))},Xo.groupBy=function(e,t){var n={};return ta(e,(function(e){var r=t(e),i=n[r];i?i.push(e):n[r]=[e]})),n},Xo.merge=function(e,t){for(var n=sa(e),r=Qo(t),i=0;i<r.length;i++){var o=r[i],a=t[o];n[o]=a}return n},Xo.NOOP=function(){},Xo.IDENTITY=function(e){return e},Xo.packArray=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(void 0!==r?r:void 0)}return t},Xo.PRINT_ERROR=function(e){console&&console.error&&console.error("Error: "+e)},Xo.PRINT_WARNING=function(e){console&&console.warn&&console.warn("Warning: "+e)},Xo.isES2015MapSupported=function(){return"function"==typeof Map},Xo.peek=function(e){return e[e.length-1]},Xo.timer=function(e){var t=(new Date).getTime(),n=e();return{time:(new Date).getTime()-t,value:n}},Xo.toFastProperties=function(e){function t(){}t.prototype=e;var n=new t;function r(){return typeof n.bar}return r(),r(),e},Xo.upperFirst=function(e){if(!e)return e;var t=function(e,t){var n=e.substring(t,t+1);return da.test(n)?n:e[t]}(e,0);return t.toUpperCase()+e.substring(t.length)};var da=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;var pa={},ha={},ma={},ga={},ya={},va={},Ra={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.clearRegExpParserCache=Ta.getRegExpAst=void 0;var _a=jo.exports,Ea={},ba=new _a.RegExpParser;Ta.getRegExpAst=function(e){var t=e.toString();if(Ea.hasOwnProperty(t))return Ea[t];var n=ba.pattern(t);return Ea[t]=n,n},Ta.clearRegExpParserCache=function(){Ea={}},function(t){var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.canMatchCharCode=t.firstCharOptimizedIndices=t.getOptimizedStartCodesIndices=t.failedOptimizationPrefixMsg=void 0;var i=jo.exports,o=Xo,a=Ta,s=va,c="Complement Sets are not supported for first char optimization";function u(e,t,n){switch(e.type){case"Disjunction":for(var r=0;r<e.value.length;r++)u(e.value[r],t,n);break;case"Alternative":var i=e.value;for(r=0;r<i.length;r++){var a=i[r];switch(a.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var f=a;switch(f.type){case"Character":l(f.value,t,n);break;case"Set":if(!0===f.complement)throw Error(c);(0,o.forEach)(f.value,(function(e){if("number"==typeof e)l(e,t,n);else{var r=e;if(!0===n)for(var i=r.from;i<=r.to;i++)l(i,t,n);else{for(i=r.from;i<=r.to&&i<s.minOptimizationVal;i++)l(i,t,n);if(r.to>=s.minOptimizationVal)for(var o=r.from>=s.minOptimizationVal?r.from:s.minOptimizationVal,a=r.to,c=(0,s.charCodeToOptimizedIndex)(o),u=(0,s.charCodeToOptimizedIndex)(a),f=c;f<=u;f++)t[f]=f}}}));break;case"Group":u(f.value,t,n);break;default:throw Error("Non Exhaustive Match")}var p=void 0!==f.quantifier&&0===f.quantifier.atLeast;if("Group"===f.type&&!1===d(f)||"Group"!==f.type&&!1===p)break}break;default:throw Error("non exhaustive match!")}return(0,o.values)(t)}function l(e,t,n){var r=(0,s.charCodeToOptimizedIndex)(e);t[r]=r,!0===n&&function(e,t){var n=String.fromCharCode(e),r=n.toUpperCase();if(r!==n){t[i=(0,s.charCodeToOptimizedIndex)(r.charCodeAt(0))]=i}else{var i,o=n.toLowerCase();if(o!==n)t[i=(0,s.charCodeToOptimizedIndex)(o.charCodeAt(0))]=i}}(e,t)}function f(e,t){return(0,o.find)(e.value,(function(e){if("number"==typeof e)return(0,o.contains)(t,e);var n=e;return void 0!==(0,o.find)(t,(function(e){return n.from<=e&&e<=n.to}))}))}function d(e){return!(!e.quantifier||0!==e.quantifier.atLeast)||!!e.value&&((0,o.isArray)(e.value)?(0,o.every)(e.value,d):d(e.value))}t.failedOptimizationPrefixMsg='Unable to use "first char" lexer optimizations:\n',t.getOptimizedStartCodesIndices=function(e,n){void 0===n&&(n=!1);try{var r=(0,a.getRegExpAst)(e);return u(r.value,{},r.flags.ignoreCase)}catch(l){if(l.message===c)n&&(0,o.PRINT_WARNING)(t.failedOptimizationPrefixMsg+"\tUnable to optimize: < "+e.toString()+" >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var s="";n&&(s="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),(0,o.PRINT_ERROR)(t.failedOptimizationPrefixMsg+"\n\tFailed parsing: < "+e.toString()+" >\n\tUsing the regexp-to-ast library version: "+i.VERSION+"\n\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+s)}}return[]},t.firstCharOptimizedIndices=u;var p=function(e){function t(t){var n=e.call(this)||this;return n.targetCharCodes=t,n.found=!1,n}return r(t,e),t.prototype.visitChildren=function(t){if(!0!==this.found){switch(t.type){case"Lookahead":return void this.visitLookahead(t);case"NegativeLookahead":return void this.visitNegativeLookahead(t)}e.prototype.visitChildren.call(this,t)}},t.prototype.visitCharacter=function(e){(0,o.contains)(this.targetCharCodes,e.value)&&(this.found=!0)},t.prototype.visitSet=function(e){e.complement?void 0===f(e,this.targetCharCodes)&&(this.found=!0):void 0!==f(e,this.targetCharCodes)&&(this.found=!0)},t}(i.BaseRegExpVisitor);t.canMatchCharCode=function(e,t){if(t instanceof RegExp){var n=(0,a.getRegExpAst)(t),r=new p(e);return r.visit(n),r.found}return void 0!==(0,o.find)(t,(function(t){return(0,o.contains)(e,t.charCodeAt(0))}))}}(Ra),function(t){var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeToOptimizedIndex=t.minOptimizationVal=t.buildLineBreakIssueMessage=t.LineTerminatorOptimizedTester=t.isShortPattern=t.isCustomPattern=t.cloneEmptyGroups=t.performWarningRuntimeChecks=t.performRuntimeChecks=t.addStickyFlag=t.addStartOfInput=t.findUnreachablePatterns=t.findModesThatDoNotExist=t.findInvalidGroupType=t.findDuplicatePatterns=t.findUnsupportedFlags=t.findStartOfInputAnchor=t.findEmptyMatchRegExps=t.findEndOfInputAnchor=t.findInvalidPatterns=t.findMissingPatterns=t.validatePatterns=t.analyzeTokenTypes=t.enableSticky=t.disableSticky=t.SUPPORT_STICKY=t.MODES=t.DEFAULT_MODE=void 0;var i=jo.exports,o=ya,a=Xo,s=Ra,c=Ta,u="PATTERN";function l(e){var t=(0,a.filter)(e,(function(e){return!(0,a.has)(e,u)}));return{errors:(0,a.map)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:o.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[e]}})),valid:(0,a.difference)(e,t)}}function f(e){var t=(0,a.filter)(e,(function(e){var t=e.PATTERN;return!((0,a.isRegExp)(t)||(0,a.isFunction)(t)||(0,a.has)(t,"exec")||(0,a.isString)(t))}));return{errors:(0,a.map)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:o.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[e]}})),valid:(0,a.difference)(e,t)}}t.DEFAULT_MODE="defaultMode",t.MODES="modes",t.SUPPORT_STICKY="boolean"==typeof new RegExp("(?:)").sticky,t.disableSticky=function(){t.SUPPORT_STICKY=!1},t.enableSticky=function(){t.SUPPORT_STICKY=!0},t.analyzeTokenTypes=function(e,n){var r,i=(n=(0,a.defaults)(n,{useSticky:t.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(e,t){return t()}})).tracer;i("initCharCodeToOptimizedIndexMap",(function(){!function(){if((0,a.isEmpty)(O)){O=new Array(65536);for(var e=0;e<65536;e++)O[e]=e>255?255+~~(e/255):e}}()})),i("Reject Lexer.NA",(function(){r=(0,a.reject)(e,(function(e){return e.PATTERN===o.Lexer.NA}))}));var c,u,l,f,d,p,h,m,g,y,v,R=!1;i("Transform Patterns",(function(){R=!1,c=(0,a.map)(r,(function(e){var t=e.PATTERN;if((0,a.isRegExp)(t)){var r=t.source;return 1!==r.length||"^"===r||"$"===r||"."===r||t.ignoreCase?2!==r.length||"\\"!==r[0]||(0,a.contains)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?n.useSticky?b(t):E(t):r[1]:r}if((0,a.isFunction)(t))return R=!0,{exec:t};if((0,a.has)(t,"exec"))return R=!0,t;if("string"==typeof t){if(1===t.length)return t;var i=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),o=new RegExp(i);return n.useSticky?b(o):E(o)}throw Error("non exhaustive match")}))})),i("misc mapping",(function(){u=(0,a.map)(r,(function(e){return e.tokenTypeIdx})),l=(0,a.map)(r,(function(e){var t=e.GROUP;if(t!==o.Lexer.SKIPPED){if((0,a.isString)(t))return t;if((0,a.isUndefined)(t))return!1;throw Error("non exhaustive match")}})),f=(0,a.map)(r,(function(e){var t=e.LONGER_ALT;if(t)return(0,a.isArray)(t)?(0,a.map)(t,(function(e){return(0,a.indexOf)(r,e)})):[(0,a.indexOf)(r,t)]})),d=(0,a.map)(r,(function(e){return e.PUSH_MODE})),p=(0,a.map)(r,(function(e){return(0,a.has)(e,"POP_MODE")}))})),i("Line Terminator Handling",(function(){var e=w(n.lineTerminatorCharacters);h=(0,a.map)(r,(function(e){return!1})),"onlyOffset"!==n.positionTracking&&(h=(0,a.map)(r,(function(t){return(0,a.has)(t,"LINE_BREAKS")?t.LINE_BREAKS:!1===P(t,e)?(0,s.canMatchCharCode)(e,t.PATTERN):void 0})))})),i("Misc Mapping #2",(function(){m=(0,a.map)(r,k),g=(0,a.map)(c,C),y=(0,a.reduce)(r,(function(e,t){var n=t.GROUP;return(0,a.isString)(n)&&n!==o.Lexer.SKIPPED&&(e[n]=[]),e}),{}),v=(0,a.map)(c,(function(e,t){return{pattern:c[t],longerAlt:f[t],canLineTerminator:h[t],isCustom:m[t],short:g[t],group:l[t],push:d[t],pop:p[t],tokenTypeIdx:u[t],tokenType:r[t]}}))}));var T=!0,_=[];return n.safeMode||i("First Char Optimization",(function(){_=(0,a.reduce)(r,(function(e,t,r){if("string"==typeof t.PATTERN){var i=N(t.PATTERN.charCodeAt(0));A(e,i,v[r])}else if((0,a.isArray)(t.START_CHARS_HINT)){var o;(0,a.forEach)(t.START_CHARS_HINT,(function(t){var n=N("string"==typeof t?t.charCodeAt(0):t);o!==n&&(o=n,A(e,n,v[r]))}))}else if((0,a.isRegExp)(t.PATTERN))if(t.PATTERN.unicode)T=!1,n.ensureOptimizations&&(0,a.PRINT_ERROR)(s.failedOptimizationPrefixMsg+"\tUnable to analyze < "+t.PATTERN.toString()+" > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var c=(0,s.getOptimizedStartCodesIndices)(t.PATTERN,n.ensureOptimizations);(0,a.isEmpty)(c)&&(T=!1),(0,a.forEach)(c,(function(t){A(e,t,v[r])}))}else n.ensureOptimizations&&(0,a.PRINT_ERROR)(s.failedOptimizationPrefixMsg+"\tTokenType: <"+t.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),T=!1;return e}),[])})),i("ArrayPacking",(function(){_=(0,a.packArray)(_)})),{emptyGroups:y,patternIdxToConfig:v,charCodeToPatternIdxToConfig:_,hasCustom:R,canBeOptimized:T}},t.validatePatterns=function(e,t){var n=[],r=l(e);n=n.concat(r.errors);var i=f(r.valid),o=i.valid;return n=(n=(n=(n=(n=n.concat(i.errors)).concat(function(e){var t=[],n=(0,a.filter)(e,(function(e){return(0,a.isRegExp)(e.PATTERN)}));return t=(t=(t=(t=(t=t.concat(p(n))).concat(g(n))).concat(y(n))).concat(v(n))).concat(h(n))}(o))).concat(R(o))).concat(T(o,t))).concat(_(o))},t.findMissingPatterns=l,t.findInvalidPatterns=f;var d=/[^\\][\$]/;function p(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return r(t,e),t.prototype.visitEndAnchor=function(e){this.found=!0},t}(i.BaseRegExpVisitor),n=(0,a.filter)(e,(function(e){var n=e.PATTERN;try{var r=(0,c.getRegExpAst)(n),i=new t;return i.visit(r),i.found}catch(o){return d.test(n.source)}}));return(0,a.map)(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:o.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[e]}}))}function h(e){var t=(0,a.filter)(e,(function(e){return e.PATTERN.test("")}));return(0,a.map)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:o.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[e]}}))}t.findEndOfInputAnchor=p,t.findEmptyMatchRegExps=h;var m=/[^\\[][\^]|^\^/;function g(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.found=!1,t}return r(t,e),t.prototype.visitStartAnchor=function(e){this.found=!0},t}(i.BaseRegExpVisitor),n=(0,a.filter)(e,(function(e){var n=e.PATTERN;try{var r=(0,c.getRegExpAst)(n),i=new t;return i.visit(r),i.found}catch(o){return m.test(n.source)}}));return(0,a.map)(n,(function(e){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:o.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[e]}}))}function y(e){var t=(0,a.filter)(e,(function(e){var t=e.PATTERN;return t instanceof RegExp&&(t.multiline||t.global)}));return(0,a.map)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:o.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[e]}}))}function v(e){var t=[],n=(0,a.map)(e,(function(n){return(0,a.reduce)(e,(function(e,r){return n.PATTERN.source!==r.PATTERN.source||(0,a.contains)(t,r)||r.PATTERN===o.Lexer.NA||(t.push(r),e.push(r)),e}),[])}));n=(0,a.compact)(n);var r=(0,a.filter)(n,(function(e){return e.length>1}));return(0,a.map)(r,(function(e){var t=(0,a.map)(e,(function(e){return e.name}));return{message:"The same RegExp pattern ->"+(0,a.first)(e).PATTERN+"<-has been used in all of the following Token Types: "+t.join(", ")+" <-",type:o.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:e}}))}function R(e){var t=(0,a.filter)(e,(function(e){if(!(0,a.has)(e,"GROUP"))return!1;var t=e.GROUP;return t!==o.Lexer.SKIPPED&&t!==o.Lexer.NA&&!(0,a.isString)(t)}));return(0,a.map)(t,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:o.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[e]}}))}function T(e,t){var n=(0,a.filter)(e,(function(e){return void 0!==e.PUSH_MODE&&!(0,a.contains)(t,e.PUSH_MODE)}));return(0,a.map)(n,(function(e){return{message:"Token Type: ->"+e.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+e.PUSH_MODE+"<-which does not exist",type:o.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[e]}}))}function _(e){var t=[],n=(0,a.reduce)(e,(function(e,t,n){var r,i,s=t.PATTERN;return s===o.Lexer.NA||((0,a.isString)(s)?e.push({str:s,idx:n,tokenType:t}):(0,a.isRegExp)(s)&&(r=s,i=[".","\\","[","]","|","^","$","(",")","?","*","+","{"],void 0===(0,a.find)(i,(function(e){return-1!==r.source.indexOf(e)})))&&e.push({str:s.source,idx:n,tokenType:t})),e}),[]);return(0,a.forEach)(e,(function(e,r){(0,a.forEach)(n,(function(n){var i=n.str,s=n.idx,c=n.tokenType;if(r<s&&function(e,t){if((0,a.isRegExp)(t)){var n=t.exec(e);return null!==n&&0===n.index}if((0,a.isFunction)(t))return t(e,0,[],{});if((0,a.has)(t,"exec"))return t.exec(e,0,[],{});if("string"==typeof t)return t===e;throw Error("non exhaustive match")}(i,e.PATTERN)){var u="Token: ->"+c.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+e.name+"<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE";t.push({message:u,type:o.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[e,c]})}}))})),t}function E(e){var t=e.ignoreCase?"i":"";return new RegExp("^(?:"+e.source+")",t)}function b(e){var t=e.ignoreCase?"iy":"y";return new RegExp(""+e.source,t)}function k(e){var t=e.PATTERN;if((0,a.isRegExp)(t))return!1;if((0,a.isFunction)(t))return!0;if((0,a.has)(t,"exec"))return!0;if((0,a.isString)(t))return!1;throw Error("non exhaustive match")}function C(e){return!(!(0,a.isString)(e)||1!==e.length)&&e.charCodeAt(0)}function P(e,t){if((0,a.has)(e,"LINE_BREAKS"))return!1;if((0,a.isRegExp)(e.PATTERN)){try{(0,s.canMatchCharCode)(t,e.PATTERN)}catch(n){return{issue:o.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}if((0,a.isString)(e.PATTERN))return!1;if(k(e))return{issue:o.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function x(e,t){if(t.issue===o.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <"+e.name+"> Token Type\n\t Root cause: "+t.errMsg+".\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(t.issue===o.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <"+e.name+"> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function w(e){return(0,a.map)(e,(function(e){return(0,a.isString)(e)&&e.length>0?e.charCodeAt(0):e}))}function A(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}t.findStartOfInputAnchor=g,t.findUnsupportedFlags=y,t.findDuplicatePatterns=v,t.findInvalidGroupType=R,t.findModesThatDoNotExist=T,t.findUnreachablePatterns=_,t.addStartOfInput=E,t.addStickyFlag=b,t.performRuntimeChecks=function(e,n,r){var i=[];return(0,a.has)(e,t.DEFAULT_MODE)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.DEFAULT_MODE+"> property in its definition\n",type:o.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,a.has)(e,t.MODES)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.MODES+"> property in its definition\n",type:o.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,a.has)(e,t.MODES)&&(0,a.has)(e,t.DEFAULT_MODE)&&!(0,a.has)(e.modes,e.defaultMode)&&i.push({message:"A MultiMode Lexer cannot be initialized with a "+t.DEFAULT_MODE+": <"+e.defaultMode+">which does not exist\n",type:o.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,a.has)(e,t.MODES)&&(0,a.forEach)(e.modes,(function(e,t){(0,a.forEach)(e,(function(e,n){(0,a.isUndefined)(e)&&i.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+t+"> at index: <"+n+">\n",type:o.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})}))})),i},t.performWarningRuntimeChecks=function(e,t,n){var r=[],i=!1,c=(0,a.compact)((0,a.flatten)((0,a.mapValues)(e.modes,(function(e){return e})))),u=(0,a.reject)(c,(function(e){return e.PATTERN===o.Lexer.NA})),l=w(n);return t&&(0,a.forEach)(u,(function(e){var t=P(e,l);if(!1!==t){var n={message:x(e,t),type:t.issue,tokenType:e};r.push(n)}else(0,a.has)(e,"LINE_BREAKS")?!0===e.LINE_BREAKS&&(i=!0):(0,s.canMatchCharCode)(l,e.PATTERN)&&(i=!0)})),t&&!i&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:o.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),r},t.cloneEmptyGroups=function(e){var t={},n=(0,a.keys)(e);return(0,a.forEach)(n,(function(n){var r=e[n];if(!(0,a.isArray)(r))throw Error("non exhaustive match");t[n]=[]})),t},t.isCustomPattern=k,t.isShortPattern=C,t.LineTerminatorOptimizedTester={test:function(e){for(var t=e.length,n=this.lastIndex;n<t;n++){var r=e.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===e.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0},t.buildLineBreakIssueMessage=x,t.minOptimizationVal=256;var O=[];function N(e){return e<t.minOptimizationVal?e:O[e]}t.charCodeToOptimizedIndex=N}(va);var ka={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isTokenType=e.hasExtendingTokensTypesMapProperty=e.hasExtendingTokensTypesProperty=e.hasCategoriesProperty=e.hasShortKeyProperty=e.singleAssignCategoriesToksMap=e.assignCategoriesMapProp=e.assignCategoriesTokensProp=e.assignTokenDefaultProps=e.expandCategories=e.augmentTokenTypes=e.tokenIdxToClass=e.tokenShortNameIdx=e.tokenStructuredMatcherNoCategories=e.tokenStructuredMatcher=void 0;var t=Xo;function n(e){for(var n=(0,t.cloneArr)(e),r=e,i=!0;i;){r=(0,t.compact)((0,t.flatten)((0,t.map)(r,(function(e){return e.CATEGORIES}))));var o=(0,t.difference)(r,n);n=n.concat(o),(0,t.isEmpty)(o)?i=!1:r=o}return n}function r(n){(0,t.forEach)(n,(function(n){s(n)||(e.tokenIdxToClass[e.tokenShortNameIdx]=n,n.tokenTypeIdx=e.tokenShortNameIdx++),c(n)&&!(0,t.isArray)(n.CATEGORIES)&&(n.CATEGORIES=[n.CATEGORIES]),c(n)||(n.CATEGORIES=[]),u(n)||(n.categoryMatches=[]),l(n)||(n.categoryMatchesMap={})}))}function i(n){(0,t.forEach)(n,(function(n){n.categoryMatches=[],(0,t.forEach)(n.categoryMatchesMap,(function(t,r){n.categoryMatches.push(e.tokenIdxToClass[r].tokenTypeIdx)}))}))}function o(e){(0,t.forEach)(e,(function(e){a([],e)}))}function a(e,n){(0,t.forEach)(e,(function(e){n.categoryMatchesMap[e.tokenTypeIdx]=!0})),(0,t.forEach)(n.CATEGORIES,(function(r){var i=e.concat(n);(0,t.contains)(i,r)||a(i,r)}))}function s(e){return(0,t.has)(e,"tokenTypeIdx")}function c(e){return(0,t.has)(e,"CATEGORIES")}function u(e){return(0,t.has)(e,"categoryMatches")}function l(e){return(0,t.has)(e,"categoryMatchesMap")}e.tokenStructuredMatcher=function(e,t){var n=e.tokenTypeIdx;return n===t.tokenTypeIdx||!0===t.isParent&&!0===t.categoryMatchesMap[n]},e.tokenStructuredMatcherNoCategories=function(e,t){return e.tokenTypeIdx===t.tokenTypeIdx},e.tokenShortNameIdx=1,e.tokenIdxToClass={},e.augmentTokenTypes=function(e){var a=n(e);r(a),o(a),i(a),(0,t.forEach)(a,(function(e){e.isParent=e.categoryMatches.length>0}))},e.expandCategories=n,e.assignTokenDefaultProps=r,e.assignCategoriesTokensProp=i,e.assignCategoriesMapProp=o,e.singleAssignCategoriesToksMap=a,e.hasShortKeyProperty=s,e.hasCategoriesProperty=c,e.hasExtendingTokensTypesProperty=u,e.hasExtendingTokensTypesMapProperty=l,e.isTokenType=function(e){return(0,t.has)(e,"tokenTypeIdx")}}(ka);var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.defaultLexerErrorProvider=void 0,Ca.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->"+e.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(e,t,n,r,i){return"unexpected character: ->"+e.charAt(t)+"<- at offset: "+t+", skipped "+n+" characters."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Lexer=e.LexerDefinitionErrorType=void 0;var t,n=va,r=Xo,i=ka,o=Ca,a=Ta;(t=e.LexerDefinitionErrorType||(e.LexerDefinitionErrorType={}))[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK";var s={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:o.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(s);var c=function(){function e(e,t){var o=this;if(void 0===t&&(t=s),this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof t)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=(0,r.merge)(s,t);var c=this.config.traceInitPerf;!0===c?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof c&&(this.traceInitMaxIdent=c,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var c,u=!0;o.TRACE_INIT("Lexer Config handling",(function(){if(o.config.lineTerminatorsPattern===s.lineTerminatorsPattern)o.config.lineTerminatorsPattern=n.LineTerminatorOptimizedTester;else if(o.config.lineTerminatorCharacters===s.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');o.trackStartLines=/full|onlyStart/i.test(o.config.positionTracking),o.trackEndLines=/full/i.test(o.config.positionTracking),(0,r.isArray)(e)?((c={modes:{}}).modes[n.DEFAULT_MODE]=(0,r.cloneArr)(e),c[n.DEFAULT_MODE]=n.DEFAULT_MODE):(u=!1,c=(0,r.cloneObj)(e))})),!1===o.config.skipValidations&&(o.TRACE_INIT("performRuntimeChecks",(function(){o.lexerDefinitionErrors=o.lexerDefinitionErrors.concat((0,n.performRuntimeChecks)(c,o.trackStartLines,o.config.lineTerminatorCharacters))})),o.TRACE_INIT("performWarningRuntimeChecks",(function(){o.lexerDefinitionWarning=o.lexerDefinitionWarning.concat((0,n.performWarningRuntimeChecks)(c,o.trackStartLines,o.config.lineTerminatorCharacters))}))),c.modes=c.modes?c.modes:{},(0,r.forEach)(c.modes,(function(e,t){c.modes[t]=(0,r.reject)(e,(function(e){return(0,r.isUndefined)(e)}))}));var l=(0,r.keys)(c.modes);if((0,r.forEach)(c.modes,(function(e,a){o.TRACE_INIT("Mode: <"+a+"> processing",(function(){var s;(o.modes.push(a),!1===o.config.skipValidations&&o.TRACE_INIT("validatePatterns",(function(){o.lexerDefinitionErrors=o.lexerDefinitionErrors.concat((0,n.validatePatterns)(e,l))})),(0,r.isEmpty)(o.lexerDefinitionErrors))&&((0,i.augmentTokenTypes)(e),o.TRACE_INIT("analyzeTokenTypes",(function(){s=(0,n.analyzeTokenTypes)(e,{lineTerminatorCharacters:o.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:o.TRACE_INIT.bind(o)})})),o.patternIdxToConfig[a]=s.patternIdxToConfig,o.charCodeToPatternIdxToConfig[a]=s.charCodeToPatternIdxToConfig,o.emptyGroups=(0,r.merge)(o.emptyGroups,s.emptyGroups),o.hasCustom=s.hasCustom||o.hasCustom,o.canModeBeOptimized[a]=s.canBeOptimized)}))})),o.defaultMode=c.defaultMode,!(0,r.isEmpty)(o.lexerDefinitionErrors)&&!o.config.deferDefinitionErrorsHandling){var f=(0,r.map)(o.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+f)}(0,r.forEach)(o.lexerDefinitionWarning,(function(e){(0,r.PRINT_WARNING)(e.message)})),o.TRACE_INIT("Choosing sub-methods implementations",(function(){if(n.SUPPORT_STICKY?(o.chopInput=r.IDENTITY,o.match=o.matchWithTest):(o.updateLastIndex=r.NOOP,o.match=o.matchWithExec),u&&(o.handleModes=r.NOOP),!1===o.trackStartLines&&(o.computeNewColumn=r.IDENTITY),!1===o.trackEndLines&&(o.updateTokenEndLineColumnLocation=r.NOOP),/full/i.test(o.config.positionTracking))o.createTokenInstance=o.createFullToken;else if(/onlyStart/i.test(o.config.positionTracking))o.createTokenInstance=o.createStartOnlyToken;else{if(!/onlyOffset/i.test(o.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+o.config.positionTracking+'"');o.createTokenInstance=o.createOffsetOnlyToken}o.hasCustom?(o.addToken=o.addTokenUsingPush,o.handlePayload=o.handlePayloadWithCustom):(o.addToken=o.addTokenUsingMemberAccess,o.handlePayload=o.handlePayloadNoCustom)})),o.TRACE_INIT("Failed Optimization Warnings",(function(){var e=(0,r.reduce)(o.canModeBeOptimized,(function(e,t,n){return!1===t&&e.push(n),e}),[]);if(t.ensureOptimizations&&!(0,r.isEmpty)(e))throw Error("Lexer Modes: < "+e.join(", ")+' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.')})),o.TRACE_INIT("clearRegExpParserCache",(function(){(0,a.clearRegExpParserCache)()})),o.TRACE_INIT("toFastProperties",(function(){(0,r.toFastProperties)(o)}))}))}return e.prototype.tokenize=function(e,t){if(void 0===t&&(t=this.defaultMode),!(0,r.isEmpty)(this.lexerDefinitionErrors)){var n=(0,r.map)(this.lexerDefinitionErrors,(function(e){return e.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+n)}return this.tokenizeInternal(e,t)},e.prototype.tokenizeInternal=function(e,t){var i,o,a,s,c,u,l,f,d,p,h,m,g,y,v,R=this,T=e,_=T.length,E=0,b=0,k=this.hasCustom?0:Math.floor(e.length/10),C=new Array(k),P=[],x=this.trackStartLines?1:void 0,w=this.trackStartLines?1:void 0,A=(0,n.cloneEmptyGroups)(this.emptyGroups),O=this.trackStartLines,N=this.config.lineTerminatorsPattern,S=0,D=[],I=[],L=[],M=[];Object.freeze(M);var F=void 0;function q(){return D}function $(e){var t=(0,n.charCodeToOptimizedIndex)(e),r=I[t];return void 0===r?M:r}var j,U=function(e){if(1===L.length&&void 0===e.tokenType.PUSH_MODE){var t=R.config.errorMessageProvider.buildUnableToPopLexerModeMessage(e);P.push({offset:e.startOffset,line:void 0!==e.startLine?e.startLine:void 0,column:void 0!==e.startColumn?e.startColumn:void 0,length:e.image.length,message:t})}else{L.pop();var n=(0,r.last)(L);D=R.patternIdxToConfig[n],I=R.charCodeToPatternIdxToConfig[n],S=D.length;var i=R.canModeBeOptimized[n]&&!1===R.config.safeMode;F=I&&i?$:q}};function W(e){L.push(e),I=this.charCodeToPatternIdxToConfig[e],D=this.patternIdxToConfig[e],S=D.length,S=D.length;var t=this.canModeBeOptimized[e]&&!1===this.config.safeMode;F=I&&t?$:q}for(W.call(this,t);E<_;){u=null;var K=T.charCodeAt(E),G=F(K),z=G.length;for(i=0;i<z;i++){var B=(j=G[i]).pattern;if(l=null,!1!==(re=j.short)?K===re&&(u=B):!0===j.isCustom?null!==(v=B.exec(T,E,C,A))?(u=v[0],void 0!==v.payload&&(l=v.payload)):u=null:(this.updateLastIndex(B,E),u=this.match(B,e,E)),null!==u){if(void 0!==(c=j.longerAlt)){var H=c.length;for(a=0;a<H;a++){var V=D[c[a]],Y=V.pattern;if(f=null,!0===V.isCustom?null!==(v=Y.exec(T,E,C,A))?(s=v[0],void 0!==v.payload&&(f=v.payload)):s=null:(this.updateLastIndex(Y,E),s=this.match(Y,e,E)),s&&s.length>u.length){u=s,l=f,j=V;break}}}break}}if(null!==u){if(d=u.length,void 0!==(p=j.group)&&(h=j.tokenTypeIdx,m=this.createTokenInstance(u,E,h,j.tokenType,x,w,d),this.handlePayload(m,l),!1===p?b=this.addToken(C,b,m):A[p].push(m)),e=this.chopInput(e,d),E+=d,w=this.computeNewColumn(w,d),!0===O&&!0===j.canLineTerminator){var X=0,J=void 0,Z=void 0;N.lastIndex=0;do{!0===(J=N.test(u))&&(Z=N.lastIndex-1,X++)}while(!0===J);0!==X&&(x+=X,w=d-Z,this.updateTokenEndLineColumnLocation(m,p,Z,X,x,w,d))}this.handleModes(j,U,W,m)}else{for(var Q=E,ee=x,te=w,ne=!1;!ne&&E<_;)for(T.charCodeAt(E),e=this.chopInput(e,1),E++,o=0;o<S;o++){var re,ie=D[o];B=ie.pattern;if(!1!==(re=ie.short)?T.charCodeAt(E)===re&&(ne=!0):!0===ie.isCustom?ne=null!==B.exec(T,E,C,A):(this.updateLastIndex(B,E),ne=null!==B.exec(e)),!0===ne)break}g=E-Q,y=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(T,Q,g,ee,te),P.push({offset:Q,line:ee,column:te,length:g,message:y})}}return this.hasCustom||(C.length=b),{tokens:C,groups:A,errors:P}},e.prototype.handleModes=function(e,t,n,r){if(!0===e.pop){var i=e.push;t(r),void 0!==i&&n.call(this,i)}else void 0!==e.push&&n.call(this,e.push)},e.prototype.chopInput=function(e,t){return e.substring(t)},e.prototype.updateLastIndex=function(e,t){e.lastIndex=t},e.prototype.updateTokenEndLineColumnLocation=function(e,t,n,r,i,o,a){var s,c;void 0!==t&&(c=(s=n===a-1)?-1:0,1===r&&!0===s||(e.endLine=i+c,e.endColumn=o-1-c))},e.prototype.computeNewColumn=function(e,t){return e+t},e.prototype.createTokenInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},e.prototype.createOffsetOnlyToken=function(e,t,n,r){return{image:e,startOffset:t,tokenTypeIdx:n,tokenType:r}},e.prototype.createStartOnlyToken=function(e,t,n,r,i,o){return{image:e,startOffset:t,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}},e.prototype.createFullToken=function(e,t,n,r,i,o,a){return{image:e,startOffset:t,endOffset:t+a-1,startLine:i,endLine:i,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:r}},e.prototype.addToken=function(e,t,n){return 666},e.prototype.addTokenUsingPush=function(e,t,n){return e.push(n),t},e.prototype.addTokenUsingMemberAccess=function(e,t,n){return e[t]=n,++t},e.prototype.handlePayload=function(e,t){},e.prototype.handlePayloadNoCustom=function(e,t){},e.prototype.handlePayloadWithCustom=function(e,t){null!==t&&(e.payload=t)},e.prototype.match=function(e,t,n){return null},e.prototype.matchWithTest=function(e,t,n){return!0===e.test(t)?t.substring(n,e.lastIndex):null},e.prototype.matchWithExec=function(e,t){var n=e.exec(t);return null!==n?n[0]:n},e.prototype.TRACE_INIT=function(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+e+">");var i=(0,r.timer)(t),o=i.time,a=i.value,s=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(n+"<-- <"+e+"> time: "+o+"ms"),this.traceInitIndent--,a}return t()},e.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",e.NA=/NOT_APPLICABLE/,e}();e.Lexer=c}(ya),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tokenMatcher=e.createTokenInstance=e.EOF=e.createToken=e.hasTokenLabel=e.tokenName=e.tokenLabel=void 0;var t=Xo,n=ya,r=ka;function i(e){return(0,t.isString)(e.LABEL)&&""!==e.LABEL}e.tokenLabel=function(e){return i(e)?e.LABEL:e.name},e.tokenName=function(e){return e.name},e.hasTokenLabel=i;var o="parent",a="categories",s="label",c="group",u="push_mode",l="pop_mode",f="longer_alt",d="line_breaks",p="start_chars_hint";function h(e){return function(e){var n=e.pattern,i={};i.name=e.name,(0,t.isUndefined)(n)||(i.PATTERN=n);if((0,t.has)(e,o))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";(0,t.has)(e,a)&&(i.CATEGORIES=e.categories);(0,r.augmentTokenTypes)([i]),(0,t.has)(e,s)&&(i.LABEL=e.label);(0,t.has)(e,c)&&(i.GROUP=e.group);(0,t.has)(e,l)&&(i.POP_MODE=e.pop_mode);(0,t.has)(e,u)&&(i.PUSH_MODE=e.push_mode);(0,t.has)(e,f)&&(i.LONGER_ALT=e.longer_alt);(0,t.has)(e,d)&&(i.LINE_BREAKS=e.line_breaks);(0,t.has)(e,p)&&(i.START_CHARS_HINT=e.start_chars_hint);return i}(e)}e.createToken=h,e.EOF=h({name:"EOF",pattern:n.Lexer.NA}),(0,r.augmentTokenTypes)([e.EOF]),e.createTokenInstance=function(e,t,n,r,i,o,a,s){return{image:t,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}},e.tokenMatcher=function(e,t){return(0,r.tokenStructuredMatcher)(e,t)}}(ga);var Pa,xa=e&&e.__extends||(Pa=function(e,t){return(Pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Pa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(ma,"__esModule",{value:!0}),ma.serializeProduction=ma.serializeGrammar=ma.Terminal=ma.Alternation=ma.RepetitionWithSeparator=ma.Repetition=ma.RepetitionMandatoryWithSeparator=ma.RepetitionMandatory=ma.Option=ma.Alternative=ma.Rule=ma.NonTerminal=ma.AbstractProduction=void 0;var wa=Xo,Aa=ga,Oa=function(){function e(e){this._definition=e}return Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),e.prototype.accept=function(e){e.visit(this),(0,wa.forEach)(this.definition,(function(t){t.accept(e)}))},e}();ma.AbstractProduction=Oa;var Na=function(e){function t(t){var n=e.call(this,[])||this;return n.idx=1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),Object.defineProperty(t.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.accept=function(e){e.visit(this)},t}(Oa);ma.NonTerminal=Na;var Sa=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.orgText="",(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),t}(Oa);ma.Rule=Sa;var Da=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.ignoreAmbiguities=!1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),t}(Oa);ma.Alternative=Da;var Ia=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),t}(Oa);ma.Option=Ia;var La=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),t}(Oa);ma.RepetitionMandatory=La;var Ma=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),t}(Oa);ma.RepetitionMandatoryWithSeparator=Ma;var Fa=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),t}(Oa);ma.Repetition=Fa;var qa=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),t}(Oa);ma.RepetitionWithSeparator=qa;var $a=function(e){function t(t){var n=e.call(this,t.definition)||this;return n.idx=1,n.ignoreAmbiguities=!1,n.hasPredicates=!1,(0,wa.assign)(n,(0,wa.pick)(t,(function(e){return void 0!==e}))),n}return xa(t,e),Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),t}(Oa);ma.Alternation=$a;var ja=function(){function e(e){this.idx=1,(0,wa.assign)(this,(0,wa.pick)(e,(function(e){return void 0!==e})))}return e.prototype.accept=function(e){e.visit(this)},e}();function Ua(e){function t(e){return(0,wa.map)(e,Ua)}if(e instanceof Na){var n={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return(0,wa.isString)(e.label)&&(n.label=e.label),n}if(e instanceof Da)return{type:"Alternative",definition:t(e.definition)};if(e instanceof Ia)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof La)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof Ma)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:Ua(new ja({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof qa)return{type:"RepetitionWithSeparator",idx:e.idx,separator:Ua(new ja({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof Fa)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof $a)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof ja){var r={type:"Terminal",name:e.terminalType.name,label:(0,Aa.tokenLabel)(e.terminalType),idx:e.idx};(0,wa.isString)(e.label)&&(r.terminalLabel=e.label);var i=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=(0,wa.isRegExp)(i)?i.source:i),r}if(e instanceof Sa)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}ma.Terminal=ja,ma.serializeGrammar=function(e){return(0,wa.map)(e,Ua)},ma.serializeProduction=Ua,Object.defineProperty(ha,"__esModule",{value:!0}),ha.RestWalker=void 0;var Wa=Xo,Ka=ma,Ga=function(){function e(){}return e.prototype.walk=function(e,t){var n=this;void 0===t&&(t=[]),(0,Wa.forEach)(e.definition,(function(r,i){var o=(0,Wa.drop)(e.definition,i+1);if(r instanceof Ka.NonTerminal)n.walkProdRef(r,o,t);else if(r instanceof Ka.Terminal)n.walkTerminal(r,o,t);else if(r instanceof Ka.Alternative)n.walkFlat(r,o,t);else if(r instanceof Ka.Option)n.walkOption(r,o,t);else if(r instanceof Ka.RepetitionMandatory)n.walkAtLeastOne(r,o,t);else if(r instanceof Ka.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(r,o,t);else if(r instanceof Ka.RepetitionWithSeparator)n.walkManySep(r,o,t);else if(r instanceof Ka.Repetition)n.walkMany(r,o,t);else{if(!(r instanceof Ka.Alternation))throw Error("non exhaustive match");n.walkOr(r,o,t)}}))},e.prototype.walkTerminal=function(e,t,n){},e.prototype.walkProdRef=function(e,t,n){},e.prototype.walkFlat=function(e,t,n){var r=t.concat(n);this.walk(e,r)},e.prototype.walkOption=function(e,t,n){var r=t.concat(n);this.walk(e,r)},e.prototype.walkAtLeastOne=function(e,t,n){var r=[new Ka.Option({definition:e.definition})].concat(t,n);this.walk(e,r)},e.prototype.walkAtLeastOneSep=function(e,t,n){var r=za(e,t,n);this.walk(e,r)},e.prototype.walkMany=function(e,t,n){var r=[new Ka.Option({definition:e.definition})].concat(t,n);this.walk(e,r)},e.prototype.walkManySep=function(e,t,n){var r=za(e,t,n);this.walk(e,r)},e.prototype.walkOr=function(e,t,n){var r=this,i=t.concat(n);(0,Wa.forEach)(e.definition,(function(e){var t=new Ka.Alternative({definition:[e]});r.walk(t,i)}))},e}();function za(e,t,n){return[new Ka.Option({definition:[new Ka.Terminal({terminalType:e.separator})].concat(e.definition)})].concat(t,n)}ha.RestWalker=Ga;var Ba={},Ha={},Va={};Object.defineProperty(Va,"__esModule",{value:!0}),Va.GAstVisitor=void 0;var Ya=ma,Xa=function(){function e(){}return e.prototype.visit=function(e){var t=e;switch(t.constructor){case Ya.NonTerminal:return this.visitNonTerminal(t);case Ya.Alternative:return this.visitAlternative(t);case Ya.Option:return this.visitOption(t);case Ya.RepetitionMandatory:return this.visitRepetitionMandatory(t);case Ya.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(t);case Ya.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(t);case Ya.Repetition:return this.visitRepetition(t);case Ya.Alternation:return this.visitAlternation(t);case Ya.Terminal:return this.visitTerminal(t);case Ya.Rule:return this.visitRule(t);default:throw Error("non exhaustive match")}},e.prototype.visitNonTerminal=function(e){},e.prototype.visitAlternative=function(e){},e.prototype.visitOption=function(e){},e.prototype.visitRepetition=function(e){},e.prototype.visitRepetitionMandatory=function(e){},e.prototype.visitRepetitionMandatoryWithSeparator=function(e){},e.prototype.visitRepetitionWithSeparator=function(e){},e.prototype.visitAlternation=function(e){},e.prototype.visitTerminal=function(e){},e.prototype.visitRule=function(e){},e}();Va.GAstVisitor=Xa;var Ja=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.collectMethods=Ha.DslMethodsCollectorVisitor=Ha.getProductionDslName=Ha.isBranchingProd=Ha.isOptionalProd=Ha.isSequenceProd=void 0;var Za=Xo,Qa=ma,es=Va;Ha.isSequenceProd=function(e){return e instanceof Qa.Alternative||e instanceof Qa.Option||e instanceof Qa.Repetition||e instanceof Qa.RepetitionMandatory||e instanceof Qa.RepetitionMandatoryWithSeparator||e instanceof Qa.RepetitionWithSeparator||e instanceof Qa.Terminal||e instanceof Qa.Rule},Ha.isOptionalProd=function e(t,n){return void 0===n&&(n=[]),!!(t instanceof Qa.Option||t instanceof Qa.Repetition||t instanceof Qa.RepetitionWithSeparator)||(t instanceof Qa.Alternation?(0,Za.some)(t.definition,(function(t){return e(t,n)})):!(t instanceof Qa.NonTerminal&&(0,Za.contains)(n,t))&&(t instanceof Qa.AbstractProduction&&(t instanceof Qa.NonTerminal&&n.push(t),(0,Za.every)(t.definition,(function(t){return e(t,n)})))))},Ha.isBranchingProd=function(e){return e instanceof Qa.Alternation},Ha.getProductionDslName=function(e){if(e instanceof Qa.NonTerminal)return"SUBRULE";if(e instanceof Qa.Option)return"OPTION";if(e instanceof Qa.Alternation)return"OR";if(e instanceof Qa.RepetitionMandatory)return"AT_LEAST_ONE";if(e instanceof Qa.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(e instanceof Qa.RepetitionWithSeparator)return"MANY_SEP";if(e instanceof Qa.Repetition)return"MANY";if(e instanceof Qa.Terminal)return"CONSUME";throw Error("non exhaustive match")};var ts=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.separator="-",t.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},t}return Ja(t,e),t.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},t.prototype.visitTerminal=function(e){var t=e.terminalType.name+this.separator+"Terminal";(0,Za.has)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},t.prototype.visitNonTerminal=function(e){var t=e.nonTerminalName+this.separator+"Terminal";(0,Za.has)(this.dslMethods,t)||(this.dslMethods[t]=[]),this.dslMethods[t].push(e)},t.prototype.visitOption=function(e){this.dslMethods.option.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.dslMethods.repetitionWithSeparator.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.dslMethods.repetitionMandatory.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)},t.prototype.visitRepetition=function(e){this.dslMethods.repetition.push(e)},t.prototype.visitAlternation=function(e){this.dslMethods.alternation.push(e)},t}(es.GAstVisitor);Ha.DslMethodsCollectorVisitor=ts;var ns=new ts;Ha.collectMethods=function(e){ns.reset(),e.accept(ns);var t=ns.dslMethods;return ns.reset(),t},Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.firstForTerminal=Ba.firstForBranching=Ba.firstForSequence=Ba.first=void 0;var rs=Xo,is=ma,os=Ha;function as(e){if(e instanceof is.NonTerminal)return as(e.referencedRule);if(e instanceof is.Terminal)return us(e);if((0,os.isSequenceProd)(e))return ss(e);if((0,os.isBranchingProd)(e))return cs(e);throw Error("non exhaustive match")}function ss(e){for(var t,n=[],r=e.definition,i=0,o=r.length>i,a=!0;o&&a;)t=r[i],a=(0,os.isOptionalProd)(t),n=n.concat(as(t)),i+=1,o=r.length>i;return(0,rs.uniq)(n)}function cs(e){var t=(0,rs.map)(e.definition,(function(e){return as(e)}));return(0,rs.uniq)((0,rs.flatten)(t))}function us(e){return[e.terminalType]}Ba.first=as,Ba.firstForSequence=ss,Ba.firstForBranching=cs,Ba.firstForTerminal=us;var ls={};Object.defineProperty(ls,"__esModule",{value:!0}),ls.IN=void 0,ls.IN="_~IN~_";var fs=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(pa,"__esModule",{value:!0}),pa.buildInProdFollowPrefix=pa.buildBetweenProdsFollowPrefix=pa.computeAllProdsFollows=pa.ResyncFollowsWalker=void 0;var ds=Ba,ps=Xo,hs=ls,ms=ma,gs=function(e){function t(t){var n=e.call(this)||this;return n.topProd=t,n.follows={},n}return fs(t,e),t.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},t.prototype.walkTerminal=function(e,t,n){},t.prototype.walkProdRef=function(e,t,n){var r=ys(e.referencedRule,e.idx)+this.topProd.name,i=t.concat(n),o=new ms.Alternative({definition:i}),a=(0,ds.first)(o);this.follows[r]=a},t}(ha.RestWalker);function ys(e,t){return e.name+t+hs.IN}pa.ResyncFollowsWalker=gs,pa.computeAllProdsFollows=function(e){var t={};return(0,ps.forEach)(e,(function(e){var n=new gs(e).startWalking();(0,ps.assign)(t,n)})),t},pa.buildBetweenProdsFollowPrefix=ys,pa.buildInProdFollowPrefix=function(e){return e.terminalType.name+e.idx+hs.IN};var vs={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultGrammarValidatorErrorProvider=e.defaultGrammarResolverErrorProvider=e.defaultParserErrorProvider=void 0;var t=ga,n=Xo,r=Xo,i=ma,o=Ha;e.defaultParserErrorProvider={buildMismatchTokenMessage:function(e){var n=e.expected,r=e.actual;return e.previous,e.ruleName,"Expecting "+((0,t.hasTokenLabel)(n)?"--\x3e "+(0,t.tokenLabel)(n)+" <--":"token of type --\x3e "+n.name+" <--")+" but found --\x3e '"+r.image+"' <--"},buildNotAllInputParsedMessage:function(e){var t=e.firstRedundant;return e.ruleName,"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage:function(e){var n=e.expectedPathsPerAlt,i=e.actual;e.previous;var o=e.customUserDescription;e.ruleName;var a="Expecting: ",s="\nbut found: '"+(0,r.first)(i).image+"'";if(o)return a+o+s;var c=(0,r.reduce)(n,(function(e,t){return e.concat(t)}),[]),u=(0,r.map)(c,(function(e){return"["+(0,r.map)(e,(function(e){return(0,t.tokenLabel)(e)})).join(", ")+"]"}));return a+("one of these possible Token sequences:\n"+(0,r.map)(u,(function(e,t){return"  "+(t+1)+". "+e})).join("\n"))+s},buildEarlyExitMessage:function(e){var n=e.expectedIterationPaths,i=e.actual,o=e.customUserDescription;e.ruleName;var a="Expecting: ",s="\nbut found: '"+(0,r.first)(i).image+"'";return o?a+o+s:a+("expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+(0,r.map)(n,(function(e){return"["+(0,r.map)(e,(function(e){return(0,t.tokenLabel)(e)})).join(",")+"]"})).join(" ,")+">")+s}},Object.freeze(e.defaultParserErrorProvider),e.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\ninside top level rule: ->"+e.name+"<-"}},e.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(e,t){var n,a=e.name,s=(0,r.first)(t),c=s.idx,u=(0,o.getProductionDslName)(s),l=(n=s)instanceof i.Terminal?n.terminalType.name:n instanceof i.NonTerminal?n.nonTerminalName:"",f="->"+u+(c>0?c:"")+"<- "+(l?"with argument: ->"+l+"<-":"")+"\n                  appears more than once ("+t.length+" times) in the top level rule: ->"+a+"<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return f=(f=f.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(e){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+e.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(e){var n=(0,r.map)(e.prefixPath,(function(e){return(0,t.tokenLabel)(e)})).join(", "),i=0===e.alternation.idx?"":e.alternation.idx;return"Ambiguous alternatives: <"+e.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\nin <OR"+i+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+n+"> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(e){var n=(0,r.map)(e.prefixPath,(function(e){return(0,t.tokenLabel)(e)})).join(", "),i=0===e.alternation.idx?"":e.alternation.idx,o="Ambiguous Alternatives Detected: <"+e.ambiguityIndices.join(" ,")+"> in <OR"+i+"> inside <"+e.topLevelRule.name+"> Rule,\n<"+n+"> may appears as a prefix path in all these alternatives.\n";return o+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(e){var t=(0,o.getProductionDslName)(e.repetition);return 0!==e.repetition.idx&&(t+=e.repetition.idx),"The repetition <"+t+"> within Rule <"+e.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(e){return"deprecated"},buildEmptyAlternationError:function(e){return"Ambiguous empty alternative: <"+(e.emptyChoiceIdx+1)+"> in <OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(e){return"An Alternation cannot have more than 256 alternatives:\n<OR"+e.alternation.idx+"> inside <"+e.topLevelRule.name+"> Rule.\n has "+(e.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(e){var t=e.topLevelRule.name;return"Left Recursion found in grammar.\nrule: <"+t+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+(t+" --\x3e "+n.map(e.leftRecursionPath,(function(e){return e.name})).concat([t]).join(" --\x3e "))+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(e){return"deprecated"},buildDuplicateRuleNameError:function(e){return"Duplicate definition, rule: ->"+(e.topLevelRule instanceof i.Rule?e.topLevelRule.name:e.topLevelRule)+"<- is already defined in the grammar: ->"+e.grammarName+"<-"}}}(vs);var Rs={},Ts={},_s=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.GastRefResolverVisitor=Ts.resolveGrammar=void 0;var Es=Yo,bs=Xo,ks=Va;Ts.resolveGrammar=function(e,t){var n=new Cs(e,t);return n.resolveRefs(),n.errors};var Cs=function(e){function t(t,n){var r=e.call(this)||this;return r.nameToTopRule=t,r.errMsgProvider=n,r.errors=[],r}return _s(t,e),t.prototype.resolveRefs=function(){var e=this;(0,bs.forEach)((0,bs.values)(this.nameToTopRule),(function(t){e.currTopLevel=t,t.accept(e)}))},t.prototype.visitNonTerminal=function(e){var t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:Es.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}},t}(ks.GAstVisitor);Ts.GastRefResolverVisitor=Cs;var Ps={},xs={},ws={},As=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ws,"__esModule",{value:!0}),ws.nextPossibleTokensAfter=ws.possiblePathsFrom=ws.NextTerminalAfterAtLeastOneSepWalker=ws.NextTerminalAfterAtLeastOneWalker=ws.NextTerminalAfterManySepWalker=ws.NextTerminalAfterManyWalker=ws.AbstractNextTerminalAfterProductionWalker=ws.NextAfterTokenWalker=ws.AbstractNextPossibleTokensWalker=void 0;var Os=ha,Ns=Xo,Ss=Ba,Ds=ma,Is=function(e){function t(t,n){var r=e.call(this)||this;return r.topProd=t,r.path=n,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return As(t,e),t.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,Ns.cloneArr)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,Ns.cloneArr)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},t.prototype.walk=function(t,n){void 0===n&&(n=[]),this.found||e.prototype.walk.call(this,t,n)},t.prototype.walkProdRef=function(e,t,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){var r=t.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}},t.prototype.updateExpectedNext=function(){(0,Ns.isEmpty)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},t}(Os.RestWalker);ws.AbstractNextPossibleTokensWalker=Is;var Ls=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.path=n,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=r.path.lastTok.name,r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return As(t,e),t.prototype.walkTerminal=function(e,t,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){var r=t.concat(n),i=new Ds.Alternative({definition:r});this.possibleTokTypes=(0,Ss.first)(i),this.found=!0}},t}(Is);ws.NextAfterTokenWalker=Ls;var Ms=function(e){function t(t,n){var r=e.call(this)||this;return r.topRule=t,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return As(t,e),t.prototype.startWalking=function(){return this.walk(this.topRule),this.result},t}(Os.RestWalker);ws.AbstractNextTerminalAfterProductionWalker=Ms;var Fs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return As(t,e),t.prototype.walkMany=function(t,n,r){if(t.idx===this.occurrence){var i=(0,Ns.first)(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Ds.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkMany.call(this,t,n,r)},t}(Ms);ws.NextTerminalAfterManyWalker=Fs;var qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return As(t,e),t.prototype.walkManySep=function(t,n,r){if(t.idx===this.occurrence){var i=(0,Ns.first)(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Ds.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkManySep.call(this,t,n,r)},t}(Ms);ws.NextTerminalAfterManySepWalker=qs;var $s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return As(t,e),t.prototype.walkAtLeastOne=function(t,n,r){if(t.idx===this.occurrence){var i=(0,Ns.first)(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Ds.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOne.call(this,t,n,r)},t}(Ms);ws.NextTerminalAfterAtLeastOneWalker=$s;var js=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return As(t,e),t.prototype.walkAtLeastOneSep=function(t,n,r){if(t.idx===this.occurrence){var i=(0,Ns.first)(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof Ds.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else e.prototype.walkAtLeastOneSep.call(this,t,n,r)},t}(Ms);function Us(e,t,n,r){var i=(0,Ns.cloneArr)(n);i.push(e.name);var o=(0,Ns.cloneArr)(r);return o.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:o}}ws.NextTerminalAfterAtLeastOneSepWalker=js,ws.possiblePathsFrom=function e(t,n,r){void 0===r&&(r=[]),r=(0,Ns.cloneArr)(r);var i=[],o=0;function a(a){var s=e(a.concat((0,Ns.drop)(t,o+1)),n,r);return i.concat(s)}for(;r.length<n&&o<t.length;){var s=t[o];if(s instanceof Ds.Alternative)return a(s.definition);if(s instanceof Ds.NonTerminal)return a(s.definition);if(s instanceof Ds.Option)i=a(s.definition);else{if(s instanceof Ds.RepetitionMandatory)return a(c=s.definition.concat([new Ds.Repetition({definition:s.definition})]));if(s instanceof Ds.RepetitionMandatoryWithSeparator)return a(c=[new Ds.Alternative({definition:s.definition}),new Ds.Repetition({definition:[new Ds.Terminal({terminalType:s.separator})].concat(s.definition)})]);if(s instanceof Ds.RepetitionWithSeparator){var c=s.definition.concat([new Ds.Repetition({definition:[new Ds.Terminal({terminalType:s.separator})].concat(s.definition)})]);i=a(c)}else if(s instanceof Ds.Repetition){c=s.definition.concat([new Ds.Repetition({definition:s.definition})]);i=a(c)}else{if(s instanceof Ds.Alternation)return(0,Ns.forEach)(s.definition,(function(e){!1===(0,Ns.isEmpty)(e.definition)&&(i=a(e.definition))})),i;if(!(s instanceof Ds.Terminal))throw Error("non exhaustive match");r.push(s.terminalType)}}o++}return i.push({partialPath:r,suffixDef:(0,Ns.drop)(t,o)}),i},ws.nextPossibleTokensAfter=function(e,t,n,r){var i="EXIT_NONE_TERMINAL",o=[i],a="EXIT_ALTERNATIVE",s=!1,c=t.length,u=c-r-1,l=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!(0,Ns.isEmpty)(f);){var d=f.pop();if(d!==a){var p=d.def,h=d.idx,m=d.ruleStack,g=d.occurrenceStack;if(!(0,Ns.isEmpty)(p)){var y=p[0];if(y===i){var v={idx:h,def:(0,Ns.drop)(p),ruleStack:(0,Ns.dropRight)(m),occurrenceStack:(0,Ns.dropRight)(g)};f.push(v)}else if(y instanceof Ds.Terminal)if(h<c-1){var R=h+1;if(n(t[R],y.terminalType)){v={idx:R,def:(0,Ns.drop)(p),ruleStack:m,occurrenceStack:g};f.push(v)}}else{if(h!==c-1)throw Error("non exhaustive match");l.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:m,occurrenceStack:g}),s=!0}else if(y instanceof Ds.NonTerminal){var T=(0,Ns.cloneArr)(m);T.push(y.nonTerminalName);var _=(0,Ns.cloneArr)(g);_.push(y.idx);v={idx:h,def:y.definition.concat(o,(0,Ns.drop)(p)),ruleStack:T,occurrenceStack:_};f.push(v)}else if(y instanceof Ds.Option){var E={idx:h,def:(0,Ns.drop)(p),ruleStack:m,occurrenceStack:g};f.push(E),f.push(a);var b={idx:h,def:y.definition.concat((0,Ns.drop)(p)),ruleStack:m,occurrenceStack:g};f.push(b)}else if(y instanceof Ds.RepetitionMandatory){var k=new Ds.Repetition({definition:y.definition,idx:y.idx});v={idx:h,def:y.definition.concat([k],(0,Ns.drop)(p)),ruleStack:m,occurrenceStack:g};f.push(v)}else if(y instanceof Ds.RepetitionMandatoryWithSeparator){var C=new Ds.Terminal({terminalType:y.separator});k=new Ds.Repetition({definition:[C].concat(y.definition),idx:y.idx}),v={idx:h,def:y.definition.concat([k],(0,Ns.drop)(p)),ruleStack:m,occurrenceStack:g};f.push(v)}else if(y instanceof Ds.RepetitionWithSeparator){E={idx:h,def:(0,Ns.drop)(p),ruleStack:m,occurrenceStack:g};f.push(E),f.push(a);C=new Ds.Terminal({terminalType:y.separator});var P=new Ds.Repetition({definition:[C].concat(y.definition),idx:y.idx});b={idx:h,def:y.definition.concat([P],(0,Ns.drop)(p)),ruleStack:m,occurrenceStack:g};f.push(b)}else if(y instanceof Ds.Repetition){E={idx:h,def:(0,Ns.drop)(p),ruleStack:m,occurrenceStack:g};f.push(E),f.push(a);P=new Ds.Repetition({definition:y.definition,idx:y.idx}),b={idx:h,def:y.definition.concat([P],(0,Ns.drop)(p)),ruleStack:m,occurrenceStack:g};f.push(b)}else if(y instanceof Ds.Alternation)for(var x=y.definition.length-1;x>=0;x--){var w={idx:h,def:y.definition[x].definition.concat((0,Ns.drop)(p)),ruleStack:m,occurrenceStack:g};f.push(w),f.push(a)}else if(y instanceof Ds.Alternative)f.push({idx:h,def:y.definition.concat((0,Ns.drop)(p)),ruleStack:m,occurrenceStack:g});else{if(!(y instanceof Ds.Rule))throw Error("non exhaustive match");f.push(Us(y,h,m,g))}}}else s&&(0,Ns.last)(f).idx<=u&&f.pop()}return l},function(t){var n=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.areTokenCategoriesNotUsed=t.isStrictPrefixOfPath=t.containsPath=t.getLookaheadPathsForOptionalProd=t.getLookaheadPathsForOr=t.lookAheadSequenceFromAlternatives=t.buildSingleAlternativeLookaheadFunction=t.buildAlternativesLookAheadFunc=t.buildLookaheadFuncForOptionalProd=t.buildLookaheadFuncForOr=t.getProdType=t.PROD_TYPE=void 0;var r,i,o=Xo,a=ws,s=ha,c=ka,u=ma,l=Va;(i=r=t.PROD_TYPE||(t.PROD_TYPE={}))[i.OPTION=0]="OPTION",i[i.REPETITION=1]="REPETITION",i[i.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",i[i.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",i[i.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",i[i.ALTERNATION=5]="ALTERNATION",t.getProdType=function(e){if(e instanceof u.Option)return r.OPTION;if(e instanceof u.Repetition)return r.REPETITION;if(e instanceof u.RepetitionMandatory)return r.REPETITION_MANDATORY;if(e instanceof u.RepetitionMandatoryWithSeparator)return r.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof u.RepetitionWithSeparator)return r.REPETITION_WITH_SEPARATOR;if(e instanceof u.Alternation)return r.ALTERNATION;throw Error("non exhaustive match")},t.buildLookaheadFuncForOr=function(e,t,n,r,i,o){var a=y(e,t,n);return o(a,r,T(a)?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher,i)},t.buildLookaheadFuncForOptionalProd=function(e,t,n,r,i,o){var a=v(e,t,i,n),s=T(a)?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher;return o(a[0],s,r)},t.buildAlternativesLookAheadFunc=function(e,t,n,r){var i=e.length,a=(0,o.every)(e,(function(e){return(0,o.every)(e,(function(e){return 1===e.length}))}));if(t)return function(t){for(var r=(0,o.map)(t,(function(e){return e.GATE})),a=0;a<i;a++){var s=e[a],c=s.length,u=r[a];if(void 0===u||!1!==u.call(this))e:for(var l=0;l<c;l++){for(var f=s[l],d=f.length,p=0;p<d;p++){var h=this.LA(p+1);if(!1===n(h,f[p]))continue e}return a}}};if(a&&!r){var s=(0,o.map)(e,(function(e){return(0,o.flatten)(e)})),c=(0,o.reduce)(s,(function(e,t,n){return(0,o.forEach)(t,(function(t){(0,o.has)(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=n),(0,o.forEach)(t.categoryMatches,(function(t){(0,o.has)(e,t)||(e[t]=n)}))})),e}),[]);return function(){var e=this.LA(1);return c[e.tokenTypeIdx]}}return function(){for(var t=0;t<i;t++){var r=e[t],o=r.length;e:for(var a=0;a<o;a++){for(var s=r[a],c=s.length,u=0;u<c;u++){var l=this.LA(u+1);if(!1===n(l,s[u]))continue e}return t}}}},t.buildSingleAlternativeLookaheadFunction=function(e,t,n){var r=(0,o.every)(e,(function(e){return 1===e.length})),i=e.length;if(r&&!n){var a=(0,o.flatten)(e);if(1===a.length&&(0,o.isEmpty)(a[0].categoryMatches)){var s=a[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}var c=(0,o.reduce)(a,(function(e,t,n){return e[t.tokenTypeIdx]=!0,(0,o.forEach)(t.categoryMatches,(function(t){e[t]=!0})),e}),[]);return function(){var e=this.LA(1);return!0===c[e.tokenTypeIdx]}}return function(){e:for(var n=0;n<i;n++){for(var r=e[n],o=r.length,a=0;a<o;a++){var s=this.LA(a+1);if(!1===t(s,r[a]))continue e}return!0}return!1}};var f=function(e){function t(t,n,r){var i=e.call(this)||this;return i.topProd=t,i.targetOccurrence=n,i.targetProdType=r,i}return n(t,e),t.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},t.prototype.checkIsTarget=function(e,t,n,r){return e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.restDef=n.concat(r),!0)},t.prototype.walkOption=function(t,n,i){this.checkIsTarget(t,r.OPTION,n,i)||e.prototype.walkOption.call(this,t,n,i)},t.prototype.walkAtLeastOne=function(t,n,i){this.checkIsTarget(t,r.REPETITION_MANDATORY,n,i)||e.prototype.walkOption.call(this,t,n,i)},t.prototype.walkAtLeastOneSep=function(t,n,i){this.checkIsTarget(t,r.REPETITION_MANDATORY_WITH_SEPARATOR,n,i)||e.prototype.walkOption.call(this,t,n,i)},t.prototype.walkMany=function(t,n,i){this.checkIsTarget(t,r.REPETITION,n,i)||e.prototype.walkOption.call(this,t,n,i)},t.prototype.walkManySep=function(t,n,i){this.checkIsTarget(t,r.REPETITION_WITH_SEPARATOR,n,i)||e.prototype.walkOption.call(this,t,n,i)},t}(s.RestWalker),d=function(e){function t(t,n,r){var i=e.call(this)||this;return i.targetOccurrence=t,i.targetProdType=n,i.targetRef=r,i.result=[],i}return n(t,e),t.prototype.checkIsTarget=function(e,t){e.idx!==this.targetOccurrence||this.targetProdType!==t||void 0!==this.targetRef&&e!==this.targetRef||(this.result=e.definition)},t.prototype.visitOption=function(e){this.checkIsTarget(e,r.OPTION)},t.prototype.visitRepetition=function(e){this.checkIsTarget(e,r.REPETITION)},t.prototype.visitRepetitionMandatory=function(e){this.checkIsTarget(e,r.REPETITION_MANDATORY)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.checkIsTarget(e,r.REPETITION_MANDATORY_WITH_SEPARATOR)},t.prototype.visitRepetitionWithSeparator=function(e){this.checkIsTarget(e,r.REPETITION_WITH_SEPARATOR)},t.prototype.visitAlternation=function(e){this.checkIsTarget(e,r.ALTERNATION)},t}(l.GAstVisitor);function p(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}function h(e){for(var t=[""],n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<t.length;o++){var a=t[o];i.push(a+"_"+r.tokenTypeIdx);for(var s=0;s<r.categoryMatches.length;s++){var c="_"+r.categoryMatches[s];i.push(a+c)}}t=i}return t}function m(e,t,n){for(var r=0;r<e.length;r++)if(r!==n)for(var i=e[r],o=0;o<t.length;o++){if(!0===i[t[o]])return!1}return!0}function g(e,t){for(var n=(0,o.map)(e,(function(e){return(0,a.possiblePathsFrom)([e],1)})),r=p(n.length),i=(0,o.map)(n,(function(e){var t={};return(0,o.forEach)(e,(function(e){var n=h(e.partialPath);(0,o.forEach)(n,(function(e){t[e]=!0}))})),t})),s=n,c=1;c<=t;c++){var u=s;s=p(u.length);for(var l=function(e){for(var n=u[e],l=0;l<n.length;l++){var f=n[l].partialPath,d=n[l].suffixDef,p=h(f);if(m(i,p,e)||(0,o.isEmpty)(d)||f.length===t){var g=r[e];if(!1===R(g,f)){g.push(f);for(var y=0;y<p.length;y++){var v=p[y];i[e][v]=!0}}}else{var T=(0,a.possiblePathsFrom)(d,c+1,f);s[e]=s[e].concat(T),(0,o.forEach)(T,(function(t){var n=h(t.partialPath);(0,o.forEach)(n,(function(t){i[e][t]=!0}))}))}}},f=0;f<u.length;f++)l(f)}return r}function y(e,t,n,i){var o=new d(e,r.ALTERNATION,i);return t.accept(o),g(o.result,n)}function v(e,t,n,r){var i=new d(e,n);t.accept(i);var o=i.result,a=new f(t,e,n).startWalking();return g([new u.Alternative({definition:o}),new u.Alternative({definition:a})],r)}function R(e,t){e:for(var n=0;n<e.length;n++){var r=e[n];if(r.length===t.length){for(var i=0;i<r.length;i++){var o=t[i],a=r[i];if(!1===(o===a||void 0!==a.categoryMatchesMap[o.tokenTypeIdx]))continue e}return!0}}return!1}function T(e){return(0,o.every)(e,(function(e){return(0,o.every)(e,(function(e){return(0,o.every)(e,(function(e){return(0,o.isEmpty)(e.categoryMatches)}))}))}))}t.lookAheadSequenceFromAlternatives=g,t.getLookaheadPathsForOr=y,t.getLookaheadPathsForOptionalProd=v,t.containsPath=R,t.isStrictPrefixOfPath=function(e,t){return e.length<t.length&&(0,o.every)(e,(function(e,n){var r=t[n];return e===r||r.categoryMatchesMap[e.tokenTypeIdx]}))},t.areTokenCategoriesNotUsed=T}(xs);var Ws=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.checkPrefixAlternativesAmbiguities=Ps.validateSomeNonEmptyLookaheadPath=Ps.validateTooManyAlts=Ps.RepetionCollector=Ps.validateAmbiguousAlternationAlternatives=Ps.validateEmptyOrAlternative=Ps.getFirstNoneTerminal=Ps.validateNoLeftRecursion=Ps.validateRuleIsOverridden=Ps.validateRuleDoesNotAlreadyExist=Ps.OccurrenceValidationCollector=Ps.identifyProductionForDuplicates=Ps.validateGrammar=void 0;var Ks=Xo,Gs=Xo,zs=Yo,Bs=Ha,Hs=xs,Vs=ws,Ys=ma,Xs=Va;function Js(e){return(0,Bs.getProductionDslName)(e)+"_#_"+e.idx+"_#_"+Zs(e)}function Zs(e){return e instanceof Ys.Terminal?e.terminalType.name:e instanceof Ys.NonTerminal?e.nonTerminalName:""}Ps.validateGrammar=function(e,t,n,r,i){var o=Ks.map(e,(function(e){return function(e,t){var n=new Qs;e.accept(n);var r=n.allProductions,i=Ks.groupBy(r,Js),o=Ks.pick(i,(function(e){return e.length>1}));return Ks.map(Ks.values(o),(function(n){var r=Ks.first(n),i=t.buildDuplicateFoundError(e,n),o=(0,Bs.getProductionDslName)(r),a={message:i,type:zs.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:o,occurrence:r.idx},s=Zs(r);return s&&(a.parameter=s),a}))}(e,r)})),a=Ks.map(e,(function(e){return tc(e,e,r)})),s=[],c=[],u=[];(0,Gs.every)(a,Gs.isEmpty)&&(s=(0,Gs.map)(e,(function(e){return ic(e,r)})),c=(0,Gs.map)(e,(function(e){return oc(e,t,r)})),u=cc(e,t,r));var l=function(e,t,n){var r=[],i=(0,Gs.map)(t,(function(e){return e.name}));return(0,Gs.forEach)(e,(function(e){var t=e.name;if((0,Gs.contains)(i,t)){var o=n.buildNamespaceConflictError(e);r.push({message:o,type:zs.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:t})}})),r}(e,n,r),f=(0,Gs.map)(e,(function(e){return sc(e,r)})),d=(0,Gs.map)(e,(function(t){return ec(t,e,i,r)}));return Ks.flatten(o.concat(u,a,s,c,l,f,d))},Ps.identifyProductionForDuplicates=Js;var Qs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return Ws(t,e),t.prototype.visitNonTerminal=function(e){this.allProductions.push(e)},t.prototype.visitOption=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t.prototype.visitAlternation=function(e){this.allProductions.push(e)},t.prototype.visitTerminal=function(e){this.allProductions.push(e)},t}(Xs.GAstVisitor);function ec(e,t,n,r){var i=[];if((0,Gs.reduce)(t,(function(t,n){return n.name===e.name?t+1:t}),0)>1){var o=r.buildDuplicateRuleNameError({topLevelRule:e,grammarName:n});i.push({message:o,type:zs.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function tc(e,t,n,r){void 0===r&&(r=[]);var i=[],o=nc(t.definition);if(Ks.isEmpty(o))return[];var a=e.name;Ks.contains(o,e)&&i.push({message:n.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:r}),type:zs.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:a});var s=Ks.difference(o,r.concat([e])),c=Ks.map(s,(function(t){var i=Ks.cloneArr(r);return i.push(t),tc(e,t,n,i)}));return i.concat(Ks.flatten(c))}function nc(e){var t=[];if(Ks.isEmpty(e))return t;var n=Ks.first(e);if(n instanceof Ys.NonTerminal)t.push(n.referencedRule);else if(n instanceof Ys.Alternative||n instanceof Ys.Option||n instanceof Ys.RepetitionMandatory||n instanceof Ys.RepetitionMandatoryWithSeparator||n instanceof Ys.RepetitionWithSeparator||n instanceof Ys.Repetition)t=t.concat(nc(n.definition));else if(n instanceof Ys.Alternation)t=Ks.flatten(Ks.map(n.definition,(function(e){return nc(e.definition)})));else if(!(n instanceof Ys.Terminal))throw Error("non exhaustive match");var r=(0,Bs.isOptionalProd)(n),i=e.length>1;if(r&&i){var o=Ks.drop(e);return t.concat(nc(o))}return t}Ps.OccurrenceValidationCollector=Qs,Ps.validateRuleDoesNotAlreadyExist=ec,Ps.validateRuleIsOverridden=function(e,t,n){var r,i=[];return Ks.contains(t,e)||(r="Invalid rule override, rule: ->"+e+"<- cannot be overridden in the grammar: ->"+n+"<-as it is not defined in any of the super grammars ",i.push({message:r,type:zs.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:e})),i},Ps.validateNoLeftRecursion=tc,Ps.getFirstNoneTerminal=nc;var rc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alternations=[],t}return Ws(t,e),t.prototype.visitAlternation=function(e){this.alternations.push(e)},t}(Xs.GAstVisitor);function ic(e,t){var n=new rc;e.accept(n);var r=n.alternations;return Ks.reduce(r,(function(n,r){var i=Ks.dropRight(r.definition),o=Ks.map(i,(function(n,i){var o=(0,Vs.nextPossibleTokensAfter)([n],[],null,1);return Ks.isEmpty(o)?{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:i}),type:zs.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:r.idx,alternative:i+1}:null}));return n.concat(Ks.compact(o))}),[])}function oc(e,t,n){var r=new rc;e.accept(r);var i=r.alternations;return i=(0,Gs.reject)(i,(function(e){return!0===e.ignoreAmbiguities})),Ks.reduce(i,(function(r,i){var o=i.idx,a=i.maxLookahead||t,s=(0,Hs.getLookaheadPathsForOr)(o,e,a,i),c=function(e,t,n,r){var i=[],o=(0,Gs.reduce)(e,(function(n,r,o){return!0===t.definition[o].ignoreAmbiguities||(0,Gs.forEach)(r,(function(r){var a=[o];(0,Gs.forEach)(e,(function(e,n){o!==n&&(0,Hs.containsPath)(e,r)&&!0!==t.definition[n].ignoreAmbiguities&&a.push(n)})),a.length>1&&!(0,Hs.containsPath)(i,r)&&(i.push(r),n.push({alts:a,path:r}))})),n}),[]);return Ks.map(o,(function(e){var i=(0,Gs.map)(e.alts,(function(e){return e+1}));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:zs.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:t.idx,alternatives:[e.alts]}}))}(s,i,e,n),u=uc(s,i,e,n);return r.concat(c,u)}),[])}Ps.validateEmptyOrAlternative=ic,Ps.validateAmbiguousAlternationAlternatives=oc;var ac=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allProductions=[],t}return Ws(t,e),t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t}(Xs.GAstVisitor);function sc(e,t){var n=new rc;e.accept(n);var r=n.alternations;return Ks.reduce(r,(function(n,r){return r.definition.length>255&&n.push({message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:zs.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:e.name,occurrence:r.idx}),n}),[])}function cc(e,t,n){var r=[];return(0,Gs.forEach)(e,(function(e){var i=new ac;e.accept(i);var o=i.allProductions;(0,Gs.forEach)(o,(function(i){var o=(0,Hs.getProdType)(i),a=i.maxLookahead||t,s=i.idx,c=(0,Hs.getLookaheadPathsForOptionalProd)(s,e,o,a)[0];if((0,Gs.isEmpty)((0,Gs.flatten)(c))){var u=n.buildEmptyRepetitionError({topLevelRule:e,repetition:i});r.push({message:u,type:zs.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:e.name})}}))})),r}function uc(e,t,n,r){var i=[],o=(0,Gs.reduce)(e,(function(e,t,n){var r=(0,Gs.map)(t,(function(e){return{idx:n,path:e}}));return e.concat(r)}),[]);return(0,Gs.forEach)(o,(function(e){if(!0!==t.definition[e.idx].ignoreAmbiguities){var a=e.idx,s=e.path,c=(0,Gs.findAll)(o,(function(e){return!0!==t.definition[e.idx].ignoreAmbiguities&&e.idx<a&&(0,Hs.isStrictPrefixOfPath)(e.path,s)})),u=(0,Gs.map)(c,(function(e){var i=[e.idx+1,a+1],o=0===t.idx?"":t.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:i,prefixPath:e.path}),type:zs.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:o,alternatives:i}}));i=i.concat(u)}})),i}Ps.RepetionCollector=ac,Ps.validateTooManyAlts=sc,Ps.validateSomeNonEmptyLookaheadPath=cc,Ps.checkPrefixAlternativesAmbiguities=uc,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.validateGrammar=Rs.resolveGrammar=void 0;var lc=Xo,fc=Ts,dc=Ps,pc=vs;Rs.resolveGrammar=function(e){e=(0,lc.defaults)(e,{errMsgProvider:pc.defaultGrammarResolverErrorProvider});var t={};return(0,lc.forEach)(e.rules,(function(e){t[e.name]=e})),(0,fc.resolveGrammar)(t,e.errMsgProvider)},Rs.validateGrammar=function(e){return e=(0,lc.defaults)(e,{errMsgProvider:pc.defaultGrammarValidatorErrorProvider}),(0,dc.validateGrammar)(e.rules,e.maxLookahead,e.tokenTypes,e.errMsgProvider,e.grammarName)};var hc={},mc={},gc=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(mc,"__esModule",{value:!0}),mc.EarlyExitException=mc.NotAllInputParsedException=mc.NoViableAltException=mc.MismatchedTokenException=mc.isRecognitionException=void 0;var yc=Xo,vc=["MismatchedTokenException","NoViableAltException","EarlyExitException","NotAllInputParsedException"];Object.freeze(vc),mc.isRecognitionException=function(e){return(0,yc.contains)(vc,e.name)};var Rc=function(e){function t(t,n){var r=this.constructor,i=e.call(this,t)||this;return i.token=n,i.resyncedTokens=[],Object.setPrototypeOf(i,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return gc(t,e),t}(Error),Tc=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name="MismatchedTokenException",i}return gc(t,e),t}(Rc);mc.MismatchedTokenException=Tc;var _c=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name="NoViableAltException",i}return gc(t,e),t}(Rc);mc.NoViableAltException=_c;var Ec=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="NotAllInputParsedException",r}return gc(t,e),t}(Rc);mc.NotAllInputParsedException=Ec;var bc=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.previousToken=r,i.name="EarlyExitException",i}return gc(t,e),t}(Rc);mc.EarlyExitException=bc,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.attemptInRepetitionRecovery=e.Recoverable=e.InRuleRecoveryException=e.IN_RULE_RECOVERY_EXCEPTION=e.EOF_FOLLOW_KEY=void 0;var t=ga,n=Xo,r=mc,i=ls,o=Yo;function a(t){this.name=e.IN_RULE_RECOVERY_EXCEPTION,this.message=t}e.EOF_FOLLOW_KEY={},e.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException",e.InRuleRecoveryException=a,a.prototype=Error.prototype;var s=function(){function s(){}return s.prototype.initRecoverable=function(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,n.has)(e,"recoveryEnabled")?e.recoveryEnabled:o.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=c)},s.prototype.getTokenToInsert=function(e){var n=(0,t.createTokenInstance)(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n},s.prototype.canTokenTypeBeInsertedInRecovery=function(e){return!0},s.prototype.tryInRepetitionRecovery=function(e,t,i,o){for(var a=this,s=this.findReSyncTokenType(),c=this.exportLexerState(),u=[],l=!1,f=this.LA(1),d=this.LA(1),p=function(){var e=a.LA(0),t=a.errorMessageProvider.buildMismatchTokenMessage({expected:o,actual:f,previous:e,ruleName:a.getCurrRuleFullName()}),i=new r.MismatchedTokenException(t,f,a.LA(0));i.resyncedTokens=(0,n.dropRight)(u),a.SAVE_ERROR(i)};!l;){if(this.tokenMatcher(d,o))return void p();if(i.call(this))return p(),void e.apply(this,t);this.tokenMatcher(d,s)?l=!0:(d=this.SKIP_TOKEN(),this.addToResyncTokens(d,u))}this.importLexerState(c)},s.prototype.shouldInRepetitionRecoveryBeTried=function(e,t,n){return!1!==n&&(void 0!==e&&void 0!==t&&(!this.tokenMatcher(this.LA(1),e)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))))},s.prototype.getFollowsForInRuleRecovery=function(e,t){var n=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(n)},s.prototype.tryInRuleRecovery=function(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new a("sad sad panda")},s.prototype.canPerformInRuleRecovery=function(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)},s.prototype.canRecoverWithSingleTokenInsertion=function(e,t){var r=this;if(!this.canTokenTypeBeInsertedInRecovery(e))return!1;if((0,n.isEmpty)(t))return!1;var i=this.LA(1);return void 0!==(0,n.find)(t,(function(e){return r.tokenMatcher(i,e)}))},s.prototype.canRecoverWithSingleTokenDeletion=function(e){return this.tokenMatcher(this.LA(2),e)},s.prototype.isInCurrentRuleReSyncSet=function(e){var t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return(0,n.contains)(r,e)},s.prototype.findReSyncTokenType=function(){for(var e=this.flattenFollowSet(),t=this.LA(1),r=2;;){var i=t.tokenType;if((0,n.contains)(e,i))return i;t=this.LA(r),r++}},s.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return e.EOF_FOLLOW_KEY;var t=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}},s.prototype.buildFullFollowKeyStack=function(){var t=this,r=this.RULE_STACK,i=this.RULE_OCCURRENCE_STACK;return(0,n.map)(r,(function(n,o){return 0===o?e.EOF_FOLLOW_KEY:{ruleName:t.shortRuleNameToFullName(n),idxInCallingRule:i[o],inRule:t.shortRuleNameToFullName(r[o-1])}}))},s.prototype.flattenFollowSet=function(){var e=this,t=(0,n.map)(this.buildFullFollowKeyStack(),(function(t){return e.getFollowSetFromFollowKey(t)}));return(0,n.flatten)(t)},s.prototype.getFollowSetFromFollowKey=function(n){if(n===e.EOF_FOLLOW_KEY)return[t.EOF];var r=n.ruleName+n.idxInCallingRule+i.IN+n.inRule;return this.resyncFollows[r]},s.prototype.addToResyncTokens=function(e,n){return this.tokenMatcher(e,t.EOF)||n.push(e),n},s.prototype.reSyncTo=function(e){for(var t=[],r=this.LA(1);!1===this.tokenMatcher(r,e);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return(0,n.dropRight)(t)},s.prototype.attemptInRepetitionRecovery=function(e,t,n,r,i,o,a){},s.prototype.getCurrentGrammarPath=function(e,t){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:(0,n.cloneArr)(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:t}},s.prototype.getHumanReadableRuleStack=function(){var e=this;return(0,n.map)(this.RULE_STACK,(function(t){return e.shortRuleNameToFullName(t)}))},s}();function c(e,n,r,i,o,a,s){var c=this.getKeyForAutomaticLookahead(i,o),u=this.firstAfterRepMap[c];if(void 0===u){var l=this.getCurrRuleFullName();u=new a(this.getGAstProductions()[l],o).startWalking(),this.firstAfterRepMap[c]=u}var f=u.token,d=u.occurrence,p=u.isEndOfRule;1===this.RULE_STACK.length&&p&&void 0===f&&(f=t.EOF,d=1),this.shouldInRepetitionRecoveryBeTried(f,d,s)&&this.tryInRepetitionRecovery(e,n,r,f)}e.Recoverable=s,e.attemptInRepetitionRecovery=c}(hc);var kc={},Cc={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyForAutomaticLookahead=e.AT_LEAST_ONE_SEP_IDX=e.MANY_SEP_IDX=e.AT_LEAST_ONE_IDX=e.MANY_IDX=e.OPTION_IDX=e.OR_IDX=e.BITS_FOR_ALT_IDX=e.BITS_FOR_RULE_IDX=e.BITS_FOR_OCCURRENCE_IDX=e.BITS_FOR_METHOD_TYPE=void 0,e.BITS_FOR_METHOD_TYPE=4,e.BITS_FOR_OCCURRENCE_IDX=8,e.BITS_FOR_RULE_IDX=12,e.BITS_FOR_ALT_IDX=8,e.OR_IDX=1<<e.BITS_FOR_OCCURRENCE_IDX,e.OPTION_IDX=2<<e.BITS_FOR_OCCURRENCE_IDX,e.MANY_IDX=3<<e.BITS_FOR_OCCURRENCE_IDX,e.AT_LEAST_ONE_IDX=4<<e.BITS_FOR_OCCURRENCE_IDX,e.MANY_SEP_IDX=5<<e.BITS_FOR_OCCURRENCE_IDX,e.AT_LEAST_ONE_SEP_IDX=6<<e.BITS_FOR_OCCURRENCE_IDX,e.getKeyForAutomaticLookahead=function(e,t,n){return n|t|e},e.BITS_FOR_ALT_IDX}(Cc),Object.defineProperty(kc,"__esModule",{value:!0}),kc.LooksAhead=void 0;var Pc=xs,xc=Xo,wc=Yo,Ac=Cc,Oc=Ha,Nc=function(){function e(){}return e.prototype.initLooksAhead=function(e){this.dynamicTokensEnabled=(0,xc.has)(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:wc.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=(0,xc.has)(e,"maxLookahead")?e.maxLookahead:wc.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=(0,xc.isES2015MapSupported)()?new Map:[],(0,xc.isES2015MapSupported)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},e.prototype.preComputeLookaheadFunctions=function(e){var t=this;(0,xc.forEach)(e,(function(e){t.TRACE_INIT(e.name+" Rule Lookahead",(function(){var n=(0,Oc.collectMethods)(e),r=n.alternation,i=n.repetition,o=n.option,a=n.repetitionMandatory,s=n.repetitionMandatoryWithSeparator,c=n.repetitionWithSeparator;(0,xc.forEach)(r,(function(n){var r=0===n.idx?"":n.idx;t.TRACE_INIT(""+(0,Oc.getProductionDslName)(n)+r,(function(){var r=(0,Pc.buildLookaheadFuncForOr)(n.idx,e,n.maxLookahead||t.maxLookahead,n.hasPredicates,t.dynamicTokensEnabled,t.lookAheadBuilderForAlternatives),i=(0,Ac.getKeyForAutomaticLookahead)(t.fullRuleNameToShort[e.name],Ac.OR_IDX,n.idx);t.setLaFuncCache(i,r)}))})),(0,xc.forEach)(i,(function(n){t.computeLookaheadFunc(e,n.idx,Ac.MANY_IDX,Pc.PROD_TYPE.REPETITION,n.maxLookahead,(0,Oc.getProductionDslName)(n))})),(0,xc.forEach)(o,(function(n){t.computeLookaheadFunc(e,n.idx,Ac.OPTION_IDX,Pc.PROD_TYPE.OPTION,n.maxLookahead,(0,Oc.getProductionDslName)(n))})),(0,xc.forEach)(a,(function(n){t.computeLookaheadFunc(e,n.idx,Ac.AT_LEAST_ONE_IDX,Pc.PROD_TYPE.REPETITION_MANDATORY,n.maxLookahead,(0,Oc.getProductionDslName)(n))})),(0,xc.forEach)(s,(function(n){t.computeLookaheadFunc(e,n.idx,Ac.AT_LEAST_ONE_SEP_IDX,Pc.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,n.maxLookahead,(0,Oc.getProductionDslName)(n))})),(0,xc.forEach)(c,(function(n){t.computeLookaheadFunc(e,n.idx,Ac.MANY_SEP_IDX,Pc.PROD_TYPE.REPETITION_WITH_SEPARATOR,n.maxLookahead,(0,Oc.getProductionDslName)(n))}))}))}))},e.prototype.computeLookaheadFunc=function(e,t,n,r,i,o){var a=this;this.TRACE_INIT(""+o+(0===t?"":t),(function(){var o=(0,Pc.buildLookaheadFuncForOptionalProd)(t,e,i||a.maxLookahead,a.dynamicTokensEnabled,r,a.lookAheadBuilderForOptional),s=(0,Ac.getKeyForAutomaticLookahead)(a.fullRuleNameToShort[e.name],n,t);a.setLaFuncCache(s,o)}))},e.prototype.lookAheadBuilderForOptional=function(e,t,n){return(0,Pc.buildSingleAlternativeLookaheadFunction)(e,t,n)},e.prototype.lookAheadBuilderForAlternatives=function(e,t,n,r){return(0,Pc.buildAlternativesLookAheadFunc)(e,t,n,r)},e.prototype.getKeyForAutomaticLookahead=function(e,t){var n=this.getLastExplicitRuleShortName();return(0,Ac.getKeyForAutomaticLookahead)(n,e,t)},e.prototype.getLaFuncFromCache=function(e){},e.prototype.getLaFuncFromMap=function(e){return this.lookAheadFuncsCache.get(e)},e.prototype.getLaFuncFromObj=function(e){return this.lookAheadFuncsCache[e]},e.prototype.setLaFuncCache=function(e,t){},e.prototype.setLaFuncCacheUsingMap=function(e,t){this.lookAheadFuncsCache.set(e,t)},e.prototype.setLaFuncUsingObj=function(e,t){this.lookAheadFuncsCache[e]=t},e}();kc.LooksAhead=Nc;var Sc={},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.addNoneTerminalToCst=Dc.addTerminalToCst=Dc.setNodeLocationFull=Dc.setNodeLocationOnlyOffset=void 0,Dc.setNodeLocationOnlyOffset=function(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset)},Dc.setNodeLocationFull=function(e,t){!0===isNaN(e.startOffset)?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset==!0&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)},Dc.addTerminalToCst=function(e,t,n){void 0===e.children[n]?e.children[n]=[t]:e.children[n].push(t)},Dc.addNoneTerminalToCst=function(e,t,n){void 0===e.children[t]?e.children[t]=[n]:e.children[t].push(n)};var Ic={},Lc={};Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.defineNameProp=Lc.functionName=Lc.classNameFromInstance=void 0;var Mc=Xo;Lc.classNameFromInstance=function(e){return Fc(e.constructor)};function Fc(e){var t=e.name;return t||"anonymous"}Lc.functionName=Fc,Lc.defineNameProp=function(e,t){var n=Object.getOwnPropertyDescriptor(e,"name");return!(!(0,Mc.isUndefined)(n)&&!n.configurable)&&(Object.defineProperty(e,"name",{enumerable:!1,configurable:!0,writable:!1,value:t}),!0)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateRedundantMethods=e.validateMissingCstMethods=e.validateVisitor=e.CstVisitorDefinitionError=e.createBaseVisitorConstructorWithDefaults=e.createBaseSemanticVisitorConstructor=e.defaultVisit=void 0;var t,n,r=Xo,i=Lc;function o(e,t){for(var n=(0,r.keys)(e),i=n.length,o=0;o<i;o++)for(var a=e[n[o]],s=a.length,c=0;c<s;c++){var u=a[c];void 0===u.tokenTypeIdx&&this[u.name](u.children,t)}}function a(e,t){var n=s(e,t),r=u(e,t);return n.concat(r)}function s(e,n){var o=(0,r.map)(n,(function(n){if(!(0,r.isFunction)(e[n]))return{msg:"Missing visitor method: <"+n+"> on "+(0,i.functionName)(e.constructor)+" CST Visitor.",type:t.MISSING_METHOD,methodName:n}}));return(0,r.compact)(o)}e.defaultVisit=o,e.createBaseSemanticVisitorConstructor=function(e,t){var n=function(){};return(0,i.defineNameProp)(n,e+"BaseSemantics"),(n.prototype={visit:function(e,t){if((0,r.isArray)(e)&&(e=e[0]),!(0,r.isUndefined)(e))return this[e.name](e.children,t)},validateVisitor:function(){var e=a(this,t);if(!(0,r.isEmpty)(e)){var n=(0,r.map)(e,(function(e){return e.msg}));throw Error("Errors Detected in CST Visitor <"+(0,i.functionName)(this.constructor)+">:\n\t"+n.join("\n\n").replace(/\n/g,"\n\t"))}}}).constructor=n,n._RULE_NAMES=t,n},e.createBaseVisitorConstructorWithDefaults=function(e,t,n){var a=function(){};(0,i.defineNameProp)(a,e+"BaseSemanticsWithDefaults");var s=Object.create(n.prototype);return(0,r.forEach)(t,(function(e){s[e]=o})),(a.prototype=s).constructor=a,a},(n=t=e.CstVisitorDefinitionError||(e.CstVisitorDefinitionError={}))[n.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",n[n.MISSING_METHOD=1]="MISSING_METHOD",e.validateVisitor=a,e.validateMissingCstMethods=s;var c=["constructor","visit","validateVisitor"];function u(e,n){var o=[];for(var a in e)!(0,r.isFunction)(e[a])||(0,r.contains)(c,a)||(0,r.contains)(n,a)||o.push({msg:"Redundant visitor method: <"+a+"> on "+(0,i.functionName)(e.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\n",type:t.REDUNDANT_METHOD,methodName:a});return o}e.validateRedundantMethods=u}(Ic),Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.TreeBuilder=void 0;var qc=Dc,$c=Xo,jc=Ic,Uc=Yo,Wc=function(){function e(){}return e.prototype.initTreeBuilder=function(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=(0,$c.has)(e,"nodeLocationTracking")?e.nodeLocationTracking:Uc.DEFAULT_PARSER_CONFIG.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=qc.setNodeLocationFull,this.setNodeLocationFromNode=qc.setNodeLocationFull,this.cstPostRule=$c.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=$c.NOOP,this.setNodeLocationFromNode=$c.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=qc.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=qc.setNodeLocationOnlyOffset,this.cstPostRule=$c.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=$c.NOOP,this.setNodeLocationFromNode=$c.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'+e.nodeLocationTracking+'"');this.setNodeLocationFromToken=$c.NOOP,this.setNodeLocationFromNode=$c.NOOP,this.cstPostRule=$c.NOOP,this.setInitialNodeLocation=$c.NOOP}else this.cstInvocationStateUpdate=$c.NOOP,this.cstFinallyStateUpdate=$c.NOOP,this.cstPostTerminal=$c.NOOP,this.cstPostNonTerminal=$c.NOOP,this.cstPostRule=$c.NOOP},e.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(e){e.location={startOffset:NaN,endOffset:NaN}},e.prototype.setInitialNodeLocationOnlyOffsetRegular=function(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},e.prototype.setInitialNodeLocationFullRecovery=function(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.setInitialNodeLocationFullRegular=function(e){var t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},e.prototype.cstInvocationStateUpdate=function(e,t){var n={name:e,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},e.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},e.prototype.cstPostRuleFull=function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==!0?(n.endOffset=t.endOffset,n.endLine=t.endLine,n.endColumn=t.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)},e.prototype.cstPostRuleOnlyOffset=function(e){var t=this.LA(0),n=e.location;n.startOffset<=t.startOffset==!0?n.endOffset=t.endOffset:n.startOffset=NaN},e.prototype.cstPostTerminal=function(e,t){var n=this.CST_STACK[this.CST_STACK.length-1];(0,qc.addTerminalToCst)(n,t,e),this.setNodeLocationFromToken(n.location,t)},e.prototype.cstPostNonTerminal=function(e,t){var n=this.CST_STACK[this.CST_STACK.length-1];(0,qc.addNoneTerminalToCst)(n,t,e),this.setNodeLocationFromNode(n.location,e.location)},e.prototype.getBaseCstVisitorConstructor=function(){if((0,$c.isUndefined)(this.baseCstVisitorConstructor)){var e=(0,jc.createBaseSemanticVisitorConstructor)(this.className,(0,$c.keys)(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor},e.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,$c.isUndefined)(this.baseCstVisitorWithDefaultsConstructor)){var e=(0,jc.createBaseVisitorConstructorWithDefaults)(this.className,(0,$c.keys)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor},e.prototype.getLastExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-1]},e.prototype.getPreviousExplicitRuleShortName=function(){var e=this.RULE_STACK;return e[e.length-2]},e.prototype.getLastExplicitRuleOccurrenceIndex=function(){var e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]},e}();Sc.TreeBuilder=Wc;var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.LexerAdapter=void 0;var Gc=Yo,zc=function(){function e(){}return e.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(e.prototype,"input",{get:function(){return this.tokVector},set:function(e){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length},enumerable:!1,configurable:!0}),e.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Gc.END_OF_FILE},e.prototype.LA=function(e){var t=this.currIdx+e;return t<0||this.tokVectorLength<=t?Gc.END_OF_FILE:this.tokVector[t]},e.prototype.consumeToken=function(){this.currIdx++},e.prototype.exportLexerState=function(){return this.currIdx},e.prototype.importLexerState=function(e){this.currIdx=e},e.prototype.resetLexerState=function(){this.currIdx=-1},e.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},e.prototype.getLexerPosition=function(){return this.exportLexerState()},e}();Kc.LexerAdapter=zc;var Bc={};Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.RecognizerApi=void 0;var Hc=Xo,Vc=mc,Yc=Yo,Xc=vs,Jc=Ps,Zc=ma,Qc=function(){function e(){}return e.prototype.ACTION=function(e){return e.call(this)},e.prototype.consume=function(e,t,n){return this.consumeInternal(t,e,n)},e.prototype.subrule=function(e,t,n){return this.subruleInternal(t,e,n)},e.prototype.option=function(e,t){return this.optionInternal(t,e)},e.prototype.or=function(e,t){return this.orInternal(t,e)},e.prototype.many=function(e,t){return this.manyInternal(e,t)},e.prototype.atLeastOne=function(e,t){return this.atLeastOneInternal(e,t)},e.prototype.CONSUME=function(e,t){return this.consumeInternal(e,0,t)},e.prototype.CONSUME1=function(e,t){return this.consumeInternal(e,1,t)},e.prototype.CONSUME2=function(e,t){return this.consumeInternal(e,2,t)},e.prototype.CONSUME3=function(e,t){return this.consumeInternal(e,3,t)},e.prototype.CONSUME4=function(e,t){return this.consumeInternal(e,4,t)},e.prototype.CONSUME5=function(e,t){return this.consumeInternal(e,5,t)},e.prototype.CONSUME6=function(e,t){return this.consumeInternal(e,6,t)},e.prototype.CONSUME7=function(e,t){return this.consumeInternal(e,7,t)},e.prototype.CONSUME8=function(e,t){return this.consumeInternal(e,8,t)},e.prototype.CONSUME9=function(e,t){return this.consumeInternal(e,9,t)},e.prototype.SUBRULE=function(e,t){return this.subruleInternal(e,0,t)},e.prototype.SUBRULE1=function(e,t){return this.subruleInternal(e,1,t)},e.prototype.SUBRULE2=function(e,t){return this.subruleInternal(e,2,t)},e.prototype.SUBRULE3=function(e,t){return this.subruleInternal(e,3,t)},e.prototype.SUBRULE4=function(e,t){return this.subruleInternal(e,4,t)},e.prototype.SUBRULE5=function(e,t){return this.subruleInternal(e,5,t)},e.prototype.SUBRULE6=function(e,t){return this.subruleInternal(e,6,t)},e.prototype.SUBRULE7=function(e,t){return this.subruleInternal(e,7,t)},e.prototype.SUBRULE8=function(e,t){return this.subruleInternal(e,8,t)},e.prototype.SUBRULE9=function(e,t){return this.subruleInternal(e,9,t)},e.prototype.OPTION=function(e){return this.optionInternal(e,0)},e.prototype.OPTION1=function(e){return this.optionInternal(e,1)},e.prototype.OPTION2=function(e){return this.optionInternal(e,2)},e.prototype.OPTION3=function(e){return this.optionInternal(e,3)},e.prototype.OPTION4=function(e){return this.optionInternal(e,4)},e.prototype.OPTION5=function(e){return this.optionInternal(e,5)},e.prototype.OPTION6=function(e){return this.optionInternal(e,6)},e.prototype.OPTION7=function(e){return this.optionInternal(e,7)},e.prototype.OPTION8=function(e){return this.optionInternal(e,8)},e.prototype.OPTION9=function(e){return this.optionInternal(e,9)},e.prototype.OR=function(e){return this.orInternal(e,0)},e.prototype.OR1=function(e){return this.orInternal(e,1)},e.prototype.OR2=function(e){return this.orInternal(e,2)},e.prototype.OR3=function(e){return this.orInternal(e,3)},e.prototype.OR4=function(e){return this.orInternal(e,4)},e.prototype.OR5=function(e){return this.orInternal(e,5)},e.prototype.OR6=function(e){return this.orInternal(e,6)},e.prototype.OR7=function(e){return this.orInternal(e,7)},e.prototype.OR8=function(e){return this.orInternal(e,8)},e.prototype.OR9=function(e){return this.orInternal(e,9)},e.prototype.MANY=function(e){this.manyInternal(0,e)},e.prototype.MANY1=function(e){this.manyInternal(1,e)},e.prototype.MANY2=function(e){this.manyInternal(2,e)},e.prototype.MANY3=function(e){this.manyInternal(3,e)},e.prototype.MANY4=function(e){this.manyInternal(4,e)},e.prototype.MANY5=function(e){this.manyInternal(5,e)},e.prototype.MANY6=function(e){this.manyInternal(6,e)},e.prototype.MANY7=function(e){this.manyInternal(7,e)},e.prototype.MANY8=function(e){this.manyInternal(8,e)},e.prototype.MANY9=function(e){this.manyInternal(9,e)},e.prototype.MANY_SEP=function(e){this.manySepFirstInternal(0,e)},e.prototype.MANY_SEP1=function(e){this.manySepFirstInternal(1,e)},e.prototype.MANY_SEP2=function(e){this.manySepFirstInternal(2,e)},e.prototype.MANY_SEP3=function(e){this.manySepFirstInternal(3,e)},e.prototype.MANY_SEP4=function(e){this.manySepFirstInternal(4,e)},e.prototype.MANY_SEP5=function(e){this.manySepFirstInternal(5,e)},e.prototype.MANY_SEP6=function(e){this.manySepFirstInternal(6,e)},e.prototype.MANY_SEP7=function(e){this.manySepFirstInternal(7,e)},e.prototype.MANY_SEP8=function(e){this.manySepFirstInternal(8,e)},e.prototype.MANY_SEP9=function(e){this.manySepFirstInternal(9,e)},e.prototype.AT_LEAST_ONE=function(e){this.atLeastOneInternal(0,e)},e.prototype.AT_LEAST_ONE1=function(e){return this.atLeastOneInternal(1,e)},e.prototype.AT_LEAST_ONE2=function(e){this.atLeastOneInternal(2,e)},e.prototype.AT_LEAST_ONE3=function(e){this.atLeastOneInternal(3,e)},e.prototype.AT_LEAST_ONE4=function(e){this.atLeastOneInternal(4,e)},e.prototype.AT_LEAST_ONE5=function(e){this.atLeastOneInternal(5,e)},e.prototype.AT_LEAST_ONE6=function(e){this.atLeastOneInternal(6,e)},e.prototype.AT_LEAST_ONE7=function(e){this.atLeastOneInternal(7,e)},e.prototype.AT_LEAST_ONE8=function(e){this.atLeastOneInternal(8,e)},e.prototype.AT_LEAST_ONE9=function(e){this.atLeastOneInternal(9,e)},e.prototype.AT_LEAST_ONE_SEP=function(e){this.atLeastOneSepFirstInternal(0,e)},e.prototype.AT_LEAST_ONE_SEP1=function(e){this.atLeastOneSepFirstInternal(1,e)},e.prototype.AT_LEAST_ONE_SEP2=function(e){this.atLeastOneSepFirstInternal(2,e)},e.prototype.AT_LEAST_ONE_SEP3=function(e){this.atLeastOneSepFirstInternal(3,e)},e.prototype.AT_LEAST_ONE_SEP4=function(e){this.atLeastOneSepFirstInternal(4,e)},e.prototype.AT_LEAST_ONE_SEP5=function(e){this.atLeastOneSepFirstInternal(5,e)},e.prototype.AT_LEAST_ONE_SEP6=function(e){this.atLeastOneSepFirstInternal(6,e)},e.prototype.AT_LEAST_ONE_SEP7=function(e){this.atLeastOneSepFirstInternal(7,e)},e.prototype.AT_LEAST_ONE_SEP8=function(e){this.atLeastOneSepFirstInternal(8,e)},e.prototype.AT_LEAST_ONE_SEP9=function(e){this.atLeastOneSepFirstInternal(9,e)},e.prototype.RULE=function(e,t,n){if(void 0===n&&(n=Yc.DEFAULT_RULE_CONFIG),(0,Hc.contains)(this.definedRulesNames,e)){var r={message:Xc.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Yc.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(r)}this.definedRulesNames.push(e);var i=this.defineRule(e,t,n);return this[e]=i,i},e.prototype.OVERRIDE_RULE=function(e,t,n){void 0===n&&(n=Yc.DEFAULT_RULE_CONFIG);var r=[];r=r.concat((0,Jc.validateRuleIsOverridden)(e,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(r);var i=this.defineRule(e,t,n);return this[e]=i,i},e.prototype.BACKTRACK=function(e,t){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return e.apply(this,t),!0}catch(r){if((0,Vc.isRecognitionException)(r))return!1;throw r}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},e.prototype.getGAstProductions=function(){return this.gastProductionsCache},e.prototype.getSerializedGastProductions=function(){return(0,Zc.serializeGrammar)((0,Hc.values)(this.gastProductionsCache))},e}();Bc.RecognizerApi=Qc;var eu={};Object.defineProperty(eu,"__esModule",{value:!0}),eu.RecognizerEngine=void 0;var tu=Xo,nu=Cc,ru=mc,iu=xs,ou=ws,au=Yo,su=hc,cu=ga,uu=ka,lu=Lc,fu=function(){function e(){}return e.prototype.initRecognizerEngine=function(e,t){if(this.className=(0,lu.classNameFromInstance)(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=uu.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,tu.has)(t,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if((0,tu.isArray)(e)){if((0,tu.isEmpty)(e))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof e[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if((0,tu.isArray)(e))this.tokensMap=(0,tu.reduce)(e,(function(e,t){return e[t.name]=t,e}),{});else if((0,tu.has)(e,"modes")&&(0,tu.every)((0,tu.flatten)((0,tu.values)(e.modes)),uu.isTokenType)){var n=(0,tu.flatten)((0,tu.values)(e.modes)),r=(0,tu.uniq)(n);this.tokensMap=(0,tu.reduce)(r,(function(e,t){return e[t.name]=t,e}),{})}else{if(!(0,tu.isObject)(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=(0,tu.cloneObj)(e)}this.tokensMap.EOF=cu.EOF;var i=(0,tu.every)((0,tu.values)(e),(function(e){return(0,tu.isEmpty)(e.categoryMatches)}));this.tokenMatcher=i?uu.tokenStructuredMatcherNoCategories:uu.tokenStructuredMatcher,(0,uu.augmentTokenTypes)((0,tu.values)(this.tokensMap))},e.prototype.defineRule=function(e,t,n){if(this.selfAnalysisDone)throw Error("Grammar rule <"+e+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var r=(0,tu.has)(n,"resyncEnabled")?n.resyncEnabled:au.DEFAULT_RULE_CONFIG.resyncEnabled,i=(0,tu.has)(n,"recoveryValueFunc")?n.recoveryValueFunc:au.DEFAULT_RULE_CONFIG.recoveryValueFunc,o=this.ruleShortNameIdx<<nu.BITS_FOR_METHOD_TYPE+nu.BITS_FOR_OCCURRENCE_IDX;function a(e){try{if(!0===this.outputCst){t.apply(this,e);var n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}return t.apply(this,e)}catch(o){return this.invokeRuleCatch(o,r,i)}finally{this.ruleFinallyStateUpdate()}}this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o;var s=function(t,n){return void 0===t&&(t=0),this.ruleInvocationStateUpdate(o,e,t),a.call(this,n)};return s.ruleName=e,s.originalGrammarAction=t,s},e.prototype.invokeRuleCatch=function(e,t,n){var r=1===this.RULE_STACK.length,i=t&&!this.isBackTracking()&&this.recoveryEnabled;if((0,ru.isRecognitionException)(e)){var o=e;if(i){var a,s=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(s))return o.resyncedTokens=this.reSyncTo(s),this.outputCst?((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,a):n();throw this.outputCst&&((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,o.partialCstResult=a),o}if(r)return this.moveToTerminatedState(),n();throw o}throw e},e.prototype.optionInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(nu.OPTION_IDX,t);return this.optionInternalLogic(e,t,n)},e.prototype.optionInternalLogic=function(e,t,n){var r,i,o=this,a=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(i=e.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=e;if(!0===a.call(this))return r.call(this)},e.prototype.atLeastOneInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(nu.AT_LEAST_ONE_IDX,e);return this.atLeastOneInternalLogic(e,t,n)},e.prototype.atLeastOneInternalLogic=function(e,t,n){var r,i,o=this,a=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=t;if(!0!==a.call(this))throw this.raiseEarlyExitException(e,iu.PROD_TYPE.REPETITION_MANDATORY,t.ERR_MSG);for(var c=this.doSingleRepetition(r);!0===a.call(this)&&!0===c;)c=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],a,nu.AT_LEAST_ONE_IDX,e,ou.NextTerminalAfterAtLeastOneWalker)},e.prototype.atLeastOneSepFirstInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(nu.AT_LEAST_ONE_SEP_IDX,e);this.atLeastOneSepFirstInternalLogic(e,t,n)},e.prototype.atLeastOneSepFirstInternalLogic=function(e,t,n){var r=this,i=t.DEF,o=t.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(e,iu.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG);i.call(this);for(var a=function(){return r.tokenMatcher(r.LA(1),o)};!0===this.tokenMatcher(this.LA(1),o);)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,a,i,ou.NextTerminalAfterAtLeastOneSepWalker],a,nu.AT_LEAST_ONE_SEP_IDX,e,ou.NextTerminalAfterAtLeastOneSepWalker)},e.prototype.manyInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(nu.MANY_IDX,e);return this.manyInternalLogic(e,t,n)},e.prototype.manyInternalLogic=function(e,t,n){var r,i,o=this,a=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=t;for(var c=!0;!0===a.call(this)&&!0===c;)c=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],a,nu.MANY_IDX,e,ou.NextTerminalAfterManyWalker,c)},e.prototype.manySepFirstInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(nu.MANY_SEP_IDX,e);this.manySepFirstInternalLogic(e,t,n)},e.prototype.manySepFirstInternalLogic=function(e,t,n){var r=this,i=t.DEF,o=t.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){i.call(this);for(var a=function(){return r.tokenMatcher(r.LA(1),o)};!0===this.tokenMatcher(this.LA(1),o);)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,a,i,ou.NextTerminalAfterManySepWalker],a,nu.MANY_SEP_IDX,e,ou.NextTerminalAfterManySepWalker)}},e.prototype.repetitionSepSecondInternal=function(e,t,n,r,i){for(;n();)this.CONSUME(t),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,n,r,i],n,nu.AT_LEAST_ONE_SEP_IDX,e,i)},e.prototype.doSingleRepetition=function(e){var t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t},e.prototype.orInternal=function(e,t){var n=this.getKeyForAutomaticLookahead(nu.OR_IDX,t),r=(0,tu.isArray)(e)?e:e.DEF,i=this.getLaFuncFromCache(n).call(this,r);if(void 0!==i)return r[i].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)},e.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new ru.NotAllInputParsedException(t,e))}},e.prototype.subruleInternal=function(e,t,n){var r;try{var i=void 0!==n?n.ARGS:void 0;return r=e.call(this,t,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:e.ruleName),r}catch(o){this.subruleInternalError(o,n,e.ruleName)}},e.prototype.subruleInternalError=function(e,t,n){throw(0,ru.isRecognitionException)(e)&&void 0!==e.partialCstResult&&(this.cstPostNonTerminal(e.partialCstResult,void 0!==t&&void 0!==t.LABEL?t.LABEL:n),delete e.partialCstResult),e},e.prototype.consumeInternal=function(e,t,n){var r;try{var i=this.LA(1);!0===this.tokenMatcher(i,e)?(this.consumeToken(),r=i):this.consumeInternalError(e,i,n)}catch(o){r=this.consumeInternalRecovery(e,t,o)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:e.name,r),r},e.prototype.consumeInternalError=function(e,t,n){var r,i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new ru.MismatchedTokenException(r,t,i))},e.prototype.consumeInternalRecovery=function(e,t,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var r=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,r)}catch(i){throw i.name===su.IN_RULE_RECOVERY_EXCEPTION?n:i}},e.prototype.saveRecogState=function(){var e=this.errors,t=(0,tu.cloneArr)(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}},e.prototype.reloadRecogState=function(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK},e.prototype.ruleInvocationStateUpdate=function(e,t,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t,e)},e.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},e.prototype.getCurrRuleFullName=function(){var e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]},e.prototype.shortRuleNameToFullName=function(e){return this.shortRuleNameToFull[e]},e.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),cu.EOF)},e.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},e}();eu.RecognizerEngine=fu;var du={};Object.defineProperty(du,"__esModule",{value:!0}),du.ErrorHandler=void 0;var pu=mc,hu=Xo,mu=xs,gu=Yo,yu=function(){function e(){}return e.prototype.initErrorHandler=function(e){this._errors=[],this.errorMessageProvider=(0,hu.has)(e,"errorMessageProvider")?e.errorMessageProvider:gu.DEFAULT_PARSER_CONFIG.errorMessageProvider},e.prototype.SAVE_ERROR=function(e){if((0,pu.isRecognitionException)(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,hu.cloneArr)(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(e.prototype,"errors",{get:function(){return(0,hu.cloneArr)(this._errors)},set:function(e){this._errors=e},enumerable:!1,configurable:!0}),e.prototype.raiseEarlyExitException=function(e,t,n){for(var r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],o=(0,mu.getLookaheadPathsForOptionalProd)(e,i,t,this.maxLookahead)[0],a=[],s=1;s<=this.maxLookahead;s++)a.push(this.LA(s));var c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:a,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new pu.EarlyExitException(c,this.LA(1),this.LA(0)))},e.prototype.raiseNoAltException=function(e,t){for(var n=this.getCurrRuleFullName(),r=this.getGAstProductions()[n],i=(0,mu.getLookaheadPathsForOr)(e,r,this.maxLookahead),o=[],a=1;a<=this.maxLookahead;a++)o.push(this.LA(a));var s=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:o,previous:s,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new pu.NoViableAltException(c,this.LA(1),s))},e}();du.ErrorHandler=yu;var vu={};Object.defineProperty(vu,"__esModule",{value:!0}),vu.ContentAssist=void 0;var Ru=ws,Tu=Xo,_u=function(){function e(){}return e.prototype.initContentAssist=function(){},e.prototype.computeContentAssist=function(e,t){var n=this.gastProductionsCache[e];if((0,Tu.isUndefined)(n))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return(0,Ru.nextPossibleTokensAfter)([n],t,this.tokenMatcher,this.maxLookahead)},e.prototype.getNextPossibleTokenTypes=function(e){var t=(0,Tu.first)(e.ruleStack),n=this.getGAstProductions()[t];return new Ru.NextAfterTokenWalker(n,e).startWalking()},e}();vu.ContentAssist=_u;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.GastRecorder=void 0;var bu=Xo,ku=ma,Cu=ya,Pu=ka,xu=ga,wu=Yo,Au=Cc,Ou={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Ou);var Nu=Math.pow(2,Au.BITS_FOR_OCCURRENCE_IDX)-1,Su=(0,xu.createToken)({name:"RECORDING_PHASE_TOKEN",pattern:Cu.Lexer.NA});(0,Pu.augmentTokenTypes)([Su]);var Du=(0,xu.createTokenInstance)(Su,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(Du);var Iu={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},Lu=function(){function e(){}return e.prototype.initGastRecorder=function(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1},e.prototype.enableRecording=function(){var e=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var t=function(t){var n=t>0?t:"";e["CONSUME"+n]=function(e,n){return this.consumeInternalRecord(e,t,n)},e["SUBRULE"+n]=function(e,n){return this.subruleInternalRecord(e,t,n)},e["OPTION"+n]=function(e){return this.optionInternalRecord(e,t)},e["OR"+n]=function(e){return this.orInternalRecord(e,t)},e["MANY"+n]=function(e){this.manyInternalRecord(t,e)},e["MANY_SEP"+n]=function(e){this.manySepFirstInternalRecord(t,e)},e["AT_LEAST_ONE"+n]=function(e){this.atLeastOneInternalRecord(t,e)},e["AT_LEAST_ONE_SEP"+n]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}},n=0;n<10;n++)t(n);e.consume=function(e,t,n){return this.consumeInternalRecord(t,e,n)},e.subrule=function(e,t,n){return this.subruleInternalRecord(t,e,n)},e.option=function(e,t){return this.optionInternalRecord(t,e)},e.or=function(e,t){return this.orInternalRecord(t,e)},e.many=function(e,t){this.manyInternalRecord(e,t)},e.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},e.ACTION=e.ACTION_RECORD,e.BACKTRACK=e.BACKTRACK_RECORD,e.LA=e.LA_RECORD}))},e.prototype.disableRecording=function(){var e=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var t=0;t<10;t++){var n=t>0?t:"";delete e["CONSUME"+n],delete e["SUBRULE"+n],delete e["OPTION"+n],delete e["OR"+n],delete e["MANY"+n],delete e["MANY_SEP"+n],delete e["AT_LEAST_ONE"+n],delete e["AT_LEAST_ONE_SEP"+n]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA}))},e.prototype.ACTION_RECORD=function(e){},e.prototype.BACKTRACK_RECORD=function(e,t){return function(){return!0}},e.prototype.LA_RECORD=function(e){return wu.END_OF_FILE},e.prototype.topLevelRuleRecord=function(e,t){try{var n=new ku.Rule({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),t.call(this),this.recordingProdStack.pop(),n}catch(r){if(!0!==r.KNOWN_RECORDER_ERROR)try{r.message=r.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(i){throw r}throw r}},e.prototype.optionInternalRecord=function(e,t){return Mu.call(this,ku.Option,e,t)},e.prototype.atLeastOneInternalRecord=function(e,t){Mu.call(this,ku.RepetitionMandatory,t,e)},e.prototype.atLeastOneSepFirstInternalRecord=function(e,t){Mu.call(this,ku.RepetitionMandatoryWithSeparator,t,e,true)},e.prototype.manyInternalRecord=function(e,t){Mu.call(this,ku.Repetition,t,e)},e.prototype.manySepFirstInternalRecord=function(e,t){Mu.call(this,ku.RepetitionWithSeparator,t,e,true)},e.prototype.orInternalRecord=function(e,t){return Fu.call(this,e,t)},e.prototype.subruleInternalRecord=function(e,t,n){if($u(t),!e||!1===(0,bu.has)(e,"ruleName")){var r=new Error("<SUBRULE"+qu(t)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var i=(0,bu.peek)(this.recordingProdStack),o=e.ruleName,a=new ku.NonTerminal({idx:t,nonTerminalName:o,label:null==n?void 0:n.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?Iu:Ou},e.prototype.consumeInternalRecord=function(e,t,n){if($u(t),!(0,Pu.hasShortKeyProperty)(e)){var r=new Error("<CONSUME"+qu(t)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(e)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var i=(0,bu.peek)(this.recordingProdStack),o=new ku.Terminal({idx:t,terminalType:e,label:null==n?void 0:n.LABEL});return i.definition.push(o),Du},e}();function Mu(e,t,n,r){void 0===r&&(r=!1),$u(n);var i=(0,bu.peek)(this.recordingProdStack),o=(0,bu.isFunction)(t)?t:t.DEF,a=new e({definition:[],idx:n});return r&&(a.separator=t.SEP),(0,bu.has)(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(a),o.call(this),i.definition.push(a),this.recordingProdStack.pop(),Ou}function Fu(e,t){var n=this;$u(t);var r=(0,bu.peek)(this.recordingProdStack),i=!1===(0,bu.isArray)(e),o=!1===i?e:e.DEF,a=new ku.Alternation({definition:[],idx:t,ignoreAmbiguities:i&&!0===e.IGNORE_AMBIGUITIES});(0,bu.has)(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD);var s=(0,bu.some)(o,(function(e){return(0,bu.isFunction)(e.GATE)}));return a.hasPredicates=s,r.definition.push(a),(0,bu.forEach)(o,(function(e){var t=new ku.Alternative({definition:[]});a.definition.push(t),(0,bu.has)(e,"IGNORE_AMBIGUITIES")?t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES:(0,bu.has)(e,"GATE")&&(t.ignoreAmbiguities=!0),n.recordingProdStack.push(t),e.ALT.call(n),n.recordingProdStack.pop()})),Ou}function qu(e){return 0===e?"":""+e}function $u(e){if(e<0||e>Nu){var t=new Error("Invalid DSL Method idx value: <"+e+">\n\tIdx value must be a none negative value smaller than "+(Nu+1));throw t.KNOWN_RECORDER_ERROR=!0,t}}Eu.GastRecorder=Lu;var ju={};Object.defineProperty(ju,"__esModule",{value:!0}),ju.PerformanceTracer=void 0;var Uu=Xo,Wu=Yo,Ku=function(){function e(){}return e.prototype.initPerformanceTracer=function(e){if((0,Uu.has)(e,"traceInitPerf")){var t=e.traceInitPerf,n="number"==typeof t;this.traceInitMaxIdent=n?t:1/0,this.traceInitPerf=n?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=Wu.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},e.prototype.TRACE_INIT=function(e,t){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+e+">");var r=(0,Uu.timer)(t),i=r.time,o=r.value,a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(n+"<-- <"+e+"> time: "+i+"ms"),this.traceInitIndent--,o}return t()},e}();ju.PerformanceTracer=Ku;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.applyMixins=void 0,Gu.applyMixins=function(e,t){t.forEach((function(t){var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(r){if("constructor"!==r){var i=Object.getOwnPropertyDescriptor(n,r);i&&(i.get||i.set)?Object.defineProperty(e.prototype,r,i):e.prototype[r]=t.prototype[r]}}))}))},function(t){var n=e&&e.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedActionsParser=t.CstParser=t.Parser=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.DEFAULT_RULE_CONFIG=t.DEFAULT_PARSER_CONFIG=t.END_OF_FILE=void 0;var r,i=Xo,o=pa,a=ga,s=vs,c=Rs,u=hc,l=kc,f=Sc,d=Kc,p=Bc,h=eu,m=du,g=vu,y=Eu,v=ju,R=Gu;t.END_OF_FILE=(0,a.createTokenInstance)(a.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(t.END_OF_FILE),t.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:s.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),t.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),(r=t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={}))[r.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",r[r.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",r[r.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",r[r.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",r[r.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",r[r.LEFT_RECURSION=5]="LEFT_RECURSION",r[r.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",r[r.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",r[r.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",r[r.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",r[r.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",r[r.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",r[r.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t.EMPTY_ALT=function(e){return void 0===e&&(e=void 0),function(){return e}};var T=function(){function e(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;var r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),(0,i.has)(n,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=(0,i.has)(n,"skipValidations")?n.skipValidations:t.DEFAULT_PARSER_CONFIG.skipValidations}return e.performSelfAnalysis=function(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")},e.prototype.performSelfAnalysis=function(){var t=this;this.TRACE_INIT("performSelfAnalysis",(function(){var n;t.selfAnalysisDone=!0;var r=t.className;t.TRACE_INIT("toFastProps",(function(){(0,i.toFastProperties)(t)})),t.TRACE_INIT("Grammar Recording",(function(){try{t.enableRecording(),(0,i.forEach)(t.definedRulesNames,(function(e){var n=t[e].originalGrammarAction,r=void 0;t.TRACE_INIT(e+" Rule",(function(){r=t.topLevelRuleRecord(e,n)})),t.gastProductionsCache[e]=r}))}finally{t.disableRecording()}}));var a=[];if(t.TRACE_INIT("Grammar Resolving",(function(){a=(0,c.resolveGrammar)({rules:(0,i.values)(t.gastProductionsCache)}),t.definitionErrors=t.definitionErrors.concat(a)})),t.TRACE_INIT("Grammar Validations",(function(){if((0,i.isEmpty)(a)&&!1===t.skipValidations){var e=(0,c.validateGrammar)({rules:(0,i.values)(t.gastProductionsCache),maxLookahead:t.maxLookahead,tokenTypes:(0,i.values)(t.tokensMap),errMsgProvider:s.defaultGrammarValidatorErrorProvider,grammarName:r});t.definitionErrors=t.definitionErrors.concat(e)}})),(0,i.isEmpty)(t.definitionErrors)&&(t.recoveryEnabled&&t.TRACE_INIT("computeAllProdsFollows",(function(){var e=(0,o.computeAllProdsFollows)((0,i.values)(t.gastProductionsCache));t.resyncFollows=e})),t.TRACE_INIT("ComputeLookaheadFunctions",(function(){t.preComputeLookaheadFunctions((0,i.values)(t.gastProductionsCache))}))),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,i.isEmpty)(t.definitionErrors))throw n=(0,i.map)(t.definitionErrors,(function(e){return e.message})),new Error("Parser Definition Errors detected:\n "+n.join("\n-------------------------------\n"))}))},e.DEFER_DEFINITION_ERRORS_HANDLING=!1,e}();t.Parser=T,(0,R.applyMixins)(T,[u.Recoverable,l.LooksAhead,f.TreeBuilder,d.LexerAdapter,h.RecognizerEngine,p.RecognizerApi,m.ErrorHandler,g.ContentAssist,y.GastRecorder,v.PerformanceTracer]);var _=function(e){function r(n,r){void 0===r&&(r=t.DEFAULT_PARSER_CONFIG);var o=(0,i.cloneObj)(r);return o.outputCst=!0,e.call(this,n,o)||this}return n(r,e),r}(T);t.CstParser=_;var E=function(e){function r(n,r){void 0===r&&(r=t.DEFAULT_PARSER_CONFIG);var o=(0,i.cloneObj)(r);return o.outputCst=!1,e.call(this,n,o)||this}return n(r,e),r}(T);t.EmbeddedActionsParser=E}(Yo);var zu={};Object.defineProperty(zu,"__esModule",{value:!0}),zu.createSyntaxDiagramsCode=void 0;var Bu=Vo;zu.createSyntaxDiagramsCode=function(e,t){var n=void 0===t?{}:t,r=n.resourceBase,i=void 0===r?"https://unpkg.com/chevrotain@"+Bu.VERSION+"/diagrams/":r,o=n.css;return'\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset="utf-8">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n'+("\n<link rel='stylesheet' href='"+(void 0===o?"https://unpkg.com/chevrotain@"+Bu.VERSION+"/diagrams/diagrams.css":o)+"'>\n")+("\n<script src='"+i+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+i+"src/diagrams_builder.js'><\/script>\n<script src='"+i+"src/diagrams_behavior.js'><\/script>\n<script src='"+i+"src/main.js'><\/script>\n")+'\n<div id="diagrams" align="center"></div>    \n'+("\n<script>\n    window.serializedGrammar = "+JSON.stringify(e,null,"  ")+";\n<\/script>\n")+'\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.createSyntaxDiagramsCode=e.clearCache=e.GAstVisitor=e.serializeProduction=e.serializeGrammar=e.Terminal=e.Rule=e.RepetitionWithSeparator=e.RepetitionMandatoryWithSeparator=e.RepetitionMandatory=e.Repetition=e.Option=e.NonTerminal=e.Alternative=e.Alternation=e.defaultLexerErrorProvider=e.NoViableAltException=e.NotAllInputParsedException=e.MismatchedTokenException=e.isRecognitionException=e.EarlyExitException=e.defaultParserErrorProvider=e.tokenName=e.tokenMatcher=e.tokenLabel=e.EOF=e.createTokenInstance=e.createToken=e.LexerDefinitionErrorType=e.Lexer=e.EMPTY_ALT=e.ParserDefinitionErrorType=e.EmbeddedActionsParser=e.CstParser=e.VERSION=void 0;var t=Vo;Object.defineProperty(e,"VERSION",{enumerable:!0,get:function(){return t.VERSION}});var n=Yo;Object.defineProperty(e,"CstParser",{enumerable:!0,get:function(){return n.CstParser}}),Object.defineProperty(e,"EmbeddedActionsParser",{enumerable:!0,get:function(){return n.EmbeddedActionsParser}}),Object.defineProperty(e,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return n.ParserDefinitionErrorType}}),Object.defineProperty(e,"EMPTY_ALT",{enumerable:!0,get:function(){return n.EMPTY_ALT}});var r=ya;Object.defineProperty(e,"Lexer",{enumerable:!0,get:function(){return r.Lexer}}),Object.defineProperty(e,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return r.LexerDefinitionErrorType}});var i=ga;Object.defineProperty(e,"createToken",{enumerable:!0,get:function(){return i.createToken}}),Object.defineProperty(e,"createTokenInstance",{enumerable:!0,get:function(){return i.createTokenInstance}}),Object.defineProperty(e,"EOF",{enumerable:!0,get:function(){return i.EOF}}),Object.defineProperty(e,"tokenLabel",{enumerable:!0,get:function(){return i.tokenLabel}}),Object.defineProperty(e,"tokenMatcher",{enumerable:!0,get:function(){return i.tokenMatcher}}),Object.defineProperty(e,"tokenName",{enumerable:!0,get:function(){return i.tokenName}});var o=vs;Object.defineProperty(e,"defaultParserErrorProvider",{enumerable:!0,get:function(){return o.defaultParserErrorProvider}});var a=mc;Object.defineProperty(e,"EarlyExitException",{enumerable:!0,get:function(){return a.EarlyExitException}}),Object.defineProperty(e,"isRecognitionException",{enumerable:!0,get:function(){return a.isRecognitionException}}),Object.defineProperty(e,"MismatchedTokenException",{enumerable:!0,get:function(){return a.MismatchedTokenException}}),Object.defineProperty(e,"NotAllInputParsedException",{enumerable:!0,get:function(){return a.NotAllInputParsedException}}),Object.defineProperty(e,"NoViableAltException",{enumerable:!0,get:function(){return a.NoViableAltException}});var s=Ca;Object.defineProperty(e,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return s.defaultLexerErrorProvider}});var c=ma;Object.defineProperty(e,"Alternation",{enumerable:!0,get:function(){return c.Alternation}}),Object.defineProperty(e,"Alternative",{enumerable:!0,get:function(){return c.Alternative}}),Object.defineProperty(e,"NonTerminal",{enumerable:!0,get:function(){return c.NonTerminal}}),Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return c.Option}}),Object.defineProperty(e,"Repetition",{enumerable:!0,get:function(){return c.Repetition}}),Object.defineProperty(e,"RepetitionMandatory",{enumerable:!0,get:function(){return c.RepetitionMandatory}}),Object.defineProperty(e,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return c.RepetitionMandatoryWithSeparator}}),Object.defineProperty(e,"RepetitionWithSeparator",{enumerable:!0,get:function(){return c.RepetitionWithSeparator}}),Object.defineProperty(e,"Rule",{enumerable:!0,get:function(){return c.Rule}}),Object.defineProperty(e,"Terminal",{enumerable:!0,get:function(){return c.Terminal}});var u=ma;Object.defineProperty(e,"serializeGrammar",{enumerable:!0,get:function(){return u.serializeGrammar}}),Object.defineProperty(e,"serializeProduction",{enumerable:!0,get:function(){return u.serializeProduction}});var l=Va;Object.defineProperty(e,"GAstVisitor",{enumerable:!0,get:function(){return l.GAstVisitor}}),e.clearCache=function(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")};var f=zu;Object.defineProperty(e,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return f.createSyntaxDiagramsCode}});var d=function(){throw new Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\t\nSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0")};e.Parser=d}(Ho);var Hu=n(Ho);Hu.Alternation,Hu.Alternative,Hu.CstParser,Hu.EMPTY_ALT,Hu.EOF,Hu.EarlyExitException;const Vu=Hu.EmbeddedActionsParser;Hu.GAstVisitor;const Yu=Hu.Lexer;Hu.LexerDefinitionErrorType,Hu.MismatchedTokenException,Hu.NoViableAltException,Hu.NonTerminal,Hu.NotAllInputParsedException,Hu.Option,Hu.Parser,Hu.ParserDefinitionErrorType,Hu.Repetition,Hu.RepetitionMandatory,Hu.RepetitionMandatoryWithSeparator,Hu.RepetitionWithSeparator,Hu.Rule,Hu.Terminal,Hu.VERSION,Hu.clearCache,Hu.createSyntaxDiagramsCode,Hu.createToken,Hu.createTokenInstance,Hu.defaultLexerErrorProvider,Hu.defaultParserErrorProvider,Hu.isRecognitionException,Hu.serializeGrammar,Hu.serializeProduction,Hu.tokenLabel,Hu.tokenMatcher,Hu.tokenName;const Xu=Symbol("Datatype");class Ju{constructor(e,t){this.nodeBuilder=new il,this.stack=[],this.assignmentMap=new Map,this.wrapper=new Qu(t,e.parser.ParserConfig),this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.lexer=new Yu(t)}get current(){return this.stack[this.stack.length-1]}MAIN_RULE(e,t,n){return this.mainRule=this.DEFINE_RULE(e,t,n)}DEFINE_RULE(e,t,n){return this.wrapper.DEFINE_RULE(e,this.startImplementation(t,n).bind(this))}parse(e){const t="string"==typeof e?e:e.textDocument.getText();this.nodeBuilder.buildRootNode(t);const n=this.lexer.tokenize(t);this.wrapper.input=n.tokens;const r=this.mainRule.call(this.wrapper);return this.addHiddenTokens(r.$cstNode,n.groups.hidden),"string"!=typeof e&&(r.$document=e),{value:r,lexerErrors:n.errors,parserErrors:this.wrapper.errors}}addHiddenTokens(e,t){for(const n of t){const t=new al(n.startOffset,n.image.length,tl(n),n.tokenType,!0);t.root=e,this.addHiddenToken(e,t)}}addHiddenToken(e,t){const{offset:n,end:r}=e,{offset:i,end:o}=t;if(n>=o)e.children.unshift(t);else if(r<=i)e.children.push(t);else for(let a=0;a<e.children.length;a++){const n=e.children[a],r=n.end;if(n instanceof sl&&o<r)return void this.addHiddenToken(n,t);if(o<=n.offset)return void e.children.splice(a,0,t)}}startImplementation(e,t){return()=>{let n;this.wrapper.IS_RECORDING||this.stack.push({$type:e});try{n=t()}catch(r){console.log("Parser exception thrown!",r),n=void 0}return this.wrapper.IS_RECORDING||void 0!==n||(n=this.construct()),n}}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}consume(e,t,n){const r=this.wrapper.wrapConsume(e,t);if(!this.wrapper.IS_RECORDING){const e=this.nodeBuilder.buildLeafNode(r,n),{assignment:t,crossRef:i}=this.getAssignment(n);if(t){let n;i&&(n=`${this.current.$type}:${t.feature}`),this.assign(t,r.image,e,n)}}}unassignedSubrule(e,t,n){const r=this.subrule(e,t,n);if(!this.wrapper.IS_RECORDING){const e=r.$type,t=this.assignWithoutOverride(r,this.current);e&&(t.$type=e);const n=t;this.stack.pop(),this.stack.push(n)}}subrule(e,t,n){let r;this.wrapper.IS_RECORDING||(r=this.nodeBuilder.buildCompositeNode(n));const i=this.wrapper.wrapSubrule(e,t);if(!this.wrapper.IS_RECORDING){const{assignment:e,crossRef:t}=this.getAssignment(n);if(e&&r){let n;t&&(n=`${this.current.$type}:${e.feature}`),this.assign(e,i,r,n)}}return i}action(e,t){if(!this.wrapper.IS_RECORDING){let n=this.current;if(!n.$cstNode&&t.feature&&t.operator){n=this.construct(!1);const e=n.$cstNode.feature;this.nodeBuilder.buildCompositeNode(e)}const r={$type:e};this.stack.pop(),this.stack.push(r),t.feature&&t.operator&&this.assign(t,n,n.$cstNode)}}initializeElement(e){if(!this.wrapper.IS_RECORDING){const t=this.current;for(const n of e)t[n]=[]}}construct(e=!0){if(this.wrapper.IS_RECORDING)return;const t=this.current;for(const[n,r]of Object.entries(t))if(!n.startsWith("$"))if(Array.isArray(r))for(const e of r)null!==e&&"object"==typeof e&&(e.$container=t);else null!==t&&"object"==typeof r&&(r.$container=t);if(this.nodeBuilder.construct(t),e&&this.stack.pop(),t.$type===Xu){return t.$cstNode.text}return t}getAssignment(e){if(!this.assignmentMap.has(e)){const t=pl(e,bl);this.assignmentMap.set(e,{assignment:t,crossRef:!!t&&Cl(t.terminal)})}return this.assignmentMap.get(e)}assign(e,t,n,r){const i=this.current,o=e.feature.replace(/\^/g,"");let a;switch(a=r&&"string"==typeof t?this.linker.buildReference(i,n,r,t):n&&"string"==typeof t?this.converter.convert(t,n):t,e.operator){case"=":i[o]=a;break;case"?=":i[o]=!0;break;case"+=":Array.isArray(i[o])||(i[o]=[]),i[o].push(a)}}assignWithoutOverride(e,t){for(const[n,r]of Object.entries(t))void 0===e[n]&&(e[n]=r);return e}finalize(){this.wrapper.wrapSelfAnalysis()}}const Zu={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0};class Qu extends Vu{constructor(e,t){super(e,{...Zu,...t})}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t){return this.subrule(e,t)}wrapOr(e,t){this.or(e,t.map((e=>({ALT:e}))))}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}}function el(e){return e instanceof al?[e]:e instanceof sl?e.children.flatMap((e=>el(e))):[]}function tl(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function nl(e){const{offset:t,end:n,range:r}=e;return{range:r,offset:t,end:n,length:n-t}}function rl(e){let t=e;do{const e=t.element;if(e.$type!==Xu)return e;t=t.parent}while(t)}class il{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]}buildRootNode(e){this.rootNode=new ul(e),this.nodeStack=[this.rootNode]}buildCompositeNode(e){const t=new sl;return t.feature=e,t.root=this.rootNode,this.current.children.push(t),this.nodeStack.push(t),t}buildLeafNode(e,t){const n=new al(e.startOffset,e.image.length,tl(e),e.tokenType,!1);return n.feature=t,n.root=this.rootNode,this.current.children.push(n),n}construct(e){const t=this.current;"string"==typeof e.$type&&(this.current.element=e),e.$cstNode=t,this.nodeStack.pop()}}class ol{get hidden(){return!1}get element(){return this._element??this.parent?.element}set element(e){this._element=e}get text(){return this.root.text.substring(this.offset,this.end)}}class al extends ol{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,n,r,i=!1){super(),this._hidden=i,this._offset=e,this._tokenType=r,this._length=t,this._range=n}}class sl extends ol{constructor(){super(...arguments),this.children=new cl(this)}get offset(){return this.children.length>0?this.firstNonHiddenNode.offset:0}get length(){return this.end-this.offset}get end(){return this.children.length>0?this.lastNonHiddenNode.end:0}get range(){if(this.children.length>0){const{range:e}=this.firstNonHiddenNode,{range:t}=this.lastNonHiddenNode;return{start:e.start,end:t.end.line<e.start.line?e.start:t.end}}return{start:rr.create(0,0),end:rr.create(0,0)}}get firstNonHiddenNode(){for(const e of this.children)if(!e.hidden)return e;throw new Error("Composite node contains only hidden nodes")}get lastNonHiddenNode(){for(let e=this.children.length-1;e>=0;e--){const t=this.children[e];if(!t.hidden)return t}throw new Error("Composite node contains only hidden nodes")}}class cl extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,cl.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,t,...n){return this.addParents(n),super.splice(e,t,...n)}addParents(e){for(const t of e)t.parent=this.parent}}class ul extends sl{constructor(e){super(),this._text="",this._text=e??""}set text(e){this._text=e}get text(){return this._text}get offset(){return 0}get length(){return this.text.length}}function ll(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$type}function fl(e){return"object"==typeof e&&null!==e&&"string"==typeof e.$refText}function dl(e){return"object"==typeof e&&null!==e&&ll(e.container)&&fl(e.reference)&&"string"==typeof e.message}function pl(e,t){let n=e;for(;n;){if(t(n))return n;n=n.$container}}function hl(e,t){let n=e;for(;n;){if(t(n))return!0;n=n.$container}return!1}function ml(e){let t=e;for(;!t.$document&&t.$container;)t=t.$container;if(!t.$document)throw new Error("AST node has no document.");return t.$document}function gl(e){return new bo((()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0})),(t=>{for(;t.keyIndex<t.keys.length;){const n=t.keys[t.keyIndex];if(!n.startsWith("$")){const r=e[n];if(ll(r))return t.keyIndex++,{done:!1,value:{node:r,property:n}};if(Array.isArray(r)){for(;t.arrayIndex<r.length;){const e=t.arrayIndex++,i=r[e];if(ll(i))return{done:!1,value:{node:i,property:n,index:e}}}t.arrayIndex=0}}t.keyIndex++}return xo}))}function yl(e){return new Ao({node:e},(e=>gl(e.node)))}function vl(e){return new bo((()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0})),(t=>{for(;t.keyIndex<t.keys.length;){const n=t.keys[t.keyIndex];if(!n.startsWith("$")){const r=e[n];if(fl(r))return t.keyIndex++,{done:!1,value:{reference:r,container:e,property:n}};if(Array.isArray(r)){for(;t.arrayIndex<r.length;){const i=t.arrayIndex++,o=r[i];if(fl(o))return{done:!1,value:{reference:o,container:e,property:n,index:i}}}t.arrayIndex=0}}t.keyIndex++}return xo}))}function Rl(e,t){if(e instanceof al)return e;if(e instanceof sl){const n=e.children.filter((e=>e.offset<=t)).reverse();for(const e of n){const n=Rl(e,t);if(n)return n}}}function Tl(e){return Dl.isInstance(e,"AbstractElement")}function _l(e){return Dl.isInstance(e,"Action")}function El(e){return Dl.isInstance(e,"Alternatives")}function bl(e){return Dl.isInstance(e,"Assignment")}function kl(e){return Dl.isInstance(e,"CharacterRange")}function Cl(e){return Dl.isInstance(e,"CrossReference")}function Pl(e){return Dl.isInstance(e,"Group")}function xl(e){return Dl.isInstance(e,"Keyword")}function wl(e){return Dl.isInstance(e,"RuleCall")}function Al(e){return Dl.isInstance(e,"UnorderedGroup")}function Ol(e){return Dl.isInstance(e,"ParserRule")}function Nl(e){return Dl.isInstance(e,"TerminalRule")}class Sl{getAllTypes(){return["AbstractElement","AbstractMetamodelDeclaration","AbstractRule","Annotation","Condition","Grammar","NamedArgument","Parameter","Action","Alternatives","Assignment","CharacterRange","CrossReference","Group","Keyword","NegatedToken","RegexToken","RuleCall","TerminalAlternatives","TerminalGroup","TerminalRuleCall","UnorderedGroup","UntilToken","Wildcard","GeneratedMetamodel","ReferencedMetamodel","ParserRule","TerminalRule","Conjunction","Disjunction","LiteralCondition","Negation","ParameterReference"]}isInstance(e,t){return ll(e)&&this.isSubtype(e.$type,t)}isSubtype(e,t){if(e===t)return!0;switch(e){case"Action":case"Alternatives":case"Assignment":case"CharacterRange":case"CrossReference":case"Group":case"Keyword":case"NegatedToken":case"RegexToken":case"RuleCall":case"TerminalAlternatives":case"TerminalGroup":case"TerminalRuleCall":case"UnorderedGroup":case"UntilToken":case"Wildcard":return this.isSubtype("AbstractElement",t);case"GeneratedMetamodel":case"ReferencedMetamodel":return this.isSubtype("AbstractMetamodelDeclaration",t);case"ParserRule":case"TerminalRule":return this.isSubtype("AbstractRule",t);case"Conjunction":case"Disjunction":case"LiteralCondition":case"Negation":case"ParameterReference":return this.isSubtype("Condition",t);default:return!1}}getReferenceType(e){switch(e){case"Grammar:hiddenTokens":return"AbstractRule";case"Grammar:usedGrammars":return"Grammar";case"NamedArgument:parameter":return"Parameter";case"CrossReference:type":return"ParserRule";case"RuleCall:rule":return"AbstractRule";case"TerminalRuleCall:rule":return"TerminalRule";case"ParserRule:hiddenTokens":return"AbstractRule";case"ParameterReference:parameter":return"Parameter";default:throw new Error(`${e} is not a valid reference id.`)}}}const Dl=new Sl;function Il(e,t,n){return Ll([e,t,n].reduce(ql,{}))}function Ll(e,t){const n=new Proxy({},{deleteProperty:()=>!1,get:(r,i)=>Fl(r,i,e,t||n),getOwnPropertyDescriptor:(r,i)=>(Fl(r,i,e,t||n),Object.getOwnPropertyDescriptor(r,i)),has:(t,n)=>n in e,ownKeys:()=>Reflect.ownKeys(e)});return n}const Ml=Symbol();function Fl(e,t,n,r){if(t in e){if(e[t]===Ml)throw new Error('Cycle detected. Please make "'+String(t)+'" lazy. See https://langium.org/docs/di/cyclic-dependencies');return e[t]}if(t in n){const i=n[t];return e[t]=Ml,e[t]="function"==typeof i?i(r):Ll(i,r),e[t]}}function ql(e,t){if(t)for(const[n,r]of Object.entries(t))if(void 0!==r){const t=e[n];e[n]=null!==t&&null!==r&&"object"==typeof t&&"object"==typeof r?ql(t,r):r}return e}class $l{constructor(e){this.validationChecks=new Map,this.reflection=e.AstReflection}register(e,t=this){for(const[n,r]of Object.entries(e))if(Array.isArray(r))for(const e of r)this.doRegister(n,this.wrapValidationException(e,t));else r&&this.doRegister(n,this.wrapValidationException(r,t))}wrapValidationException(e,t){return(n,r,i)=>{try{e.call(t,n,r,i)}catch(o){console.error("An exception occured executing a validation.",o)}}}doRegister(e,t){for(const n of this.reflection.getAllTypes())if(this.reflection.isSubtype(n,e)){let e=this.validationChecks.get(n);e||(e=[],this.validationChecks.set(n,e)),e.push(t)}}getChecks(e){return this.validationChecks.get(e)??[]}}class jl extends $l{constructor(e){super(e);const t=e.validation.LangiumGrammarValidator,n={AbstractRule:t.checkRuleName,ParserRule:[t.checkParserRuleDataType],TerminalRule:[t.checkTerminalRuleReturnType,t.checkHiddenTerminalRule,t.checkEmptyTerminalRule],Keyword:t.checkKeyword,UnorderedGroup:t.checkUnorderedGroup,Grammar:[t.checkGrammarName,t.checkEntryGrammarRule,t.checkUniqueRuleName,t.checkGrammarHiddenTokens,t.checkGrammarForUnusedRules],CharacterRange:t.checkInvalidCharacterRange,RuleCall:t.checkUsedHiddenTerminalRule,TerminalRuleCall:t.checkUsedHiddenTerminalRule,CrossReference:t.checkCrossReferenceSyntax};this.register(n,t)}}var Ul,Wl;(Wl=Ul||(Ul={})).GrammarNameUppercase="grammar-name-uppercase",Wl.RuleNameUppercase="rule-name-uppercase",Wl.HiddenGrammarTokens="hidden-grammar-tokens",Wl.UseRegexTokens="use-regex-tokens",Wl.EntryRuleTokenSyntax="entry-rule-token-syntax",Wl.CrossRefTokenSyntax="cross-ref-token-syntax";class Kl{constructor(e){this.references=e.references.References}checkGrammarName(e,t){if(e.name){const n=e.name.substring(0,1);n.toUpperCase()!==n&&t("warning","Grammar name should start with an upper case letter.",{node:e,property:"name",code:Ul.GrammarNameUppercase})}}checkEntryGrammarRule(e,t){const n=e.rules.filter((e=>Ol(e)&&e.entry));if(0===n.length){const n=e.rules.find((e=>Ol(e)&&!rf(e)));n?t("error","The grammar is missing an entry parser rule. This rule can be an entry one.",{node:n,property:"name",code:Ul.EntryRuleTokenSyntax}):t("error","This grammar is missing an entry parser rule.",{node:e,property:"name"})}else n.length>1?n.forEach((e=>t("error","The entry rule has to be unique.",{node:e,property:"name"}))):rf(n[0])&&t("error","The entry rule cannot be a data type rule.",{node:n[0],property:"name"})}checkUniqueRuleName(e,t){const n=new Map;for(const r of e.rules){const e=r.name.toLowerCase(),t=n.get(e);t?t.push(r):n.set(e,[r])}for(const r of n.values())r.length>1&&r.forEach((e=>{t("error","A rule's name has to be unique.",{node:e,property:"name"})}))}checkGrammarHiddenTokens(e,t){e.definesHiddenTokens&&t("error","Hidden terminals are declared at the terminal definition.",{node:e,property:"definesHiddenTokens",code:Ul.HiddenGrammarTokens})}checkHiddenTerminalRule(e,t){e.hidden&&e.fragment&&t("error","Cannot use terminal fragments as hidden tokens.",{node:e,property:"hidden"})}checkEmptyTerminalRule(e,t){try{const n=ff(e);new RegExp(n).test("")&&t("error","This terminal could match an empty string.",{node:e,property:"name"})}catch{}}checkUsedHiddenTerminalRule(e,t){const n=pl(e,(e=>Nl(e)||Ol(e)));if(n){if("hidden"in n&&n?.hidden)return;const r=e.rule.ref;Nl(r)&&r.hidden&&t("error","Cannot use hidden terminal in non-hidden rule",{node:e,property:"rule"})}}checkCrossReferenceSyntax(e,t){e.deprecatedSyntax&&t("error","'|' is deprecated. Please, use ':' instead.",{node:e,property:"deprecatedSyntax",code:Ul.CrossRefTokenSyntax})}checkInvalidCharacterRange(e,t){if(e.right){const n="Character ranges cannot use more than one character";let r=!1;e.left.value.length>1&&(r=!0,t("error",n,{node:e.left,property:"value"})),e.right.value.length>1&&(r=!0,t("error",n,{node:e.right,property:"value"})),r||t("hint","Consider using regex instead of character ranges",{node:e,code:Ul.UseRegexTokens})}}checkGrammarForUnusedRules(e,t){const n=new Set,r=function(e){return e.rules.find((e=>Ol(e)&&e.entry))}(e);r&&(this.ruleDfs(r,n),n.add(r.name));for(const i of e.rules)Nl(i)&&i.hidden||n.has(i.name)||t("hint","This rule is declared but never referenced.",{node:i,property:"name",tags:[hr.Unnecessary]})}ruleDfs(e,t){yl(e).forEach((e=>{if(wl(e.node)){const n=e.node.rule.ref;n&&!t.has(n.name)&&(t.add(n.name),Ol(n)&&this.ruleDfs(n,t))}}))}checkRuleName(e,t){if(e.name){const n=e.name.substring(0,1);n.toUpperCase()!==n&&t("warning","Rule name should start with an upper case letter.",{node:e,property:"name",code:Ul.RuleNameUppercase})}}checkKeyword(e,t){0===e.value.length?t("error","Keywords cannot be empty.",{node:e}):0===e.value.trim().length?t("error","Keywords cannot only consist of whitespace characters.",{node:e}):/\s/g.test(e.value)&&t("warning","Keywords should not contain whitespace characters.",{node:e})}checkUnorderedGroup(e,t){t("error","Unordered groups are currently not supported",{node:e})}checkParserRuleDataType(e,t){const n=e.type&&zl(e.type),r=rf(e);!n&&r?t("error","This parser rule does not create an object. Add a primitive return type or an action to the start of the rule to force object instantiation.",{node:e,property:"name"}):n&&!r&&t("error","Normal parser rules are not allowed to return a primitive value. Use a datatype rule for that.",{node:e,property:"type"})}checkTerminalRuleReturnType(e,t){e.type&&!zl(e.type)&&t("error","Terminal rules can only return primitive types like 'string', 'boolean', 'number' or 'date'.",{node:e,property:"type"})}}const Gl=["string","number","boolean","Date"];function zl(e){return Gl.includes(e)}let Bl;const Hl={languageId:"langium",fileExtensions:[".langium"]},Vl={Grammar:()=>Bl||(Bl=yf('{\n  "$type": "Grammar",\n  "usedGrammars": [],\n  "hiddenTokens": [],\n  "metamodelDeclarations": [],\n  "rules": [\n    {\n      "$type": "TerminalRule",\n      "hidden": true,\n      "name": "WS",\n      "terminal": {\n        "$type": "RegexToken",\n        "regex": "\\\\s+",\n        "elements": []\n      }\n    },\n    {\n      "$type": "TerminalRule",\n      "name": "ID",\n      "type": "string",\n      "terminal": {\n        "$type": "RegexToken",\n        "regex": "\\\\^?[_a-zA-Z][\\\\w_]*",\n        "elements": []\n      }\n    },\n    {\n      "$type": "TerminalRule",\n      "name": "INT",\n      "type": "number",\n      "terminal": {\n        "$type": "RegexToken",\n        "regex": "[0-9]+",\n        "elements": []\n      }\n    },\n    {\n      "$type": "TerminalRule",\n      "name": "string",\n      "terminal": {\n        "$type": "RegexToken",\n        "regex": "\\"[^\\"]*\\"|\'[^\']*\'",\n        "elements": []\n      }\n    },\n    {\n      "$type": "TerminalRule",\n      "hidden": true,\n      "name": "ML_COMMENT",\n      "terminal": {\n        "$type": "RegexToken",\n        "regex": "\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/",\n        "elements": []\n      }\n    },\n    {\n      "$type": "TerminalRule",\n      "hidden": true,\n      "name": "SL_COMMENT",\n      "terminal": {\n        "$type": "RegexToken",\n        "regex": "\\\\/\\\\/[^\\\\n\\\\r]*",\n        "elements": []\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Grammar",\n      "hiddenTokens": [],\n      "entry": true,\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "grammar",\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "name",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "ID"\n              }\n            }\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": "with",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "usedGrammars",\n                "operator": "+=",\n                "terminal": {\n                  "$type": "CrossReference",\n                  "type": {\n                    "$refText": "Grammar"\n                  },\n                  "terminal": {\n                    "$type": "RuleCall",\n                    "arguments": [],\n                    "rule": {\n                      "$refText": "ID"\n                    }\n                  }\n                }\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Keyword",\n                    "value": ",",\n                    "elements": []\n                  },\n                  {\n                    "$type": "Assignment",\n                    "feature": "usedGrammars",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "CrossReference",\n                      "type": {\n                        "$refText": "Grammar"\n                      },\n                      "terminal": {\n                        "$type": "RuleCall",\n                        "arguments": [],\n                        "rule": {\n                          "$refText": "ID"\n                        }\n                      }\n                    }\n                  }\n                ],\n                "cardinality": "*"\n              }\n            ],\n            "cardinality": "?"\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Assignment",\n                "feature": "definesHiddenTokens",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "hidden"\n                },\n                "elements": []\n              },\n              {\n                "$type": "Keyword",\n                "value": "("\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Assignment",\n                    "feature": "hiddenTokens",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "CrossReference",\n                      "type": {\n                        "$refText": "AbstractRule"\n                      },\n                      "terminal": {\n                        "$type": "RuleCall",\n                        "arguments": [],\n                        "rule": {\n                          "$refText": "ID"\n                        }\n                      }\n                    },\n                    "elements": []\n                  },\n                  {\n                    "$type": "Group",\n                    "elements": [\n                      {\n                        "$type": "Keyword",\n                        "value": ",",\n                        "elements": []\n                      },\n                      {\n                        "$type": "Assignment",\n                        "feature": "hiddenTokens",\n                        "operator": "+=",\n                        "terminal": {\n                          "$type": "CrossReference",\n                          "type": {\n                            "$refText": "AbstractRule"\n                          },\n                          "terminal": {\n                            "$type": "RuleCall",\n                            "arguments": [],\n                            "rule": {\n                              "$refText": "ID"\n                            }\n                          }\n                        }\n                      }\n                    ],\n                    "cardinality": "*"\n                  }\n                ],\n                "cardinality": "?"\n              },\n              {\n                "$type": "Keyword",\n                "value": ")"\n              }\n            ],\n            "cardinality": "?"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "metamodelDeclarations",\n            "operator": "+=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "AbstractMetamodelDeclaration"\n              }\n            },\n            "cardinality": "*"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "rules",\n            "operator": "+=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "AbstractRule"\n              }\n            },\n            "elements": [],\n            "cardinality": "+"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "AbstractRule",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ParserRule"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "TerminalRule"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "AbstractMetamodelDeclaration",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "GeneratedMetamodel"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ReferencedMetamodel"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "GeneratedMetamodel",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "generate",\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "name",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "ID"\n              }\n            }\n          },\n          {\n            "$type": "Assignment",\n            "feature": "ePackage",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "string"\n              }\n            }\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": "as",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "alias",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "ID"\n                  }\n                }\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "ReferencedMetamodel",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "import",\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "ePackage",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "string"\n              }\n            }\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": "as",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "alias",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "ID"\n                  }\n                }\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Annotation",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "@",\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "name",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "ID"\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "ParserRule",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Alternatives",\n            "elements": [\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Alternatives",\n                    "elements": [\n                      {\n                        "$type": "Assignment",\n                        "feature": "entry",\n                        "operator": "?=",\n                        "terminal": {\n                          "$type": "Keyword",\n                          "value": "entry"\n                        },\n                        "elements": []\n                      },\n                      {\n                        "$type": "Assignment",\n                        "feature": "fragment",\n                        "operator": "?=",\n                        "terminal": {\n                          "$type": "Keyword",\n                          "value": "fragment"\n                        },\n                        "elements": []\n                      }\n                    ]\n                  },\n                  {\n                    "$type": "RuleCall",\n                    "arguments": [],\n                    "rule": {\n                      "$refText": "RuleNameAndParams"\n                    }\n                  },\n                  {\n                    "$type": "Alternatives",\n                    "elements": [\n                      {\n                        "$type": "Assignment",\n                        "feature": "wildcard",\n                        "operator": "?=",\n                        "terminal": {\n                          "$type": "Keyword",\n                          "value": "*"\n                        },\n                        "elements": []\n                      },\n                      {\n                        "$type": "Group",\n                        "elements": [\n                          {\n                            "$type": "Keyword",\n                            "value": "returns",\n                            "elements": []\n                          },\n                          {\n                            "$type": "Assignment",\n                            "feature": "type",\n                            "operator": "=",\n                            "terminal": {\n                              "$type": "RuleCall",\n                              "arguments": [],\n                              "rule": {\n                                "$refText": "ID"\n                              }\n                            }\n                          }\n                        ],\n                        "cardinality": "?"\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "RuleCall",\n                    "arguments": [],\n                    "rule": {\n                      "$refText": "RuleNameAndParams"\n                    },\n                    "elements": []\n                  },\n                  {\n                    "$type": "Group",\n                    "elements": [\n                      {\n                        "$type": "Keyword",\n                        "value": "returns",\n                        "elements": []\n                      },\n                      {\n                        "$type": "Assignment",\n                        "feature": "type",\n                        "operator": "=",\n                        "terminal": {\n                          "$type": "RuleCall",\n                          "arguments": [],\n                          "rule": {\n                            "$refText": "ID"\n                          }\n                        }\n                      }\n                    ],\n                    "cardinality": "?"\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Assignment",\n                "feature": "definesHiddenTokens",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "hidden"\n                },\n                "elements": []\n              },\n              {\n                "$type": "Keyword",\n                "value": "("\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Assignment",\n                    "feature": "hiddenTokens",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "CrossReference",\n                      "type": {\n                        "$refText": "AbstractRule"\n                      },\n                      "terminal": {\n                        "$type": "RuleCall",\n                        "arguments": [],\n                        "rule": {\n                          "$refText": "ID"\n                        }\n                      }\n                    },\n                    "elements": []\n                  },\n                  {\n                    "$type": "Group",\n                    "elements": [\n                      {\n                        "$type": "Keyword",\n                        "value": ",",\n                        "elements": []\n                      },\n                      {\n                        "$type": "Assignment",\n                        "feature": "hiddenTokens",\n                        "operator": "+=",\n                        "terminal": {\n                          "$type": "CrossReference",\n                          "type": {\n                            "$refText": "AbstractRule"\n                          },\n                          "terminal": {\n                            "$type": "RuleCall",\n                            "arguments": [],\n                            "rule": {\n                              "$refText": "ID"\n                            }\n                          }\n                        }\n                      }\n                    ],\n                    "cardinality": "*"\n                  }\n                ],\n                "cardinality": "?"\n              },\n              {\n                "$type": "Keyword",\n                "value": ")"\n              }\n            ],\n            "cardinality": "?"\n          },\n          {\n            "$type": "Keyword",\n            "value": ":"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "alternatives",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "Alternatives"\n              }\n            }\n          },\n          {\n            "$type": "Keyword",\n            "value": ";"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "RuleNameAndParams",\n      "hiddenTokens": [],\n      "fragment": true,\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Assignment",\n            "feature": "name",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "ID"\n              }\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": "<",\n                "elements": []\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Assignment",\n                    "feature": "parameters",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "Parameter"\n                      }\n                    },\n                    "elements": []\n                  },\n                  {\n                    "$type": "Group",\n                    "elements": [\n                      {\n                        "$type": "Keyword",\n                        "value": ",",\n                        "elements": []\n                      },\n                      {\n                        "$type": "Assignment",\n                        "feature": "parameters",\n                        "operator": "+=",\n                        "terminal": {\n                          "$type": "RuleCall",\n                          "arguments": [],\n                          "rule": {\n                            "$refText": "Parameter"\n                          }\n                        }\n                      }\n                    ],\n                    "cardinality": "*"\n                  }\n                ],\n                "cardinality": "?"\n              },\n              {\n                "$type": "Keyword",\n                "value": ">"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Parameter",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Assignment",\n        "feature": "name",\n        "operator": "=",\n        "terminal": {\n          "$type": "RuleCall",\n          "arguments": [],\n          "rule": {\n            "$refText": "ID"\n          }\n        },\n        "elements": []\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Alternatives",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "UnorderedGroup"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "Alternatives",\n                "feature": "elements",\n                "operator": "+=",\n                "elements": []\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Keyword",\n                    "value": "|",\n                    "elements": []\n                  },\n                  {\n                    "$type": "Assignment",\n                    "feature": "elements",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "UnorderedGroup"\n                      }\n                    }\n                  }\n                ],\n                "cardinality": "+"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "UnorderedGroup",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Group"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "UnorderedGroup",\n                "feature": "elements",\n                "operator": "+=",\n                "elements": []\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Keyword",\n                    "value": "&",\n                    "elements": []\n                  },\n                  {\n                    "$type": "Assignment",\n                    "feature": "elements",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "Group"\n                      }\n                    }\n                  }\n                ],\n                "cardinality": "+"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Group",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "AbstractToken"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "Group",\n                "feature": "elements",\n                "operator": "+=",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "elements",\n                "operator": "+=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "AbstractToken"\n                  }\n                },\n                "cardinality": "+"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "AbstractToken",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "AbstractTokenWithCardinality"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Action"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "AbstractTokenWithCardinality",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Alternatives",\n            "elements": [\n              {\n                "$type": "RuleCall",\n                "arguments": [],\n                "rule": {\n                  "$refText": "Assignment"\n                },\n                "elements": []\n              },\n              {\n                "$type": "RuleCall",\n                "arguments": [],\n                "rule": {\n                  "$refText": "AbstractTerminal"\n                },\n                "elements": []\n              }\n            ]\n          },\n          {\n            "$type": "Assignment",\n            "feature": "cardinality",\n            "operator": "=",\n            "terminal": {\n              "$type": "Alternatives",\n              "elements": [\n                {\n                  "$type": "Keyword",\n                  "value": "?",\n                  "elements": []\n                },\n                {\n                  "$type": "Keyword",\n                  "value": "*"\n                },\n                {\n                  "$type": "Keyword",\n                  "value": "+"\n                }\n              ]\n            },\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Action",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "Action",\n            "elements": []\n          },\n          {\n            "$type": "Keyword",\n            "value": "{"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "type",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "ID"\n              }\n            }\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": ".",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "feature",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "ID"\n                  }\n                }\n              },\n              {\n                "$type": "Assignment",\n                "feature": "operator",\n                "operator": "=",\n                "terminal": {\n                  "$type": "Alternatives",\n                  "elements": [\n                    {\n                      "$type": "Keyword",\n                      "value": "=",\n                      "elements": []\n                    },\n                    {\n                      "$type": "Keyword",\n                      "value": "+="\n                    }\n                  ]\n                }\n              },\n              {\n                "$type": "Keyword",\n                "value": "current"\n              }\n            ],\n            "cardinality": "?"\n          },\n          {\n            "$type": "Keyword",\n            "value": "}"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "AbstractTerminal",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Keyword"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "RuleCall"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ParenthesizedElement"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "PredicatedKeyword"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "PredicatedRuleCall"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "PredicatedGroup"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Keyword",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Assignment",\n        "feature": "value",\n        "operator": "=",\n        "terminal": {\n          "$type": "RuleCall",\n          "arguments": [],\n          "rule": {\n            "$refText": "string"\n          }\n        },\n        "elements": []\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "RuleCall",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Assignment",\n            "feature": "rule",\n            "operator": "=",\n            "terminal": {\n              "$type": "CrossReference",\n              "type": {\n                "$refText": "AbstractRule"\n              },\n              "terminal": {\n                "$type": "RuleCall",\n                "arguments": [],\n                "rule": {\n                  "$refText": "ID"\n                }\n              }\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": "<",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "arguments",\n                "operator": "+=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "NamedArgument"\n                  }\n                }\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Keyword",\n                    "value": ",",\n                    "elements": []\n                  },\n                  {\n                    "$type": "Assignment",\n                    "feature": "arguments",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "NamedArgument"\n                      }\n                    }\n                  }\n                ],\n                "cardinality": "*"\n              },\n              {\n                "$type": "Keyword",\n                "value": ">"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "NamedArgument",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Assignment",\n                "feature": "parameter",\n                "operator": "=",\n                "terminal": {\n                  "$type": "CrossReference",\n                  "type": {\n                    "$refText": "Parameter"\n                  },\n                  "terminal": {\n                    "$type": "RuleCall",\n                    "arguments": [],\n                    "rule": {\n                      "$refText": "ID"\n                    }\n                  }\n                },\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "calledByName",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "="\n                }\n              }\n            ],\n            "cardinality": "?"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "value",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "Disjunction"\n              }\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "LiteralCondition",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "Assignment",\n            "feature": "true",\n            "operator": "?=",\n            "terminal": {\n              "$type": "Keyword",\n              "value": "true"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Keyword",\n            "value": "false",\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Disjunction",\n      "hiddenTokens": [],\n      "type": "Condition",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Conjunction"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "Disjunction",\n                "feature": "left",\n                "operator": "=",\n                "elements": []\n              },\n              {\n                "$type": "Keyword",\n                "value": "|"\n              },\n              {\n                "$type": "Assignment",\n                "feature": "right",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "Conjunction"\n                  }\n                }\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Conjunction",\n      "hiddenTokens": [],\n      "type": "Condition",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Negation"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "Conjunction",\n                "feature": "left",\n                "operator": "=",\n                "elements": []\n              },\n              {\n                "$type": "Keyword",\n                "value": "&"\n              },\n              {\n                "$type": "Assignment",\n                "feature": "right",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "Negation"\n                  }\n                }\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Negation",\n      "hiddenTokens": [],\n      "type": "Condition",\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Atom"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "Negation",\n                "elements": []\n              },\n              {\n                "$type": "Keyword",\n                "value": "!"\n              },\n              {\n                "$type": "Assignment",\n                "feature": "value",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "Negation"\n                  }\n                }\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Atom",\n      "hiddenTokens": [],\n      "type": "Condition",\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ParameterReference"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ParenthesizedCondition"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "LiteralCondition"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "ParenthesizedCondition",\n      "hiddenTokens": [],\n      "type": "Condition",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "(",\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Disjunction"\n            }\n          },\n          {\n            "$type": "Keyword",\n            "value": ")"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "ParameterReference",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Assignment",\n        "feature": "parameter",\n        "operator": "=",\n        "terminal": {\n          "$type": "CrossReference",\n          "type": {\n            "$refText": "Parameter"\n          },\n          "terminal": {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ID"\n            }\n          }\n        },\n        "elements": []\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "PredicatedKeyword",\n      "hiddenTokens": [],\n      "type": "Keyword",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Alternatives",\n            "elements": [\n              {\n                "$type": "Assignment",\n                "feature": "predicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "=>"\n                },\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "firstSetPredicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "->"\n                },\n                "elements": []\n              }\n            ]\n          },\n          {\n            "$type": "Assignment",\n            "feature": "value",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "string"\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "PredicatedRuleCall",\n      "hiddenTokens": [],\n      "type": "RuleCall",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Alternatives",\n            "elements": [\n              {\n                "$type": "Assignment",\n                "feature": "predicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "=>"\n                },\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "firstSetPredicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "->"\n                },\n                "elements": []\n              }\n            ]\n          },\n          {\n            "$type": "Assignment",\n            "feature": "rule",\n            "operator": "=",\n            "terminal": {\n              "$type": "CrossReference",\n              "type": {\n                "$refText": "AbstractRule"\n              },\n              "terminal": {\n                "$type": "RuleCall",\n                "arguments": [],\n                "rule": {\n                  "$refText": "ID"\n                }\n              }\n            }\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": "<",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "arguments",\n                "operator": "+=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "NamedArgument"\n                  }\n                }\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Keyword",\n                    "value": ",",\n                    "elements": []\n                  },\n                  {\n                    "$type": "Assignment",\n                    "feature": "arguments",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "NamedArgument"\n                      }\n                    }\n                  }\n                ],\n                "cardinality": "*"\n              },\n              {\n                "$type": "Keyword",\n                "value": ">"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Assignment",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "Assignment",\n            "elements": []\n          },\n          {\n            "$type": "Alternatives",\n            "elements": [\n              {\n                "$type": "Assignment",\n                "feature": "predicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "=>"\n                },\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "firstSetPredicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "->"\n                },\n                "elements": []\n              }\n            ],\n            "cardinality": "?"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "feature",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "ID"\n              }\n            }\n          },\n          {\n            "$type": "Assignment",\n            "feature": "operator",\n            "operator": "=",\n            "terminal": {\n              "$type": "Alternatives",\n              "elements": [\n                {\n                  "$type": "Keyword",\n                  "value": "+=",\n                  "elements": []\n                },\n                {\n                  "$type": "Keyword",\n                  "value": "="\n                },\n                {\n                  "$type": "Keyword",\n                  "value": "?="\n                }\n              ]\n            }\n          },\n          {\n            "$type": "Assignment",\n            "feature": "terminal",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "AssignableTerminal"\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "AssignableTerminal",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Keyword"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "RuleCall"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ParenthesizedAssignableElement"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "CrossReference"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "ParenthesizedAssignableElement",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "(",\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "AssignableAlternatives"\n            }\n          },\n          {\n            "$type": "Keyword",\n            "value": ")"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "AssignableAlternatives",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "AssignableTerminal"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "Alternatives",\n                "feature": "elements",\n                "operator": "+=",\n                "elements": []\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Keyword",\n                    "value": "|",\n                    "elements": []\n                  },\n                  {\n                    "$type": "Assignment",\n                    "feature": "elements",\n                    "operator": "+=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "AssignableTerminal"\n                      }\n                    }\n                  }\n                ],\n                "cardinality": "+"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "CrossReference",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "CrossReference",\n            "elements": []\n          },\n          {\n            "$type": "Keyword",\n            "value": "["\n          },\n          {\n            "$type": "Assignment",\n            "feature": "type",\n            "operator": "=",\n            "terminal": {\n              "$type": "CrossReference",\n              "type": {\n                "$refText": "ParserRule"\n              },\n              "terminal": {\n                "$type": "RuleCall",\n                "arguments": [],\n                "rule": {\n                  "$refText": "ID"\n                }\n              }\n            }\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Alternatives",\n                "elements": [\n                  {\n                    "$type": "Assignment",\n                    "feature": "deprecatedSyntax",\n                    "operator": "?=",\n                    "terminal": {\n                      "$type": "Keyword",\n                      "value": "|"\n                    },\n                    "elements": []\n                  },\n                  {\n                    "$type": "Keyword",\n                    "value": ":",\n                    "elements": []\n                  }\n                ]\n              },\n              {\n                "$type": "Assignment",\n                "feature": "terminal",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "CrossReferenceableTerminal"\n                  }\n                }\n              }\n            ],\n            "cardinality": "?"\n          },\n          {\n            "$type": "Keyword",\n            "value": "]"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "CrossReferenceableTerminal",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Keyword"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "RuleCall"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "ParenthesizedElement",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "(",\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Alternatives"\n            }\n          },\n          {\n            "$type": "Keyword",\n            "value": ")"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "PredicatedGroup",\n      "hiddenTokens": [],\n      "type": "Group",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Alternatives",\n            "elements": [\n              {\n                "$type": "Assignment",\n                "feature": "predicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "=>"\n                },\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "firstSetPredicated",\n                "operator": "?=",\n                "terminal": {\n                  "$type": "Keyword",\n                  "value": "->"\n                },\n                "elements": []\n              }\n            ]\n          },\n          {\n            "$type": "Keyword",\n            "value": "("\n          },\n          {\n            "$type": "Assignment",\n            "feature": "elements",\n            "operator": "+=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "Alternatives"\n              }\n            }\n          },\n          {\n            "$type": "Keyword",\n            "value": ")"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "TerminalRule",\n      "hiddenTokens": [],\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Assignment",\n            "feature": "hidden",\n            "operator": "?=",\n            "terminal": {\n              "$type": "Keyword",\n              "value": "hidden"\n            },\n            "cardinality": "?",\n            "elements": []\n          },\n          {\n            "$type": "Keyword",\n            "value": "terminal"\n          },\n          {\n            "$type": "Alternatives",\n            "elements": [\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Assignment",\n                    "feature": "fragment",\n                    "operator": "?=",\n                    "terminal": {\n                      "$type": "Keyword",\n                      "value": "fragment"\n                    },\n                    "elements": []\n                  },\n                  {\n                    "$type": "Assignment",\n                    "feature": "name",\n                    "operator": "=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "ID"\n                      }\n                    }\n                  }\n                ]\n              },\n              {\n                "$type": "Group",\n                "elements": [\n                  {\n                    "$type": "Assignment",\n                    "feature": "name",\n                    "operator": "=",\n                    "terminal": {\n                      "$type": "RuleCall",\n                      "arguments": [],\n                      "rule": {\n                        "$refText": "ID"\n                      }\n                    },\n                    "elements": []\n                  },\n                  {\n                    "$type": "Group",\n                    "elements": [\n                      {\n                        "$type": "Keyword",\n                        "value": "returns",\n                        "elements": []\n                      },\n                      {\n                        "$type": "Assignment",\n                        "feature": "type",\n                        "operator": "=",\n                        "terminal": {\n                          "$type": "RuleCall",\n                          "arguments": [],\n                          "rule": {\n                            "$refText": "ID"\n                          }\n                        }\n                      }\n                    ],\n                    "cardinality": "?"\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            "$type": "Keyword",\n            "value": ":"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "terminal",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "TerminalAlternatives"\n              }\n            }\n          },\n          {\n            "$type": "Keyword",\n            "value": ";"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "TerminalRule",\n      "name": "RegexLiteral",\n      "type": "string",\n      "terminal": {\n        "$type": "RegexToken",\n        "regex": "\\\\/(?![*+?])(?:[^\\\\r\\\\n\\\\[/\\\\\\\\]|\\\\\\\\.|\\\\[(?:[^\\\\r\\\\n\\\\]\\\\\\\\]|\\\\\\\\.)*\\\\])+\\\\/",\n        "elements": []\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "TerminalAlternatives",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "TerminalGroup"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "TerminalAlternatives",\n                "feature": "elements",\n                "operator": "+=",\n                "elements": []\n              },\n              {\n                "$type": "Keyword",\n                "value": "|"\n              },\n              {\n                "$type": "Assignment",\n                "feature": "elements",\n                "operator": "+=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "TerminalGroup"\n                  }\n                }\n              }\n            ],\n            "cardinality": "*"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "TerminalGroup",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "TerminalToken"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Action",\n                "type": "TerminalGroup",\n                "feature": "elements",\n                "operator": "+=",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "elements",\n                "operator": "+=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "TerminalToken"\n                  }\n                },\n                "cardinality": "+"\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "TerminalToken",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "TerminalTokenElement"\n            },\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "cardinality",\n            "operator": "=",\n            "terminal": {\n              "$type": "Alternatives",\n              "elements": [\n                {\n                  "$type": "Keyword",\n                  "value": "?",\n                  "elements": []\n                },\n                {\n                  "$type": "Keyword",\n                  "value": "*"\n                },\n                {\n                  "$type": "Keyword",\n                  "value": "+"\n                }\n              ]\n            },\n            "cardinality": "?"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "TerminalTokenElement",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Alternatives",\n        "elements": [\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "CharacterRange"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "TerminalRuleCall"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "ParenthesizedTerminalElement"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "NegatedToken"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "UntilToken"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "RegexToken"\n            },\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "Wildcard"\n            },\n            "elements": []\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "ParenthesizedTerminalElement",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Keyword",\n            "value": "(",\n            "elements": []\n          },\n          {\n            "$type": "RuleCall",\n            "arguments": [],\n            "rule": {\n              "$refText": "TerminalAlternatives"\n            }\n          },\n          {\n            "$type": "Keyword",\n            "value": ")"\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "TerminalRuleCall",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "TerminalRuleCall",\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "rule",\n            "operator": "=",\n            "terminal": {\n              "$type": "CrossReference",\n              "type": {\n                "$refText": "TerminalRule"\n              },\n              "terminal": {\n                "$type": "RuleCall",\n                "arguments": [],\n                "rule": {\n                  "$refText": "ID"\n                }\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "NegatedToken",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "NegatedToken",\n            "elements": []\n          },\n          {\n            "$type": "Keyword",\n            "value": "!"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "terminal",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "TerminalTokenElement"\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "UntilToken",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "UntilToken",\n            "elements": []\n          },\n          {\n            "$type": "Keyword",\n            "value": "->"\n          },\n          {\n            "$type": "Assignment",\n            "feature": "terminal",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "TerminalTokenElement"\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "RegexToken",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "RegexToken",\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "regex",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "RegexLiteral"\n              }\n            }\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "Wildcard",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "Wildcard",\n            "elements": []\n          },\n          {\n            "$type": "Keyword",\n            "value": "."\n          }\n        ]\n      }\n    },\n    {\n      "$type": "ParserRule",\n      "parameters": [],\n      "name": "CharacterRange",\n      "hiddenTokens": [],\n      "type": "AbstractElement",\n      "alternatives": {\n        "$type": "Group",\n        "elements": [\n          {\n            "$type": "Action",\n            "type": "CharacterRange",\n            "elements": []\n          },\n          {\n            "$type": "Assignment",\n            "feature": "left",\n            "operator": "=",\n            "terminal": {\n              "$type": "RuleCall",\n              "arguments": [],\n              "rule": {\n                "$refText": "Keyword"\n              }\n            }\n          },\n          {\n            "$type": "Group",\n            "elements": [\n              {\n                "$type": "Keyword",\n                "value": "..",\n                "elements": []\n              },\n              {\n                "$type": "Assignment",\n                "feature": "right",\n                "operator": "=",\n                "terminal": {\n                  "$type": "RuleCall",\n                  "arguments": [],\n                  "rule": {\n                    "$refText": "Keyword"\n                  }\n                }\n              }\n            ],\n            "cardinality": "?"\n          }\n        ]\n      }\n    }\n  ],\n  "name": "LangiumGrammar"\n}')),AstReflection:()=>new Sl,LanguageMetaData:()=>Hl,parser:{}};class Yl{constructor(e){this.commentNames=e.parser.GrammarConfig.multilineCommentRules}getFoldingRanges(e){const t=[];return this.collectFolding(e,(e=>t.push(e))),t}collectFolding(e,t){const n=e.parseResult?.value;if(n){if(this.shouldProcessContent(n)){const r=yl(n).iterator();let i;do{if(i=r.next(),!i.done){const n=i.value.node;this.shouldProcess(n)&&this.collectObjectFolding(e,n,t),this.shouldProcessContent(n)||r.prune()}}while(!i.done)}this.collectCommentFolding(e,n,t)}}shouldProcess(e){return!0}shouldProcessContent(e){return!0}collectObjectFolding(e,t,n){const r=t.$cstNode;if(r){const t=this.toFoldingRange(e,r);t&&n(t)}}collectCommentFolding(e,t,n){const r=t.$cstNode;if(r)for(const i of function(e){return new Ao(e,(e=>e instanceof sl?e.children:[]))}(r))if(i instanceof al&&this.commentNames.includes(i.tokenType.name)){const t=this.toFoldingRange(e,i,_n.FoldingRangeKind.Comment);t&&n(t)}}toFoldingRange(e,t,n){const r=t.range,i=r.start;let o=r.end;if(!(o.line-i.line<2))return this.includeLastFoldingLine(t,n)||(o=e.textDocument.positionAt(e.textDocument.offsetAt({line:o.line,character:0})-1)),_n.FoldingRange.create(i.line,o.line,i.character,o.character,n)}includeLastFoldingLine(e,t){if(t===_n.FoldingRangeKind.Comment)return!1;const n=e.text,r=n.charAt(n.length-1);return"}"!==r&&")"!==r&&"]"!==r}}class Xl extends Yl{shouldProcessContent(e){return!Ol(e)}}class Jl{getCodeActions(e,t){const n=[];for(const r of t.context.diagnostics){const t=this.createCodeAction(r,e);t&&n.push(t)}return n}createCodeAction(e,t){switch(e.code){case Ul.GrammarNameUppercase:case Ul.RuleNameUppercase:return this.makeUpperCase(e,t);case Ul.HiddenGrammarTokens:return this.fixHiddenTerminals(e,t);case Ul.UseRegexTokens:return this.fixRegexTokens(e,t);case Ul.EntryRuleTokenSyntax:return this.addEntryKeyword(e,t);case Ul.CrossRefTokenSyntax:return this.fixCrossRefSyntax(e,t);default:return}}makeUpperCase(e,t){const n={start:e.range.start,end:{line:e.range.start.line,character:e.range.start.character+1}};return{title:"First letter to upper case",kind:_n.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[t.textDocument.uri]:[{range:n,newText:t.textDocument.getText(n).toUpperCase()}]}}}}addEntryKeyword(e,t){return{title:"Add entry keyword",kind:_n.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[t.textDocument.uri]:[{range:{start:e.range.start,end:e.range.start},newText:"entry "}]}}}}fixRegexTokens(e,t){const n=t.textDocument.offsetAt(e.range.start),r=t.parseResult.value.$cstNode;if(r){const i=Rl(r,n)?.element,o=kl(i)?i:pl(i,kl);if(o&&o.right&&o.$cstNode){const n=o.left.value,r=o.right.value;return{title:"Refactor into regular expression",kind:_n.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[t.textDocument.uri]:[{range:o.$cstNode.range,newText:`/[${zo(n)}-${zo(r)}]/`}]}}}}}}fixCrossRefSyntax(e,t){return{title:"Replace '|' with ':'",kind:_n.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[t.textDocument.uri]:[{range:e.range,newText:":"}]}}}}fixHiddenTerminals(e,t){const n=t.parseResult.value,r=n.hiddenTokens,i=[],o=af(n.$cstNode,"definesHiddenTokens");if(o){const e=o.range.start,r=o.offset,a=n.$cstNode.text.indexOf(")",r)+1;i.push({newText:"",range:{start:e,end:t.textDocument.positionAt(a)}})}for(const a of r){const e=a.ref;if(e&&Nl(e)&&!e.hidden&&e.$cstNode){const t=e.$cstNode.range.start;i.push({newText:"hidden ",range:{start:t,end:t}})}}return{title:"Fix hidden terminals",kind:_n.CodeActionKind.QuickFix,diagnostics:[e],isPreferred:!0,edit:{changes:{[t.textDocument.uri]:i}}}}}const Zl={validation:{ValidationRegistry:e=>new jl(e),LangiumGrammarValidator:e=>new Kl(e)},lsp:{FoldingRangeProvider:e=>new Xl(e),CodeActionProvider:()=>new Jl}};function Ql(e){return Il(function(e={}){return{parser:{GrammarConfig:e=>vf(e),LangiumParser:e=>Jf(e),ValueConverter:()=>new rd,TokenBuilder:()=>new nd},documents:{LangiumDocuments:e=>new Lo(e),LangiumDocumentFactory:e=>new Io(e),DocumentBuilder:e=>new $o(e),TextDocuments:()=>new _n.TextDocuments(pn),TextDocumentFactory:e=>new Do(e)},lsp:{completion:{CompletionProvider:e=>new Wf(e),RuleInterpreter:()=>new Kf},Connection:()=>e.connection,DocumentSymbolProvider:e=>new zf(e),HoverProvider:e=>new Vf(e),FoldingRangeProvider:e=>new Yl(e),ReferenceFinder:e=>new Yf(e),GoToResolver:e=>new Bf(e),DocumentHighlighter:e=>new Gf(e),RenameHandler:e=>new Xf(e)},index:{IndexManager:e=>new If(e),AstNodeLocator:()=>new kf,AstNodeDescriptionProvider:e=>new Ef(e),ReferenceDescriptionProvider:e=>new bf(e)},references:{Linker:e=>new _f(e),NameProvider:()=>new Mf,ScopeProvider:e=>new sd(e),ScopeComputation:e=>new cd(e),References:e=>new od(e)},serializer:{JsonSerializer:e=>new ud(e)},validation:{DocumentValidator:e=>new ld(e),ValidationRegistry:e=>new $l(e)}}}(e),Vl,Zl)}function ef(e){return"?"===e||"*"===e}function tf(e){return"*"===e||"+"===e}function nf(e){return"+="===e}function rf(e){const t=Array.from(function(e){const t=new Map,n=new Map;of(e.alternatives,void 0,t,n);const r=new Map;for(const[o,a]of t.entries())r.set(o.replace(/\^/g,""),a);const i=new Map;for(const[o,a]of n.entries())i.set(o,a.replace(/\^/g,""));return{byName:r,byFeature:i}}(e).byFeature.keys());if(t.every((e=>wl(e)||xl(e)||Pl(e)||El(e)||Al(e)))){return 0===t.filter((e=>wl(e)&&Ol(e.rule.ref)&&!rf(e.rule.ref))).length}return!1}function of(e,t,n,r){if(bl(e)){const i=(t??"")+e.feature;n.set(i,{feature:e,kind:"Assignment"}),r.set(e,i),of(e.terminal,i,n,r)}else if(wl(e)){const i=(t??"")+e.rule.ref?.name+"RuleCall";n.set(i,{feature:e,kind:"RuleCall"}),r.set(e,i)}else if(Cl(e)){const i=(t??"")+e.type.ref?.name+"CrossReference";n.set(i,{feature:e,kind:"CrossReference"}),r.set(e,i)}else if(xl(e)){const t=function(e){let t=e;return t=t.replace(/\s+/g,"Whitespace"),t=t.replace(/:/g,"Colon"),t=t.replace(/\./g,"Dot"),t=t.replace(/\//g,"Slash"),t=t.replace(/\\/g,"Backslash"),t=t.replace(/,/g,"Comma"),t=t.replace(/\(/g,"ParenthesisOpen"),t=t.replace(/\)/g,"ParenthesisClose"),t=t.replace(/\[/g,"BracketOpen"),t=t.replace(/\]/g,"BracketClose"),t=t.replace(/\{/g,"CurlyOpen"),t=t.replace(/\}/g,"CurlyClose"),t=t.replace(/\+/g,"Plus"),t=t.replace(/\*/g,"Asterisk"),t=t.replace(/\?/g,"QuestionMark"),t=t.replace(/!/g,"ExclamationMark"),t=t.replace(/\^/g,"Caret"),t=t.replace(/</g,"LessThan"),t=t.replace(/>/g,"MoreThan"),t=t.replace(/&/g,"Ampersand"),t=t.replace(/\|/g,"Pipe"),t=t.replace(/=/g,"Equals"),t=t.replace(/-/g,"Dash"),t=t.replace(/_/g,"Underscore"),t=t.replace(/;/g,"Semicolon"),t=t.replace(/@/g,"At"),t=t.replace(/%/g,"Percent"),t=t.replace(/\$/g,"Currency"),t=t.replace(/"/g,"DoubleQuote"),t=t.replace(/'/g,"SingleQuote"),t=t.replace(/#/g,"Hash"),t=t.replace(/ß/g,"Eszett"),t=t[0].toUpperCase()+t.substring(1),t=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t+=r<65||r>90&&r<97||r>122?`u${r}`:e.charAt(n)}return t}(t),t}(e.value)+"Keyword";n.set(t,{feature:e,kind:"Keyword"}),r.set(e,t)}else if(_l(e)){const i=(t??"")+e.type+(e.feature??"")+"Action";n.set(i,{feature:e,kind:"Action"}),r.set(e,i)}else if(El(e)||Al(e)||Pl(e))for(const i of e.elements)of(i,t,n,r)}function af(e,t,n){const r=function(e,t){return sf(e,t,e?.element,!0)}(e,t);if(0!==r.length)return r[n=void 0!==n?Math.max(0,Math.min(n,r.length-1)):0]}function sf(e,t,n,r){if(!e||!t||e.element!==n)return[];const i=pl(e.feature,bl);return!r&&i&&i.feature===t?[e]:e instanceof sl?e.children.flatMap((e=>sf(e,t,n,!1))):[]}function cf(e){let t=e;do{const e=pl(t.feature,bl);if(e)return e;t=t.parent}while(t)}function uf(e,t){return lf(t)?.type??gf(e)}function lf(e){const t=e.$container;if(Pl(t)){const n=t.elements;for(let t=n.indexOf(e)-1;t>=0;t--){const e=n[t];if(_l(e))return e;{let e;if(yl(n[t]).forEach((t=>{_l(t.node)&&(e=t.node)})),e)return e}}}return Tl(t)?lf(t):void 0}function ff(e){return pf(e.terminal)}const df=/[\s\S]/.source;function pf(e){if(o=e,Dl.isInstance(o,"TerminalAlternatives"))return mf(`(${(i=e).elements.map(pf).join("|")})`,i.cardinality);if(function(e){return Dl.isInstance(e,"TerminalGroup")}(e))return mf((r=e).elements.map(pf).join(""),r.cardinality);if(kl(e))return function(e){if(e.right)return mf(`[${hf(e.left)}-${hf(e.right)}]`,e.cardinality);return mf(hf(e.left),e.cardinality,!0)}(e);if(function(e){return Dl.isInstance(e,"TerminalRuleCall")}(e)){const t=e.rule.ref;if(!t)throw new Error("Missing rule reference.");return mf(ff(t),e.cardinality,!0)}if(function(e){return Dl.isInstance(e,"NegatedToken")}(e))return mf(`(?!${pf((n=e).terminal)})${df}*?`,n.cardinality,!0);if(function(e){return Dl.isInstance(e,"UntilToken")}(e))return mf(`${df}*?${pf((t=e).terminal)}`,t.cardinality);if(function(e){return Dl.isInstance(e,"RegexToken")}(e))return mf(e.regex,e.cardinality,!0);if(function(e){return Dl.isInstance(e,"Wildcard")}(e))return mf(df,e.cardinality);throw new Error("Invalid terminal element.");var t,n,r,i,o}function hf(e){return zo(e.value)}function mf(e,t,n=!1){return t?(n&&(e=`(${e})`),`${e}${t}`):e}function gf(e){if(e)return e.type??e.name;throw new Error("Unknown rule type")}function yf(e){const t=Ql(),n=t.serializer.JsonSerializer.deserialize(e);if(r=n,!Dl.isInstance(r,"Grammar"))throw new Error("Could not load grammar from specified json input.");var r;const i=n,o=So(pn.create("memory://grammar.langium","langium",0,""),{lexerErrors:[],parserErrors:[],value:i});return i.$document=o,o.precomputedScopes=function(e,t){const n=e.references.NameProvider,r=e.index.AstNodeDescriptionProvider,i=ml(t),o=new Map;for(const a of yl(t)){const{node:e}=a,t=e.$container;if(t){const a=n.getName(e);if(a){const n=r.createDescription(e,a,i);o.has(t)?o.get(t)?.push(n):o.set(t,[n])}}}return o}(t,i),i}function vf(e){const t=[],n=e.Grammar;for(const i of n.rules)Nl(i)&&((r=i).hidden&&!" ".match(ff(r)))&&Go(ff(i))&&t.push(i.name);var r;return{multilineCommentRules:t}}function Rf(e,t){return`${e}:${t}`}function Tf(e){return e.substring(e.indexOf(":")+1)}class _f{constructor(e){this.langiumDocuments=()=>e.documents.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.index.AstNodeLocator}async link(e,t=_n.CancellationToken.None){const n=t=>{vl(t).forEach((t=>this.doLink(t,e)))},r=e.parseResult.value;n(r);for(const i of yl(r))await qo(t),n(i.node)}doLink(e,t){const n=e.reference;if(void 0===n._ref)try{const t=Rf(e.container.$type,e.property),r=this.getCandidate(e.container,t,n);if(!dl(r)&&this.langiumDocuments().hasDocument(r.documentUri)){const t=this.loadAstNode(r);n._ref=t??this.createLinkingError(e,r)}else n._ref=r}catch(r){n._ref={...e,message:`An error occurred while resolving reference to '${n.$refText}': ${r}`}}t.references.push(n)}unlink(e){for(const t of e.references)delete t._ref;e.references=[]}getCandidate(e,t,n){return this.scopeProvider.getScope(e,t).getElement(n.$refText)??this.createLinkingError({container:e,property:Tf(t),reference:n})}buildReference(e,t,n,r){const i=this,o={$refNode:t,$refText:r,get ref(){if(ll(this._ref))return this._ref;if(void 0===this._ref)this._ref=i.getLinkedNode(e,n,o);else if("object"==typeof(t=this._ref)&&null!==t&&"string"==typeof t.name&&"string"==typeof t.type&&"string"==typeof t.path){const t=i.loadAstNode(this._ref);this._ref=t??i.createLinkingError({container:e,property:Tf(n),reference:o},this._ref)}var t;return ll(this._ref)?this._ref:void 0},get error(){return dl(this._ref)?this._ref:void 0}};return o}getLinkedNode(e,t,n){try{const r=this.getCandidate(e,t,n);if(dl(r))return r;return this.loadAstNode(r)??this.createLinkingError({container:e,property:Tf(t),reference:n},r)}catch(r){return{container:e,property:Tf(t),reference:n,message:`An error occurred while resolving reference to '${n.$refText}': ${r}`}}}loadAstNode(e){if(e.node)return e.node;const t=this.langiumDocuments().getOrCreateDocument(e.documentUri);return this.astNodeLocator.getAstNode(t,e.path)}createLinkingError(e,t){return{...e,message:`Could not resolve reference to '${e.reference.$refText}'.`,targetDescription:t}}}class Ef{constructor(e){this.astNodeLocator=e.index.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,t,n){return{node:e,name:t,type:e.$type,documentUri:n.uri,path:this.astNodeLocator.getAstNodePath(e)}}async createDescriptions(e,t=_n.CancellationToken.None){const n=[],r=e.parseResult.value,i=this.nameProvider.getName(r);i&&n.push(this.createDescription(r,i,e));for(const o of gl(r)){await qo(t);const r=this.nameProvider.getName(o.node);r&&n.push(this.createDescription(o.node,r,e))}return n}}class bf{constructor(e){this.linker=e.references.Linker,this.nodeLocator=e.index.AstNodeLocator}async createDescriptions(e,t=_n.CancellationToken.None){const n=[],r=e.parseResult.value,i=e=>{const t=this.linker.getCandidate(e.container,Rf(e.container.$type,e.property),e.reference);if(dl(t))return;const n=ml(e.container).uri,r=e.reference.$refNode;return{sourceUri:n,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:t.documentUri,targetPath:t.path,segment:nl(r),local:t.documentUri.toString()===n.toString()}};for(const o of yl(r)){await qo(t);vl(o.node).forEach((e=>{const t=i(e);t&&n.push(t)}))}return n}}class kf{constructor(){this.segmentSeparator="/"}getAstNodePath(e){let t=e.$container;const n=[];for(;t;)n.push(this.pathSegment(e,t)),e=t,t=t.$container;return this.segmentSeparator+n.reverse().join(this.segmentSeparator)}getAstNode(e,t){return t.split(this.segmentSeparator).reduce(((e,t)=>{if(!e||0===t.length)return e;const n=t.split("@"),r=e[n[0]];return 2===n.length?r[n[1]]:r}),e.parseResult.value)}pathSegment(e,t){if(e.$cstNode){const n=cf(e.$cstNode);if(n){if(tf(n.cardinality)){const r=t[n.feature].indexOf(e);return n.feature+"@"+r}return n.feature}}return"<missing>"}}function Cf(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var Pf=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,xf=function(e){return Pf.exec(e).slice(1)};function wf(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=Cf(Sf(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function Af(e){var t=Of(e),n="/"===Df(e,-1);return(e=Cf(Sf(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function Of(e){return"/"===e.charAt(0)}var Nf={extname:function(e){return xf(e)[3]},basename:function(e,t){var n=xf(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},dirname:function(e){var t=xf(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},sep:"/",delimiter:":",relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=wf(e).substr(1),t=wf(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var c=[];for(s=a;s<r.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")},join:function(){var e=Array.prototype.slice.call(arguments,0);return Af(Sf(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},isAbsolute:Of,normalize:Af,resolve:wf};function Sf(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var Df="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)};class If{constructor(e){this.simpleIndex=new Map,this.referenceIndex=new Map,this.globalScopeCache=new Map,this.astReflection=e.AstReflection,this.languageMetaData=e.LanguageMetaData,this.langiumDocuments=()=>e.documents.LangiumDocuments,this.astNodeDescriptionProvider=()=>e.index.AstNodeDescriptionProvider,this.referenceDescriptionProvider=()=>e.index.ReferenceDescriptionProvider}findAllReferences(e,t){const n=ml(e).uri,r=[];return this.referenceIndex.forEach((e=>{e.forEach((e=>{e.targetUri.toString()===n.toString()&&e.targetPath===t&&r.push(e)}))})),wo(r)}allElements(e){e=e??"",this.globalScopeCache.has("")||this.globalScopeCache.set("",Array.from(this.simpleIndex.values()).flat());const t=this.globalScopeCache.get(e);if(t)return wo(t);{const t=this.globalScopeCache.get("").filter((t=>!e||this.astReflection.isSubtype(t.type,e)));return this.globalScopeCache.set(e,t),wo(t)}}remove(e){for(const t of e){const e=t.toString();this.simpleIndex.delete(e),this.referenceIndex.delete(e)}}update(e,t=_n.CancellationToken.None){return this.processDocuments(e,t)}getAffectedDocuments(e){return this.langiumDocuments().all.filter((t=>{if(e.some((e=>t.uri.toString()===e.toString())))return!1;for(const n of e)if(this.isAffected(t,n))return!0;return!1}))}isAffected(e,t){const n=t.toString(),r=e.uri.toString();if(e.references.some((e=>e.error)))return!0;const i=this.referenceIndex.get(r);return!!i&&i.filter((e=>!e.local)).some((e=>e.targetUri.toString()===n))}async initializeWorkspace(e){const t=[],n=e=>{t.push(e)};await Promise.all(e.map((async e=>this.traverseFolder(_o.parse(e.uri),this.languageMetaData.fileExtensions,n)))),await this.processDocuments(t)}async traverseFolder(e,t,n){const r=e.fsPath;if(!To.existsSync(r))return void console.error(`File ${e} doesn't exist.`);if(this.skip(e))return;const i=await To.promises.readdir(r,{withFileTypes:!0});for(const o of i){const e=_o.file(Nf.resolve(r,o.name));if(o.isDirectory())await this.traverseFolder(e,t,n);else if(t.includes(Nf.extname(e.path))){n(this.langiumDocuments().getOrCreateDocument(e))}}}skip(e){const t=Eo.basename(e);return t.startsWith(".")||["node_modules","out"].includes(t)}async processDocuments(e,t=_n.CancellationToken.None){this.globalScopeCache.clear();for(const n of e){const e=await this.astNodeDescriptionProvider().createDescriptions(n,t);for(const t of e)t.node=void 0;this.simpleIndex.set(n.textDocument.uri,e),await qo(t)}for(const n of e)this.referenceIndex.set(n.textDocument.uri,await this.referenceDescriptionProvider().createDescriptions(n,t)),await qo(t),n.state=Oo.Indexed}}function Lf(e){return void 0!==e.name}class Mf{getName(e){if(Lf(e))return e.name}getNameNode(e){return af(e.$cstNode,"name")}}function Ff(e){return qf(e,new Map)}function qf(e,t){if(0===e.length)return[];const n=[];let r,i=e[0];for(;i.$container;){if(Pl(i.$container)){r=i.$container;break}if(!Tl(i.$container))break;i=i.$container}if(tf(i.cardinality??t.get(i))&&n.push(...$f(i,t)),r){const o=r.elements.indexOf(i);void 0!==o&&o<r.elements.length-1&&n.push(...Uf(r,o+1,t)),n.every((e=>ef(e.cardinality??t.get(e))))&&n.push(...qf([r],t)),n.every((e=>ef(e.cardinality??t.get(e))))&&(e.shift(),n.push(...qf(e,t)))}else e.shift(),n.push(...qf(e,t));return n}function $f(e,t){const n=t??new Map;return void 0===e?[]:Pl(e)?Uf(e,0,n).map((t=>jf(t,e.cardinality,n))):El(e)?e.elements.flatMap((e=>$f(e,n))).map((t=>jf(t,e.cardinality,n))):Al(e)?[]:bl(e)?$f(e.terminal,n).map((t=>jf(t,e.cardinality,n))):_l(e)?qf([e],n).map((t=>jf(t,e.cardinality,n))):wl(e)&&Ol(e.rule.ref)?$f(e.rule.ref.alternatives,n).map((t=>jf(t,e.cardinality,n))):[e]}function jf(e,t,n){return ef(t)&&(tf(e.cardinality)?n.set(e,"*"):n.set(e,"?")),e}function Uf(e,t,n){const r=[];let i;do{if(i=e.elements[t++],r.push(...$f(i,n)),!ef(i?.cardinality??n.get(i)))break}while(i);return r}class Wf{constructor(e){this.scopeProvider=e.references.ScopeProvider,this.ruleInterpreter=e.lsp.completion.RuleInterpreter,this.grammar=e.Grammar}getCompletion(e,t){const n=e.parseResult.value.$cstNode,r=[],i=e.textDocument.offsetAt(t.position),o=(t,n)=>{const o=this.fillCompletionItem(e.textDocument,i,t,n);o&&r.push(o)};if(n){const e=Rl(n,i);if(e){const t=Ff(this.buildFeatureStack(e)),n=this.findCommonSuperRule(e);if(n){const e=el(n.node).filter((e=>e.offset<i)),r=this.ruleInterpreter.interpretRule(n.rule,[...e],i),o=r.filter((t=>{const n=this.ruleInterpreter.featureMatches(t,e[e.length-1],i);return"partial"===n||"both"===n})),a=r.filter((e=>!o.includes(e)));t.push(...o),t.push(...a.flatMap((e=>Ff([e]))))}e.end>i&&t.push(e.feature),wo(t).distinct((e=>xl(e)?e.value:e)).forEach((t=>this.completionFor(rl(e),t,o)))}else{const e=this.grammar.rules.find((e=>Ol(e)));this.completionForRule(void 0,e,o)}}return _n.CompletionList.create(r,!0)}buildFeatureStack(e){const t=[];for(;e;)e.feature&&t.push(e.feature),e=e.parent;return t}completionForRule(e,t,n){if(Ol(t)){$f(t.alternatives).flatMap((t=>this.completionFor(e,t,n)))}}completionFor(e,t,n){if(xl(t))this.completionForKeyword(t,e,n);else{if(wl(t)&&t.rule.ref)return this.completionForRule(e,t.rule.ref,n);Cl(t)&&e&&this.completionForCrossReference(t,e,n)}}completionForCrossReference(e,t,n){const r=pl(e,bl),i=pl(e,Ol);if(r&&i){const e=this.scopeProvider.getScope(t,`${uf(i,r)}:${r.feature}`),o=new Set;e.getAllElements().forEach((e=>{o.has(e.name)||(n(e,{kind:_n.CompletionItemKind.Reference,detail:e.type,sortText:"0"}),o.add(e.name))}))}}completionForKeyword(e,t,n){n(e.value,{kind:_n.CompletionItemKind.Keyword,detail:"Keyword",sortText:/\w/.test(e.value)?"1":"2"})}findCommonSuperRule(e){for(;"string"!=typeof e.element.$type;)e=e.parent;let t=e.parent;for(;t;){if(t.element!==e.element){const t=e.feature;if(wl(t)&&t.rule.ref){return{rule:t.rule.ref,node:e}}throw new Error}t=(e=t).parent}}fillCompletionItem(e,t,n,r){let i;if("string"==typeof n)i=n;else if(ll(n)&&Lf(n))i=n.name;else{if(ll(n))return;i=n.name}const o=this.buildCompletionTextEdit(e,t,i);if(!o)return;const a={label:i,textEdit:o};return r&&Object.assign(a,r),a}buildCompletionTextEdit(e,t,n){let r=0;const i=e.getText(),o=i.toLowerCase(),a=n.toLowerCase();for(let s=a.length;s>0;s--){const e=o.substring(t-s,t);if(a.startsWith(e)&&(0===s||!this.isWordCharacterAt(o,t-s-1))){r=s;break}}if(r>0||0===t||!this.isWordCharacterAt(n,0)||!this.isWordCharacterAt(i,t-1)){return{newText:n,range:{start:e.positionAt(t-r),end:e.positionAt(t)}}}}isWordCharacterAt(e,t){return/\w/.test(e.charAt(t))}}class Kf{interpretRule(e,t,n){let r=[],i=$f(e.alternatives),o=t.shift();for(;o&&i.length>0;){const e=o,a=[];r=[],i.forEach((i=>{const o=this.featureMatches(i,e,n);0===t.length&&"none"!==o&&a.push(i),"full"!==o&&"both"!==o||r.push(i)})),i=r.flatMap((e=>Ff([e]))),r.push(...a),o=t.shift()}return r}featureMatches(e,t,n){if(xl(e)){const r=e.value,i=t.end,o=i>n?t.text.substring(0,i-n):t.text;return r===o?"full":r.startsWith(o)?"partial":"none"}return wl(e)?this.ruleMatches(e.rule.ref,t,n):Cl(e)?this.featureMatches(e.terminal,t,n):"none"}ruleMatches(e,t,n){if(Ol(e)){const r=$f(e.alternatives),i=rf(e)?"both":"full";return r.some((e=>this.featureMatches(e,t,n)))?i:"none"}return Nl(e)&&null!==t.text.match(ff(e))?"both":"none"}}class Gf{constructor(e){this.references=e.references.References,this.nameProvider=e.references.NameProvider}findHighlights(e,t){const n=e.parseResult.value.$cstNode;if(!n)return;const r=Rl(n,e.textDocument.offsetAt(t.position));if(!r)return;const i=this.references.findDeclaration(r)?.element;if(i){const t=[];if(ml(i).uri.toString()===e.uri.toString()){const e=this.findNameNode(i);e&&t.push([e,this.getHighlightKind(e)])}return function(e,t=ml(e).parseResult.value){const n=[],r=t=>{vl(t).forEach((t=>{t.reference.ref===e&&n.push(t.reference)}))};return r(t),yl(t).forEach((e=>r(e.node))),wo(n)}(i,n.element).forEach((e=>{t.push([e.$refNode,this.getHighlightKind(e.$refNode,e)])})),t.map((([e,t])=>_n.DocumentHighlight.create(e.range,t)))}}findNameNode(e){const t=this.nameProvider.getNameNode(e);return t||e.$cstNode}getHighlightKind(e,t){return t?_n.DocumentHighlightKind.Read:_n.DocumentHighlightKind.Text}}class zf{constructor(e){this.nameProvider=e.references.NameProvider}getSymbols(e){return this.getSymbol(e,e.parseResult.value)}getSymbol(e,t){const n=t.$cstNode,r=this.nameProvider.getNameNode(t);if(r&&n){const i=this.nameProvider.getName(t);return[{kind:this.getSymbolKind(t.$type),name:i??r.text,range:n.range,selectionRange:r.range,children:this.getChildSymbols(e,t)}]}return this.getChildSymbols(e,t)||[]}getChildSymbols(e,t){const n=[];for(const r of gl(t)){const t=this.getSymbol(e,r.node);n.push(...t)}if(n.length>0)return n}getSymbolKind(e){return _n.SymbolKind.Field}}class Bf{constructor(e){this.nameProvider=e.references.NameProvider,this.references=e.references.References}goToDefinition(e,t){const n=e.parseResult.value,r=[];if(n.$cstNode){const i=Rl(n.$cstNode,e.textDocument.offsetAt(t.position));if(i){const e=this.references.findDeclaration(i);if(e?.element){const t=ml(e?.element);e&&t&&r.push({source:i,target:e,targetDocument:t})}}}return r.map((e=>_n.LocationLink.create(e.targetDocument.textDocument.uri,(this.findActualNodeFor(e.target)??e.target).range,e.target.range,e.source.range)))}findActualNodeFor(e){let t=e;for(;!t?.element?.$cstNode;){if(!t)return;t=t.parent}return t.element.$cstNode}}class Hf{constructor(e){this.references=e.references.References}getHoverContent(e,t){const n=e.parseResult?.value?.$cstNode;if(n){const r=e.textDocument.offsetAt(t.position),i=Rl(n,r);if(i&&i.offset+i.length>r){const e=this.references.findDeclaration(i);if(e)return this.getAstNodeHoverContent(e.element)}}}}class Vf extends Hf{constructor(e){super(e),this.commentContentRegex=/\/\*([\s\S]*?)\*\//,this.grammarConfig=e.parser.GrammarConfig}getAstNodeHoverContent(e){const t=function(e,t){let n;if(e instanceof sl)for(const r of e.children){if(!r.hidden)break;r instanceof al&&t.includes(r.tokenType.name)&&(n=r)}return n}(e.$cstNode,this.grammarConfig.multilineCommentRules);let n;if(t){const e=this.commentContentRegex.exec(t.text);e&&e[1]&&(n=this.getCommentContent(e[1]))}if(n)return{contents:{kind:"markdown",value:n}}}getCommentContent(e){return e.split("\n").map((e=>((e=e.trim()).startsWith("*")&&(e=e.substring(1).trim()),e))).join(" ").trim()}}class Yf{constructor(e){this.nameProvider=e.references.NameProvider,this.references=e.references.References}findReferences(e,t){const n=e.parseResult.value.$cstNode;if(!n)return[];const r=[],i=Rl(n,e.textDocument.offsetAt(t.position));if(!i)return[];const o=this.references.findDeclaration(i)?.element;if(o){if(t.context.includeDeclaration){const e=ml(o),t=this.findNameNode(o,i.text);t&&r.push({docUri:e.uri,range:t.range})}this.references.findReferences(o).forEach((t=>{if(fl(t))r.push({docUri:e.uri,range:t.$refNode.range});else{const e=t.segment.range;r.push({docUri:t.sourceUri,range:e})}}))}return r.map((e=>_n.Location.create(e.docUri.toString(),e.range)))}findNameNode(e,t){const n=this.nameProvider.getNameNode(e);if(n)return n;if(e.$cstNode){const n=el(e.$cstNode).find((e=>e.text===t));if(n)return n}return e.$cstNode}}class Xf{constructor(e){this.referenceFinder=e.lsp.ReferenceFinder,this.references=e.references.References,this.nameProvider=e.references.NameProvider}async renameElement(e,t){const n={},r=await this.referenceFinder.findReferences(e,{...t,context:{includeDeclaration:!0}});if(Array.isArray(r))return r.forEach((e=>{const r=_n.TextEdit.replace(e.range,t.newName);n[e.uri]?n[e.uri].push(r):n[e.uri]=[r]})),{changes:n}}prepareRename(e,t){return this.renameNodeRange(e,t.position)}renameNodeRange(e,t){const n=e.parseResult.value.$cstNode,r=e.textDocument.offsetAt(t);if(n&&r){const e=Rl(n,r);if(!e)return;if(this.references.findDeclaration(e)||this.isNameNode(e))return e.range}}isNameNode(e){return e?.element&&Lf(e.element)&&e===this.nameProvider.getNameNode(e.element)}}function Jf(e){const t=e.Grammar,n=new Map,r=e.parser.TokenBuilder.buildTokens(t);r.forEach((e=>{n.set(e.name,e)}));const i=new Map,o=new Ju(e,r);return function(e,t){for(const n of wo(t.rules).filter(Ol)){const t={...e,consume:1,optional:1,subrule:1,many:1,or:1},r=(n.entry?t.parser.MAIN_RULE:t.parser.DEFINE_RULE).bind(t.parser),i=n.fragment?void 0:rf(n)?Xu:gf(n);t.rules.set(n.name,r(n.name,i,ed(t,n)))}}({parser:o,tokens:n,rules:i},t),o.finalize(),o}function Zf(e,t){const n=e.rules.get(t);if(!n)throw new Error;return n}function Qf(e,t){const n=e.tokens.get(t);if(!n)throw new Error;return n}function ed(e,t){const n=td(e,t.alternatives),r=[];return yl(t.alternatives).forEach((e=>{const t=e.node;bl(t)&&nf(t.operator)&&r.push(t.feature)})),()=>(e.parser.initializeElement(r),n(),e.parser.construct())}function td(e,t){let n;if(xl(t))n=function(e,t){const n=e.consume++,r=e.tokens.get(t.value);if(!r)throw new Error;return()=>e.parser.consume(n,r,t)}(e,t);else if(_l(t))n=function(e,t){return()=>e.parser.action(t.type,t)}(e,t);else if(bl(t))n=td(e,t.terminal);else if(Cl(t))n=function(e,t){const n=t.terminal;if(n){if(wl(n)&&Ol(n.rule.ref)){const r=e.subrule++,i=n.rule.ref.name;return()=>e.parser.subrule(r,Zf(e,i),t)}if(wl(n)&&Nl(n.rule.ref)){const r=e.consume++,i=Qf(e,n.rule.ref.name);return()=>e.parser.consume(r,i,t)}throw new Error}{const n=e.consume++,r=Qf(e,"ID");return()=>e.parser.consume(n,r,t)}}(e,t);else if(wl(t))n=function(e,t){const n=t.rule.ref;if(Ol(n)){const r=e.subrule++;return hl(t,bl)||rf(n)?()=>e.parser.subrule(r,Zf(e,n.name),t):()=>e.parser.unassignedSubrule(r,Zf(e,n.name),t)}if(Nl(n)){const r=e.consume++,i=Qf(e,n.name);return()=>e.parser.consume(r,i,t)}throw new Error}(e,t);else if(El(t))n=function(e,t){if(1===t.elements.length)return td(e,t.elements[0]);{const n=[];for(const i of t.elements)n.push(td(e,i));const r=e.or++;return()=>e.parser.alternatives(r,n)}}(e,t);else if(Al(t))n=function(e,t){throw new Error("Unordered groups are not supported (yet)")}();else{if(!Pl(t))throw new Error;n=function(e,t){const n=[];for(const r of t.elements)n.push(td(e,r));return()=>n.forEach((e=>e()))}(e,t)}return function(e,t,n){if(n){if("*"===n){const n=e.many++;return()=>e.parser.many(n,t)}if("+"===n){const n=e.many++;return()=>e.parser.atLeastOne(n,t)}if("?"===n){const n=e.optional++;return()=>e.parser.optional(n,t)}throw new Error}return t}(e,n,t.cardinality)}class nd{constructor(){this.KEYWORD_SUFFIX="_KEYWORD",this.TERMINAL_SUFFIX="_TERMINAL"}buildTokens(e){const t=new Map,n=[],r=Array.from(wo(e.rules).filter(Nl));for(const a of r){const e=this.buildTerminalToken(a);n.push(e),t.set(a.name+this.TERMINAL_SUFFIX,e)}const i=[],o=yl(e).map((e=>e.node)).filter(xl).distinct((e=>e.value)).toArray().sort(((e,t)=>t.value.length-e.value.length));for(const a of o){const e=this.buildKeywordToken(a,o,r,t);i.push(e),t.set(a.value+this.KEYWORD_SUFFIX,e)}for(const a of n){const e=a.PATTERN;"object"==typeof e&&e&&"test"in e&&e.test(" ")?i.unshift(a):i.push(a)}return i}buildTerminalToken(e){let t;const n=ff(e);e.hidden&&(t=new RegExp(n).test(" ")?Yu.SKIPPED:"hidden");const r={name:e.name,GROUP:t,PATTERN:new RegExp(n)};return t||delete r.GROUP,r}buildKeywordToken(e,t,n,r){const i=this.findLongerAlt(e,t,n,r);return{name:e.value,PATTERN:this.buildKeywordPattern(e),LONGER_ALT:i}}buildKeywordPattern(e){return e.value}findLongerAlt(e,t,n,r){const i=[];for(const o of t){const t=r.get(o.value+this.KEYWORD_SUFFIX);t&&o.value.length>e.value.length&&o.value.startsWith(e.value)&&i.push(t)}for(const o of n){const t=r.get(o.name+this.TERMINAL_SUFFIX);t&&Bo("^"+ff(o)+"$",e.value)&&i.push(t)}return i}}class rd{convert(e,t){if(wl(t.feature)){const n=t.feature.rule.ref;if(!n)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(n,e,t)}return e}runConverter(e,t,n){switch(e.name.toUpperCase()){case"INT":return function(e){return parseInt(e)}(t);case"STRING":return id(t);case"ID":return function(e){return"^"===e.charAt(0)?e.substring(1):e}(t);case"REGEXLITERAL":return id(t)}switch(e.type.toLowerCase()){case"number":return function(e){return Number(e)}(t);case"boolean":return function(e){return"true"===e.toLowerCase()}(t);default:return t}}}function id(e){return e.substring(1,e.length-1)}class od{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.index.IndexManager,this.nodeLocator=e.index.AstNodeLocator}findDeclaration(e){if(e){const t=cf(e),n=rl(e);if(t&&n){const r=n[t.feature];if(fl(r))return this.processReference(r);if(Array.isArray(r)){for(const t of r)if(fl(t)){const n=this.processReference(t);if(n&&n.text===e.text)return n}}else{const t=this.nameProvider.getNameNode(n);if(t===e||t&&t.offset<=e.offset&&t.offset+t.length>e.offset)return t}}}}findReferences(e){return this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e))}processReference(e){const t=e.ref;if(t&&t.$cstNode){const e=this.nameProvider.getNameNode(t);return e||t.$cstNode}}}class ad{constructor(e,t){this.elements=e,this.outerScope=t}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const t=this.elements.find((t=>t.name===e));return t||(this.outerScope?this.outerScope.getElement(e):void 0)}}class sd{constructor(e){this.reflection=e.AstReflection,this.globalScope=e.index.IndexManager}getScope(e,t){const n=[],r=this.reflection.getReferenceType(t),i=ml(e).precomputedScopes;if(i){let t=e;do{const e=i.get(t);e&&n.push(wo(e).filter((e=>this.reflection.isSubtype(e.type,r)))),t=t.$container}while(t)}let o=this.getGlobalScope(r);for(let a=n.length-1;a>=0;a--)o=new ad(n[a],o);return o}getGlobalScope(e){return new ad(this.globalScope.allElements(e))}}class cd{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.index.AstNodeDescriptionProvider}async computeScope(e,t=Cn.CancellationToken.None){const n=e.parseResult.value,r=new Map;for(const i of yl(n)){qo(t);const{node:n}=i,o=n.$container;if(o){const t=this.nameProvider.getName(n);if(t){const i=this.descriptions.createDescription(n,t,e);this.addToContainer(i,o,r)}}}return r}addToContainer(e,t,n){n.has(t)?n.get(t)?.push(e):n.set(t,[e])}}class ud{constructor(e){this.linker=e.references.Linker}serialize(e,t){return JSON.stringify(this.decycle(e,"$container","$document","$cstNode"),void 0,t)}deserialize(e){return this.revive(JSON.parse(e))}decycle(e,...t){const n=new Set,r=e=>{if("object"==typeof e&&null!==e){if(n.has(e))throw new Error("Cycle in ast detected.");if(n.add(e),fl(e))return{$refText:e.$refText};let i;if(Array.isArray(e)){i=[];for(let t=0;t<e.length;t++)i[t]=r(e[t])}else{i={};for(const[n,o]of Object.entries(e))t.includes(n)||(i[n]=r(o))}return i}return e};return r(e)}revive(e){const t=(e,n,r)=>{if(e&&"object"==typeof e&&null!==e)if(Array.isArray(e))for(let i=0;i<e.length;i++){const o=e[i];if(fl(o)&&ll(n)){const t=Rf(n.$type,r),a=this.linker.buildReference(n,o.$refNode,t,o.$refText);e[i]=a}else"object"==typeof o&&null!==o&&(t(o,o),o.$container=n)}else for(const[i,o]of Object.entries(e))if("object"==typeof o&&null!==o)if(fl(o)){const t=Rf(e.$type,i),n=this.linker.buildReference(e,o.$refNode,t,o.$refText);e[i]=n}else Array.isArray(o)?t(o,e,i):(t(o),o.$container=e)};return t(e),e}}class ld{constructor(e){this.validationRegistry=e.validation.ValidationRegistry}async validateDocument(e,t=_n.CancellationToken.None){const n=e.parseResult,r=[];await qo(t);for(const o of n.lexerErrors){const e={severity:_n.DiagnosticSeverity.Error,range:{start:{line:o.line-1,character:o.column-1},end:{line:o.line-1,character:o.column+o.length-1}},message:o.message};r.push(e)}for(const o of n.parserErrors){const e=o.token,t={severity:_n.DiagnosticSeverity.Error,range:tl(e),message:o.message};r.push(t)}for(const o of e.references){const e=o.error;if(e){const t={node:e.container,property:e.property,index:e.index};r.push(this.toDiagnostic("error",e.message,t))}}try{r.push(...await this.validateAst(n.value,e,t))}catch(i){console.error("An error occurred during validation:",i)}return await qo(t),r}async validateAst(e,t,n=_n.CancellationToken.None){const r=[],i=(e,t,n)=>{r.push(this.toDiagnostic(e,t,n))},o=async e=>{const t=this.validationRegistry.getChecks(e.$type);for(const r of t)await r(e,i,n)};return await o(e),await Promise.all(yl(e).map((async e=>{await qo(n),await o(e.node)}))),r}toDiagnostic(e,t,n){return{message:t,range:fd(n),severity:dd(e),code:n.code,codeDescription:n.codeDescription,tags:n.tags,relatedInformation:n.relatedInformation,data:n.data}}}function fd(e){if(e.range)return e.range;if(void 0!==e.property&&"string"!=typeof e.property)throw new Error("Invalid property: "+e.property);const t=af(e.node.$cstNode,e.property,e.index)??e.node.$cstNode;return t?t.range:{start:{line:0,character:0},end:{line:0,character:0}}}function dd(e){switch(e){case"error":return _n.DiagnosticSeverity.Error;case"warning":return _n.DiagnosticSeverity.Warning;case"info":return _n.DiagnosticSeverity.Information;case"hint":return _n.DiagnosticSeverity.Hint;default:throw new Error("Invalid diagnostic severity: "+e)}}export{vf as $,Hf as A,nd as B,wo as C,Ef as D,Ol as E,rf as F,Xu as G,gf as H,bl as I,nf as J,xl as K,Ju as L,_l as M,Cl as N,wl as O,El as P,Al as Q,Pl as R,hl as S,Nl as T,cd as U,$l as V,yf as W,al as X,sl as Y,dl as Z,ud as _,De as a,Jf as a0,rd as a1,Lo as a2,$o as a3,Do as a4,Wf as a5,Kf as a6,zf as a7,Vf as a8,Yl as a9,Yf as aa,Bf as ab,Gf as ac,Xf as ad,If as ae,bf as af,ld as ag,So as ah,Il as ai,Oo as aj,Rl as ak,Fo as al,s as b,Ht as c,Vt as d,d as e,N as f,S as g,P as h,ll as i,yl as j,qo as k,o as l,a as m,zt as n,Mf as o,fl as p,af as q,od as r,Gt as s,cf as t,rl as u,kf as v,_f as w,Tf as x,Rf as y,sd as z};
