import{c as e,b as t}from"./parser.0f32b843.js";import{U as n}from"./editor.5d0c7004.js";import{m as r,n as i,s as o,c as a,d as u,b as s,e as c,f as l,g as p,h as d}from"./lsp.20bee587.js";import{v as h,T as m}from"./vsc.d3df0ac3.js";let f;const g={},v=function(e,t){if(!t||0===t.length)return e();if(void 0===f){const e=document.createElement("link").relList;f=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`/advscript-playground/${e}`)in g)return;g[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":f,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))};function D(e){return e?.type===C.Source}var C,_,y,I,E,A;function x(e,t){return function(n,r,i){const o={...r,type:e,kind:n};return F(o,i),Object.defineProperties(o,{kindName:{get(){return t[this.kind]},enumerable:!0}}),o}}function F(e,t){const n={_source:t,get sourceNode(){return"object"==typeof this._source?this._source:void 0}};return Object.setPrototypeOf(e,n),Object.defineProperties(e,{sourceString:{get(){return"object"==typeof this._source?this._source.sourceString:this._source},enumerable:!0,configurable:!0}}),e}(_=C||(C={})).Source="Source",_.Comment="Comment",_.Statment="statment",_.Expression="expression",_.Content="Content",_.Logic="logic",(I=y||(y={}))[I.Ignore=0]="Ignore",I[I.Content=1]="Content",(A=E||(E={}))[A.Single=0]="Single";const b=x(C.Comment,E);function S(e,t){return b(0,{value:e},t)}var w,k;(k=w||(w={}))[k.Comma=0]="Comma",k[k.Assign=1]="Assign",k[k.Binary=2]="Binary",k[k.VariableIdentifier=3]="VariableIdentifier",k[k.ArrayLiteral=4]="ArrayLiteral",k[k.PrecetLiteral=5]="PrecetLiteral",k[k.ArraySpreadLiteral=6]="ArraySpreadLiteral",k[k.Literal=7]="Literal",k[k.Comment=8]="Comment",k[k.CallFunction=9]="CallFunction",k[k.Template=10]="Template",k[k.CallMacro=11]="CallMacro";const R=x(C.Expression,w);var T,P,B,O,L,N,M,q,W,j,K,$,U,H,z,G,V,J;function Z(e,t,n,r){let i;return i in B?i=0:i in L?i=1:i in W?i=2:i in K?i=3:i in U?i=4:(i in z||i in V)&&(i=5),R(w.Binary,{value:{kind:i,left:e,operator:t,right:n}},r)}function Q(e,t,n,r){const i="string"==typeof e?te(null,e):e;return R(w.Binary,{value:n?{kind:5,left:i,operator:t,right:null}:{kind:5,left:null,operator:t,right:i}},r)}function Y(e="<anonymous>",t,n){return R(w.CallMacro,{name:e,params:t?.params||{},flags:t?.flags||[]},n)}function X(e="<anonymous>",t,n){return R(w.CallFunction,{argumentList:t||[],name:e},n)}function ee(e,t){if(function(e){return e.kind===w.CallFunction}(e))return e;const{kind:n,params:r,flags:i,...o}=e;return R(w.CallFunction,{...o,argumentList:[i.reduce(((e,t)=>({...e,[t]:!0})),{...r})],meta:{params:r,flags:i}},t??e.sourceString)}function te(e,t){return R(w.VariableIdentifier,{kindName:w[w.VariableIdentifier],prefix:e,text:t},e?e+t:t)}function ne(e,t){return R(w.Literal,{value:e},t)}(P=T||(T={}))[P.OrNull=0]="OrNull",P[P.Logic=1]="Logic",P[P.Realtion=2]="Realtion",P[P.Addition=3]="Addition",P[P.Multiplication=4]="Multiplication",P[P.Automic=5]="Automic",(O=B||(B={}))[O["??"]=0]="??",(N=L||(L={}))[N["||"]=0]="||",N[N["&&"]=1]="&&",(q=M||(M={}))[q["!="]=0]="!=",q[q["=="]=1]="==",(j=W||(W={}))[j[">="]=0]=">=",j[j["<="]=1]="<=",j[j[">"]=2]=">",j[j["<"]=3]="<",($=K||(K={}))[$["+"]=0]="+",$[$["-"]=1]="-",(H=U||(U={}))[H["%"]=0]="%",H[H["/"]=1]="/",H[H["*"]=2]="*",(G=z||(z={}))[G["^"]=0]="^",G[G["!"]=1]="!",(J=V||(V={}))[J["++"]=0]="++",J[J["--"]=1]="--";var re=function(){const e={},t={exports:e};var n,r;return n=globalThis,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){const r={};for(let i=0;i<128;i++)r[i]=String.fromCharCode(i);r["'".charCodeAt(0)]="\\'",r['"'.charCodeAt(0)]='\\"',r["\\".charCodeAt(0)]="\\\\",r["\b".charCodeAt(0)]="\\b",r["\f".charCodeAt(0)]="\\f",r["\n".charCodeAt(0)]="\\n",r["\r".charCodeAt(0)]="\\r",r["\t".charCodeAt(0)]="\\t",r["\v".charCodeAt(0)]="\\v",t.abstract=function(e){const t=e||"";return function(){throw new Error("this method "+t+" is abstract! (it has no implementation in class "+this.constructor.name+")")}},t.assert=function(e,t){if(!e)throw new Error(t)},t.defineLazyProperty=function(e,t,n){let r;Object.defineProperty(e,t,{get(){return r||(r=n.call(this)),r}})},t.clone=function(e){return e?Object.assign({},e):e},t.repeatFn=function(e,t){const n=[];for(;t-- >0;)n.push(e());return n},t.repeatStr=function(e,t){return new Array(t+1).join(e)},t.repeat=function(e,n){return t.repeatFn((()=>e),n)},t.getDuplicates=function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];e.lastIndexOf(r)!==n&&t.indexOf(r)<0&&t.push(r)}return t},t.copyWithoutDuplicates=function(e){const t=[];return e.forEach((e=>{t.indexOf(e)<0&&t.push(e)})),t},t.isSyntactic=function(e){const t=e[0];return t===t.toUpperCase()},t.isLexical=function(e){return!t.isSyntactic(e)},t.padLeft=function(e,n,r){const i=r||" ";return e.length<n?t.repeatStr(i,n-e.length)+e:e},t.StringBuffer=function(){this.strings=[]},t.StringBuffer.prototype.append=function(e){this.strings.push(e)},t.StringBuffer.prototype.contents=function(){return this.strings.join("")},t.escapeChar=function(e,n){const i=e.charCodeAt(0);return'"'!==e&&"'"!==e||!n||e===n?i<128?r[i]:128<=i&&i<256?"\\x"+t.padLeft(i.toString(16),2,"0"):"\\u"+t.padLeft(i.toString(16),4,"0"):e},t.unescapeChar=function(e){if("\\"!==e.charAt(0))return e;switch(e.charAt(1)){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"x":return String.fromCharCode(parseInt(e.substring(2,4),16));case"u":return String.fromCharCode(parseInt(e.substring(2,6),16));default:return e.charAt(1)}},t.unexpectedObjToString=function(e){if(null==e)return String(e);const t=Object.prototype.toString.call(e);try{let n;return n=e.constructor&&e.constructor.name?e.constructor.name:0===t.indexOf("[object ")?t.slice(8,-1):typeof e,n+": "+JSON.stringify(String(e))}catch(n){return t}}},function(e,t,n){const r=n(16),i=n(0);class o{constructor(){if(this.constructor===o)throw new Error("PExpr cannot be instantiated -- it's abstract")}withSource(e){return e&&(this.source=e.trimmed()),this}}const a=Object.create(o.prototype),u=Object.create(o.prototype);class s extends o{constructor(e){super(),this.terms=e}}class c extends o{constructor(e){super(),this.expr=e}}class l extends c{}class p extends c{}class d extends c{}l.prototype.operator="*",p.prototype.operator="+",d.prototype.operator="?",l.prototype.minNumMatches=0,p.prototype.minNumMatches=1,d.prototype.minNumMatches=0,l.prototype.maxNumMatches=Number.POSITIVE_INFINITY,p.prototype.maxNumMatches=Number.POSITIVE_INFINITY,d.prototype.maxNumMatches=1,t.PExpr=o,t.any=a,t.end=u,t.Terminal=class extends o{constructor(e){super(),this.obj=e}},t.Range=class extends o{constructor(e,t){super(),this.from=e,this.to=t}},t.Param=class extends o{constructor(e){super(),this.index=e}},t.Alt=s,t.Extend=class extends s{constructor(e,t,n){super([n,e.rules[t].body]),this.superGrammar=e,this.name=t,this.body=n}},t.Splice=class extends s{constructor(e,t,n,r){const i=e.rules[t].body;super([...n,i,...r]),this.superGrammar=e,this.ruleName=t,this.expansionPos=n.length}},t.Seq=class extends o{constructor(e){super(),this.factors=e}},t.Iter=c,t.Star=l,t.Plus=p,t.Opt=d,t.Not=class extends o{constructor(e){super(),this.expr=e}},t.Lookahead=class extends o{constructor(e){super(),this.expr=e}},t.Lex=class extends o{constructor(e){super(),this.expr=e}},t.Apply=class extends o{constructor(e,t=[]){super(),this.ruleName=e,this.args=t}isSyntactic(){return i.isSyntactic(this.ruleName)}toMemoKey(){return this._memoKey||Object.defineProperty(this,"_memoKey",{value:this.toString()}),this._memoKey}},t.UnicodeChar=class extends o{constructor(e){super(),this.category=e,this.pattern=r[e]}},n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30)},function(e,t,n){const r=n(1),i=n(11);function o(e,t){let n;return t?(n=new Error(t.getLineAndColumnMessage()+e),n.shortMessage=e,n.interval=t):n=new Error(e),n}e.exports={applicationOfSyntacticRuleFromLexicalContext:function(e,t){return o("Cannot apply syntactic rule "+e+" from here (inside a lexical context)",t.source)},cannotExtendUndeclaredRule:function(e,t,n){return o("Cannot extend rule "+e+" because it is not declared in "+t,n)},cannotOverrideUndeclaredRule:function(e,t,n){return o("Cannot override rule "+e+" because it is not declared in "+t,n)},duplicateGrammarDeclaration:function(e,t){return o("Grammar "+e.name+" is already declared in this namespace")},duplicateParameterNames:function(e,t,n){return o("Duplicate parameter names in rule "+e+": "+t.join(", "),n)},duplicatePropertyNames:function(e){return o("Object pattern has duplicate property names: "+e.join(", "))},duplicateRuleDeclaration:function(e,t,n,r){let i="Duplicate declaration for rule '"+e+"' in grammar '"+t+"'";return t!==n&&(i+=" (originally declared in '"+n+"')"),o(i,r)},inconsistentArity:function(e,t,n,r){return o("Rule "+e+" involves an alternation which has inconsistent arity (expected "+t+", got "+n+")",r.source)},incorrectArgumentType:function(e,t){return o("Incorrect argument type: expected "+e,t.source)},intervalSourcesDontMatch:function(){return o("Interval sources don't match")},invalidConstructorCall:function(e,t,n){return o("Attempt to invoke constructor "+t+" with invalid or unexpected arguments")},invalidParameter:function(e,t){return o("Invalid parameter to rule "+e+": "+t+" has arity "+t.getArity()+", but parameter expressions must have arity 1",t.source)},grammarSyntaxError:function(e){const t=new Error;return Object.defineProperty(t,"message",{enumerable:!0,get:()=>e.message}),Object.defineProperty(t,"shortMessage",{enumerable:!0,get:()=>"Expected "+e.getExpectedText()}),t.interval=e.getInterval(),t},kleeneExprHasNullableOperand:function(e,t){const n=t.length>0?t[t.length-1].args:[];let i="Nullable expression "+e.expr.substituteParams(n)+" is not allowed inside '"+e.operator+"' (possible infinite loop)";return t.length>0&&(i+="\nApplication stack (most recent application last):\n"+t.map((e=>new r.Apply(e.ruleName,e.args))).join("\n")),o(i,e.expr.source)},missingSemanticAction:function(e,t,n,r){let i=r.slice(0,-1).map((e=>{const t="  "+e[0].name+" > "+e[1];return 3===e.length?t+" for '"+e[2]+"'":t})).join("\n");i+="\n  "+t+" > "+e;let a="";"_iter"===e&&(a=["\nNOTE: as of Ohm v16, there is no default action for iteration nodes — see ","  https://git.io/JRwtG for details."].join("\n"));const u=o([`Missing semantic action for '${e}' in ${n} '${t}'.${a}`,"Action stack (most recent call last):",i].join("\n"));return u.name="missingSemanticAction",u},multipleSuperSplices:function(e){return o("'...' can appear at most once in a rule body",e.source)},undeclaredGrammar:function(e,t,n){return o(t?"Grammar "+e+" is not declared in namespace "+i.toString(t):"Undeclared grammar "+e,n)},undeclaredRule:function(e,t,n){return o("Rule "+e+" is not declared in grammar "+t,n)},wrongNumberOfArguments:function(e,t,n,r){return o("Wrong number of arguments for rule "+e+" (expected "+t+", got "+n+")",r.source)},wrongNumberOfParameters:function(e,t,n,r){return o("Wrong number of parameters for rule "+e+" (expected "+t+", got "+n+")",r)},throwErrors(e){if(1===e.length)throw e[0];if(e.length>1)throw function(e){const t=e.map((e=>e.message));return o(["Errors:"].concat(t).join("\n- "),e[0].interval)}(e)}}},function(e,t,n){const r=n(0);function i(e,t,n){const r=e.length;return(e.slice(0,n)+t+e.slice(n+t.length)).substr(0,r)}function o(...e){const t=this,n=t.offset,o=r.repeatStr,a=new r.StringBuffer;a.append("Line "+t.lineNum+", col "+t.colNum+":\n");const u=function(e){let t=0;return e.map((e=>{const n=e.toString();return t=Math.max(t,n.length),n})).map((e=>r.padLeft(e,t)))}([null==t.prevLine?0:t.lineNum-1,t.lineNum,null==t.nextLine?0:t.lineNum+1]),s=(e,t,n)=>{a.append(n+u[e]+" | "+t+"\n")};null!=t.prevLine&&s(0,t.prevLine,"  "),s(1,t.line,"> ");const c=t.line.length;let l=o(" ",c+1);for(let d=0;d<e.length;++d){let a=e[d][0],u=e[d][1];r.assert(a>=0&&a<=u,"range start must be >= 0 and <= end");const s=n-t.colNum+1;a=Math.max(0,a-s),u=Math.min(u-s,c),l=i(l,o("~",u-a),a)}const p=2+u[1].length+3;return a.append(o(" ",p)),l=i(l,"^",t.colNum-1),a.append(l.replace(/ +$/,"")+"\n"),null!=t.nextLine&&s(2,t.nextLine,"  "),a.contents()}let a=[];t.awaitBuiltInRules=e=>{a.push(e)},t.announceBuiltInRules=e=>{a.forEach((t=>{t(e)})),a=null},t.getLineAndColumn=(e,t)=>{let n=1,r=1,i=0,a=0,u=null,s=null,c=-1;for(;i<t;){const t=e.charAt(i++);"\n"===t?(n++,r=1,c=a,a=i):"\r"!==t&&r++}let l=e.indexOf("\n",a);if(-1===l)l=e.length;else{const t=e.indexOf("\n",l+1);u=-1===t?e.slice(l):e.slice(l,t),u=u.replace(/^\r?\n/,"").replace(/\r$/,"")}return c>=0&&(s=e.slice(c,a).replace(/\r?\n$/,"")),{offset:t,lineNum:n,colNum:r,line:e.slice(a,l).replace(/\r$/,""),prevLine:s,nextLine:u,toString:o}},t.getLineAndColumnMessage=function(e,n,...r){return t.getLineAndColumn(e,n).toString(...r)},t.uniqueId=(()=>{let e=0;return t=>""+t+e++})()},function(e,t,n){const r=n(14),i=n(5),o=n(11),a=n(0),u=n(2),s=n(1),c=n(3),l=n(37);let p;const d=Object.create(s.PExpr.prototype);function h(e,t,n){const o=new r;let c,l,h,m=!1;return(n||p).createSemantics().addOperation("visit",{Grammars:e=>e.children.map((e=>e.visit())),Grammar(e,n,r,i,a){const s=e.visit();c=o.newGrammar(s,t),n.child(0)&&n.child(0).visit(),i.children.map((e=>e.visit()));const l=c.build();if(l.source=this.source.trimmed(),s in t)throw u.duplicateGrammarDeclaration(l,t);return t[s]=l,l},SuperGrammar(e,n){const r=n.visit();if("null"===r)c.withSuperGrammar(null);else{if(!t||!(r in t))throw u.undeclaredGrammar(r,t,n.source);c.withSuperGrammar(t[r])}},Rule_define(e,t,n,r,o){l=e.visit(),h=t.children.map((e=>e.visit()))[0]||[],c.defaultStartRule||c.ensureSuperGrammar()===i.ProtoBuiltInRules||c.withDefaultStartRule(l);const a=o.visit(),u=n.children.map((e=>e.visit()))[0],s=this.source.trimmed();return c.define(l,h,a,u,s)},Rule_override(e,t,n,r){l=e.visit(),h=t.children.map((e=>e.visit()))[0]||[];const i=this.source.trimmed();c.ensureSuperGrammarRuleForOverriding(l,i),m=!0;const o=r.visit();return m=!1,c.override(l,h,o,null,i)},Rule_extend(e,t,n,r){l=e.visit(),h=t.children.map((e=>e.visit()))[0]||[];const i=r.visit(),o=this.source.trimmed();return c.extend(l,h,i,null,o)},RuleBody(e,t){const n=t.visit();return o.alt.apply(o,n).withSource(this.source)},OverrideRuleBody(e,t){const n=t.visit(),r=n.indexOf(d);if(r>=0){const e=n.slice(0,r),t=n.slice(r+1);return t.forEach((e=>{if(e===d)throw u.multipleSuperSplices(e)})),new s.Splice(c.superGrammar,l,e,t).withSource(this.source)}return o.alt.apply(o,n).withSource(this.source)},Formals:(e,t,n)=>t.visit(),Params:(e,t,n)=>t.visit(),Alt(e){const t=e.visit();return o.alt.apply(o,t).withSource(this.source)},TopLevelTerm_inline(e,t){const n=l+"_"+t.visit(),r=e.visit(),i=this.source.trimmed(),a=!(c.superGrammar&&c.superGrammar.rules[n]);m&&!a?c.override(n,h,r,null,i):c.define(n,h,r,null,i);const u=h.map((e=>o.app(e)));return o.app(n,u).withSource(r.source)},OverrideTopLevelTerm_superSplice:e=>d,Seq(e){return o.seq.apply(o,e.children.map((e=>e.visit()))).withSource(this.source)},Iter_star(e,t){return o.star(e.visit()).withSource(this.source)},Iter_plus(e,t){return o.plus(e.visit()).withSource(this.source)},Iter_opt(e,t){return o.opt(e.visit()).withSource(this.source)},Pred_not(e,t){return o.not(t.visit()).withSource(this.source)},Pred_lookahead(e,t){return o.lookahead(t.visit()).withSource(this.source)},Lex_lex(e,t){return o.lex(t.visit()).withSource(this.source)},Base_application(e,t){const n=t.children.map((e=>e.visit()))[0]||[];return o.app(e.visit(),n).withSource(this.source)},Base_range(e,t,n){return o.range(e.visit(),n.visit()).withSource(this.source)},Base_terminal(e){return o.terminal(e.visit()).withSource(this.source)},Base_paren:(e,t,n)=>t.visit(),ruleDescr:(e,t,n)=>t.visit(),ruleDescrText(e){return this.sourceString.trim()},caseName:(e,t,n,r,i)=>n.visit(),name(e,t){return this.sourceString},nameFirst(e){},nameRest(e){},terminal:(e,t,n)=>t.children.map((e=>e.visit())).join(""),oneCharTerminal:(e,t,n)=>t.visit(),terminalChar(e){return a.unescapeChar(this.sourceString)},escapeChar(e){return this.sourceString},NonemptyListOf:(e,t,n)=>[e.visit()].concat(n.children.map((e=>e.visit()))),EmptyListOf:()=>[],_terminal(){return this.sourceString}})(e).visit()}function m(e,t){const n=o.extend(o.asNamespace(t));if("string"!=typeof e){if(!(r=e).constructor||"function"!=typeof r.constructor.isBuffer||!r.constructor.isBuffer(r))throw new TypeError("Expected string as first argument, got "+a.unexpectedObjToString(e));e=e.toString()}var r;return function(e,t){const n=p.match(e,"Grammars");if(n.failed())throw u.grammarSyntaxError(n);h(n,t)}(e,n),n}e.exports={createNamespace:o.createNamespace,grammar:function(e,t){const n=m(e,t),r=Object.keys(n);if(0===r.length)throw new Error("Missing grammar definition");if(r.length>1){const e=n[r[1]].source;throw new Error(c.getLineAndColumnMessage(e.sourceString,e.startIdx)+"Found more than one grammar definition -- use ohm.grammars() instead.")}return n[r[0]]},grammars:m,grammarFromScriptElement:function(e){throw new Error("grammarFromScriptElement was removed in Ohm v16.0. See https://git.io/J0gnK for more info.")},grammarsFromScriptElements:function(e){throw new Error("grammarsFromScriptElements was removed in Ohm v16.0. See https://git.io/J0gnK for more info.")},makeRecipe:function(e){return"function"==typeof e?e.call(new r):("string"==typeof e&&(e=JSON.parse(e)),(new r).fromRecipe(e))},ohmGrammar:null,pexprs:s,util:c,extras:n(38),version:l},e.exports._buildGrammar=h,i.BuiltInRules=n(40),c.announceBuiltInRules(i.BuiltInRules),e.exports.ohmGrammar=p=n(41),i.initApplicationParser(p,h)},function(e,t,n){const r=n(15),i=n(31),o=n(34),a=n(0),u=n(2),s=n(1),c=["_iter","_terminal","_nonterminal","_default"];function l(e){return Object.keys(e.rules).sort().map((t=>e.rules[t]))}function p(e,t,n,r){if(this.name=e,this.superGrammar=t,this.rules=n,r){if(!(r in n))throw new Error("Invalid start rule: '"+r+"' is not a rule in grammar '"+e+"'");this.defaultStartRule=r}}let d,h;p.initApplicationParser=function(e,t){d=e,h=t},p.prototype={matcher(){return new i(this)},isBuiltIn(){return this===p.ProtoBuiltInRules||this===p.BuiltInRules},equals(e){if(this===e)return!0;if(null==e||this.name!==e.name||this.defaultStartRule!==e.defaultStartRule||this.superGrammar!==e.superGrammar&&!this.superGrammar.equals(e.superGrammar))return!1;const t=l(this),n=l(e);return t.length===n.length&&t.every(((e,t)=>e.description===n[t].description&&e.formals.join(",")===n[t].formals.join(",")&&e.body.toString()===n[t].body.toString()))},match(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.match(t)},trace(e,t){const n=this.matcher();return n.replaceInputRange(0,0,e),n.trace(t)},createSemantics(){return o.createSemantics(this)},extendSemantics(e){return o.createSemantics(this,e._getSemantics())},_checkTopDownActionDict(e,t,n){const r=[];for(const i in n){const e=n[i];if(!c.includes(i)&&!(i in this.rules)){r.push(`'${i}' is not a valid semantic action for '${this.name}'`);continue}if("function"!=typeof e){r.push(`'${i}' must be a function in an action dictionary for '${this.name}'`);continue}const t=e.length,o=this._topDownActionArity(i);if(t!==o){let e;e="_iter"===i||"_nonterminal"===i?`it should use a rest parameter, e.g. \`${i}(...children) {}\`. NOTE: this is new in Ohm v16 — see https://git.io/Jz4CI for details.`:`expected ${o}, got ${t}`,r.push(`Semantic action '${i}' has the wrong arity: ${e}`)}}if(r.length>0){const n=r.map((e=>"- "+e)),i=new Error([`Found errors in the action dictionary of the '${t}' ${e}:`,...n].join("\n"));throw i.problems=r,i}},_topDownActionArity(e){return c.includes(e)?0:this.rules[e].body.getArity()},_inheritsFrom(e){let t=this.superGrammar;for(;t;){if(t.equals(e,!0))return!0;t=t.superGrammar}return!1},toRecipe(e){const t={};this.source&&(t.source=this.source.contents);let n=null;this.defaultStartRule&&(n=this.defaultStartRule);const r={};Object.keys(this.rules).forEach((e=>{const t=this.rules[e],n=t.body,i=!this.superGrammar||!this.superGrammar.rules[e];let o;o=i?"define":n instanceof s.Extend?"extend":"override";const a={};if(t.source&&this.source){const e=t.source.relativeTo(this.source);a.sourceInterval=[e.startIdx,e.endIdx]}const u=i?t.description:null,c=n.outputRecipe(t.formals,this.source);r[e]=[o,a,u,t.formals,c]}));let i="null";return e?i=e:this.superGrammar&&!this.superGrammar.isBuiltIn()&&(i=this.superGrammar.toRecipe()),`[${[...["grammar",t,this.name].map(JSON.stringify),i,...[n,r].map(JSON.stringify)].join(",")}]`.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},toOperationActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()},toAttributeActionDictionaryTemplate(){return this._toOperationOrAttributeActionDictionaryTemplate()},_toOperationOrAttributeActionDictionaryTemplate(){const e=new a.StringBuffer;e.append("{");let t=!0;for(const n in this.rules){const r=this.rules[n].body;t?t=!1:e.append(","),e.append("\n"),e.append("  "),this.addSemanticActionTemplate(n,r,e)}return e.append("\n}"),e.contents()},addSemanticActionTemplate(e,t,n){n.append(e),n.append(": function(");const r=this._topDownActionArity(e);n.append(a.repeat("_",r).join(", ")),n.append(") {\n"),n.append("  }")},parseApplication(e){let t;if(-1===e.indexOf("<"))t=new s.Apply(e);else{const n=d.match(e,"Base_application");t=h(n,{})}if(!(t.ruleName in this.rules))throw u.undeclaredRule(t.ruleName,this.name);const n=this.rules[t.ruleName].formals;if(n.length!==t.args.length){const e=this.rules[t.ruleName].source;throw u.wrongNumberOfParameters(t.ruleName,n.length,t.args.length,e)}return t}},p.ProtoBuiltInRules=new p("ProtoBuiltInRules",void 0,{any:{body:s.any,formals:[],description:"any character",primitive:!0},end:{body:s.end,formals:[],description:"end of input",primitive:!0},caseInsensitive:{body:new r(new s.Param(0)),formals:["str"],primitive:!0},lower:{body:new s.UnicodeChar("Ll"),formals:[],description:"a lowercase letter",primitive:!0},upper:{body:new s.UnicodeChar("Lu"),formals:[],description:"an uppercase letter",primitive:!0},unicodeLtmo:{body:new s.UnicodeChar("Ltmo"),formals:[],description:"a Unicode character in Lt, Lm, or Lo",primitive:!0},spaces:{body:new s.Star(new s.Apply("space")),formals:[]},space:{body:new s.Range("\0"," "),formals:[],description:"a space"}}),e.exports=p},function(e,t,n){const r=n(0);let i=!1;class o{constructor(e,t,n){this.grammar=e,this.ctorName=t,this.matchLength=n}numChildren(){return this.children?this.children.length:0}childAt(e){if(this.children)return this.children[e]}indexOfChild(e){return this.children.indexOf(e)}hasChildren(){return this.numChildren()>0}hasNoChildren(){return!this.hasChildren()}onlyChild(){if(1!==this.numChildren())throw new Error("cannot get only child of a node of type "+this.ctorName+" (it has "+this.numChildren()+" children)");return this.firstChild()}firstChild(){if(this.hasNoChildren())throw new Error("cannot get first child of a "+this.ctorName+" node, which has no children");return this.childAt(0)}lastChild(){if(this.hasNoChildren())throw new Error("cannot get last child of a "+this.ctorName+" node, which has no children");return this.childAt(this.numChildren()-1)}childBefore(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childBefore() called w/ an argument that is not a child");if(0===t)throw new Error("cannot get child before first child");return this.childAt(t-1)}childAfter(e){const t=this.indexOfChild(e);if(t<0)throw new Error("Node.childAfter() called w/ an argument that is not a child");if(t===this.numChildren()-1)throw new Error("cannot get child after last child");return this.childAt(t+1)}isTerminal(){return!1}isNonterminal(){return!1}isIteration(){return!1}isOptional(){return!1}toJSON(){return{[this.ctorName]:this.children}}}e.exports={Node:o,TerminalNode:class extends o{constructor(e,t){super(e,"_terminal",t?t.length:0),this._value=t}isTerminal(){return!0}toJSON(){return{[this.ctorName]:this._value}}get primitiveValue(){return i||(console.warn("Warning: primitiveValue is deprecated and will be removed in a future version of Ohm. Use sourceString instead."),i=!0),this._value}},NonterminalNode:class extends o{constructor(e,t,n,r,i){super(e,t,i),this.children=n,this.childOffsets=r}isNonterminal(){return!0}isLexical(){return r.isLexical(this.ctorName)}isSyntactic(){return r.isSyntactic(this.ctorName)}},IterationNode:class extends o{constructor(e,t,n,r,i){super(e,"_iter",r),this.children=t,this.childOffsets=n,this.optional=i}isIteration(){return!0}isOptional(){return this.optional}}}},function(e,t,n){const r=n(0).assert,i=n(2),o=n(3);function a(e,t,n){this.sourceString=e,this.startIdx=t,this.endIdx=n}a.coverage=function(){const e=arguments[0].sourceString;let t=arguments[0].startIdx,n=arguments[0].endIdx;for(let r=1;r<arguments.length;r++){if(arguments[r].sourceString!==e)throw i.intervalSourcesDontMatch();t=Math.min(t,arguments[r].startIdx),n=Math.max(n,arguments[r].endIdx)}return new a(e,t,n)},a.prototype={coverageWith(){const e=Array.prototype.slice.call(arguments);return e.push(this),a.coverage.apply(void 0,e)},collapsedLeft(){return new a(this.sourceString,this.startIdx,this.startIdx)},collapsedRight(){return new a(this.sourceString,this.endIdx,this.endIdx)},getLineAndColumn(){return o.getLineAndColumn(this.sourceString,this.startIdx)},getLineAndColumnMessage(){const e=[this.startIdx,this.endIdx];return o.getLineAndColumnMessage(this.sourceString,this.startIdx,e)},minus(e){if(this.sourceString!==e.sourceString)throw i.intervalSourcesDontMatch();return this.startIdx===e.startIdx&&this.endIdx===e.endIdx?[]:this.startIdx<e.startIdx&&e.endIdx<this.endIdx?[new a(this.sourceString,this.startIdx,e.startIdx),new a(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.endIdx&&e.endIdx<this.endIdx?[new a(this.sourceString,e.endIdx,this.endIdx)]:this.startIdx<e.startIdx&&e.startIdx<this.endIdx?[new a(this.sourceString,this.startIdx,e.startIdx)]:[this]},relativeTo(e){if(this.sourceString!==e.sourceString)throw i.intervalSourcesDontMatch();return r(this.startIdx>=e.startIdx&&this.endIdx<=e.endIdx,"other interval does not cover this one"),new a(this.sourceString,this.startIdx-e.startIdx,this.endIdx-e.startIdx)},trimmed(){const e=this.contents,t=this.startIdx+e.match(/^\s*/)[0].length,n=this.endIdx-e.match(/\s*$/)[0].length;return new a(this.sourceString,t,n)},subInterval(e,t){const n=this.startIdx+e;return new a(this.sourceString,n,n+t)}},Object.defineProperties(a.prototype,{contents:{get(){return void 0===this._contents&&(this._contents=this.sourceString.slice(this.startIdx,this.endIdx)),this._contents},enumerable:!0},length:{get(){return this.endIdx-this.startIdx},enumerable:!0}}),e.exports=a},function(e,t,n){const r=n(7);function i(e){this.source=e,this.pos=0,this.examinedLength=0}i.prototype={atEnd(){const e=this.pos===this.source.length;return this.examinedLength=Math.max(this.examinedLength,this.pos+1),e},next(){const e=this.source[this.pos++];return this.examinedLength=Math.max(this.examinedLength,this.pos),e},matchString(e,t){let n;if(t){for(n=0;n<e.length;n++){const t=this.next(),r=e[n];if(null==t||t.toUpperCase()!==r.toUpperCase())return!1}return!0}for(n=0;n<e.length;n++)if(this.next()!==e[n])return!1;return!0},sourceSlice(e,t){return this.source.slice(e,t)},interval(e,t){return new r(this.source,e,t||this.pos)}},e.exports=i},function(e,t,n){const r=n(0),i=n(3),o=n(7);function a(e,t,n,o,a,u,s){this.matcher=e,this.input=t,this.startExpr=n,this._cst=o,this._cstOffset=a,this._rightmostFailurePosition=u,this._rightmostFailures=s,this.failed()&&(r.defineLazyProperty(this,"message",(function(){const e="Expected "+this.getExpectedText();return i.getLineAndColumnMessage(this.input,this.getRightmostFailurePosition())+e})),r.defineLazyProperty(this,"shortMessage",(function(){const e="expected "+this.getExpectedText(),t=i.getLineAndColumn(this.input,this.getRightmostFailurePosition());return"Line "+t.lineNum+", col "+t.colNum+": "+e})))}a.prototype.succeeded=function(){return!!this._cst},a.prototype.failed=function(){return!this.succeeded()},a.prototype.getRightmostFailurePosition=function(){return this._rightmostFailurePosition},a.prototype.getRightmostFailures=function(){if(!this._rightmostFailures){this.matcher.setInput(this.input);const e=this.matcher._match(this.startExpr,!1,this.getRightmostFailurePosition());this._rightmostFailures=e.getRightmostFailures()}return this._rightmostFailures},a.prototype.toString=function(){return this.succeeded()?"[match succeeded]":"[match failed at position "+this.getRightmostFailurePosition()+"]"},a.prototype.getExpectedText=function(){if(this.succeeded())throw new Error("cannot get expected text of a successful MatchResult");const e=new r.StringBuffer;let t=this.getRightmostFailures();t=t.filter((e=>!e.isFluffy()));for(let n=0;n<t.length;n++)n>0&&(n===t.length-1?e.append(t.length>2?", or ":" or "):e.append(", ")),e.append(t[n].toString());return e.contents()},a.prototype.getInterval=function(){const e=this.getRightmostFailurePosition();return new o(this.input,e,e)},e.exports=a},function(e,t,n){function r(e,t,n){if("description"!==(r=n)&&"string"!==r&&"code"!==r)throw new Error("invalid Failure type: "+n);var r;this.pexpr=e,this.text=t,this.type=n,this.fluffy=!1}r.prototype.getPExpr=function(){return this.pexpr},r.prototype.getText=function(){return this.text},r.prototype.getType=function(){return this.type},r.prototype.isDescription=function(){return"description"===this.type},r.prototype.isStringTerminal=function(){return"string"===this.type},r.prototype.isCode=function(){return"code"===this.type},r.prototype.isFluffy=function(){return this.fluffy},r.prototype.makeFluffy=function(){this.fluffy=!0},r.prototype.clearFluffy=function(){this.fluffy=!1},r.prototype.subsumes=function(e){return this.getText()===e.getText()&&this.type===e.type&&(!this.isFluffy()||this.isFluffy()&&e.isFluffy())},r.prototype.toString=function(){return"string"===this.type?JSON.stringify(this.getText()):this.getText()},r.prototype.clone=function(){const e=new r(this.pexpr,this.text,this.type);return this.isFluffy()&&e.makeFluffy(),e},r.prototype.toKey=function(){return this.toString()+"#"+this.type},e.exports=r},function(e,t,n){function r(){}r.prototype=Object.create(null),r.asNamespace=function(e){return e instanceof r?e:r.createNamespace(e)},r.createNamespace=function(e){return r.extend(r.prototype,e)},r.extend=function(e,t){if(e!==r.prototype&&!(e instanceof r))throw new TypeError("not a Namespace object: "+e);const n=Object.create(e,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return Object.assign(n,t)},r.toString=function(e){return Object.prototype.toString.call(e)},e.exports=r},function(e,t,n){const r=n(7),i=n(0),o={succeeded:1,isRootNode:2,isImplicitSpaces:4,isMemoized:8,isHeadOfLeftRecursion:16,terminatesLR:32};function a(e){return"string"==typeof e?e.replace(/ /g,"⋅").replace(/\t/g,"␉").replace(/\n/g,"␊").replace(/\r/g,"␍"):String(e)}function u(e,t,n,i,a,u,s){this.input=e,this.pos=this.pos1=t,this.pos2=n,this.source=new r(e,t,n),this.expr=i,this.bindings=u,this.children=s||[],this.terminatingLREntry=null,this._flags=a?o.succeeded:0}u.prototype.SKIP={},Object.defineProperty(u.prototype,"displayString",{get(){return this.expr.toDisplayString()}}),Object.keys(o).forEach((e=>{const t=o[e];Object.defineProperty(u.prototype,e,{get(){return 0!=(this._flags&t)},set(e){e?this._flags|=t:this._flags&=~t}})})),u.prototype.clone=function(){return this.cloneWithExpr(this.expr)},u.prototype.cloneWithExpr=function(e){const t=new u(this.input,this.pos,this.pos2,e,this.succeeded,this.bindings,this.children);return t.isHeadOfLeftRecursion=this.isHeadOfLeftRecursion,t.isImplicitSpaces=this.isImplicitSpaces,t.isMemoized=this.isMemoized,t.isRootNode=this.isRootNode,t.terminatesLR=this.terminatesLR,t.terminatingLREntry=this.terminatingLREntry,t},u.prototype.recordLRTermination=function(e,t){this.terminatingLREntry=new u(this.input,this.pos,this.pos2,this.expr,!1,[t],[e]),this.terminatingLREntry.terminatesLR=!0},u.prototype.walk=function(e,t){let n=e;function r(e,i,o){let a=!0;n.enter&&n.enter.call(t,e,i,o)===u.prototype.SKIP&&(a=!1),a&&(e.children.forEach((t=>{r(t,e,o+1)})),n.exit&&n.exit.call(t,e,i,o))}"function"==typeof n&&(n={enter:n}),this.isRootNode?this.children.forEach((e=>{r(e,null,0)})):r(this,null,0)},u.prototype.toString=function(){const e=new i.StringBuffer;return this.walk(((t,n,r)=>{if(!t)return this.SKIP;if("Alt"!==t.expr.constructor.name){var o;if(e.append(function(e,t,n){const r=a(e.slice(t,t+10));return r.length<10?r+i.repeat(" ",10-r.length).join(""):r}(t.input,t.pos)+(o=2*r+1,i.repeat(" ",o).join(""))),e.append((t.succeeded?"✓":"✗")+" "+t.displayString),t.isHeadOfLeftRecursion&&e.append(" (LR)"),t.succeeded){const n=a(t.source.contents);e.append(" ⇒  "),e.append("string"==typeof n?'"'+n+'"':n)}e.append("\n")}})),e.contents()},e.exports=u},function(e,t,n){const r=n(1),i=n(9),o=n(5),a={_terminal(){return this.sourceString},_nonterminal(...e){const t=this._node.ctorName,n=this.args.mapping;if(!n.hasOwnProperty(t)){if(this._node instanceof r.Alt||this._node instanceof r.Apply)return e[0].toAST(n);if(this.isLexical())return this.sourceString;const t=e.filter((e=>!e.isTerminal()));if(1===t.length)return t[0].toAST(n)}if("number"==typeof n[t])return e[n[t]].toAST(n);const i=n[t]||e,o={type:t};for(const r in i){const i=n[t]&&n[t][r];"number"==typeof i?o[r]=e[i].toAST(n):"string"==typeof i||"boolean"==typeof i||null===i?o[r]=i:"object"==typeof i&&i instanceof Number?o[r]=Number(i):"function"==typeof i?o[r]=i.call(this,e):void 0===i&&(e[r]&&!e[r].isTerminal()?o[r]=e[r].toAST(n):delete o[r])}return o},_iter(...e){return this._node.isOptional()?0===this.numChildren?null:e[0].toAST(this.args.mapping):e.map((function(e){return e.toAST(this.args.mapping)}),this)},NonemptyListOf(e,t,n){return[e.toAST(this.args.mapping)].concat(n.toAST(this.args.mapping))},EmptyListOf:()=>[]};e.exports={helper:function(e,t){if(!(e instanceof i)||e.failed())throw new Error("toAST() expects a succesfull MatchResult as first parameter");t=Object.assign({},t);const n=Object.assign({},a);for(const r in t)"function"==typeof t[r]&&(n[r]=t[r],delete t[r]);return e._cst.grammar.createSemantics().addOperation("toAST(mapping)",n)(e).toAST(t)},semantics:function(e){if(!(e instanceof o))throw new Error("semanticsToAST() expects a Grammar as parameter");return e.createSemantics().addOperation("toAST(mapping)",a)}}},function(e,t,n){const r=n(5),i=n(36),o=n(1);function a(){}a.prototype={currentDecl:null,currentRuleName:null,newGrammar:e=>new i(e),grammar(e,t,n,o,a){const u=new i(t);return n&&u.withSuperGrammar(n instanceof r?n:this.fromRecipe(n)),o&&u.withDefaultStartRule(o),e&&e.source&&u.withSource(e.source),this.currentDecl=u,Object.keys(a).forEach((e=>{this.currentRuleName=e;const t=a[e],n=t[0],r=t[1],i=t[2],o=t[3],s=this.fromRecipe(t[4]);let c;u.source&&r&&r.sourceInterval&&(c=u.source.subInterval(r.sourceInterval[0],r.sourceInterval[1]-r.sourceInterval[0])),u[n](e,o,s,i,c)})),this.currentRuleName=this.currentDecl=null,u.build()},terminal:e=>new o.Terminal(e),range:(e,t)=>new o.Range(e,t),param:e=>new o.Param(e),alt(){let e=[];for(let t=0;t<arguments.length;t++){let n=arguments[t];n instanceof o.PExpr||(n=this.fromRecipe(n)),n instanceof o.Alt?e=e.concat(n.terms):e.push(n)}return 1===e.length?e[0]:new o.Alt(e)},seq(){let e=[];for(let t=0;t<arguments.length;t++){let n=arguments[t];n instanceof o.PExpr||(n=this.fromRecipe(n)),n instanceof o.Seq?e=e.concat(n.factors):e.push(n)}return 1===e.length?e[0]:new o.Seq(e)},star(e){return e instanceof o.PExpr||(e=this.fromRecipe(e)),new o.Star(e)},plus(e){return e instanceof o.PExpr||(e=this.fromRecipe(e)),new o.Plus(e)},opt(e){return e instanceof o.PExpr||(e=this.fromRecipe(e)),new o.Opt(e)},not(e){return e instanceof o.PExpr||(e=this.fromRecipe(e)),new o.Not(e)},la(e){return this.lookahead(e)},lookahead(e){return e instanceof o.PExpr||(e=this.fromRecipe(e)),new o.Lookahead(e)},lex(e){return e instanceof o.PExpr||(e=this.fromRecipe(e)),new o.Lex(e)},app(e,t){return t&&t.length>0&&(t=t.map((function(e){return e instanceof o.PExpr?e:this.fromRecipe(e)}),this)),new o.Apply(e,t)},splice(e,t){return new o.Splice(this.currentDecl.superGrammar,this.currentRuleName,e.map((e=>this.fromRecipe(e))),t.map((e=>this.fromRecipe(e))))},fromRecipe(e){const t=this[e[0]].apply(this,"grammar"===e[0]?e.slice(1):e.slice(2)),n=e[1];return n&&n.sourceInterval&&this.currentDecl&&t.withSource(this.currentDecl.sourceInterval.apply(this.currentDecl,n.sourceInterval)),t}},e.exports=a},function(e,t,n){const r=n(10),i=n(6).TerminalNode,o=n(0).assert,{PExpr:a,Terminal:u}=n(1);class s extends a{constructor(e){super(),this.obj=e}_getString(e){const t=e.currentApplication().args[this.obj.index];return o(t instanceof u,"expected a Terminal expression"),t.obj}allowsSkippingPrecedingSpace(){return!0}eval(e){const t=e.inputStream,n=t.pos,r=this._getString(e);return t.matchString(r,!0)?(e.pushBinding(new i(e.grammar,r),n),!0):(e.processFailure(n,this),!1)}getArity(){return 1}substituteParams(e){return new s(this.obj.substituteParams(e))}toDisplayString(){return this.obj.toDisplayString()+" (case-insensitive)"}toFailure(e){return new r(this,this.obj.toFailure(e)+" (case-insensitive)","description")}_isNullable(e,t){return this.obj._isNullable(e,t)}}e.exports=s},function(e,t){e.exports={Lu:/[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]/,Ll:/[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43]/,Lt:/[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Lm:/[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5\u06E6\u07F4\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C\uA69D\uA717-\uA71F\uA770\uA788\uA7F8\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E\uFF9F]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0]/,Lo:/[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,Nl:/[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]|\uD800[\uDD40-\uDD74\uDF41\uDF4A\uDFD1-\uDFD5]|\uD809[\uDC00-\uDC6E]/,Nd:/[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD801[\uDCA0-\uDCA9]|\uD804[\uDC66-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDEF0-\uDEF9]|[\uD805\uD807][\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF39]|\uD806[\uDCE0-\uDCE9]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59]|\uD835[\uDFCE-\uDFFF]|\uD83A[\uDD50-\uDD59]/,Mn:/[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDCA-\uDDCC\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]/,Mc:/[\u0903-\u0903]|[\u093E-\u0940]|[\u0949-\u094C]|[\u0982-\u0983]|[\u09BE-\u09C0]|[\u09C7-\u09C8]|[\u09CB-\u09CC]|[\u09D7-\u09D7]|[\u0A3E-\u0A40]|[\u0A83-\u0A83]|[\u0ABE-\u0AC0]|[\u0AC9-\u0AC9]|[\u0ACB-\u0ACC]|[\u0B02-\u0B03]|[\u0B3E-\u0B3E]|[\u0B40-\u0B40]|[\u0B47-\u0B48]|[\u0B4B-\u0B4C]|[\u0B57-\u0B57]|[\u0B83-\u0B83]|[\u0BBE-\u0BBF]|[\u0BC1-\u0BC2]|[\u0BC6-\u0BC8]|[\u0BCA-\u0BCC]|[\u0BD7-\u0BD7]|[\u0C01-\u0C03]|[\u0C41-\u0C44]|[\u0C82-\u0C83]|[\u0CBE-\u0CBE]|[\u0CC0-\u0CC4]|[\u0CC7-\u0CC8]|[\u0CCA-\u0CCB]|[\u0CD5-\u0CD6]|[\u0D02-\u0D03]|[\u0D3E-\u0D40]|[\u0D46-\u0D48]|[\u0D4A-\u0D4C]|[\u0D57-\u0D57]|[\u0F3E-\u0F3F]|[\u0F7F-\u0F7F]/,Pc:/[_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F]/,Zs:/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,L:/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,Ltmo:/[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]|[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5\u06E6\u07F4\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C\uA69D\uA717-\uA71F\uA770\uA788\uA7F8\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E\uFF9F]|\uD81A[\uDF40-\uDF43]|\uD81B[\uDF93-\uDF9F\uDFE0]|[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E45\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC50-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/}},function(e,t,n){const r=n(0),i=n(1);i.PExpr.prototype.allowsSkippingPrecedingSpace=r.abstract("allowsSkippingPrecedingSpace"),i.any.allowsSkippingPrecedingSpace=i.end.allowsSkippingPrecedingSpace=i.Apply.prototype.allowsSkippingPrecedingSpace=i.Terminal.prototype.allowsSkippingPrecedingSpace=i.Range.prototype.allowsSkippingPrecedingSpace=i.UnicodeChar.prototype.allowsSkippingPrecedingSpace=function(){return!0},i.Alt.prototype.allowsSkippingPrecedingSpace=i.Iter.prototype.allowsSkippingPrecedingSpace=i.Lex.prototype.allowsSkippingPrecedingSpace=i.Lookahead.prototype.allowsSkippingPrecedingSpace=i.Not.prototype.allowsSkippingPrecedingSpace=i.Param.prototype.allowsSkippingPrecedingSpace=i.Seq.prototype.allowsSkippingPrecedingSpace=function(){return!1}},function(e,t,n){const r=n(0),i=n(2),o=n(1);let a,u;n(3).awaitBuiltInRules((e=>{a=e})),o.PExpr.prototype.assertAllApplicationsAreValid=function(e,t){u=0,this._assertAllApplicationsAreValid(e,t)},o.PExpr.prototype._assertAllApplicationsAreValid=r.abstract("_assertAllApplicationsAreValid"),o.any._assertAllApplicationsAreValid=o.end._assertAllApplicationsAreValid=o.Terminal.prototype._assertAllApplicationsAreValid=o.Range.prototype._assertAllApplicationsAreValid=o.Param.prototype._assertAllApplicationsAreValid=o.UnicodeChar.prototype._assertAllApplicationsAreValid=function(e,t){},o.Lex.prototype._assertAllApplicationsAreValid=function(e,t){u++,this.expr._assertAllApplicationsAreValid(e,t),u--},o.Alt.prototype._assertAllApplicationsAreValid=function(e,t){for(let n=0;n<this.terms.length;n++)this.terms[n]._assertAllApplicationsAreValid(e,t)},o.Seq.prototype._assertAllApplicationsAreValid=function(e,t){for(let n=0;n<this.factors.length;n++)this.factors[n]._assertAllApplicationsAreValid(e,t)},o.Iter.prototype._assertAllApplicationsAreValid=o.Not.prototype._assertAllApplicationsAreValid=o.Lookahead.prototype._assertAllApplicationsAreValid=function(e,t){this.expr._assertAllApplicationsAreValid(e,t)},o.Apply.prototype._assertAllApplicationsAreValid=function(e,t){const n=t.rules[this.ruleName];if(!n)throw i.undeclaredRule(this.ruleName,t.name,this.source);if(r.isSyntactic(this.ruleName)&&(!r.isSyntactic(e)||u>0))throw i.applicationOfSyntacticRuleFromLexicalContext(this.ruleName,this);const s=this.args.length,c=n.formals.length;if(s!==c)throw i.wrongNumberOfArguments(this.ruleName,c,s,this.source);if(this.args.forEach((n=>{if(n._assertAllApplicationsAreValid(e,t),1!==n.getArity())throw i.invalidParameter(this.ruleName,n)})),a&&n===a.rules.caseInsensitive&&!(this.args[0]instanceof o.Terminal))throw i.incorrectArgumentType('a Terminal (e.g. "abc")',this.args[0])}},function(e,t,n){const r=n(0),i=n(2),o=n(1);o.PExpr.prototype.assertChoicesHaveUniformArity=r.abstract("assertChoicesHaveUniformArity"),o.any.assertChoicesHaveUniformArity=o.end.assertChoicesHaveUniformArity=o.Terminal.prototype.assertChoicesHaveUniformArity=o.Range.prototype.assertChoicesHaveUniformArity=o.Param.prototype.assertChoicesHaveUniformArity=o.Lex.prototype.assertChoicesHaveUniformArity=o.UnicodeChar.prototype.assertChoicesHaveUniformArity=function(e){},o.Alt.prototype.assertChoicesHaveUniformArity=function(e){if(0===this.terms.length)return;const t=this.terms[0].getArity();for(let n=0;n<this.terms.length;n++){const r=this.terms[n];r.assertChoicesHaveUniformArity();const o=r.getArity();if(t!==o)throw i.inconsistentArity(e,t,o,r)}},o.Extend.prototype.assertChoicesHaveUniformArity=function(e){const t=this.terms[0].getArity(),n=this.terms[1].getArity();if(t!==n)throw i.inconsistentArity(e,n,t,this.terms[0])},o.Seq.prototype.assertChoicesHaveUniformArity=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertChoicesHaveUniformArity(e)},o.Iter.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},o.Not.prototype.assertChoicesHaveUniformArity=function(e){},o.Lookahead.prototype.assertChoicesHaveUniformArity=function(e){this.expr.assertChoicesHaveUniformArity(e)},o.Apply.prototype.assertChoicesHaveUniformArity=function(e){}},function(e,t,n){const r=n(0),i=n(2),o=n(1);o.PExpr.prototype.assertIteratedExprsAreNotNullable=r.abstract("assertIteratedExprsAreNotNullable"),o.any.assertIteratedExprsAreNotNullable=o.end.assertIteratedExprsAreNotNullable=o.Terminal.prototype.assertIteratedExprsAreNotNullable=o.Range.prototype.assertIteratedExprsAreNotNullable=o.Param.prototype.assertIteratedExprsAreNotNullable=o.UnicodeChar.prototype.assertIteratedExprsAreNotNullable=function(e){},o.Alt.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.terms.length;t++)this.terms[t].assertIteratedExprsAreNotNullable(e)},o.Seq.prototype.assertIteratedExprsAreNotNullable=function(e){for(let t=0;t<this.factors.length;t++)this.factors[t].assertIteratedExprsAreNotNullable(e)},o.Iter.prototype.assertIteratedExprsAreNotNullable=function(e){if(this.expr.assertIteratedExprsAreNotNullable(e),this.expr.isNullable(e))throw i.kleeneExprHasNullableOperand(this,[])},o.Opt.prototype.assertIteratedExprsAreNotNullable=o.Not.prototype.assertIteratedExprsAreNotNullable=o.Lookahead.prototype.assertIteratedExprsAreNotNullable=o.Lex.prototype.assertIteratedExprsAreNotNullable=function(e){this.expr.assertIteratedExprsAreNotNullable(e)},o.Apply.prototype.assertIteratedExprsAreNotNullable=function(e){this.args.forEach((t=>{t.assertIteratedExprsAreNotNullable(e)}))}},function(e,t,n){const r=n(12),i=n(0),o=n(2),a=n(6),u=n(1),s=a.TerminalNode,c=a.NonterminalNode,l=a.IterationNode;u.PExpr.prototype.eval=i.abstract("eval"),u.any.eval=function(e){const t=e.inputStream,n=t.pos,r=t.next();return r?(e.pushBinding(new s(e.grammar,r),n),!0):(e.processFailure(n,this),!1)},u.end.eval=function(e){const t=e.inputStream,n=t.pos;return t.atEnd()?(e.pushBinding(new s(e.grammar,void 0),n),!0):(e.processFailure(n,this),!1)},u.Terminal.prototype.eval=function(e){const t=e.inputStream,n=t.pos;return t.matchString(this.obj)?(e.pushBinding(new s(e.grammar,this.obj),n),!0):(e.processFailure(n,this),!1)},u.Range.prototype.eval=function(e){const t=e.inputStream,n=t.pos,r=t.next();return r&&this.from<=r&&r<=this.to?(e.pushBinding(new s(e.grammar,r),n),!0):(e.processFailure(n,this),!1)},u.Param.prototype.eval=function(e){return e.eval(e.currentApplication().args[this.index])},u.Lex.prototype.eval=function(e){e.enterLexifiedContext();const t=e.eval(this.expr);return e.exitLexifiedContext(),t},u.Alt.prototype.eval=function(e){for(let t=0;t<this.terms.length;t++)if(e.eval(this.terms[t]))return!0;return!1},u.Seq.prototype.eval=function(e){for(let t=0;t<this.factors.length;t++){const n=this.factors[t];if(!e.eval(n))return!1}return!0},u.Iter.prototype.eval=function(e){const t=e.inputStream,n=t.pos,r=this.getArity(),i=[],a=[];for(;i.length<r;)i.push([]),a.push([]);let s,c=0,p=n;for(;c<this.maxNumMatches&&e.eval(this.expr);){if(t.pos===p)throw o.kleeneExprHasNullableOperand(this,e._applicationStack);p=t.pos,c++;const n=e._bindings.splice(e._bindings.length-r,r),u=e._bindingOffsets.splice(e._bindingOffsets.length-r,r);for(s=0;s<n.length;s++)i[s].push(n[s]),a[s].push(u[s])}if(c<this.minNumMatches)return!1;let d=e.posToOffset(n),h=0;if(c>0){const e=i[r-1],t=a[r-1],n=t[t.length-1]+e[e.length-1].matchLength;d=a[0][0],h=n-d}const m=this instanceof u.Opt;for(s=0;s<i.length;s++)e._bindings.push(new l(e.grammar,i[s],a[s],h,m)),e._bindingOffsets.push(d);return!0},u.Not.prototype.eval=function(e){const t=e.inputStream,n=t.pos;e.pushFailuresInfo();const r=e.eval(this.expr);return e.popFailuresInfo(),r?(e.processFailure(n,this),!1):(t.pos=n,!0)},u.Lookahead.prototype.eval=function(e){const t=e.inputStream,n=t.pos;return!!e.eval(this.expr)&&(t.pos=n,!0)},u.Apply.prototype.eval=function(e){const t=e.currentApplication(),n=t?t.args:[],r=this.substituteParams(n),i=e.getCurrentPosInfo();if(i.isActive(r))return r.handleCycle(e);const o=r.toMemoKey(),a=i.memo[o];if(a&&i.shouldUseMemoizedResult(a)){if(e.hasNecessaryInfo(a))return e.useMemoizedResult(e.inputStream.pos,a);delete i.memo[o]}return r.reallyEval(e)},u.Apply.prototype.handleCycle=function(e){const t=e.getCurrentPosInfo(),n=t.currentLeftRecursion,r=this.toMemoKey();let i=t.memo[r];return n&&n.headApplication.toMemoKey()===r?i.updateInvolvedApplicationMemoKeys():i||(i=t.memoize(r,{matchLength:0,examinedLength:0,value:!1,rightmostFailureOffset:-1}),t.startLeftRecursion(this,i)),e.useMemoizedResult(e.inputStream.pos,i)},u.Apply.prototype.reallyEval=function(e){const t=e.inputStream,n=t.pos,r=e.getCurrentPosInfo(),o=e.grammar.rules[this.ruleName],a=o.body,u=o.description;e.enterApplication(r,this),u&&e.pushFailuresInfo();const s=t.examinedLength;t.examinedLength=0;let c=this.evalOnce(a,e);const l=r.currentLeftRecursion,p=this.toMemoKey(),d=l&&l.headApplication.toMemoKey()===p;let h;d?(c=this.growSeedResult(a,e,n,l,c),r.endLeftRecursion(),h=l,h.examinedLength=t.examinedLength-n,h.rightmostFailureOffset=e._getRightmostFailureOffset(),r.memoize(p,h)):l&&l.isInvolved(p)||(h=r.memoize(p,{matchLength:t.pos-n,examinedLength:t.examinedLength-n,value:c,failuresAtRightmostPosition:e.cloneRecordedFailures(),rightmostFailureOffset:e._getRightmostFailureOffset()}));const m=!!c;if(u&&(e.popFailuresInfo(),m||e.processFailure(n,this),h&&(h.failuresAtRightmostPosition=e.cloneRecordedFailures())),e.isTracing()&&h){const t=e.getTraceEntry(n,this,m,m?[c]:[]);d&&(i.assert(null!=t.terminatingLREntry||!m),t.isHeadOfLeftRecursion=!0),h.traceEntry=t}return t.examinedLength=Math.max(t.examinedLength,s),e.exitApplication(r,c),m},u.Apply.prototype.evalOnce=function(e,t){const n=t.inputStream,r=n.pos;if(t.eval(e)){const i=e.getArity(),o=t._bindings.splice(t._bindings.length-i,i),a=t._bindingOffsets.splice(t._bindingOffsets.length-i,i);return new c(t.grammar,this.ruleName,o,a,n.pos-r)}return!1},u.Apply.prototype.growSeedResult=function(e,t,n,i,o){if(!o)return!1;const a=t.inputStream;for(;;){if(i.matchLength=a.pos-n,i.value=o,i.failuresAtRightmostPosition=t.cloneRecordedFailures(),t.isTracing()){const e=t.trace[t.trace.length-1];i.traceEntry=new r(t.input,n,a.pos,this,!0,[o],[e.clone()])}if(a.pos=n,o=this.evalOnce(e,t),a.pos-n<=i.matchLength)break;t.isTracing()&&t.trace.splice(-2,1)}return t.isTracing()&&i.traceEntry.recordLRTermination(t.trace.pop(),o),a.pos=n+i.matchLength,i.value},u.UnicodeChar.prototype.eval=function(e){const t=e.inputStream,n=t.pos,r=t.next();return r&&this.pattern.test(r)?(e.pushBinding(new s(e.grammar,r),n),!0):(e.processFailure(n,this),!1)}},function(e,t,n){const r=n(0),i=n(1);i.PExpr.prototype.getArity=r.abstract("getArity"),i.any.getArity=i.end.getArity=i.Terminal.prototype.getArity=i.Range.prototype.getArity=i.Param.prototype.getArity=i.Apply.prototype.getArity=i.UnicodeChar.prototype.getArity=function(){return 1},i.Alt.prototype.getArity=function(){return 0===this.terms.length?0:this.terms[0].getArity()},i.Seq.prototype.getArity=function(){let e=0;for(let t=0;t<this.factors.length;t++)e+=this.factors[t].getArity();return e},i.Iter.prototype.getArity=function(){return this.expr.getArity()},i.Not.prototype.getArity=function(){return 0},i.Lookahead.prototype.getArity=i.Lex.prototype.getArity=function(){return this.expr.getArity()}},function(e,t,n){const r=n(0),i=n(1);function o(e,t){const n={};if(e.source&&t){const r=e.source.relativeTo(t);n.sourceInterval=[r.startIdx,r.endIdx]}return n}i.PExpr.prototype.outputRecipe=r.abstract("outputRecipe"),i.any.outputRecipe=function(e,t){return["any",o(this,t)]},i.end.outputRecipe=function(e,t){return["end",o(this,t)]},i.Terminal.prototype.outputRecipe=function(e,t){return["terminal",o(this,t),this.obj]},i.Range.prototype.outputRecipe=function(e,t){return["range",o(this,t),this.from,this.to]},i.Param.prototype.outputRecipe=function(e,t){return["param",o(this,t),this.index]},i.Alt.prototype.outputRecipe=function(e,t){return["alt",o(this,t)].concat(this.terms.map((n=>n.outputRecipe(e,t))))},i.Extend.prototype.outputRecipe=function(e,t){return this.terms[0].outputRecipe(e,t)},i.Splice.prototype.outputRecipe=function(e,t){const n=this.terms.slice(0,this.expansionPos),r=this.terms.slice(this.expansionPos+1);return["splice",o(this,t),n.map((n=>n.outputRecipe(e,t))),r.map((n=>n.outputRecipe(e,t)))]},i.Seq.prototype.outputRecipe=function(e,t){return["seq",o(this,t)].concat(this.factors.map((n=>n.outputRecipe(e,t))))},i.Star.prototype.outputRecipe=i.Plus.prototype.outputRecipe=i.Opt.prototype.outputRecipe=i.Not.prototype.outputRecipe=i.Lookahead.prototype.outputRecipe=i.Lex.prototype.outputRecipe=function(e,t){return[this.constructor.name.toLowerCase(),o(this,t),this.expr.outputRecipe(e,t)]},i.Apply.prototype.outputRecipe=function(e,t){return["app",o(this,t),this.ruleName,this.args.map((n=>n.outputRecipe(e,t)))]},i.UnicodeChar.prototype.outputRecipe=function(e,t){return["unicodeChar",o(this,t),this.category]}},function(e,t,n){const r=n(0),i=n(1);i.PExpr.prototype.introduceParams=r.abstract("introduceParams"),i.any.introduceParams=i.end.introduceParams=i.Terminal.prototype.introduceParams=i.Range.prototype.introduceParams=i.Param.prototype.introduceParams=i.UnicodeChar.prototype.introduceParams=function(e){return this},i.Alt.prototype.introduceParams=function(e){return this.terms.forEach(((t,n,r)=>{r[n]=t.introduceParams(e)})),this},i.Seq.prototype.introduceParams=function(e){return this.factors.forEach(((t,n,r)=>{r[n]=t.introduceParams(e)})),this},i.Iter.prototype.introduceParams=i.Not.prototype.introduceParams=i.Lookahead.prototype.introduceParams=i.Lex.prototype.introduceParams=function(e){return this.expr=this.expr.introduceParams(e),this},i.Apply.prototype.introduceParams=function(e){const t=e.indexOf(this.ruleName);if(t>=0){if(this.args.length>0)throw new Error("Parameterized rules cannot be passed as arguments to another rule.");return new i.Param(t).withSource(this.source)}return this.args.forEach(((t,n,r)=>{r[n]=t.introduceParams(e)})),this}},function(e,t,n){const r=n(0),i=n(1);i.PExpr.prototype.isNullable=function(e){return this._isNullable(e,Object.create(null))},i.PExpr.prototype._isNullable=r.abstract("_isNullable"),i.any._isNullable=i.Range.prototype._isNullable=i.Param.prototype._isNullable=i.Plus.prototype._isNullable=i.UnicodeChar.prototype._isNullable=function(e,t){return!1},i.end._isNullable=function(e,t){return!0},i.Terminal.prototype._isNullable=function(e,t){return"string"==typeof this.obj&&""===this.obj},i.Alt.prototype._isNullable=function(e,t){return 0===this.terms.length||this.terms.some((n=>n._isNullable(e,t)))},i.Seq.prototype._isNullable=function(e,t){return this.factors.every((n=>n._isNullable(e,t)))},i.Star.prototype._isNullable=i.Opt.prototype._isNullable=i.Not.prototype._isNullable=i.Lookahead.prototype._isNullable=function(e,t){return!0},i.Lex.prototype._isNullable=function(e,t){return this.expr._isNullable(e,t)},i.Apply.prototype._isNullable=function(e,t){const n=this.toMemoKey();if(!Object.prototype.hasOwnProperty.call(t,n)){const r=e.rules[this.ruleName].body.substituteParams(this.args);t[n]=!1,t[n]=r._isNullable(e,t)}return t[n]}},function(e,t,n){const r=n(0),i=n(1);i.PExpr.prototype.substituteParams=r.abstract("substituteParams"),i.any.substituteParams=i.end.substituteParams=i.Terminal.prototype.substituteParams=i.Range.prototype.substituteParams=i.UnicodeChar.prototype.substituteParams=function(e){return this},i.Param.prototype.substituteParams=function(e){return e[this.index]},i.Alt.prototype.substituteParams=function(e){return new i.Alt(this.terms.map((t=>t.substituteParams(e))))},i.Seq.prototype.substituteParams=function(e){return new i.Seq(this.factors.map((t=>t.substituteParams(e))))},i.Iter.prototype.substituteParams=i.Not.prototype.substituteParams=i.Lookahead.prototype.substituteParams=i.Lex.prototype.substituteParams=function(e){return new this.constructor(this.expr.substituteParams(e))},i.Apply.prototype.substituteParams=function(e){if(0===this.args.length)return this;{const t=this.args.map((t=>t.substituteParams(e)));return new i.Apply(this.ruleName,t)}}},function(e,t,n){const r=n(0),i=n(1),{copyWithoutDuplicates:o}=r;function a(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)}function u(e){const t=Object.create(null);e.forEach((e=>{t[e]=(t[e]||0)+1})),Object.keys(t).forEach((n=>{if(t[n]<=1)return;let r=1;e.forEach(((t,i)=>{t===n&&(e[i]=t+"_"+r++)}))}))}i.PExpr.prototype.toArgumentNameList=r.abstract("toArgumentNameList"),i.any.toArgumentNameList=function(e,t){return["any"]},i.end.toArgumentNameList=function(e,t){return["end"]},i.Terminal.prototype.toArgumentNameList=function(e,t){return"string"==typeof this.obj&&/^[_a-zA-Z0-9]+$/.test(this.obj)?["_"+this.obj]:["$"+e]},i.Range.prototype.toArgumentNameList=function(e,t){let n=this.from+"_to_"+this.to;return a(n)||(n="_"+n),a(n)||(n="$"+e),[n]},i.Alt.prototype.toArgumentNameList=function(e,t){const n=this.terms.map((t=>t.toArgumentNameList(e,!0))),r=[],i=n[0].length;for(let a=0;a<i;a++){const e=[];for(let r=0;r<this.terms.length;r++)e.push(n[r][a]);const t=o(e);r.push(t.join("_or_"))}return t||u(r),r},i.Seq.prototype.toArgumentNameList=function(e,t){let n=[];return this.factors.forEach((t=>{const r=t.toArgumentNameList(e,!0);n=n.concat(r),e+=r.length})),t||u(n),n},i.Iter.prototype.toArgumentNameList=function(e,t){const n=this.expr.toArgumentNameList(e,t).map((e=>"s"===e[e.length-1]?e+"es":e+"s"));return t||u(n),n},i.Opt.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t).map((e=>"opt"+e[0].toUpperCase()+e.slice(1)))},i.Not.prototype.toArgumentNameList=function(e,t){return[]},i.Lookahead.prototype.toArgumentNameList=i.Lex.prototype.toArgumentNameList=function(e,t){return this.expr.toArgumentNameList(e,t)},i.Apply.prototype.toArgumentNameList=function(e,t){return[this.ruleName]},i.UnicodeChar.prototype.toArgumentNameList=function(e,t){return["$"+e]},i.Param.prototype.toArgumentNameList=function(e,t){return["param"+this.index]}},function(e,t,n){const r=n(0),i=n(1);i.PExpr.prototype.toDisplayString=r.abstract("toDisplayString"),i.Alt.prototype.toDisplayString=i.Seq.prototype.toDisplayString=function(){return this.source?this.source.trimmed().contents:"["+this.constructor.name+"]"},i.any.toDisplayString=i.end.toDisplayString=i.Iter.prototype.toDisplayString=i.Not.prototype.toDisplayString=i.Lookahead.prototype.toDisplayString=i.Lex.prototype.toDisplayString=i.Terminal.prototype.toDisplayString=i.Range.prototype.toDisplayString=i.Param.prototype.toDisplayString=function(){return this.toString()},i.Apply.prototype.toDisplayString=function(){if(this.args.length>0){const e=this.args.map((e=>e.toDisplayString()));return this.ruleName+"<"+e.join(",")+">"}return this.ruleName},i.UnicodeChar.prototype.toDisplayString=function(){return"Unicode ["+this.category+"] character"}},function(e,t,n){const r=n(10),i=n(0),o=n(1);o.PExpr.prototype.toFailure=i.abstract("toFailure"),o.any.toFailure=function(e){return new r(this,"any object","description")},o.end.toFailure=function(e){return new r(this,"end of input","description")},o.Terminal.prototype.toFailure=function(e){return new r(this,this.obj,"string")},o.Range.prototype.toFailure=function(e){return new r(this,JSON.stringify(this.from)+".."+JSON.stringify(this.to),"code")},o.Not.prototype.toFailure=function(e){const t=this.expr===o.any?"nothing":"not "+this.expr.toFailure(e);return new r(this,t,"description")},o.Lookahead.prototype.toFailure=function(e){return this.expr.toFailure(e)},o.Apply.prototype.toFailure=function(e){let t=e.rules[this.ruleName].description;return t||(t=(/^[aeiouAEIOU]/.test(this.ruleName)?"an":"a")+" "+this.ruleName),new r(this,t,"description")},o.UnicodeChar.prototype.toFailure=function(e){return new r(this,"a Unicode ["+this.category+"] character","description")},o.Alt.prototype.toFailure=function(e){const t="("+this.terms.map((t=>t.toFailure(e))).join(" or ")+")";return new r(this,t,"description")},o.Seq.prototype.toFailure=function(e){const t="("+this.factors.map((t=>t.toFailure(e))).join(" ")+")";return new r(this,t,"description")},o.Iter.prototype.toFailure=function(e){const t="("+this.expr.toFailure(e)+this.operator+")";return new r(this,t,"description")}},function(e,t,n){const r=n(0),i=n(1);i.PExpr.prototype.toString=r.abstract("toString"),i.any.toString=function(){return"any"},i.end.toString=function(){return"end"},i.Terminal.prototype.toString=function(){return JSON.stringify(this.obj)},i.Range.prototype.toString=function(){return JSON.stringify(this.from)+".."+JSON.stringify(this.to)},i.Param.prototype.toString=function(){return"$"+this.index},i.Lex.prototype.toString=function(){return"#("+this.expr.toString()+")"},i.Alt.prototype.toString=function(){return 1===this.terms.length?this.terms[0].toString():"("+this.terms.map((e=>e.toString())).join(" | ")+")"},i.Seq.prototype.toString=function(){return 1===this.factors.length?this.factors[0].toString():"("+this.factors.map((e=>e.toString())).join(" ")+")"},i.Iter.prototype.toString=function(){return this.expr+this.operator},i.Not.prototype.toString=function(){return"~"+this.expr},i.Lookahead.prototype.toString=function(){return"&"+this.expr},i.Apply.prototype.toString=function(){if(this.args.length>0){const e=this.args.map((e=>e.toString()));return this.ruleName+"<"+e.join(",")+">"}return this.ruleName},i.UnicodeChar.prototype.toString=function(){return"\\p{"+this.category+"}"}},function(e,t,n){const r=n(32),i=n(1);function o(e){this.grammar=e,this.memoTable=[],this.input=""}o.prototype.getInput=function(){return this.input},o.prototype.setInput=function(e){return this.input!==e&&this.replaceInputRange(0,this.input.length,e),this},o.prototype.replaceInputRange=function(e,t,n){const r=this.input;if(e<0||e>r.length||t<0||t>r.length||e>t)throw new Error("Invalid indices: "+e+" and "+t);this.input=r.slice(0,e)+n+r.slice(t);const i=this.memoTable.slice(t);this.memoTable.length=e;for(let o=0;o<n.length;o++)this.memoTable.push(void 0);i.forEach((function(e){this.memoTable.push(e)}),this);for(let o=0;o<e;o++){const t=this.memoTable[o];t&&t.clearObsoleteEntries(o,e)}return this},o.prototype.match=function(e){return this._match(this._getStartExpr(e),!1)},o.prototype.trace=function(e){return this._match(this._getStartExpr(e),!0)},o.prototype._match=function(e,t,n){const i=new r(this,e,n);return t?i.getTrace():i.getMatchResult()},o.prototype._getStartExpr=function(e){const t=e||this.grammar.defaultStartRule;if(!t)throw new Error("Missing start rule argument -- the grammar has no default start rule.");const n=this.grammar.parseApplication(t);return new i.Seq([n,i.end])},e.exports=o},function(e,t,n){const r=n(8),i=n(9),o=n(33),a=n(12),u=n(1),s=new u.Apply("spaces");function c(e,t,n){this.matcher=e,this.startExpr=t,this.grammar=e.grammar,this.input=e.input,this.inputStream=new r(e.input),this.memoTable=e.memoTable,this._bindings=[],this._bindingOffsets=[],this._applicationStack=[],this._posStack=[0],this.inLexifiedContextStack=[!1],this.rightmostFailurePosition=-1,this._rightmostFailurePositionStack=[],this._recordedFailuresStack=[],void 0!==n&&(this.positionToRecordFailures=n,this.recordedFailures=Object.create(null))}c.prototype={posToOffset(e){return e-this._posStack[this._posStack.length-1]},enterApplication(e,t){this._posStack.push(this.inputStream.pos),this._applicationStack.push(t),this.inLexifiedContextStack.push(!1),e.enter(t),this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this.rightmostFailurePosition=-1},exitApplication(e,t){const n=this._posStack.pop();this._applicationStack.pop(),this.inLexifiedContextStack.pop(),e.exit(),this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,this._rightmostFailurePositionStack.pop()),t&&this.pushBinding(t,n)},enterLexifiedContext(){this.inLexifiedContextStack.push(!0)},exitLexifiedContext(){this.inLexifiedContextStack.pop()},currentApplication(){return this._applicationStack[this._applicationStack.length-1]},inSyntacticContext(){if("string"!=typeof this.inputStream.source)return!1;const e=this.currentApplication();return e?e.isSyntactic()&&!this.inLexifiedContext():this.startExpr.factors[0].isSyntactic()},inLexifiedContext(){return this.inLexifiedContextStack[this.inLexifiedContextStack.length-1]},skipSpaces(){return this.pushFailuresInfo(),this.eval(s),this.popBinding(),this.popFailuresInfo(),this.inputStream.pos},skipSpacesIfInSyntacticContext(){return this.inSyntacticContext()?this.skipSpaces():this.inputStream.pos},maybeSkipSpacesBefore(e){return e instanceof u.Apply&&e.isSyntactic()?this.skipSpaces():e.allowsSkippingPrecedingSpace()&&e!==s?this.skipSpacesIfInSyntacticContext():this.inputStream.pos},pushBinding(e,t){this._bindings.push(e),this._bindingOffsets.push(this.posToOffset(t))},popBinding(){this._bindings.pop(),this._bindingOffsets.pop()},numBindings(){return this._bindings.length},truncateBindings(e){for(;this._bindings.length>e;)this.popBinding()},getCurrentPosInfo(){return this.getPosInfo(this.inputStream.pos)},getPosInfo(e){let t=this.memoTable[e];return t||(t=this.memoTable[e]=new o),t},processFailure(e,t){if(this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,e),this.recordedFailures&&e===this.positionToRecordFailures){const e=this.currentApplication();e&&(t=t.substituteParams(e.args)),this.recordFailure(t.toFailure(this.grammar),!1)}},recordFailure(e,t){const n=e.toKey();this.recordedFailures[n]?this.recordedFailures[n].isFluffy()&&!e.isFluffy()&&this.recordedFailures[n].clearFluffy():this.recordedFailures[n]=t?e.clone():e},recordFailures(e,t){Object.keys(e).forEach((n=>{this.recordFailure(e[n],t)}))},cloneRecordedFailures(){if(!this.recordedFailures)return;const e=Object.create(null);return Object.keys(this.recordedFailures).forEach((t=>{e[t]=this.recordedFailures[t].clone()})),e},getRightmostFailurePosition(){return this.rightmostFailurePosition},_getRightmostFailureOffset(){return this.rightmostFailurePosition>=0?this.posToOffset(this.rightmostFailurePosition):-1},getMemoizedTraceEntry(e,t){const n=this.memoTable[e];if(n&&t.ruleName){const e=n.memo[t.toMemoKey()];if(e&&e.traceEntry){const n=e.traceEntry.cloneWithExpr(t);return n.isMemoized=!0,n}}return null},getTraceEntry(e,t,n,r){if(t instanceof u.Apply){const e=this.currentApplication(),n=e?e.args:[];t=t.substituteParams(n)}return this.getMemoizedTraceEntry(e,t)||new a(this.input,e,this.inputStream.pos,t,n,r,this.trace)},isTracing(){return!!this.trace},hasNecessaryInfo(e){return!(this.trace&&!e.traceEntry||this.recordedFailures&&this.inputStream.pos+e.rightmostFailureOffset===this.positionToRecordFailures&&!e.failuresAtRightmostPosition)},useMemoizedResult(e,t){this.trace&&this.trace.push(t.traceEntry);const n=this.inputStream.pos+t.rightmostFailureOffset;return this.rightmostFailurePosition=Math.max(this.rightmostFailurePosition,n),this.recordedFailures&&this.positionToRecordFailures===n&&t.failuresAtRightmostPosition&&this.recordFailures(t.failuresAtRightmostPosition,!0),this.inputStream.examinedLength=Math.max(this.inputStream.examinedLength,t.examinedLength+e),!!t.value&&(this.inputStream.pos+=t.matchLength,this.pushBinding(t.value,e),!0)},eval(e){const t=this.inputStream,n=this._bindings.length;let r;this.recordedFailures&&(r=this.recordedFailures,this.recordedFailures=Object.create(null));const i=t.pos,o=this.maybeSkipSpacesBefore(e);let a;this.trace&&(a=this.trace,this.trace=[]);const u=e.eval(this);if(this.trace){const t=this._bindings.slice(n),r=this.getTraceEntry(o,e,u,t);r.isImplicitSpaces=e===s,r.isRootNode=e===this.startExpr,a.push(r),this.trace=a}return u?this.recordedFailures&&t.pos===this.positionToRecordFailures&&Object.keys(this.recordedFailures).forEach((e=>{this.recordedFailures[e].makeFluffy()})):(t.pos=i,this.truncateBindings(n)),this.recordedFailures&&this.recordFailures(r,!1),u},getMatchResult(){let e;return this.eval(this.startExpr),this.recordedFailures&&(e=Object.keys(this.recordedFailures).map((e=>this.recordedFailures[e]))),new i(this.matcher,this.input,this.startExpr,this._bindings[0],this._bindingOffsets[0],this.rightmostFailurePosition,e)},getTrace(){this.trace=[];const e=this.getMatchResult(),t=this.trace[this.trace.length-1];return t.result=e,t},pushFailuresInfo(){this._rightmostFailurePositionStack.push(this.rightmostFailurePosition),this._recordedFailuresStack.push(this.recordedFailures)},popFailuresInfo(){this.rightmostFailurePosition=this._rightmostFailurePositionStack.pop(),this.recordedFailures=this._recordedFailuresStack.pop()}},e.exports=c},function(e,t,n){function r(){this.applicationMemoKeyStack=[],this.memo={},this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,this.currentLeftRecursion=void 0}r.prototype={isActive(e){return this.applicationMemoKeyStack.indexOf(e.toMemoKey())>=0},enter(e){this.applicationMemoKeyStack.push(e.toMemoKey())},exit(){this.applicationMemoKeyStack.pop()},startLeftRecursion(e,t){t.isLeftRecursion=!0,t.headApplication=e,t.nextLeftRecursion=this.currentLeftRecursion,this.currentLeftRecursion=t;const n=this.applicationMemoKeyStack,r=n.indexOf(e.toMemoKey())+1,i=n.slice(r);t.isInvolved=function(e){return i.indexOf(e)>=0},t.updateInvolvedApplicationMemoKeys=function(){for(let e=r;e<n.length;e++){const t=n[e];this.isInvolved(t)||i.push(t)}}},endLeftRecursion(){this.currentLeftRecursion=this.currentLeftRecursion.nextLeftRecursion},shouldUseMemoizedResult(e){if(!e.isLeftRecursion)return!0;const t=this.applicationMemoKeyStack;for(let n=0;n<t.length;n++){const r=t[n];if(e.isInvolved(r))return!1}return!0},memoize(e,t){return this.memo[e]=t,this.maxExaminedLength=Math.max(this.maxExaminedLength,t.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,t.rightmostFailureOffset),t},clearObsoleteEntries(e,t){if(e+this.maxExaminedLength<=t)return;const n=this.memo;this.maxExaminedLength=0,this.maxRightmostFailureOffset=-1,Object.keys(n).forEach((r=>{const i=n[r];e+i.examinedLength>t?delete n[r]:(this.maxExaminedLength=Math.max(this.maxExaminedLength,i.examinedLength),this.maxRightmostFailureOffset=Math.max(this.maxRightmostFailureOffset,i.rightmostFailureOffset))}))}},e.exports=r},function(e,t,n){const r=n(8),i=n(6).IterationNode,o=n(9),a=n(0),u=n(2),s=n(3),c=[];let l,p;class d{constructor(e,t,n){this._node=e,this.source=t,this._baseInterval=n,e.isNonterminal()&&a.assert(t===n),this._childWrappers=[]}toString(){return"[semantics wrapper for "+this._node.grammar.name+"]"}toJSON(){return this.toString()}_forgetMemoizedResultFor(e){delete this._node[this._semantics.attributeKeys[e]],this.children.forEach((t=>{t._forgetMemoizedResultFor(e)}))}child(e){if(!(0<=e&&e<this._node.numChildren()))return;let t=this._childWrappers[e];if(!t){const n=this._node.childAt(e),r=this._node.childOffsets[e],i=this._baseInterval.subInterval(r,n.matchLength),o=n.isNonterminal()?i:this._baseInterval;t=this._childWrappers[e]=this._semantics.wrap(n,i,o)}return t}_children(){for(let e=0;e<this._node.numChildren();e++)this.child(e);return this._childWrappers}isIteration(){return this._node.isIteration()}isTerminal(){return this._node.isTerminal()}isNonterminal(){return this._node.isNonterminal()}isSyntactic(){return this.isNonterminal()&&this._node.isSyntactic()}isLexical(){return this.isNonterminal()&&this._node.isLexical()}isOptional(){return this._node.isOptional()}iteration(e){const t=e||[],n=t.map((e=>e._node)),r=new i(this._node.grammar,n,[],-1,!1),o=this._semantics.wrap(r,null,null);return o._childWrappers=t,o}get children(){return this._children()}get ctorName(){return this._node.ctorName}get interval(){throw new Error("The `interval` property is deprecated -- use `source` instead")}get numChildren(){return this._node.numChildren()}get primitiveValue(){if(this.isTerminal())return this._node.primitiveValue;throw new TypeError("tried to access the 'primitiveValue' attribute of a non-terminal CST node")}get sourceString(){return this.source.contents}}function h(e,t){const n=this;if(this.grammar=e,this.checkedActionDicts=!1,this.Wrapper=class extends(t?t.Wrapper:d){constructor(e,t,r){super(e,t,r),n.checkActionDictsIfHaventAlready(),this._semantics=n}},this.super=t,t){if(!e.equals(this.super.grammar)&&!e._inheritsFrom(this.super.grammar))throw new Error("Cannot extend a semantics for grammar '"+this.super.grammar.name+"' for use with grammar '"+e.name+"' (not a sub-grammar)");this.operations=Object.create(this.super.operations),this.attributes=Object.create(this.super.attributes),this.attributeKeys=Object.create(null);for(const e in this.attributes)Object.defineProperty(this.attributeKeys,e,{value:s.uniqueId(e)})}else this.operations=Object.create(null),this.attributes=Object.create(null),this.attributeKeys=Object.create(null)}function m(e,t){if(!l)return a.assert(-1===e.indexOf("(")),{name:e,formals:[]};const n=l.match(e,"operation"===t?"OperationSignature":"AttributeSignature");if(n.failed())throw new Error(n.message);return p(n).parse()}h.prototype.toString=function(){return"[semantics for "+this.grammar.name+"]"},h.prototype.checkActionDictsIfHaventAlready=function(){this.checkedActionDicts||(this.checkActionDicts(),this.checkedActionDicts=!0)},h.prototype.checkActionDicts=function(){let e;for(e in this.operations)this.operations[e].checkActionDict(this.grammar);for(e in this.attributes)this.attributes[e].checkActionDict(this.grammar)},h.prototype.toRecipe=function(e){function t(e){return e.super!==h.BuiltInSemantics._getSemantics()}let n="(function(g) {\n";if(t(this)){n+="  var semantics = "+this.super.toRecipe(!0)+"(g";const e=this.super.grammar;let t=this.grammar;for(;t!==e;)n+=".superGrammar",t=t.superGrammar;n+=");\n",n+="  return g.extendSemantics(semantics)"}else n+="  return g.createSemantics()";return["Operation","Attribute"].forEach((e=>{const r=this[e.toLowerCase()+"s"];Object.keys(r).forEach((i=>{const{actionDict:o,formals:a,builtInDefault:u}=r[i];let s,c=i;a.length>0&&(c+="("+a.join(", ")+")"),s=t(this)&&this.super[e.toLowerCase()+"s"][i]?"extend"+e:"add"+e,n+="\n    ."+s+"("+JSON.stringify(c)+", {";const l=[];Object.keys(o).forEach((e=>{if(o[e]!==u){let t=o[e].toString().trim();t=t.replace(/^.*\(/,"function("),l.push("\n      "+JSON.stringify(e)+": "+t)}})),n+=l.join(",")+"\n    })"}))})),n+=";\n  })",e||(n="(function() {\n  var grammar = this.fromRecipe("+this.grammar.toRecipe()+");\n  var semantics = "+n+"(grammar);\n  return semantics;\n});\n"),n},h.prototype.addOperationOrAttribute=function(e,t,n){const r=e+"s",i=m(t,e),o=i.name,a=i.formals;this.assertNewName(o,e);const l=(d=e,h=o,v=C,function(...e){const t=(this._semantics.operations[h]||this._semantics.attributes[h]).formals.map((e=>this.args[e]));if(this.isIteration()||1!==e.length)throw u.missingSemanticAction(this.ctorName,h,d,c);return v.apply(e[0],t)}),p={_default:l};var d,h,v;Object.keys(n).forEach((e=>{p[e]=n[e]}));const D="operation"===e?new f(o,a,p,l):new g(o,p,l);function C(){const t=this._semantics[r][o];if(arguments.length!==t.formals.length)throw new Error("Invalid number of arguments passed to "+o+" "+e+" (expected "+t.formals.length+", got "+arguments.length+")");const n=Object.create(null);for(let e=0;e<arguments.length;e++)n[t.formals[e]]=arguments[e];const i=this.args;this.args=n;const a=t.execute(this._semantics,this);return this.args=i,a}D.checkActionDict(this.grammar),this[r][o]=D,"operation"===e?(this.Wrapper.prototype[o]=C,this.Wrapper.prototype[o].toString=function(){return"["+o+" operation]"}):(Object.defineProperty(this.Wrapper.prototype,o,{get:C,configurable:!0}),Object.defineProperty(this.attributeKeys,o,{value:s.uniqueId(o)}))},h.prototype.extendOperationOrAttribute=function(e,t,n){const r=e+"s";if(m(t,"attribute"),!this.super||!(t in this.super[r]))throw new Error("Cannot extend "+e+" '"+t+"': did not inherit an "+e+" with that name");if(Object.prototype.hasOwnProperty.call(this[r],t))throw new Error("Cannot extend "+e+" '"+t+"' again");const i=this[r][t].formals,o=this[r][t].actionDict,a=Object.create(o);Object.keys(n).forEach((e=>{a[e]=n[e]})),this[r][t]="operation"===e?new f(t,i,a):new g(t,a),this[r][t].checkActionDict(this.grammar)},h.prototype.assertNewName=function(e,t){if(d.prototype.hasOwnProperty(e))throw new Error("Cannot add "+t+" '"+e+"': that's a reserved name");if(e in this.operations)throw new Error("Cannot add "+t+" '"+e+"': an operation with that name already exists");if(e in this.attributes)throw new Error("Cannot add "+t+" '"+e+"': an attribute with that name already exists")},h.prototype.wrap=function(e,t,n){const r=n||t;return e instanceof this.Wrapper?e:new this.Wrapper(e,t,r)},h.createSemantics=function(e,t){const n=new h(e,void 0!==t?t:h.BuiltInSemantics._getSemantics()),i=function(t){if(!(t instanceof o))throw new TypeError("Semantics expected a MatchResult, but got "+a.unexpectedObjToString(t));if(t.failed())throw new TypeError("cannot apply Semantics to "+t.toString());const i=t._cst;if(i.grammar!==e)throw new Error("Cannot use a MatchResult from grammar '"+i.grammar.name+"' with a semantics for '"+e.name+"'");const u=new r(t.input);return n.wrap(i,u.interval(t._cstOffset,t.input.length))};return i.addOperation=function(e,t){return n.addOperationOrAttribute("operation",e,t),i},i.extendOperation=function(e,t){return n.extendOperationOrAttribute("operation",e,t),i},i.addAttribute=function(e,t){return n.addOperationOrAttribute("attribute",e,t),i},i.extendAttribute=function(e,t){return n.extendOperationOrAttribute("attribute",e,t),i},i._getActionDict=function(t){const r=n.operations[t]||n.attributes[t];if(!r)throw new Error('"'+t+'" is not a valid operation or attribute name in this semantics for "'+e.name+'"');return r.actionDict},i._remove=function(e){let t;return e in n.operations?(t=n.operations[e],delete n.operations[e]):e in n.attributes&&(t=n.attributes[e],delete n.attributes[e]),delete n.Wrapper.prototype[e],t},i.getOperationNames=function(){return Object.keys(n.operations)},i.getAttributeNames=function(){return Object.keys(n.attributes)},i.getGrammar=function(){return n.grammar},i.toRecipe=function(e){return n.toRecipe(e)},i.toString=n.toString.bind(n),i._getSemantics=function(){return n},i};class f{constructor(e,t,n,r){this.name=e,this.formals=t,this.actionDict=n,this.builtInDefault=r}checkActionDict(e){e._checkTopDownActionDict(this.typeName,this.name,this.actionDict)}execute(e,t){try{const e=t._node.ctorName;let n=this.actionDict[e];return n?(c.push([this,e]),n.apply(t,t._children())):t.isNonterminal()&&(n=this.actionDict._nonterminal,n)?(c.push([this,"_nonterminal",e]),n.apply(t,t._children())):(c.push([this,"default action",e]),this.actionDict._default.apply(t,t._children()))}finally{c.pop()}}}f.prototype.typeName="operation";class g extends f{constructor(e,t,n){super(e,[],t,n)}execute(e,t){const n=t._node,r=e.attributeKeys[this.name];return n.hasOwnProperty(r)||(n[r]=f.prototype.execute.call(this,e,t)),n[r]}}g.prototype.typeName="attribute",s.awaitBuiltInRules((e=>{const t=n(35);var r;!function(e){const t={empty(){return this.iteration()},nonEmpty(e,t,n){return this.iteration([e].concat(n.children))}};h.BuiltInSemantics=h.createSemantics(e,null).addOperation("asIteration",{emptyListOf:t.empty,nonemptyListOf:t.nonEmpty,EmptyListOf:t.empty,NonemptyListOf:t.nonEmpty})}(e),p=(r=t).createSemantics().addOperation("parse",{AttributeSignature:e=>({name:e.parse(),formals:[]}),OperationSignature:(e,t)=>({name:e.parse(),formals:t.children.map((e=>e.parse()))[0]||[]}),Formals:(e,t,n)=>t.asIteration().children.map((e=>e.parse())),name(e,t){return this.sourceString}}),l=r})),e.exports=h},function(e,t,n){var r=n(4);e.exports=r.makeRecipe(["grammar",{source:'OperationsAndAttributes {\n\n  AttributeSignature =\n    name\n\n  OperationSignature =\n    name Formals?\n\n  Formals\n    = "(" ListOf<name, ","> ")"\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n}'},"OperationsAndAttributes",null,"AttributeSignature",{AttributeSignature:["define",{sourceInterval:[29,58]},null,[],["app",{sourceInterval:[54,58]},"name",[]]],OperationSignature:["define",{sourceInterval:[62,100]},null,[],["seq",{sourceInterval:[87,100]},["app",{sourceInterval:[87,91]},"name",[]],["opt",{sourceInterval:[92,100]},["app",{sourceInterval:[92,99]},"Formals",[]]]]],Formals:["define",{sourceInterval:[104,143]},null,[],["seq",{sourceInterval:[118,143]},["terminal",{sourceInterval:[118,121]},"("],["app",{sourceInterval:[122,139]},"ListOf",[["app",{sourceInterval:[129,133]},"name",[]],["terminal",{sourceInterval:[135,138]},","]]],["terminal",{sourceInterval:[140,143]},")"]]],name:["define",{sourceInterval:[147,187]},"a name",[],["seq",{sourceInterval:[168,187]},["app",{sourceInterval:[168,177]},"nameFirst",[]],["star",{sourceInterval:[178,187]},["app",{sourceInterval:[178,186]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[191,223]},null,[],["alt",{sourceInterval:[207,223]},["terminal",{sourceInterval:[207,210]},"_"],["app",{sourceInterval:[217,223]},"letter",[]]]],nameRest:["define",{sourceInterval:[227,257]},null,[],["alt",{sourceInterval:[242,257]},["terminal",{sourceInterval:[242,245]},"_"],["app",{sourceInterval:[252,257]},"alnum",[]]]]}])},function(e,t,n){const r=n(5),i=n(8),o=n(0),a=n(2),u=n(1);function s(e){this.name=e}s.prototype.sourceInterval=function(e,t){return this.source.subInterval(e,t-e)},s.prototype.ensureSuperGrammar=function(){return this.superGrammar||this.withSuperGrammar("BuiltInRules"===this.name?r.ProtoBuiltInRules:r.BuiltInRules),this.superGrammar},s.prototype.ensureSuperGrammarRuleForOverriding=function(e,t){const n=this.ensureSuperGrammar().rules[e];if(!n)throw a.cannotOverrideUndeclaredRule(e,this.superGrammar.name,t);return n},s.prototype.installOverriddenOrExtendedRule=function(e,t,n,r){const i=o.getDuplicates(t);if(i.length>0)throw a.duplicateParameterNames(e,i,r);const u=this.ensureSuperGrammar().rules[e],s=u.formals,c=s?s.length:0;if(t.length!==c)throw a.wrongNumberOfParameters(e,c,t.length,r);return this.install(e,t,n,u.description,r)},s.prototype.install=function(e,t,n,r,i){return this.rules[e]={body:n.introduceParams(t),formals:t,description:r,source:i},this},s.prototype.withSuperGrammar=function(e){if(this.superGrammar)throw new Error("the super grammar of a GrammarDecl cannot be set more than once");return this.superGrammar=e,this.rules=Object.create(e.rules),e.isBuiltIn()||(this.defaultStartRule=e.defaultStartRule),this},s.prototype.withDefaultStartRule=function(e){return this.defaultStartRule=e,this},s.prototype.withSource=function(e){return this.source=new i(e).interval(0,e.length),this},s.prototype.build=function(){const e=new r(this.name,this.ensureSuperGrammar(),this.rules,this.defaultStartRule),t=[];let n=!1;return Object.keys(e.rules).forEach((r=>{const i=e.rules[r].body;try{i.assertChoicesHaveUniformArity(r)}catch(o){t.push(o)}try{i.assertAllApplicationsAreValid(r,e)}catch(o){t.push(o),n=!0}})),n||Object.keys(e.rules).forEach((n=>{const r=e.rules[n].body;try{r.assertIteratedExprsAreNotNullable(e,[])}catch(i){t.push(i)}})),t.length>0&&a.throwErrors(t),this.source&&(e.source=this.source),e},s.prototype.define=function(e,t,n,r,i){if(this.ensureSuperGrammar(),this.superGrammar.rules[e])throw a.duplicateRuleDeclaration(e,this.name,this.superGrammar.name,i);if(this.rules[e])throw a.duplicateRuleDeclaration(e,this.name,this.name,i);const u=o.getDuplicates(t);if(u.length>0)throw a.duplicateParameterNames(e,u,i);return this.install(e,t,n,r,i)},s.prototype.override=function(e,t,n,r,i){return this.ensureSuperGrammarRuleForOverriding(e,i),this.installOverriddenOrExtendedRule(e,t,n,i),this},s.prototype.extend=function(e,t,n,r,i){if(!this.ensureSuperGrammar().rules[e])throw a.cannotExtendUndeclaredRule(e,this.superGrammar.name,i);const o=new u.Extend(this.superGrammar,e,n);return o.source=n.source,this.installOverriddenOrExtendedRule(e,t,o,i),this},e.exports=s},function(e,t,n){e.exports="16.0.0"},function(e,t,n){e.exports={VisitorFamily:n(39),semanticsForToAST:n(13).semantics,toAST:n(13).helper}},function(e,t,n){const r=n(0).assert;function i(e,t,n){return n(t[e])}function o(e,t,n){return t[e].map(n)}function a(e){const t=e.split(/ ?\[\]/);return 2===t.length?o.bind(null,t[0]):i.bind(null,e)}function u(e,t,n){return e.map((e=>e(t,n)))}function s(e){return/^[a-zA-Z_][0-9a-zA-Z_]*$/.test(e)}function c(e){return e.trim()}function l(e){this._shapes=e.shapes,this._getTag=e.getTag,this.Adapter=function(e,t){this._adaptee=e,this._family=t},this.Adapter.prototype.valueOf=function(){throw new Error("heeey!")},this.operations={},this._arities=Object.create(null),this._getChildren=Object.create(null),Object.keys(this._shapes).forEach((e=>{const t=this._shapes[e];var n;this._getChildren[e]="string"==typeof(n=t)?u.bind(null,[a(n)]):Array.isArray(n)?u.bind(null,n.map(a)):(r("function"==typeof n,"Expected a string, Array, or function"),r(2===n.length,"Expected a function of arity 2, got "+n.length),n),"function"!=typeof t&&(this._arities[e]=Array.isArray(t)?t.length:1)})),this._wrap=e=>new this.Adapter(e,this)}l.prototype.wrap=function(e){return this._wrap(e)},l.prototype._checkActionDict=function(e){Object.keys(e).forEach((t=>{r(t in this._getChildren,"Unrecognized action name '"+t+"'");const n=e[t];if(r("function"==typeof n,"Key '"+t+"': expected function, got "+n),t in this._arities){const n=this._arities[t],i=e[t].length;r(i===n,"Action '"+t+"' has the wrong arity: expected "+n+", got "+i)}}))},l.prototype.addOperation=function(e,t){const n=function(e){const t=e.split(/[()]/).map(c);if(3===t.length&&""===t[2]){const e=t[0];let n=[];if(t[1].length>0&&(n=t[1].split(",").map(c)),s(e)&&n.every(s))return{name:e,formals:n}}throw new Error("Invalid operation signature: "+e)}(e),i=n.name;this._checkActionDict(t),this.operations[i]={name:i,formals:n.formals,actions:t};const o=this;return this.Adapter.prototype[i]=function(){const e=o._getTag(this._adaptee);r(e in o._getChildren,"getTag returned unrecognized tag '"+e+"'"),r(e in t,"No action for '"+e+"' in operation '"+i+"'");const a=Object.create(null);for(let t=0;t<arguments.length;t++)a[n.formals[t]]=arguments[t];const u=this.args;this.args=a;const s=t[e].apply(this,o._getChildren[e](this._adaptee,o._wrap));return this.args=u,s},this},e.exports=l},function(e,t,n){var r=n(4);e.exports=r.makeRecipe(["grammar",{source:'BuiltInRules {\n\n  alnum  (an alpha-numeric character)\n    = letter\n    | digit\n\n  letter  (a letter)\n    = lower\n    | upper\n    | unicodeLtmo\n\n  digit  (a digit)\n    = "0".."9"\n\n  hexDigit  (a hexadecimal digit)\n    = digit\n    | "a".."f"\n    | "A".."F"\n\n  ListOf<elem, sep>\n    = NonemptyListOf<elem, sep>\n    | EmptyListOf<elem, sep>\n\n  NonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  EmptyListOf<elem, sep>\n    = /* nothing */\n\n  listOf<elem, sep>\n    = nonemptyListOf<elem, sep>\n    | emptyListOf<elem, sep>\n\n  nonemptyListOf<elem, sep>\n    = elem (sep elem)*\n\n  emptyListOf<elem, sep>\n    = /* nothing */\n\n}'},"BuiltInRules",null,null,{alnum:["define",{sourceInterval:[18,78]},"an alpha-numeric character",[],["alt",{sourceInterval:[60,78]},["app",{sourceInterval:[60,66]},"letter",[]],["app",{sourceInterval:[73,78]},"digit",[]]]],letter:["define",{sourceInterval:[82,142]},"a letter",[],["alt",{sourceInterval:[107,142]},["app",{sourceInterval:[107,112]},"lower",[]],["app",{sourceInterval:[119,124]},"upper",[]],["app",{sourceInterval:[131,142]},"unicodeLtmo",[]]]],digit:["define",{sourceInterval:[146,177]},"a digit",[],["range",{sourceInterval:[169,177]},"0","9"]],hexDigit:["define",{sourceInterval:[181,254]},"a hexadecimal digit",[],["alt",{sourceInterval:[219,254]},["app",{sourceInterval:[219,224]},"digit",[]],["range",{sourceInterval:[231,239]},"a","f"],["range",{sourceInterval:[246,254]},"A","F"]]],ListOf:["define",{sourceInterval:[258,336]},null,["elem","sep"],["alt",{sourceInterval:[282,336]},["app",{sourceInterval:[282,307]},"NonemptyListOf",[["param",{sourceInterval:[297,301]},0],["param",{sourceInterval:[303,306]},1]]],["app",{sourceInterval:[314,336]},"EmptyListOf",[["param",{sourceInterval:[326,330]},0],["param",{sourceInterval:[332,335]},1]]]]],NonemptyListOf:["define",{sourceInterval:[340,388]},null,["elem","sep"],["seq",{sourceInterval:[372,388]},["param",{sourceInterval:[372,376]},0],["star",{sourceInterval:[377,388]},["seq",{sourceInterval:[378,386]},["param",{sourceInterval:[378,381]},1],["param",{sourceInterval:[382,386]},0]]]]],EmptyListOf:["define",{sourceInterval:[392,434]},null,["elem","sep"],["seq",{sourceInterval:[438,438]}]],listOf:["define",{sourceInterval:[438,516]},null,["elem","sep"],["alt",{sourceInterval:[462,516]},["app",{sourceInterval:[462,487]},"nonemptyListOf",[["param",{sourceInterval:[477,481]},0],["param",{sourceInterval:[483,486]},1]]],["app",{sourceInterval:[494,516]},"emptyListOf",[["param",{sourceInterval:[506,510]},0],["param",{sourceInterval:[512,515]},1]]]]],nonemptyListOf:["define",{sourceInterval:[520,568]},null,["elem","sep"],["seq",{sourceInterval:[552,568]},["param",{sourceInterval:[552,556]},0],["star",{sourceInterval:[557,568]},["seq",{sourceInterval:[558,566]},["param",{sourceInterval:[558,561]},1],["param",{sourceInterval:[562,566]},0]]]]],emptyListOf:["define",{sourceInterval:[572,614]},null,["elem","sep"],["seq",{sourceInterval:[616,616]}]]}])},function(e,t,n){var r=n(4);e.exports=r.makeRecipe(["grammar",{source:'Ohm {\n\n  Grammars\n    = Grammar*\n\n  Grammar\n    = ident SuperGrammar? "{" Rule* "}"\n\n  SuperGrammar\n    = "<:" ident\n\n  Rule\n    = ident Formals? ruleDescr? "="  RuleBody  -- define\n    | ident Formals?            ":=" OverrideRuleBody  -- override\n    | ident Formals?            "+=" RuleBody  -- extend\n\n  RuleBody\n    = "|"? NonemptyListOf<TopLevelTerm, "|">\n\n  TopLevelTerm\n    = Seq caseName  -- inline\n    | Seq\n\n  OverrideRuleBody\n    = "|"? NonemptyListOf<OverrideTopLevelTerm, "|">\n\n  OverrideTopLevelTerm\n    = "..."  -- superSplice\n    | TopLevelTerm\n\n  Formals\n    = "<" ListOf<ident, ","> ">"\n\n  Params\n    = "<" ListOf<Seq, ","> ">"\n\n  Alt\n    = NonemptyListOf<Seq, "|">\n\n  Seq\n    = Iter*\n\n  Iter\n    = Pred "*"  -- star\n    | Pred "+"  -- plus\n    | Pred "?"  -- opt\n    | Pred\n\n  Pred\n    = "~" Lex  -- not\n    | "&" Lex  -- lookahead\n    | Lex\n\n  Lex\n    = "#" Base  -- lex\n    | Base\n\n  Base\n    = ident Params? ~(ruleDescr? "=" | ":=" | "+=")  -- application\n    | oneCharTerminal ".." oneCharTerminal           -- range\n    | terminal                                       -- terminal\n    | "(" Alt ")"                                    -- paren\n\n  ruleDescr  (a rule description)\n    = "(" ruleDescrText ")"\n\n  ruleDescrText\n    = (~")" any)*\n\n  caseName\n    = "--" (~"\\n" space)* name (~"\\n" space)* ("\\n" | &"}")\n\n  name  (a name)\n    = nameFirst nameRest*\n\n  nameFirst\n    = "_"\n    | letter\n\n  nameRest\n    = "_"\n    | alnum\n\n  ident  (an identifier)\n    = name\n\n  terminal\n    = "\\"" terminalChar* "\\""\n\n  oneCharTerminal\n    = "\\"" terminalChar "\\""\n\n  terminalChar\n    = escapeChar\n    | ~"\\\\" ~"\\"" ~"\\n" any\n\n  escapeChar  (an escape sequence)\n    = "\\\\\\\\"                                     -- backslash\n    | "\\\\\\""                                     -- doubleQuote\n    | "\\\\\\\'"                                     -- singleQuote\n    | "\\\\b"                                      -- backspace\n    | "\\\\n"                                      -- lineFeed\n    | "\\\\r"                                      -- carriageReturn\n    | "\\\\t"                                      -- tab\n    | "\\\\u" hexDigit hexDigit hexDigit hexDigit  -- unicodeEscape\n    | "\\\\x" hexDigit hexDigit                    -- hexEscape\n\n  space\n   += comment\n\n  comment\n    = "//" (~"\\n" any)* &("\\n" | end)  -- singleLine\n    | "/*" (~"*/" any)* "*/"  -- multiLine\n\n  tokens = token*\n\n  token = caseName | comment | ident | operator | punctuation | terminal | any\n\n  operator = "<:" | "=" | ":=" | "+=" | "*" | "+" | "?" | "~" | "&"\n\n  punctuation = "<" | ">" | "," | "--"\n}'},"Ohm",null,"Grammars",{Grammars:["define",{sourceInterval:[9,32]},null,[],["star",{sourceInterval:[24,32]},["app",{sourceInterval:[24,31]},"Grammar",[]]]],Grammar:["define",{sourceInterval:[36,83]},null,[],["seq",{sourceInterval:[50,83]},["app",{sourceInterval:[50,55]},"ident",[]],["opt",{sourceInterval:[56,69]},["app",{sourceInterval:[56,68]},"SuperGrammar",[]]],["terminal",{sourceInterval:[70,73]},"{"],["star",{sourceInterval:[74,79]},["app",{sourceInterval:[74,78]},"Rule",[]]],["terminal",{sourceInterval:[80,83]},"}"]]],SuperGrammar:["define",{sourceInterval:[87,116]},null,[],["seq",{sourceInterval:[106,116]},["terminal",{sourceInterval:[106,110]},"<:"],["app",{sourceInterval:[111,116]},"ident",[]]]],Rule_define:["define",{sourceInterval:[131,181]},null,[],["seq",{sourceInterval:[131,170]},["app",{sourceInterval:[131,136]},"ident",[]],["opt",{sourceInterval:[137,145]},["app",{sourceInterval:[137,144]},"Formals",[]]],["opt",{sourceInterval:[146,156]},["app",{sourceInterval:[146,155]},"ruleDescr",[]]],["terminal",{sourceInterval:[157,160]},"="],["app",{sourceInterval:[162,170]},"RuleBody",[]]]],Rule_override:["define",{sourceInterval:[188,248]},null,[],["seq",{sourceInterval:[188,235]},["app",{sourceInterval:[188,193]},"ident",[]],["opt",{sourceInterval:[194,202]},["app",{sourceInterval:[194,201]},"Formals",[]]],["terminal",{sourceInterval:[214,218]},":="],["app",{sourceInterval:[219,235]},"OverrideRuleBody",[]]]],Rule_extend:["define",{sourceInterval:[255,305]},null,[],["seq",{sourceInterval:[255,294]},["app",{sourceInterval:[255,260]},"ident",[]],["opt",{sourceInterval:[261,269]},["app",{sourceInterval:[261,268]},"Formals",[]]],["terminal",{sourceInterval:[281,285]},"+="],["app",{sourceInterval:[286,294]},"RuleBody",[]]]],Rule:["define",{sourceInterval:[120,305]},null,[],["alt",{sourceInterval:[131,305]},["app",{sourceInterval:[131,170]},"Rule_define",[]],["app",{sourceInterval:[188,235]},"Rule_override",[]],["app",{sourceInterval:[255,294]},"Rule_extend",[]]]],RuleBody:["define",{sourceInterval:[309,362]},null,[],["seq",{sourceInterval:[324,362]},["opt",{sourceInterval:[324,328]},["terminal",{sourceInterval:[324,327]},"|"]],["app",{sourceInterval:[329,362]},"NonemptyListOf",[["app",{sourceInterval:[344,356]},"TopLevelTerm",[]],["terminal",{sourceInterval:[358,361]},"|"]]]]],TopLevelTerm_inline:["define",{sourceInterval:[385,408]},null,[],["seq",{sourceInterval:[385,397]},["app",{sourceInterval:[385,388]},"Seq",[]],["app",{sourceInterval:[389,397]},"caseName",[]]]],TopLevelTerm:["define",{sourceInterval:[366,418]},null,[],["alt",{sourceInterval:[385,418]},["app",{sourceInterval:[385,397]},"TopLevelTerm_inline",[]],["app",{sourceInterval:[415,418]},"Seq",[]]]],OverrideRuleBody:["define",{sourceInterval:[422,491]},null,[],["seq",{sourceInterval:[445,491]},["opt",{sourceInterval:[445,449]},["terminal",{sourceInterval:[445,448]},"|"]],["app",{sourceInterval:[450,491]},"NonemptyListOf",[["app",{sourceInterval:[465,485]},"OverrideTopLevelTerm",[]],["terminal",{sourceInterval:[487,490]},"|"]]]]],OverrideTopLevelTerm_superSplice:["define",{sourceInterval:[522,543]},null,[],["terminal",{sourceInterval:[522,527]},"..."]],OverrideTopLevelTerm:["define",{sourceInterval:[495,562]},null,[],["alt",{sourceInterval:[522,562]},["app",{sourceInterval:[522,527]},"OverrideTopLevelTerm_superSplice",[]],["app",{sourceInterval:[550,562]},"TopLevelTerm",[]]]],Formals:["define",{sourceInterval:[566,606]},null,[],["seq",{sourceInterval:[580,606]},["terminal",{sourceInterval:[580,583]},"<"],["app",{sourceInterval:[584,602]},"ListOf",[["app",{sourceInterval:[591,596]},"ident",[]],["terminal",{sourceInterval:[598,601]},","]]],["terminal",{sourceInterval:[603,606]},">"]]],Params:["define",{sourceInterval:[610,647]},null,[],["seq",{sourceInterval:[623,647]},["terminal",{sourceInterval:[623,626]},"<"],["app",{sourceInterval:[627,643]},"ListOf",[["app",{sourceInterval:[634,637]},"Seq",[]],["terminal",{sourceInterval:[639,642]},","]]],["terminal",{sourceInterval:[644,647]},">"]]],Alt:["define",{sourceInterval:[651,685]},null,[],["app",{sourceInterval:[661,685]},"NonemptyListOf",[["app",{sourceInterval:[676,679]},"Seq",[]],["terminal",{sourceInterval:[681,684]},"|"]]]],Seq:["define",{sourceInterval:[689,704]},null,[],["star",{sourceInterval:[699,704]},["app",{sourceInterval:[699,703]},"Iter",[]]]],Iter_star:["define",{sourceInterval:[719,736]},null,[],["seq",{sourceInterval:[719,727]},["app",{sourceInterval:[719,723]},"Pred",[]],["terminal",{sourceInterval:[724,727]},"*"]]],Iter_plus:["define",{sourceInterval:[743,760]},null,[],["seq",{sourceInterval:[743,751]},["app",{sourceInterval:[743,747]},"Pred",[]],["terminal",{sourceInterval:[748,751]},"+"]]],Iter_opt:["define",{sourceInterval:[767,783]},null,[],["seq",{sourceInterval:[767,775]},["app",{sourceInterval:[767,771]},"Pred",[]],["terminal",{sourceInterval:[772,775]},"?"]]],Iter:["define",{sourceInterval:[708,794]},null,[],["alt",{sourceInterval:[719,794]},["app",{sourceInterval:[719,727]},"Iter_star",[]],["app",{sourceInterval:[743,751]},"Iter_plus",[]],["app",{sourceInterval:[767,775]},"Iter_opt",[]],["app",{sourceInterval:[790,794]},"Pred",[]]]],Pred_not:["define",{sourceInterval:[809,824]},null,[],["seq",{sourceInterval:[809,816]},["terminal",{sourceInterval:[809,812]},"~"],["app",{sourceInterval:[813,816]},"Lex",[]]]],Pred_lookahead:["define",{sourceInterval:[831,852]},null,[],["seq",{sourceInterval:[831,838]},["terminal",{sourceInterval:[831,834]},"&"],["app",{sourceInterval:[835,838]},"Lex",[]]]],Pred:["define",{sourceInterval:[798,862]},null,[],["alt",{sourceInterval:[809,862]},["app",{sourceInterval:[809,816]},"Pred_not",[]],["app",{sourceInterval:[831,838]},"Pred_lookahead",[]],["app",{sourceInterval:[859,862]},"Lex",[]]]],Lex_lex:["define",{sourceInterval:[876,892]},null,[],["seq",{sourceInterval:[876,884]},["terminal",{sourceInterval:[876,879]},"#"],["app",{sourceInterval:[880,884]},"Base",[]]]],Lex:["define",{sourceInterval:[866,903]},null,[],["alt",{sourceInterval:[876,903]},["app",{sourceInterval:[876,884]},"Lex_lex",[]],["app",{sourceInterval:[899,903]},"Base",[]]]],Base_application:["define",{sourceInterval:[918,979]},null,[],["seq",{sourceInterval:[918,963]},["app",{sourceInterval:[918,923]},"ident",[]],["opt",{sourceInterval:[924,931]},["app",{sourceInterval:[924,930]},"Params",[]]],["not",{sourceInterval:[932,963]},["alt",{sourceInterval:[934,962]},["seq",{sourceInterval:[934,948]},["opt",{sourceInterval:[934,944]},["app",{sourceInterval:[934,943]},"ruleDescr",[]]],["terminal",{sourceInterval:[945,948]},"="]],["terminal",{sourceInterval:[951,955]},":="],["terminal",{sourceInterval:[958,962]},"+="]]]]],Base_range:["define",{sourceInterval:[986,1041]},null,[],["seq",{sourceInterval:[986,1022]},["app",{sourceInterval:[986,1001]},"oneCharTerminal",[]],["terminal",{sourceInterval:[1002,1006]},".."],["app",{sourceInterval:[1007,1022]},"oneCharTerminal",[]]]],Base_terminal:["define",{sourceInterval:[1048,1106]},null,[],["app",{sourceInterval:[1048,1056]},"terminal",[]]],Base_paren:["define",{sourceInterval:[1113,1168]},null,[],["seq",{sourceInterval:[1113,1124]},["terminal",{sourceInterval:[1113,1116]},"("],["app",{sourceInterval:[1117,1120]},"Alt",[]],["terminal",{sourceInterval:[1121,1124]},")"]]],Base:["define",{sourceInterval:[907,1168]},null,[],["alt",{sourceInterval:[918,1168]},["app",{sourceInterval:[918,963]},"Base_application",[]],["app",{sourceInterval:[986,1022]},"Base_range",[]],["app",{sourceInterval:[1048,1056]},"Base_terminal",[]],["app",{sourceInterval:[1113,1124]},"Base_paren",[]]]],ruleDescr:["define",{sourceInterval:[1172,1231]},"a rule description",[],["seq",{sourceInterval:[1210,1231]},["terminal",{sourceInterval:[1210,1213]},"("],["app",{sourceInterval:[1214,1227]},"ruleDescrText",[]],["terminal",{sourceInterval:[1228,1231]},")"]]],ruleDescrText:["define",{sourceInterval:[1235,1266]},null,[],["star",{sourceInterval:[1255,1266]},["seq",{sourceInterval:[1256,1264]},["not",{sourceInterval:[1256,1260]},["terminal",{sourceInterval:[1257,1260]},")"]],["app",{sourceInterval:[1261,1264]},"any",[]]]]],caseName:["define",{sourceInterval:[1270,1338]},null,[],["seq",{sourceInterval:[1285,1338]},["terminal",{sourceInterval:[1285,1289]},"--"],["star",{sourceInterval:[1290,1304]},["seq",{sourceInterval:[1291,1302]},["not",{sourceInterval:[1291,1296]},["terminal",{sourceInterval:[1292,1296]},"\n"]],["app",{sourceInterval:[1297,1302]},"space",[]]]],["app",{sourceInterval:[1305,1309]},"name",[]],["star",{sourceInterval:[1310,1324]},["seq",{sourceInterval:[1311,1322]},["not",{sourceInterval:[1311,1316]},["terminal",{sourceInterval:[1312,1316]},"\n"]],["app",{sourceInterval:[1317,1322]},"space",[]]]],["alt",{sourceInterval:[1326,1337]},["terminal",{sourceInterval:[1326,1330]},"\n"],["lookahead",{sourceInterval:[1333,1337]},["terminal",{sourceInterval:[1334,1337]},"}"]]]]],name:["define",{sourceInterval:[1342,1382]},"a name",[],["seq",{sourceInterval:[1363,1382]},["app",{sourceInterval:[1363,1372]},"nameFirst",[]],["star",{sourceInterval:[1373,1382]},["app",{sourceInterval:[1373,1381]},"nameRest",[]]]]],nameFirst:["define",{sourceInterval:[1386,1418]},null,[],["alt",{sourceInterval:[1402,1418]},["terminal",{sourceInterval:[1402,1405]},"_"],["app",{sourceInterval:[1412,1418]},"letter",[]]]],nameRest:["define",{sourceInterval:[1422,1452]},null,[],["alt",{sourceInterval:[1437,1452]},["terminal",{sourceInterval:[1437,1440]},"_"],["app",{sourceInterval:[1447,1452]},"alnum",[]]]],ident:["define",{sourceInterval:[1456,1489]},"an identifier",[],["app",{sourceInterval:[1485,1489]},"name",[]]],terminal:["define",{sourceInterval:[1493,1531]},null,[],["seq",{sourceInterval:[1508,1531]},["terminal",{sourceInterval:[1508,1512]},'"'],["star",{sourceInterval:[1513,1526]},["app",{sourceInterval:[1513,1525]},"terminalChar",[]]],["terminal",{sourceInterval:[1527,1531]},'"']]],oneCharTerminal:["define",{sourceInterval:[1535,1579]},null,[],["seq",{sourceInterval:[1557,1579]},["terminal",{sourceInterval:[1557,1561]},'"'],["app",{sourceInterval:[1562,1574]},"terminalChar",[]],["terminal",{sourceInterval:[1575,1579]},'"']]],terminalChar:["define",{sourceInterval:[1583,1640]},null,[],["alt",{sourceInterval:[1602,1640]},["app",{sourceInterval:[1602,1612]},"escapeChar",[]],["seq",{sourceInterval:[1619,1640]},["not",{sourceInterval:[1619,1624]},["terminal",{sourceInterval:[1620,1624]},"\\"]],["not",{sourceInterval:[1625,1630]},["terminal",{sourceInterval:[1626,1630]},'"']],["not",{sourceInterval:[1631,1636]},["terminal",{sourceInterval:[1632,1636]},"\n"]],["app",{sourceInterval:[1637,1640]},"any",[]]]]],escapeChar_backslash:["define",{sourceInterval:[1683,1738]},null,[],["terminal",{sourceInterval:[1683,1689]},"\\\\"]],escapeChar_doubleQuote:["define",{sourceInterval:[1745,1802]},null,[],["terminal",{sourceInterval:[1745,1751]},'\\"']],escapeChar_singleQuote:["define",{sourceInterval:[1809,1866]},null,[],["terminal",{sourceInterval:[1809,1815]},"\\'"]],escapeChar_backspace:["define",{sourceInterval:[1873,1928]},null,[],["terminal",{sourceInterval:[1873,1878]},"\\b"]],escapeChar_lineFeed:["define",{sourceInterval:[1935,1989]},null,[],["terminal",{sourceInterval:[1935,1940]},"\\n"]],escapeChar_carriageReturn:["define",{sourceInterval:[1996,2056]},null,[],["terminal",{sourceInterval:[1996,2001]},"\\r"]],escapeChar_tab:["define",{sourceInterval:[2063,2112]},null,[],["terminal",{sourceInterval:[2063,2068]},"\\t"]],escapeChar_unicodeEscape:["define",{sourceInterval:[2119,2178]},null,[],["seq",{sourceInterval:[2119,2160]},["terminal",{sourceInterval:[2119,2124]},"\\u"],["app",{sourceInterval:[2125,2133]},"hexDigit",[]],["app",{sourceInterval:[2134,2142]},"hexDigit",[]],["app",{sourceInterval:[2143,2151]},"hexDigit",[]],["app",{sourceInterval:[2152,2160]},"hexDigit",[]]]],escapeChar_hexEscape:["define",{sourceInterval:[2185,2240]},null,[],["seq",{sourceInterval:[2185,2208]},["terminal",{sourceInterval:[2185,2190]},"\\x"],["app",{sourceInterval:[2191,2199]},"hexDigit",[]],["app",{sourceInterval:[2200,2208]},"hexDigit",[]]]],escapeChar:["define",{sourceInterval:[1644,2240]},"an escape sequence",[],["alt",{sourceInterval:[1683,2240]},["app",{sourceInterval:[1683,1689]},"escapeChar_backslash",[]],["app",{sourceInterval:[1745,1751]},"escapeChar_doubleQuote",[]],["app",{sourceInterval:[1809,1815]},"escapeChar_singleQuote",[]],["app",{sourceInterval:[1873,1878]},"escapeChar_backspace",[]],["app",{sourceInterval:[1935,1940]},"escapeChar_lineFeed",[]],["app",{sourceInterval:[1996,2001]},"escapeChar_carriageReturn",[]],["app",{sourceInterval:[2063,2068]},"escapeChar_tab",[]],["app",{sourceInterval:[2119,2160]},"escapeChar_unicodeEscape",[]],["app",{sourceInterval:[2185,2208]},"escapeChar_hexEscape",[]]]],space:["extend",{sourceInterval:[2244,2263]},null,[],["app",{sourceInterval:[2256,2263]},"comment",[]]],comment_singleLine:["define",{sourceInterval:[2281,2327]},null,[],["seq",{sourceInterval:[2281,2312]},["terminal",{sourceInterval:[2281,2285]},"//"],["star",{sourceInterval:[2286,2298]},["seq",{sourceInterval:[2287,2296]},["not",{sourceInterval:[2287,2292]},["terminal",{sourceInterval:[2288,2292]},"\n"]],["app",{sourceInterval:[2293,2296]},"any",[]]]],["lookahead",{sourceInterval:[2299,2312]},["alt",{sourceInterval:[2301,2311]},["terminal",{sourceInterval:[2301,2305]},"\n"],["app",{sourceInterval:[2308,2311]},"end",[]]]]]],comment_multiLine:["define",{sourceInterval:[2334,2370]},null,[],["seq",{sourceInterval:[2334,2356]},["terminal",{sourceInterval:[2334,2338]},"/*"],["star",{sourceInterval:[2339,2351]},["seq",{sourceInterval:[2340,2349]},["not",{sourceInterval:[2340,2345]},["terminal",{sourceInterval:[2341,2345]},"*/"]],["app",{sourceInterval:[2346,2349]},"any",[]]]],["terminal",{sourceInterval:[2352,2356]},"*/"]]],comment:["define",{sourceInterval:[2267,2370]},null,[],["alt",{sourceInterval:[2281,2370]},["app",{sourceInterval:[2281,2312]},"comment_singleLine",[]],["app",{sourceInterval:[2334,2356]},"comment_multiLine",[]]]],tokens:["define",{sourceInterval:[2374,2389]},null,[],["star",{sourceInterval:[2383,2389]},["app",{sourceInterval:[2383,2388]},"token",[]]]],token:["define",{sourceInterval:[2393,2469]},null,[],["alt",{sourceInterval:[2401,2469]},["app",{sourceInterval:[2401,2409]},"caseName",[]],["app",{sourceInterval:[2412,2419]},"comment",[]],["app",{sourceInterval:[2422,2427]},"ident",[]],["app",{sourceInterval:[2430,2438]},"operator",[]],["app",{sourceInterval:[2441,2452]},"punctuation",[]],["app",{sourceInterval:[2455,2463]},"terminal",[]],["app",{sourceInterval:[2466,2469]},"any",[]]]],operator:["define",{sourceInterval:[2473,2538]},null,[],["alt",{sourceInterval:[2484,2538]},["terminal",{sourceInterval:[2484,2488]},"<:"],["terminal",{sourceInterval:[2491,2494]},"="],["terminal",{sourceInterval:[2497,2501]},":="],["terminal",{sourceInterval:[2504,2508]},"+="],["terminal",{sourceInterval:[2511,2514]},"*"],["terminal",{sourceInterval:[2517,2520]},"+"],["terminal",{sourceInterval:[2523,2526]},"?"],["terminal",{sourceInterval:[2529,2532]},"~"],["terminal",{sourceInterval:[2535,2538]},"&"]]],punctuation:["define",{sourceInterval:[2542,2578]},null,[],["alt",{sourceInterval:[2556,2578]},["terminal",{sourceInterval:[2556,2559]},"<"],["terminal",{sourceInterval:[2562,2565]},">"],["terminal",{sourceInterval:[2568,2571]},","],["terminal",{sourceInterval:[2574,2578]},"--"]]]}])}])},"object"==typeof e&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof e?e.ohm=r():n.ohm=r(),t.exports}();const ie=re.createNamespace();ie.Super=re.makeRecipe(["grammar",{source:'Super {\r\n  Main = literalOf<(null | boolean | number)>\r\n\r\n  optional<T> = T?\r\n  stringify<T> = T\r\n\r\n  End($END$) = end\r\n  exprEnd($Exp$) = (";" | space)+\r\n\r\n  join<P, C> = P C\r\n  startWith<P, C> = P C\r\n  endWith<C, S> = C S\r\n\r\n  null = "null"\r\n  \r\n  centerOf<L, C, R> = L C R\r\n\r\n\r\n  lineBreak = "\\n"\r\n  linePad = lineSpace*\r\n  lineSpace(space) = ~lineBreak space\r\n  lineEnd($LineEnd$) = linePad (lineBreak | end)\r\n\r\n  padWith<T> = centerOf<linePad, T, linePad>\r\n  multiplePadWith<T> = centerOf<space*, T, space*>\r\n  preSpaceWith<T> = startWith<lineSpace+, T>\r\n  leftPadWith<T> = startWith<linePad, T>\r\n  rightPadWith<T> = endWith<T, linePad>\r\n\r\n  bracketSyntax<L, C, R> = centerOf<L, multiplePadWith<C>, R>\r\n  bracketText<L, C, R> = centerOf<L, multiplePadWith<stringify<(~startWith<space*, R> C)+>>, R>\r\n\r\n  bracketSyntaxInline<L, C, R> = centerOf<L, padWith<C>, R>\r\n  bracketTextInline<L, C, R> = centerOf<L, padWith<stringify<(esc<char> | ~(lineBreak | startWith<linePad, R>) C)+>>, R>\r\n\r\n  simpleBracketSyntax<C, LR> = bracketSyntax<LR, C, LR>\r\n  simpleBracketText<C, LR> = bracketText<LR, C, LR>\r\n\r\n  simpleBracketSyntaxInline<C, LR> = bracketSyntaxInline<LR, C, LR>\r\n  simpleBracketTextInline<C, LR> = bracketTextInline<LR, C, LR>\r\n  \r\n  sourceOf<T> = T\r\n  \r\n  literalOf<T> = T\r\n\r\n  boolean($boolean$) = "true" | "false"\r\n\r\n  char = ~space any\r\n\r\n  number($number$)\r\n    = num* "." num+ -- fract\r\n    | num+ -- whole\r\n\r\n  sign<T>($number$)\r\n    = stringify<T> -- apply\r\n    | ("-" | "+") stringify<T> -- signed\r\n\r\n\r\n  num($num$) = digit\r\n\r\n  internalEscape = "\'" | "\\"" | "\\\\" | "b" | "f" | "n" | "r" | "t" | "v"\r\n\r\n  esc<T> = startWith<&"\\\\", oresc<T>>\r\n  noesc<T> = ~(&"\\\\") T\r\n  oresc<T> = "\\\\"? T\r\n  escWith<T> = strictEscWith<T, T>\r\n  strictEscWith<Escaped, NonEscaped> = esc<(internalEscape | "x" | "u" | Escaped)> | ~NonEscaped any\r\n\r\n  ignore<T> = T\r\n  \r\n  single<T> = endWith<T, &(~T any?)>\r\n  dobule<T> = join<noesc<T>, T>\r\n\r\n  tokenOf<T> = single<noesc<T>>\r\n  dobuleTokenOf<T> = join<noesc<T>, single<T>>\r\n\r\n  parenL = "("\r\n  parenR = ")"\r\n  bracketL = "["\r\n  bracketR = "]"\r\n  // tokenOf2<T> = noesc<single2<T>>\r\n}'},"Super",null,"Main",{Main:["define",{sourceInterval:[11,54]},null,[],["app",{sourceInterval:[18,54]},"literalOf",[["alt",{sourceInterval:[28,53]},["app",{sourceInterval:[29,33]},"null",[]],["app",{sourceInterval:[36,43]},"boolean",[]],["app",{sourceInterval:[46,52]},"number",[]]]]]],optional:["define",{sourceInterval:[60,76]},null,["T"],["opt",{sourceInterval:[74,76]},["param",{sourceInterval:[74,75]},0]]],stringify:["define",{sourceInterval:[80,96]},null,["T"],["param",{sourceInterval:[95,96]},0]],End:["define",{sourceInterval:[102,118]},"$END$",[],["app",{sourceInterval:[115,118]},"end",[]]],exprEnd:["define",{sourceInterval:[122,153]},"$Exp$",[],["plus",{sourceInterval:[139,153]},["alt",{sourceInterval:[140,151]},["terminal",{sourceInterval:[140,143]},";"],["app",{sourceInterval:[146,151]},"space",[]]]]],join:["define",{sourceInterval:[159,175]},null,["P","C"],["seq",{sourceInterval:[172,175]},["param",{sourceInterval:[172,173]},0],["param",{sourceInterval:[174,175]},1]]],startWith:["define",{sourceInterval:[179,200]},null,["P","C"],["seq",{sourceInterval:[197,200]},["param",{sourceInterval:[197,198]},0],["param",{sourceInterval:[199,200]},1]]],endWith:["define",{sourceInterval:[204,223]},null,["C","S"],["seq",{sourceInterval:[220,223]},["param",{sourceInterval:[220,221]},0],["param",{sourceInterval:[222,223]},1]]],null:["define",{sourceInterval:[229,242]},null,[],["terminal",{sourceInterval:[236,242]},"null"]],centerOf:["define",{sourceInterval:[250,275]},null,["L","C","R"],["seq",{sourceInterval:[270,275]},["param",{sourceInterval:[270,271]},0],["param",{sourceInterval:[272,273]},1],["param",{sourceInterval:[274,275]},2]]],lineBreak:["define",{sourceInterval:[283,299]},null,[],["terminal",{sourceInterval:[295,299]},"\n"]],linePad:["define",{sourceInterval:[303,323]},null,[],["star",{sourceInterval:[313,323]},["app",{sourceInterval:[313,322]},"lineSpace",[]]]],lineSpace:["define",{sourceInterval:[327,362]},"space",[],["seq",{sourceInterval:[346,362]},["not",{sourceInterval:[346,356]},["app",{sourceInterval:[347,356]},"lineBreak",[]]],["app",{sourceInterval:[357,362]},"space",[]]]],lineEnd:["define",{sourceInterval:[366,412]},"$LineEnd$",[],["seq",{sourceInterval:[387,412]},["app",{sourceInterval:[387,394]},"linePad",[]],["alt",{sourceInterval:[396,411]},["app",{sourceInterval:[396,405]},"lineBreak",[]],["app",{sourceInterval:[408,411]},"end",[]]]]],padWith:["define",{sourceInterval:[418,460]},null,["T"],["app",{sourceInterval:[431,460]},"centerOf",[["app",{sourceInterval:[440,447]},"linePad",[]],["param",{sourceInterval:[449,450]},0],["app",{sourceInterval:[452,459]},"linePad",[]]]]],multiplePadWith:["define",{sourceInterval:[464,512]},null,["T"],["app",{sourceInterval:[485,512]},"centerOf",[["star",{sourceInterval:[494,500]},["app",{sourceInterval:[494,499]},"space",[]]],["param",{sourceInterval:[502,503]},0],["star",{sourceInterval:[505,511]},["app",{sourceInterval:[505,510]},"space",[]]]]]],preSpaceWith:["define",{sourceInterval:[516,558]},null,["T"],["app",{sourceInterval:[534,558]},"startWith",[["plus",{sourceInterval:[544,554]},["app",{sourceInterval:[544,553]},"lineSpace",[]]],["param",{sourceInterval:[556,557]},0]]]],leftPadWith:["define",{sourceInterval:[562,600]},null,["T"],["app",{sourceInterval:[579,600]},"startWith",[["app",{sourceInterval:[589,596]},"linePad",[]],["param",{sourceInterval:[598,599]},0]]]],rightPadWith:["define",{sourceInterval:[604,641]},null,["T"],["app",{sourceInterval:[622,641]},"endWith",[["param",{sourceInterval:[630,631]},0],["app",{sourceInterval:[633,640]},"linePad",[]]]]],bracketSyntax:["define",{sourceInterval:[647,706]},null,["L","C","R"],["app",{sourceInterval:[672,706]},"centerOf",[["param",{sourceInterval:[681,682]},0],["app",{sourceInterval:[684,702]},"multiplePadWith",[["param",{sourceInterval:[700,701]},1]]],["param",{sourceInterval:[704,705]},2]]]],bracketText:["define",{sourceInterval:[710,803]},null,["L","C","R"],["app",{sourceInterval:[733,803]},"centerOf",[["param",{sourceInterval:[742,743]},0],["app",{sourceInterval:[745,799]},"multiplePadWith",[["app",{sourceInterval:[761,798]},"stringify",[["plus",{sourceInterval:[771,797]},["seq",{sourceInterval:[772,795]},["not",{sourceInterval:[772,793]},["app",{sourceInterval:[773,793]},"startWith",[["star",{sourceInterval:[783,789]},["app",{sourceInterval:[783,788]},"space",[]]],["param",{sourceInterval:[791,792]},2]]]],["param",{sourceInterval:[794,795]},1]]]]]]],["param",{sourceInterval:[801,802]},2]]]],bracketSyntaxInline:["define",{sourceInterval:[809,866]},null,["L","C","R"],["app",{sourceInterval:[840,866]},"centerOf",[["param",{sourceInterval:[849,850]},0],["app",{sourceInterval:[852,862]},"padWith",[["param",{sourceInterval:[860,861]},1]]],["param",{sourceInterval:[864,865]},2]]]],bracketTextInline:["define",{sourceInterval:[870,988]},null,["L","C","R"],["app",{sourceInterval:[899,988]},"centerOf",[["param",{sourceInterval:[908,909]},0],["app",{sourceInterval:[911,984]},"padWith",[["app",{sourceInterval:[919,983]},"stringify",[["plus",{sourceInterval:[929,982]},["alt",{sourceInterval:[930,980]},["app",{sourceInterval:[930,939]},"esc",[["app",{sourceInterval:[934,938]},"char",[]]]],["seq",{sourceInterval:[942,980]},["not",{sourceInterval:[942,978]},["alt",{sourceInterval:[944,977]},["app",{sourceInterval:[944,953]},"lineBreak",[]],["app",{sourceInterval:[956,977]},"startWith",[["app",{sourceInterval:[966,973]},"linePad",[]],["param",{sourceInterval:[975,976]},2]]]]],["param",{sourceInterval:[979,980]},1]]]]]]]],["param",{sourceInterval:[986,987]},2]]]],simpleBracketSyntax:["define",{sourceInterval:[994,1047]},null,["C","LR"],["app",{sourceInterval:[1023,1047]},"bracketSyntax",[["param",{sourceInterval:[1037,1039]},1],["param",{sourceInterval:[1041,1042]},0],["param",{sourceInterval:[1044,1046]},1]]]],simpleBracketText:["define",{sourceInterval:[1051,1100]},null,["C","LR"],["app",{sourceInterval:[1078,1100]},"bracketText",[["param",{sourceInterval:[1090,1092]},1],["param",{sourceInterval:[1094,1095]},0],["param",{sourceInterval:[1097,1099]},1]]]],simpleBracketSyntaxInline:["define",{sourceInterval:[1106,1171]},null,["C","LR"],["app",{sourceInterval:[1141,1171]},"bracketSyntaxInline",[["param",{sourceInterval:[1161,1163]},1],["param",{sourceInterval:[1165,1166]},0],["param",{sourceInterval:[1168,1170]},1]]]],simpleBracketTextInline:["define",{sourceInterval:[1175,1236]},null,["C","LR"],["app",{sourceInterval:[1208,1236]},"bracketTextInline",[["param",{sourceInterval:[1226,1228]},1],["param",{sourceInterval:[1230,1231]},0],["param",{sourceInterval:[1233,1235]},1]]]],sourceOf:["define",{sourceInterval:[1244,1259]},null,["T"],["param",{sourceInterval:[1258,1259]},0]],literalOf:["define",{sourceInterval:[1267,1283]},null,["T"],["param",{sourceInterval:[1282,1283]},0]],boolean:["define",{sourceInterval:[1289,1326]},"$boolean$",[],["alt",{sourceInterval:[1310,1326]},["terminal",{sourceInterval:[1310,1316]},"true"],["terminal",{sourceInterval:[1319,1326]},"false"]]],char:["define",{sourceInterval:[1332,1349]},null,[],["seq",{sourceInterval:[1339,1349]},["not",{sourceInterval:[1339,1345]},["app",{sourceInterval:[1340,1345]},"space",[]]],["app",{sourceInterval:[1346,1349]},"any",[]]]],number_fract:["define",{sourceInterval:[1379,1401]},null,[],["seq",{sourceInterval:[1379,1392]},["star",{sourceInterval:[1379,1383]},["app",{sourceInterval:[1379,1382]},"num",[]]],["terminal",{sourceInterval:[1384,1387]},"."],["plus",{sourceInterval:[1388,1392]},["app",{sourceInterval:[1388,1391]},"num",[]]]]],number_whole:["define",{sourceInterval:[1409,1422]},null,[],["plus",{sourceInterval:[1409,1413]},["app",{sourceInterval:[1409,1412]},"num",[]]]],number:["define",{sourceInterval:[1355,1422]},"$number$",[],["alt",{sourceInterval:[1379,1422]},["app",{sourceInterval:[1379,1392]},"number_fract",[]],["app",{sourceInterval:[1409,1413]},"number_whole",[]]]],sign_apply:["define",{sourceInterval:[1453,1474]},null,["T"],["app",{sourceInterval:[1453,1465]},"stringify",[["param",{sourceInterval:[1463,1464]},0]]]],sign_signed:["define",{sourceInterval:[1482,1516]},null,["T"],["seq",{sourceInterval:[1482,1506]},["alt",{sourceInterval:[1483,1492]},["terminal",{sourceInterval:[1483,1486]},"-"],["terminal",{sourceInterval:[1489,1492]},"+"]],["app",{sourceInterval:[1494,1506]},"stringify",[["param",{sourceInterval:[1504,1505]},0]]]]],sign:["define",{sourceInterval:[1428,1516]},"$number$",["T"],["alt",{sourceInterval:[1453,1516]},["app",{sourceInterval:[1453,1465]},"sign_apply",[["param",{},0]]],["app",{sourceInterval:[1482,1506]},"sign_signed",[["param",{},0]]]]],num:["define",{sourceInterval:[1524,1542]},"$num$",[],["app",{sourceInterval:[1537,1542]},"digit",[]]],internalEscape:["define",{sourceInterval:[1548,1618]},null,[],["alt",{sourceInterval:[1565,1618]},["terminal",{sourceInterval:[1565,1568]},"'"],["terminal",{sourceInterval:[1571,1575]},'"'],["terminal",{sourceInterval:[1578,1582]},"\\"],["terminal",{sourceInterval:[1585,1588]},"b"],["terminal",{sourceInterval:[1591,1594]},"f"],["terminal",{sourceInterval:[1597,1600]},"n"],["terminal",{sourceInterval:[1603,1606]},"r"],["terminal",{sourceInterval:[1609,1612]},"t"],["terminal",{sourceInterval:[1615,1618]},"v"]]],esc:["define",{sourceInterval:[1624,1659]},null,["T"],["app",{sourceInterval:[1633,1659]},"startWith",[["lookahead",{sourceInterval:[1643,1648]},["terminal",{sourceInterval:[1644,1648]},"\\"]],["app",{sourceInterval:[1650,1658]},"oresc",[["param",{sourceInterval:[1656,1657]},0]]]]]],noesc:["define",{sourceInterval:[1663,1684]},null,["T"],["seq",{sourceInterval:[1674,1684]},["not",{sourceInterval:[1674,1682]},["lookahead",{sourceInterval:[1676,1681]},["terminal",{sourceInterval:[1677,1681]},"\\"]]],["param",{sourceInterval:[1683,1684]},0]]],oresc:["define",{sourceInterval:[1688,1706]},null,["T"],["seq",{sourceInterval:[1699,1706]},["opt",{sourceInterval:[1699,1704]},["terminal",{sourceInterval:[1699,1703]},"\\"]],["param",{sourceInterval:[1705,1706]},0]]],escWith:["define",{sourceInterval:[1710,1742]},null,["T"],["app",{sourceInterval:[1723,1742]},"strictEscWith",[["param",{sourceInterval:[1737,1738]},0],["param",{sourceInterval:[1740,1741]},0]]]],strictEscWith:["define",{sourceInterval:[1746,1844]},null,["Escaped","NonEscaped"],["alt",{sourceInterval:[1783,1844]},["app",{sourceInterval:[1783,1826]},"esc",[["alt",{sourceInterval:[1787,1825]},["app",{sourceInterval:[1788,1802]},"internalEscape",[]],["terminal",{sourceInterval:[1805,1808]},"x"],["terminal",{sourceInterval:[1811,1814]},"u"],["param",{sourceInterval:[1817,1824]},0]]]],["seq",{sourceInterval:[1829,1844]},["not",{sourceInterval:[1829,1840]},["param",{sourceInterval:[1830,1840]},1]],["app",{sourceInterval:[1841,1844]},"any",[]]]]],ignore:["define",{sourceInterval:[1850,1863]},null,["T"],["param",{sourceInterval:[1862,1863]},0]],single:["define",{sourceInterval:[1871,1905]},null,["T"],["app",{sourceInterval:[1883,1905]},"endWith",[["param",{sourceInterval:[1891,1892]},0],["lookahead",{sourceInterval:[1894,1904]},["seq",{sourceInterval:[1896,1903]},["not",{sourceInterval:[1896,1898]},["param",{sourceInterval:[1897,1898]},0]],["opt",{sourceInterval:[1899,1903]},["app",{sourceInterval:[1899,1902]},"any",[]]]]]]]],dobule:["define",{sourceInterval:[1909,1938]},null,["T"],["app",{sourceInterval:[1921,1938]},"join",[["app",{sourceInterval:[1926,1934]},"noesc",[["param",{sourceInterval:[1932,1933]},0]]],["param",{sourceInterval:[1936,1937]},0]]]],tokenOf:["define",{sourceInterval:[1944,1973]},null,["T"],["app",{sourceInterval:[1957,1973]},"single",[["app",{sourceInterval:[1964,1972]},"noesc",[["param",{sourceInterval:[1970,1971]},0]]]]]],dobuleTokenOf:["define",{sourceInterval:[1977,2021]},null,["T"],["app",{sourceInterval:[1996,2021]},"join",[["app",{sourceInterval:[2001,2009]},"noesc",[["param",{sourceInterval:[2007,2008]},0]]],["app",{sourceInterval:[2011,2020]},"single",[["param",{sourceInterval:[2018,2019]},0]]]]]],parenL:["define",{sourceInterval:[2027,2039]},null,[],["terminal",{sourceInterval:[2036,2039]},"("]],parenR:["define",{sourceInterval:[2043,2055]},null,[],["terminal",{sourceInterval:[2052,2055]},")"]],bracketL:["define",{sourceInterval:[2059,2073]},null,[],["terminal",{sourceInterval:[2070,2073]},"["]],bracketR:["define",{sourceInterval:[2077,2091]},null,[],["terminal",{sourceInterval:[2088,2091]},"]"]]}]),ie.Base=re.makeRecipe(["grammar",{source:'Base <: Super {\r\n\r\n  literal($literal$) = percet | literalOf<(string | number | boolean | null)> \r\n\r\n  number += sign<hex>   -- sign\r\n    | sign<number_fract> -- double\r\n    | sign<number_whole> -- int\r\n\r\n  hex($hexNumber$) = "0x" ("a".."f" | "A".."F" | num)+\r\n\r\n  string\r\n    = simpleBracketSyntaxInline<stringify<strictEscWith<char, "\\"">*>, "\\""> -- doubleQuote\r\n    | simpleBracketSyntaxInline<stringify<strictEscWith<char, "\\\'">*>, "\\\'"> -- singleQuote\r\n  \r\n  // escapeCharacter = internalEscape | "x" | "u" | ~(alnum|space)any\r\n  \r\n  percet = (number_double | number_int) "%" ~(literal | variableName)\r\n\r\n  variableName($variableName$) = stringify<(variableNamePrefix?)> identifier\r\n  variableNamePrefix($variableNamePrefix$) = "$" | "%"\r\n\r\n  identifier = ~invalidIdentifier(validIdentifierPrefixChar ~invalidIdentifierChar (validIdentifierChar)*)\r\n  invalidIdentifier($invalidIdentifier$) = boolean | number | null\r\n\r\n  validIdentifierChar($validIdentifierChar$[:alnum: | "_" | "$"]) = alnum | "_" | "$"\r\n  invalidIdentifierChar($invalidIdentifierChar$["#" | "@" | ...$spicalChar$]) = "#" | "@"\r\n  validIdentifierPrefixChar($validIdentifierPrefixChar$) =  ~(variableNamePrefix)(letter | "_")\r\n\r\n  op = op_comma | op_logic | op_orNull | op_eq | op_rel | op_add | op_mul | op_pow | op_invert\r\n  op_comma = ","\r\n  op_logic = "&&" | "||"\r\n  op_orNull = "??"\r\n  op_eq = "==" | "!="\r\n  op_rel = "<=" | "<" | ">=" | ">"\r\n  op_add = "-" | "+"\r\n  op_mul = "%" | "/" | "*"\r\n  op_pow = "^"\r\n  op_invert = "!"\r\n\r\n}'},"Base",ie.Super,"Main",{literal:["define",{sourceInterval:[21,96]},"$literal$",[],["alt",{sourceInterval:[42,96]},["app",{sourceInterval:[42,48]},"percet",[]],["app",{sourceInterval:[51,96]},"literalOf",[["alt",{sourceInterval:[61,95]},["app",{sourceInterval:[62,68]},"string",[]],["app",{sourceInterval:[71,77]},"number",[]],["app",{sourceInterval:[80,87]},"boolean",[]],["app",{sourceInterval:[90,94]},"null",[]]]]]]],number_sign:["define",{sourceInterval:[113,132]},null,[],["app",{sourceInterval:[113,122]},"sign",[["app",{sourceInterval:[118,121]},"hex",[]]]]],number_double:["define",{sourceInterval:[140,168]},null,[],["app",{sourceInterval:[140,158]},"sign",[["app",{sourceInterval:[145,157]},"number_fract",[]]]]],number_int:["define",{sourceInterval:[176,201]},null,[],["app",{sourceInterval:[176,194]},"sign",[["app",{sourceInterval:[181,193]},"number_whole",[]]]]],number:["extend",{sourceInterval:[103,201]},null,[],["alt",{sourceInterval:[113,201]},["app",{sourceInterval:[113,122]},"number_sign",[]],["app",{sourceInterval:[140,158]},"number_double",[]],["app",{sourceInterval:[176,194]},"number_int",[]]]],hex:["define",{sourceInterval:[207,259]},"$hexNumber$",[],["seq",{sourceInterval:[226,259]},["terminal",{sourceInterval:[226,230]},"0x"],["plus",{sourceInterval:[231,259]},["alt",{sourceInterval:[232,257]},["range",{sourceInterval:[232,240]},"a","f"],["range",{sourceInterval:[243,251]},"A","F"],["app",{sourceInterval:[254,257]},"num",[]]]]]],string_doubleQuote:["define",{sourceInterval:[279,364]},null,[],["app",{sourceInterval:[279,349]},"simpleBracketSyntaxInline",[["app",{sourceInterval:[305,342]},"stringify",[["star",{sourceInterval:[315,341]},["app",{sourceInterval:[315,340]},"strictEscWith",[["app",{sourceInterval:[329,333]},"char",[]],["terminal",{sourceInterval:[335,339]},'"']]]]]],["terminal",{sourceInterval:[344,348]},'"']]]],string_singleQuote:["define",{sourceInterval:[372,457]},null,[],["app",{sourceInterval:[372,442]},"simpleBracketSyntaxInline",[["app",{sourceInterval:[398,435]},"stringify",[["star",{sourceInterval:[408,434]},["app",{sourceInterval:[408,433]},"strictEscWith",[["app",{sourceInterval:[422,426]},"char",[]],["terminal",{sourceInterval:[428,432]},"'"]]]]]],["terminal",{sourceInterval:[437,441]},"'"]]]],string:["define",{sourceInterval:[265,457]},null,[],["alt",{sourceInterval:[279,457]},["app",{sourceInterval:[279,349]},"string_doubleQuote",[]],["app",{sourceInterval:[372,442]},"string_singleQuote",[]]]],percet:["define",{sourceInterval:[540,607]},null,[],["seq",{sourceInterval:[549,607]},["alt",{sourceInterval:[550,576]},["app",{sourceInterval:[550,563]},"number_double",[]],["app",{sourceInterval:[566,576]},"number_int",[]]],["terminal",{sourceInterval:[578,581]},"%"],["not",{sourceInterval:[582,607]},["alt",{sourceInterval:[584,606]},["app",{sourceInterval:[584,591]},"literal",[]],["app",{sourceInterval:[594,606]},"variableName",[]]]]]],variableName:["define",{sourceInterval:[613,687]},"$variableName$",[],["seq",{sourceInterval:[644,687]},["app",{sourceInterval:[644,676]},"stringify",[["opt",{sourceInterval:[654,675]},["app",{sourceInterval:[655,673]},"variableNamePrefix",[]]]]],["app",{sourceInterval:[677,687]},"identifier",[]]]],variableNamePrefix:["define",{sourceInterval:[691,743]},"$variableNamePrefix$",[],["alt",{sourceInterval:[734,743]},["terminal",{sourceInterval:[734,737]},"$"],["terminal",{sourceInterval:[740,743]},"%"]]],identifier:["define",{sourceInterval:[749,853]},null,[],["seq",{sourceInterval:[762,853]},["not",{sourceInterval:[762,780]},["app",{sourceInterval:[763,780]},"invalidIdentifier",[]]],["app",{sourceInterval:[781,806]},"validIdentifierPrefixChar",[]],["not",{sourceInterval:[807,829]},["app",{sourceInterval:[808,829]},"invalidIdentifierChar",[]]],["star",{sourceInterval:[830,852]},["app",{sourceInterval:[831,850]},"validIdentifierChar",[]]]]],invalidIdentifier:["define",{sourceInterval:[857,921]},"$invalidIdentifier$",[],["alt",{sourceInterval:[898,921]},["app",{sourceInterval:[898,905]},"boolean",[]],["app",{sourceInterval:[908,914]},"number",[]],["app",{sourceInterval:[917,921]},"null",[]]]],validIdentifierChar:["define",{sourceInterval:[927,1010]},'$validIdentifierChar$[:alnum: | "_" | "$"]',[],["alt",{sourceInterval:[993,1010]},["app",{sourceInterval:[993,998]},"alnum",[]],["terminal",{sourceInterval:[1001,1004]},"_"],["terminal",{sourceInterval:[1007,1010]},"$"]]],invalidIdentifierChar:["define",{sourceInterval:[1014,1101]},'$invalidIdentifierChar$["#" | "@" | ...$spicalChar$]',[],["alt",{sourceInterval:[1092,1101]},["terminal",{sourceInterval:[1092,1095]},"#"],["terminal",{sourceInterval:[1098,1101]},"@"]]],validIdentifierPrefixChar:["define",{sourceInterval:[1105,1198]},"$validIdentifierPrefixChar$",[],["seq",{sourceInterval:[1163,1198]},["not",{sourceInterval:[1163,1184]},["app",{sourceInterval:[1165,1183]},"variableNamePrefix",[]]],["alt",{sourceInterval:[1185,1197]},["app",{sourceInterval:[1185,1191]},"letter",[]],["terminal",{sourceInterval:[1194,1197]},"_"]]]],op:["define",{sourceInterval:[1204,1296]},null,[],["alt",{sourceInterval:[1209,1296]},["app",{sourceInterval:[1209,1217]},"op_comma",[]],["app",{sourceInterval:[1220,1228]},"op_logic",[]],["app",{sourceInterval:[1231,1240]},"op_orNull",[]],["app",{sourceInterval:[1243,1248]},"op_eq",[]],["app",{sourceInterval:[1251,1257]},"op_rel",[]],["app",{sourceInterval:[1260,1266]},"op_add",[]],["app",{sourceInterval:[1269,1275]},"op_mul",[]],["app",{sourceInterval:[1278,1284]},"op_pow",[]],["app",{sourceInterval:[1287,1296]},"op_invert",[]]]],op_comma:["define",{sourceInterval:[1300,1314]},null,[],["terminal",{sourceInterval:[1311,1314]},","]],op_logic:["define",{sourceInterval:[1318,1340]},null,[],["alt",{sourceInterval:[1329,1340]},["terminal",{sourceInterval:[1329,1333]},"&&"],["terminal",{sourceInterval:[1336,1340]},"||"]]],op_orNull:["define",{sourceInterval:[1344,1360]},null,[],["terminal",{sourceInterval:[1356,1360]},"??"]],op_eq:["define",{sourceInterval:[1364,1383]},null,[],["alt",{sourceInterval:[1372,1383]},["terminal",{sourceInterval:[1372,1376]},"=="],["terminal",{sourceInterval:[1379,1383]},"!="]]],op_rel:["define",{sourceInterval:[1387,1419]},null,[],["alt",{sourceInterval:[1396,1419]},["terminal",{sourceInterval:[1396,1400]},"<="],["terminal",{sourceInterval:[1403,1406]},"<"],["terminal",{sourceInterval:[1409,1413]},">="],["terminal",{sourceInterval:[1416,1419]},">"]]],op_add:["define",{sourceInterval:[1423,1441]},null,[],["alt",{sourceInterval:[1432,1441]},["terminal",{sourceInterval:[1432,1435]},"-"],["terminal",{sourceInterval:[1438,1441]},"+"]]],op_mul:["define",{sourceInterval:[1445,1469]},null,[],["alt",{sourceInterval:[1454,1469]},["terminal",{sourceInterval:[1454,1457]},"%"],["terminal",{sourceInterval:[1460,1463]},"/"],["terminal",{sourceInterval:[1466,1469]},"*"]]],op_pow:["define",{sourceInterval:[1473,1485]},null,[],["terminal",{sourceInterval:[1482,1485]},"^"]],op_invert:["define",{sourceInterval:[1489,1504]},null,[],["terminal",{sourceInterval:[1501,1504]},"!"]]}]),ie.AdvScript=re.makeRecipe(["grammar",{source:'AdvScript <: Base {\r\n  Main := Statement\r\n\r\n  Statement\r\n    = macroBegin Macro_Call optional<(Macro_Pipe | #pipeFlag)> (exprEnd | End) -- Macro\r\n    | Template End -- Inline\r\n    | Macro_Pipe (exprEnd | End) -- Pipe\r\n    | #pipeFlag (exprEnd | End) -- AnonymousPipe\r\n    | Exp (exprEnd | End) -- Exp\r\n    | End\r\n\r\n  macroBegin($macroBegin$) = "@"\r\n  tmplBegin($tmplBegin$) = "{{"\r\n  tmplEnd($tmplEnd$) = "}}"\r\n\r\n  Template = tmplBegin Exp optional<(Macro_Pipe | #pipeFlag)> tmplEnd\r\n\r\n  Macro_Call = (CallExpression | Macro_Call_Expr)\r\n  Macro_Pipe\r\n    = pipeFlag Macro_Call -- Call\r\n    | pipeFlag pipeExprBegin Exp -- Expr\r\n\r\n  pipeFlag($pipeFlag$) = token_split\r\n  pipeExprBegin($pipeExprBegin$) = "="\r\n\r\n  Macro_Call_Expr = #identifier optional<Params>\r\n\r\n  Params \r\n    = Param (#space | ",") Params -- multiple\r\n    | Param  ";"*                      -- single\r\n\r\n  Param = identifier "=" TopExp    -- setValue\r\n    | identifier                   -- setFlag\r\n\r\n  Array($Array$)= "[" ArrayElements "]"\r\n  ArraySpread($ArraySpread$) = SpreadExp_spread\r\n\r\n  ArrayElements($ArrayElements$) = ListOf<TopExp, ",">\r\n\r\n  CallExpression($CallExpression$) = #identifier "(" ListOf<TopExp, ","> ")"\r\n\r\n  Exp\r\n    = Exp op_comma Exp -- Comma\r\n    | TopExp\r\n\r\n  TopExp\r\n    = SpreadExp_spread -- ArraySpread\r\n    | #variableName "=" TopExp -- assign\r\n    | LogicExp\r\n\r\n  CatchOrNullExp($CatchOrNullExp$) = ~LogicExp_logic RelationExp\r\n  CatchOrNullExp2($CatchOrNullExp$) = ~OrNullExp_or LogicExp\r\n\r\n  LogicExp\r\n    = LogicExp op_logic CatchOrNullExp2  -- logic\r\n    | OrNullExp\r\n\r\n  OrNullExp\r\n    = OrNullExp op_orNull CatchOrNullExp  -- or\r\n    | EqualExp\r\n\r\n  EqualExp\r\n    = EqualExp op_eq EqualExp  -- eq\r\n    | RelationExp\r\n\r\n  RelationExp\r\n    = RelationExp op_rel RelationExp     -- rel\r\n    | SpreadExp\r\n\r\n  SpreadExp\r\n    = SpreadExp op_spread SpreadExp  -- spread\r\n    | AddExp\r\n\r\n  AddExp\r\n    = AddExp op_add MulExp  -- add\r\n    | MulExp\r\n\r\n  MulExp\r\n    = MulExp op_mul ExpExp  -- mul\r\n    | ExpExp\r\n\r\n  ExpExp\r\n    = PriExp op_pow ExpExp  -- pow\r\n    | IncrementExp\r\n    | op_invert PriExp -- invert\r\n    | ~number (op_add PriExp)   -- sign\r\n    | PriExp\r\n\r\n  IncrementExp($Exp$)\r\n    = #variableName op_increment -- after\r\n    | op_increment #variableName -- before\r\n\r\n  PriExp($Exp$) \r\n    = "(" Exp ")" -- paren // parenthesis\r\n    | CallExpression \r\n    | Array\r\n    | variableName\r\n    | literal\r\n  \r\n  op += op_increment | op_spread\r\n  op_increment = "--" | "++"\r\n  op_spread = "..."\r\n\r\n  token_split = "|"\r\n}'},"AdvScript",ie.Base,"Main",{Main:["override",{sourceInterval:[23,40]},null,[],["app",{sourceInterval:[31,40]},"Statement",[]]],Statement_Macro:["define",{sourceInterval:[63,144]},null,[],["seq",{sourceInterval:[63,135]},["app",{sourceInterval:[63,73]},"macroBegin",[]],["app",{sourceInterval:[74,84]},"Macro_Call",[]],["app",{sourceInterval:[85,119]},"optional",[["alt",{sourceInterval:[94,118]},["app",{sourceInterval:[95,105]},"Macro_Pipe",[]],["lex",{sourceInterval:[108,117]},["app",{sourceInterval:[109,117]},"pipeFlag",[]]]]]],["alt",{sourceInterval:[121,134]},["app",{sourceInterval:[121,128]},"exprEnd",[]],["app",{sourceInterval:[131,134]},"End",[]]]]],Statement_Inline:["define",{sourceInterval:[152,174]},null,[],["seq",{sourceInterval:[152,164]},["app",{sourceInterval:[152,160]},"Template",[]],["app",{sourceInterval:[161,164]},"End",[]]]],Statement_Pipe:["define",{sourceInterval:[182,216]},null,[],["seq",{sourceInterval:[182,208]},["app",{sourceInterval:[182,192]},"Macro_Pipe",[]],["alt",{sourceInterval:[194,207]},["app",{sourceInterval:[194,201]},"exprEnd",[]],["app",{sourceInterval:[204,207]},"End",[]]]]],Statement_AnonymousPipe:["define",{sourceInterval:[224,266]},null,[],["seq",{sourceInterval:[224,249]},["lex",{sourceInterval:[224,233]},["app",{sourceInterval:[225,233]},"pipeFlag",[]]],["alt",{sourceInterval:[235,248]},["app",{sourceInterval:[235,242]},"exprEnd",[]],["app",{sourceInterval:[245,248]},"End",[]]]]],Statement_Exp:["define",{sourceInterval:[274,300]},null,[],["seq",{sourceInterval:[274,293]},["app",{sourceInterval:[274,277]},"Exp",[]],["alt",{sourceInterval:[279,292]},["app",{sourceInterval:[279,286]},"exprEnd",[]],["app",{sourceInterval:[289,292]},"End",[]]]]],Statement:["define",{sourceInterval:[46,311]},null,[],["alt",{sourceInterval:[63,311]},["app",{sourceInterval:[63,135]},"Statement_Macro",[]],["app",{sourceInterval:[152,164]},"Statement_Inline",[]],["app",{sourceInterval:[182,208]},"Statement_Pipe",[]],["app",{sourceInterval:[224,249]},"Statement_AnonymousPipe",[]],["app",{sourceInterval:[274,293]},"Statement_Exp",[]],["app",{sourceInterval:[308,311]},"End",[]]]],macroBegin:["define",{sourceInterval:[317,347]},"$macroBegin$",[],["terminal",{sourceInterval:[344,347]},"@"]],tmplBegin:["define",{sourceInterval:[351,380]},"$tmplBegin$",[],["terminal",{sourceInterval:[376,380]},"{{"]],tmplEnd:["define",{sourceInterval:[384,409]},"$tmplEnd$",[],["terminal",{sourceInterval:[405,409]},"}}"]],Template:["define",{sourceInterval:[415,482]},null,[],["seq",{sourceInterval:[426,482]},["app",{sourceInterval:[426,435]},"tmplBegin",[]],["app",{sourceInterval:[436,439]},"Exp",[]],["app",{sourceInterval:[440,474]},"optional",[["alt",{sourceInterval:[449,473]},["app",{sourceInterval:[450,460]},"Macro_Pipe",[]],["lex",{sourceInterval:[463,472]},["app",{sourceInterval:[464,472]},"pipeFlag",[]]]]]],["app",{sourceInterval:[475,482]},"tmplEnd",[]]]],Macro_Call:["define",{sourceInterval:[488,535]},null,[],["alt",{sourceInterval:[501,535]},["app",{sourceInterval:[502,516]},"CallExpression",[]],["app",{sourceInterval:[519,534]},"Macro_Call_Expr",[]]]],Macro_Pipe_Call:["define",{sourceInterval:[557,584]},null,[],["seq",{sourceInterval:[557,576]},["app",{sourceInterval:[557,565]},"pipeFlag",[]],["app",{sourceInterval:[566,576]},"Macro_Call",[]]]],Macro_Pipe_Expr:["define",{sourceInterval:[592,626]},null,[],["seq",{sourceInterval:[592,618]},["app",{sourceInterval:[592,600]},"pipeFlag",[]],["app",{sourceInterval:[601,614]},"pipeExprBegin",[]],["app",{sourceInterval:[615,618]},"Exp",[]]]],Macro_Pipe:["define",{sourceInterval:[539,626]},null,[],["alt",{sourceInterval:[557,626]},["app",{sourceInterval:[557,576]},"Macro_Pipe_Call",[]],["app",{sourceInterval:[592,618]},"Macro_Pipe_Expr",[]]]],pipeFlag:["define",{sourceInterval:[632,666]},"$pipeFlag$",[],["app",{sourceInterval:[655,666]},"token_split",[]]],pipeExprBegin:["define",{sourceInterval:[670,706]},"$pipeExprBegin$",[],["terminal",{sourceInterval:[703,706]},"="]],Macro_Call_Expr:["define",{sourceInterval:[712,758]},null,[],["seq",{sourceInterval:[730,758]},["lex",{sourceInterval:[730,741]},["app",{sourceInterval:[731,741]},"identifier",[]]],["app",{sourceInterval:[742,758]},"optional",[["app",{sourceInterval:[751,757]},"Params",[]]]]]],Params_multiple:["define",{sourceInterval:[779,818]},null,[],["seq",{sourceInterval:[779,806]},["app",{sourceInterval:[779,784]},"Param",[]],["alt",{sourceInterval:[786,798]},["lex",{sourceInterval:[786,792]},["app",{sourceInterval:[787,792]},"space",[]]],["terminal",{sourceInterval:[795,798]},","]],["app",{sourceInterval:[800,806]},"Params",[]]]],Params_single:["define",{sourceInterval:[826,868]},null,[],["seq",{sourceInterval:[826,837]},["app",{sourceInterval:[826,831]},"Param",[]],["star",{sourceInterval:[833,837]},["terminal",{sourceInterval:[833,836]},";"]]]],Params:["define",{sourceInterval:[764,868]},null,[],["alt",{sourceInterval:[779,868]},["app",{sourceInterval:[779,806]},"Params_multiple",[]],["app",{sourceInterval:[826,837]},"Params_single",[]]]],Param_setValue:["define",{sourceInterval:[882,918]},null,[],["seq",{sourceInterval:[882,903]},["app",{sourceInterval:[882,892]},"identifier",[]],["terminal",{sourceInterval:[893,896]},"="],["app",{sourceInterval:[897,903]},"TopExp",[]]]],Param_setFlag:["define",{sourceInterval:[926,965]},null,[],["app",{sourceInterval:[926,936]},"identifier",[]]],Param:["define",{sourceInterval:[874,965]},null,[],["alt",{sourceInterval:[882,965]},["app",{sourceInterval:[882,903]},"Param_setValue",[]],["app",{sourceInterval:[926,936]},"Param_setFlag",[]]]],Array:["define",{sourceInterval:[971,1008]},"$Array$",[],["seq",{sourceInterval:[987,1008]},["terminal",{sourceInterval:[987,990]},"["],["app",{sourceInterval:[991,1004]},"ArrayElements",[]],["terminal",{sourceInterval:[1005,1008]},"]"]]],ArraySpread:["define",{sourceInterval:[1012,1057]},"$ArraySpread$",[],["app",{sourceInterval:[1041,1057]},"SpreadExp_spread",[]]],ArrayElements:["define",{sourceInterval:[1063,1115]},"$ArrayElements$",[],["app",{sourceInterval:[1096,1115]},"ListOf",[["app",{sourceInterval:[1103,1109]},"TopExp",[]],["terminal",{sourceInterval:[1111,1114]},","]]]],CallExpression:["define",{sourceInterval:[1121,1195]},"$CallExpression$",[],["seq",{sourceInterval:[1156,1195]},["lex",{sourceInterval:[1156,1167]},["app",{sourceInterval:[1157,1167]},"identifier",[]]],["terminal",{sourceInterval:[1168,1171]},"("],["app",{sourceInterval:[1172,1191]},"ListOf",[["app",{sourceInterval:[1179,1185]},"TopExp",[]],["terminal",{sourceInterval:[1187,1190]},","]]],["terminal",{sourceInterval:[1192,1195]},")"]]],Exp_Comma:["define",{sourceInterval:[1212,1237]},null,[],["seq",{sourceInterval:[1212,1228]},["app",{sourceInterval:[1212,1215]},"Exp",[]],["app",{sourceInterval:[1216,1224]},"op_comma",[]],["app",{sourceInterval:[1225,1228]},"Exp",[]]]],Exp:["define",{sourceInterval:[1201,1251]},null,[],["alt",{sourceInterval:[1212,1251]},["app",{sourceInterval:[1212,1228]},"Exp_Comma",[]],["app",{sourceInterval:[1245,1251]},"TopExp",[]]]],TopExp_ArraySpread:["define",{sourceInterval:[1271,1302]},null,[],["app",{sourceInterval:[1271,1287]},"SpreadExp_spread",[]]],TopExp_assign:["define",{sourceInterval:[1310,1344]},null,[],["seq",{sourceInterval:[1310,1334]},["lex",{sourceInterval:[1310,1323]},["app",{sourceInterval:[1311,1323]},"variableName",[]]],["terminal",{sourceInterval:[1324,1327]},"="],["app",{sourceInterval:[1328,1334]},"TopExp",[]]]],TopExp:["define",{sourceInterval:[1257,1360]},null,[],["alt",{sourceInterval:[1271,1360]},["app",{sourceInterval:[1271,1287]},"TopExp_ArraySpread",[]],["app",{sourceInterval:[1310,1334]},"TopExp_assign",[]],["app",{sourceInterval:[1352,1360]},"LogicExp",[]]]],CatchOrNullExp:["define",{sourceInterval:[1366,1428]},"$CatchOrNullExp$",[],["seq",{sourceInterval:[1401,1428]},["not",{sourceInterval:[1401,1416]},["app",{sourceInterval:[1402,1416]},"LogicExp_logic",[]]],["app",{sourceInterval:[1417,1428]},"RelationExp",[]]]],CatchOrNullExp2:["define",{sourceInterval:[1432,1490]},"$CatchOrNullExp$",[],["seq",{sourceInterval:[1468,1490]},["not",{sourceInterval:[1468,1481]},["app",{sourceInterval:[1469,1481]},"OrNullExp_or",[]]],["app",{sourceInterval:[1482,1490]},"LogicExp",[]]]],LogicExp_logic:["define",{sourceInterval:[1512,1555]},null,[],["seq",{sourceInterval:[1512,1545]},["app",{sourceInterval:[1512,1520]},"LogicExp",[]],["app",{sourceInterval:[1521,1529]},"op_logic",[]],["app",{sourceInterval:[1530,1545]},"CatchOrNullExp2",[]]]],LogicExp:["define",{sourceInterval:[1496,1572]},null,[],["alt",{sourceInterval:[1512,1572]},["app",{sourceInterval:[1512,1545]},"LogicExp_logic",[]],["app",{sourceInterval:[1563,1572]},"OrNullExp",[]]]],OrNullExp_or:["define",{sourceInterval:[1595,1636]},null,[],["seq",{sourceInterval:[1595,1629]},["app",{sourceInterval:[1595,1604]},"OrNullExp",[]],["app",{sourceInterval:[1605,1614]},"op_orNull",[]],["app",{sourceInterval:[1615,1629]},"CatchOrNullExp",[]]]],OrNullExp:["define",{sourceInterval:[1578,1652]},null,[],["alt",{sourceInterval:[1595,1652]},["app",{sourceInterval:[1595,1629]},"OrNullExp_or",[]],["app",{sourceInterval:[1644,1652]},"EqualExp",[]]]],EqualExp_eq:["define",{sourceInterval:[1674,1704]},null,[],["seq",{sourceInterval:[1674,1697]},["app",{sourceInterval:[1674,1682]},"EqualExp",[]],["app",{sourceInterval:[1683,1688]},"op_eq",[]],["app",{sourceInterval:[1689,1697]},"EqualExp",[]]]],EqualExp:["define",{sourceInterval:[1658,1723]},null,[],["alt",{sourceInterval:[1674,1723]},["app",{sourceInterval:[1674,1697]},"EqualExp_eq",[]],["app",{sourceInterval:[1712,1723]},"RelationExp",[]]]],RelationExp_rel:["define",{sourceInterval:[1748,1789]},null,[],["seq",{sourceInterval:[1748,1778]},["app",{sourceInterval:[1748,1759]},"RelationExp",[]],["app",{sourceInterval:[1760,1766]},"op_rel",[]],["app",{sourceInterval:[1767,1778]},"RelationExp",[]]]],RelationExp:["define",{sourceInterval:[1729,1806]},null,[],["alt",{sourceInterval:[1748,1806]},["app",{sourceInterval:[1748,1778]},"RelationExp_rel",[]],["app",{sourceInterval:[1797,1806]},"SpreadExp",[]]]],SpreadExp_spread:["define",{sourceInterval:[1829,1869]},null,[],["seq",{sourceInterval:[1829,1858]},["app",{sourceInterval:[1829,1838]},"SpreadExp",[]],["app",{sourceInterval:[1839,1848]},"op_spread",[]],["app",{sourceInterval:[1849,1858]},"SpreadExp",[]]]],SpreadExp:["define",{sourceInterval:[1812,1883]},null,[],["alt",{sourceInterval:[1829,1883]},["app",{sourceInterval:[1829,1858]},"SpreadExp_spread",[]],["app",{sourceInterval:[1877,1883]},"AddExp",[]]]],AddExp_add:["define",{sourceInterval:[1903,1931]},null,[],["seq",{sourceInterval:[1903,1923]},["app",{sourceInterval:[1903,1909]},"AddExp",[]],["app",{sourceInterval:[1910,1916]},"op_add",[]],["app",{sourceInterval:[1917,1923]},"MulExp",[]]]],AddExp:["define",{sourceInterval:[1889,1945]},null,[],["alt",{sourceInterval:[1903,1945]},["app",{sourceInterval:[1903,1923]},"AddExp_add",[]],["app",{sourceInterval:[1939,1945]},"MulExp",[]]]],MulExp_mul:["define",{sourceInterval:[1965,1993]},null,[],["seq",{sourceInterval:[1965,1985]},["app",{sourceInterval:[1965,1971]},"MulExp",[]],["app",{sourceInterval:[1972,1978]},"op_mul",[]],["app",{sourceInterval:[1979,1985]},"ExpExp",[]]]],MulExp:["define",{sourceInterval:[1951,2007]},null,[],["alt",{sourceInterval:[1965,2007]},["app",{sourceInterval:[1965,1985]},"MulExp_mul",[]],["app",{sourceInterval:[2001,2007]},"ExpExp",[]]]],ExpExp_pow:["define",{sourceInterval:[2027,2055]},null,[],["seq",{sourceInterval:[2027,2047]},["app",{sourceInterval:[2027,2033]},"PriExp",[]],["app",{sourceInterval:[2034,2040]},"op_pow",[]],["app",{sourceInterval:[2041,2047]},"ExpExp",[]]]],ExpExp_invert:["define",{sourceInterval:[2083,2109]},null,[],["seq",{sourceInterval:[2083,2099]},["app",{sourceInterval:[2083,2092]},"op_invert",[]],["app",{sourceInterval:[2093,2099]},"PriExp",[]]]],ExpExp_sign:["define",{sourceInterval:[2117,2150]},null,[],["seq",{sourceInterval:[2117,2140]},["not",{sourceInterval:[2117,2124]},["app",{sourceInterval:[2118,2124]},"number",[]]],["app",{sourceInterval:[2126,2132]},"op_add",[]],["app",{sourceInterval:[2133,2139]},"PriExp",[]]]],ExpExp:["define",{sourceInterval:[2013,2164]},null,[],["alt",{sourceInterval:[2027,2164]},["app",{sourceInterval:[2027,2047]},"ExpExp_pow",[]],["app",{sourceInterval:[2063,2075]},"IncrementExp",[]],["app",{sourceInterval:[2083,2099]},"ExpExp_invert",[]],["app",{sourceInterval:[2117,2140]},"ExpExp_sign",[]],["app",{sourceInterval:[2158,2164]},"PriExp",[]]]],IncrementExp_after:["define",{sourceInterval:[2197,2232]},null,[],["seq",{sourceInterval:[2197,2223]},["lex",{sourceInterval:[2197,2210]},["app",{sourceInterval:[2198,2210]},"variableName",[]]],["app",{sourceInterval:[2211,2223]},"op_increment",[]]]],IncrementExp_before:["define",{sourceInterval:[2240,2276]},null,[],["seq",{sourceInterval:[2240,2266]},["app",{sourceInterval:[2240,2252]},"op_increment",[]],["lex",{sourceInterval:[2253,2266]},["app",{sourceInterval:[2254,2266]},"variableName",[]]]]],IncrementExp:["define",{sourceInterval:[2170,2276]},"$Exp$",[],["alt",{sourceInterval:[2197,2276]},["app",{sourceInterval:[2197,2223]},"IncrementExp_after",[]],["app",{sourceInterval:[2240,2266]},"IncrementExp_before",[]]]],PriExp_paren:["define",{sourceInterval:[2304,2339]},null,[],["seq",{sourceInterval:[2304,2315]},["terminal",{sourceInterval:[2304,2307]},"("],["app",{sourceInterval:[2308,2311]},"Exp",[]],["terminal",{sourceInterval:[2312,2315]},")"]]],PriExp:["define",{sourceInterval:[2282,2410]},"$Exp$",[],["alt",{sourceInterval:[2304,2410]},["app",{sourceInterval:[2304,2315]},"PriExp_paren",[]],["app",{sourceInterval:[2347,2361]},"CallExpression",[]],["app",{sourceInterval:[2370,2375]},"Array",[]],["app",{sourceInterval:[2383,2395]},"variableName",[]],["app",{sourceInterval:[2403,2410]},"literal",[]]]],op:["extend",{sourceInterval:[2418,2448]},null,[],["alt",{sourceInterval:[2424,2448]},["app",{sourceInterval:[2424,2436]},"op_increment",[]],["app",{sourceInterval:[2439,2448]},"op_spread",[]]]],op_increment:["define",{sourceInterval:[2452,2478]},null,[],["alt",{sourceInterval:[2467,2478]},["terminal",{sourceInterval:[2467,2471]},"--"],["terminal",{sourceInterval:[2474,2478]},"++"]]],op_spread:["define",{sourceInterval:[2482,2499]},null,[],["terminal",{sourceInterval:[2494,2499]},"..."]],token_split:["define",{sourceInterval:[2505,2522]},null,[],["terminal",{sourceInterval:[2519,2522]},"|"]]}]),ie.AdvFountain=re.makeRecipe(["grammar",{source:'AdvFountain <: AdvScript {\r\n  main = statment+ | end\r\n  statment = (content | errorBoundary)\r\n\r\n  parenWith<T> = bracketSyntaxInline<parenL, T, parenR> | bracketSyntaxInline<"（", T, "）">\r\n  parenStringWith<T> = bracketTextInline<parenL, T, parenR> | bracketTextInline<"（", T, "）">\r\n\r\n  bracketWith<T> = bracketSyntaxInline<bracketL, T, bracketR> | bracketSyntaxInline<"【", T, "】">\r\n  bracketStringWith<T> = bracketTextInline<bracketL, T, bracketR> | bracketTextInline<"【", T, "】">\r\n  \r\n\r\n  stringWith<Char> = stringify<Char+>\r\n\r\n  errorBoundary \r\n    = ignoreError\r\n    | logicError\r\n    | characterError\r\n    | commandError\r\n    | actionError\r\n    | otherError\r\n\r\n  characterError = statementOf<rawOf<startWith<sToken_character, (~lineBreak any)*>>>\r\n  actionError = linesOf<action_plain>\r\n  commandError = linesOf<command>\r\n  logicError = block_logic | logicStatment\r\n  ignoreError = linesOf<(comment | ignore<&emptyLine>)>\r\n  otherError = linesOf<~textSyntax_action rawOf<(~lineBreak any)+>> -- raw\r\n\r\n  comment\r\n    = comment_inline       -- notes\r\n    | bracketTextInline<"[[", any, ("]]" | &lineBreak)>  -- inline\r\n    | startWith<startWith<"//", linePad>, stringify<endWith<escWith<lineBreak>*, &lineEnd>>> -- single\r\n    | bracketText<join<"/", "*"+>, any, join<"*"+, "/">>       -- multi\r\n\r\n  block_comment($Comment$) = groupUntil<comment, &ignore<(logicStatment | block_command | block_textSyntax | errorBoundary)>>\r\n  groupUntil<T, UNTIL> = syntaxListOf<T, blockEndOf<UNTIL>>\r\n\r\n  content\r\n    = block_logic\r\n    | block_comment\r\n    | emptyLine -- empty\r\n    | block_command\r\n    | block_textSyntax\r\n\r\n  block_textSyntax = block_dialogue | block_action\r\n\r\n  inlineSyntax = ~command_pageBreak command | comment\r\n\r\n  contentBlockEnd = startWith<(lineOf<textSyntax_space> | lineEnd), (textSyntax_action | logicStatment)>\r\n\r\n  block_action($ActionBlock$) = contentBlockLinesOf<action_start, action_content, action_end>\r\n  action_start = ~(command_transition | command_pageBreak) action_plain\r\n  action_plain = textSyntax_action | textSyntax_space\r\n  action_content = inlineSyntax | textSyntax_action | textSyntax_space\r\n  action_end = blockEndOf<&contentBlockEnd>\r\n  \r\n  block_dialogue($CharacterBlock$) = contentBlockLinesOf<character_call, dialogue_content, dialogue_end>\r\n  character_call = padWith<character_name> (optional<character_call_macro> | optional<macro>)\r\n  character_call_macro = character_modifier optional<macro>\r\n  character_modifier = parenStringWith<any>\r\n  dialogue_action = padWith<character_call_macro>\r\n  dialogue_content = dialogue_action | inlineSyntax | leftPadWith<textSyntax_dialogue> | textSyntax_space\r\n  character_name\r\n    = join<upper, (upper|digit|"_")+> -- plain\r\n    | startWith<"@", stringify<(~(character_modifier | "\\n") any)+>> -- esc\r\n  dialogue_end = blockEndOf<&contentBlockEnd>\r\n  \r\n  block_command($CommandBlock$) = groupUntil<command, &(comment)>\r\n  command = command_transition | command_macro | command_pageBreak\r\n  command_transition($Command:Transition$) = ">" leftPadWith<stringify<escWith<("[" | lineBreak | "<")>+>> (~"<" optional<macro>)\r\n  command_macro($Command:CallMacro$) = macro\r\n  command_pageBreak($Command:PageBreak$) = "==="\r\n\r\n\r\n  sToken = \r\n    | sToken_character\r\n    | sToken_action\r\n    | sToken_lyrics\r\n  \r\n  sToken_character($sToken_character$) = "@"\r\n  sToken_action($sToken_action$) = "!"\r\n  sToken_lyrics = "~"\r\n\r\n  textSyntax = textSyntax_action | textSyntax_dialogue | textSyntax_space\r\n\r\n  textSyntax_action = startWith<~sToken_character &any, (sToken_action | sToken_lyrics)?> rightPadWith<textContent> optional<expr_pipe>\r\n\r\n  textSyntax_dialogue = sToken_lyrics? &(~sToken_action any) rightPadWith<textContent> optional<expr_pipe>\r\n  textSyntax_space = lineSpace+\r\n\r\n  emptyLine($EmptyLine$) = lineBreak+\r\n\r\n  blockEnd($blockEnd$) = linePad (lineBreak | end)\r\n  blockEndOf<T>($blockEnd$) = blockEnd | T | &logicStatment\r\n\r\n  lineOf<T> = endWith<T, lineEnd>\r\n  linesOf<T> = endWith<lineOf<T>+, emptyLine?>\r\n\r\n  syntaxListOf<Child, End> = syntaxBlockLinesOf<Child, syntaxOf<(Child | &ignore<lineSpace+>)>, End>\r\n  syntaxOf<T> = T | startWith<ignore<emptyLine+>, ~errorBoundary T>\r\n\r\n  contentLinesOf<Child, End> = contentBlockLinesOf<Child, Child, End>\r\n  // 块内语句之间可以使用\r\n  syntaxBlockLinesOf<Begin, Child, End> = syntaxBlockOf<lineOf<Begin>, lineOf<Child>, End>\r\n  contentBlockLinesOf<Begin, Child, End> = contentBlockOf<lineOf<Begin>, lineOf<Child>, End>\r\n\r\n  \r\n  syntaxBlockOf<Begin, Child, End> = Begin Child* End\r\n  contentBlockOf<Begin, Child, End> = Begin Child* End\r\n  nonemptyBlockOf<Begin, Child, End> = Begin Child+ End\r\n  nonemptyContentBlockOf<Begin, Child, End> = Begin Child+ End\r\n\r\n  statmentBreak($StatmentBreak$) = (block_comment | emptyLine)\r\n  startStatmentOf<T> = bracketSyntaxInline<&(statmentBreak*), T, statmentBreak+>\r\n  statementOf<T> = bracketSyntaxInline<&(statmentBreak*), startWith<linePad, T>, (statmentBreak+ | end)>\r\n\r\n  textContent = styled_centered<(centeredContent | escToken)+> -- centered\r\n    | withText<(textPiece | escToken)+> -- plain\r\n\r\n  // textSyntax_paren<Content> \r\n\r\n  styled_centered<T> = centeredL T centeredR\r\n  centeredL = rightPadWith<">">\r\n  centeredR = leftPadWith<"<">\r\n\r\n  centeredContent = styled<centeredContent> \r\n    | template\r\n    | plainTextUntil<(plainText_until | centeredR)>\r\n  \r\n  withText<T> = T\r\n  textPiece\r\n   = styled<textPiece> -- styled\r\n    | template\r\n    | plainText\r\n\r\n  escToken = oresc<~token_split char>\r\n\r\n  // fountain中的强调（Emphasis）语法\r\n  styled<T>($Emphasis$) =\r\n    | "**" withText<(~(styled_bold<T>) T)+> "**" -- bold\r\n    | "*" withText<(~(styled_italic<T>) T)+> "*" -- italic\r\n    | "_" withText<(~(styled_underline<T>) T)+> "_" -- underline\r\n\r\n  plainText_until = comment | template | macro | token_split | lineEnd | "_" | "*"\r\n  plainText($plainText$) = plainTextUntil<plainText_until>\r\n  plainTextUntil<Until> = rawOf<strictEscWith<char, (Until | lineBreak)>+> // app\r\n  rawOf<T> = stringify<T>\r\n\r\n  expr($Expr$)\r\n    = expr_template\r\n    | expr_logic\r\n    | expr_auto\r\n    | expr_pipe\r\n\r\n  expr_template = embbedExprUntil<"}}">\r\n  expr_logic = embbedExprUntil<lineBreak>\r\n  expr_auto = embbedExprUntil<")">\r\n  expr_pipe($PipeExp$) = token_split embbedExprUntil<token_split>?\r\n\r\n  template($TemplateExp$)\r\n    = bracketSyntaxInline<tokenOf<"[">, plainTextUntil<"](">, tokenOf<"]">> bracketSyntaxInline<"(", expr_auto, ")"> -- label\r\n    | bracketSyntaxInline<"{{", optional<expr_template>, "}}"> -- native \r\n    | comment_inline\r\n    | rawOf<bracketSyntaxInline<"[", embbedExprUntil<"]">, "]">> -- macro\r\n\r\n  macro = bracketSyntaxInline<tokenOf<"[">, embbedExprUntil<"]">, tokenOf<"]">>\r\n  \r\n  // awesomeExpr($awesomeExpr$) = embbedExprUntil<("[" | "]" | "(" | ")" | "}}" | "{{")>\r\n  embbedExprUntil<Exclude>($awesomeExpr$) = stringify<(sourceOf<string> | strictEscWith<char, (Exclude | lineBreak)>)+>\r\n\r\n\r\n  block_logic($LogicStatment$)\r\n    = statementOf<logicSyntax_let>\r\n    | logic_blockIf<content>\r\n    | logic_blockForeach<content>\r\n    | logic_blockWhile<content>\r\n    // | contentBlockLinesOf<logic_block_begin, storyLine, statementOf<logic_end>>\r\n  \r\n  logicSyntax($logicSyntax$)\r\n    = ctlKey<scriptToken_var> leftPadWith<expr_logic> -- let\r\n    | ctlKey<~scriptToken_var scriptToken>\r\n  logicStatment = statementOf<padWith<logicSyntax>>\r\n\r\n  logic_blockIf<T> = statementOf<logic_if> leftPadWith<T>* (statementOf<logic_elseIf> T*)* (statementOf<logic_else> T*)? statementOf<logic_end>\r\n  logic_if = ctlKey<scriptToken_if> padWith<expr_logic>\r\n  logic_elseIf = ctlKey<scriptToken_elseif> padWith<expr_logic>\r\n  logic_else = ctlKey<scriptToken_else>\r\n\r\n  scriptToken = scriptToken_var | scriptToken_if | scriptToken_elseif | scriptToken_else | scriptToken_end | scriptToken_for | scriptToken_while\r\n\r\n  scriptToken_var = "let"\r\n  scriptToken_if = "if"\r\n  scriptToken_elseif = "elseif"\r\n  scriptToken_else = "else"\r\n  scriptToken_end = "end"\r\n  scriptToken_for = "foreach"\r\n  scriptToken_in = "in"\r\n  scriptToken_while = "while"\r\n\r\n\r\n  logic_blockForeach<T> = syntaxBlockOf<lineOf<logic_foreach>, leftPadWith<T>, statementOf<logic_end>>\r\n  logic_foreach = ctlKey<scriptToken_for> preSpaceWith<variableName> preSpaceWith<scriptToken_in> preSpaceWith<expr_logic>\r\n\r\n  logic_blockWhile<T> = syntaxBlockOf<lineOf<logic_while>, leftPadWith<T>, statementOf<logic_end>>\r\n  logic_while = ctlKey<scriptToken_while> preSpaceWith<expr_logic>\r\n\r\n  ctlKey<key> = leftPadWith<join<token_split, key>> // control statment keyword\r\n\r\n  logic_end = ctlKey<scriptToken_end>\r\n\r\n  tokens\r\n    = token*\r\n    \r\n  token\r\n    = comment \r\n    // | kwSelectorPrefix | kwSelectorPart \r\n    | valueToken \r\n    | keyword \r\n    // | instVarAccess\r\n    // | javaStyleSelector \r\n    // | binSelector \r\n    | any\r\n  valueToken = sToken\r\n  // instVarAccess\r\n  //   = "." spaces varName ~(spaces "(")\r\n  // javaStyleSelector\r\n  //   = "." spaces varName &(spaces "(")\r\n  // kwSelectorPrefix\r\n  //   = varName &(space+ expStart)\r\n  // expStart\r\n  //   = valueToken | "(" | "{"\r\n\r\n  keyword = ctlKey<scriptToken>\r\n\r\n}'},"AdvFountain",ie.AdvScript,"Main",{main:["define",{sourceInterval:[30,52]},null,[],["alt",{sourceInterval:[37,52]},["plus",{sourceInterval:[37,46]},["app",{sourceInterval:[37,45]},"statment",[]]],["app",{sourceInterval:[49,52]},"end",[]]]],statment:["define",{sourceInterval:[56,92]},null,[],["alt",{sourceInterval:[67,92]},["app",{sourceInterval:[68,75]},"content",[]],["app",{sourceInterval:[78,91]},"errorBoundary",[]]]],parenWith:["define",{sourceInterval:[98,186]},null,["T"],["alt",{sourceInterval:[113,186]},["app",{sourceInterval:[113,151]},"bracketSyntaxInline",[["app",{sourceInterval:[133,139]},"parenL",[]],["param",{sourceInterval:[141,142]},0],["app",{sourceInterval:[144,150]},"parenR",[]]]],["app",{sourceInterval:[154,186]},"bracketSyntaxInline",[["terminal",{sourceInterval:[174,177]},"（"],["param",{sourceInterval:[179,180]},0],["terminal",{sourceInterval:[182,185]},"）"]]]]],parenStringWith:["define",{sourceInterval:[190,280]},null,["T"],["alt",{sourceInterval:[211,280]},["app",{sourceInterval:[211,247]},"bracketTextInline",[["app",{sourceInterval:[229,235]},"parenL",[]],["param",{sourceInterval:[237,238]},0],["app",{sourceInterval:[240,246]},"parenR",[]]]],["app",{sourceInterval:[250,280]},"bracketTextInline",[["terminal",{sourceInterval:[268,271]},"（"],["param",{sourceInterval:[273,274]},0],["terminal",{sourceInterval:[276,279]},"）"]]]]],bracketWith:["define",{sourceInterval:[286,380]},null,["T"],["alt",{sourceInterval:[303,380]},["app",{sourceInterval:[303,345]},"bracketSyntaxInline",[["app",{sourceInterval:[323,331]},"bracketL",[]],["param",{sourceInterval:[333,334]},0],["app",{sourceInterval:[336,344]},"bracketR",[]]]],["app",{sourceInterval:[348,380]},"bracketSyntaxInline",[["terminal",{sourceInterval:[368,371]},"【"],["param",{sourceInterval:[373,374]},0],["terminal",{sourceInterval:[376,379]},"】"]]]]],bracketStringWith:["define",{sourceInterval:[384,480]},null,["T"],["alt",{sourceInterval:[407,480]},["app",{sourceInterval:[407,447]},"bracketTextInline",[["app",{sourceInterval:[425,433]},"bracketL",[]],["param",{sourceInterval:[435,436]},0],["app",{sourceInterval:[438,446]},"bracketR",[]]]],["app",{sourceInterval:[450,480]},"bracketTextInline",[["terminal",{sourceInterval:[468,471]},"【"],["param",{sourceInterval:[473,474]},0],["terminal",{sourceInterval:[476,479]},"】"]]]]],stringWith:["define",{sourceInterval:[490,525]},null,["Char"],["app",{sourceInterval:[509,525]},"stringify",[["plus",{sourceInterval:[519,524]},["param",{sourceInterval:[519,523]},0]]]]],errorBoundary:["define",{sourceInterval:[531,661]},null,[],["alt",{sourceInterval:[553,661]},["app",{sourceInterval:[553,564]},"ignoreError",[]],["app",{sourceInterval:[572,582]},"logicError",[]],["app",{sourceInterval:[590,604]},"characterError",[]],["app",{sourceInterval:[612,624]},"commandError",[]],["app",{sourceInterval:[632,643]},"actionError",[]],["app",{sourceInterval:[651,661]},"otherError",[]]]],characterError:["define",{sourceInterval:[667,750]},null,[],["app",{sourceInterval:[684,750]},"statementOf",[["app",{sourceInterval:[696,749]},"rawOf",[["app",{sourceInterval:[702,748]},"startWith",[["app",{sourceInterval:[712,728]},"sToken_character",[]],["star",{sourceInterval:[730,747]},["seq",{sourceInterval:[731,745]},["not",{sourceInterval:[731,741]},["app",{sourceInterval:[732,741]},"lineBreak",[]]],["app",{sourceInterval:[742,745]},"any",[]]]]]]]]]]],actionError:["define",{sourceInterval:[754,789]},null,[],["app",{sourceInterval:[768,789]},"linesOf",[["app",{sourceInterval:[776,788]},"action_plain",[]]]]],commandError:["define",{sourceInterval:[793,824]},null,[],["app",{sourceInterval:[808,824]},"linesOf",[["app",{sourceInterval:[816,823]},"command",[]]]]],logicError:["define",{sourceInterval:[828,868]},null,[],["alt",{sourceInterval:[841,868]},["app",{sourceInterval:[841,852]},"block_logic",[]],["app",{sourceInterval:[855,868]},"logicStatment",[]]]],ignoreError:["define",{sourceInterval:[872,925]},null,[],["app",{sourceInterval:[886,925]},"linesOf",[["alt",{sourceInterval:[894,924]},["app",{sourceInterval:[895,902]},"comment",[]],["app",{sourceInterval:[905,923]},"ignore",[["lookahead",{sourceInterval:[912,922]},["app",{sourceInterval:[913,922]},"emptyLine",[]]]]]]]]],otherError_raw:["define",{sourceInterval:[942,1001]},null,[],["app",{sourceInterval:[942,994]},"linesOf",[["seq",{sourceInterval:[950,993]},["not",{sourceInterval:[950,968]},["app",{sourceInterval:[951,968]},"textSyntax_action",[]]],["app",{sourceInterval:[969,993]},"rawOf",[["plus",{sourceInterval:[975,992]},["seq",{sourceInterval:[976,990]},["not",{sourceInterval:[976,986]},["app",{sourceInterval:[977,986]},"lineBreak",[]]],["app",{sourceInterval:[987,990]},"any",[]]]]]]]]]],otherError:["define",{sourceInterval:[929,1001]},null,[],["app",{sourceInterval:[942,1001]},"otherError_raw",[]]],comment_notes:["define",{sourceInterval:[1022,1051]},null,[],["app",{sourceInterval:[1022,1036]},"comment_inline",[]]],comment_inline:["define",{sourceInterval:[1059,1119]},null,[],["app",{sourceInterval:[1059,1108]},"bracketTextInline",[["terminal",{sourceInterval:[1077,1081]},"[["],["app",{sourceInterval:[1083,1086]},"any",[]],["alt",{sourceInterval:[1088,1107]},["terminal",{sourceInterval:[1089,1093]},"]]"],["lookahead",{sourceInterval:[1096,1106]},["app",{sourceInterval:[1097,1106]},"lineBreak",[]]]]]]],comment_single:["define",{sourceInterval:[1127,1223]},null,[],["app",{sourceInterval:[1127,1213]},"startWith",[["app",{sourceInterval:[1137,1161]},"startWith",[["terminal",{sourceInterval:[1147,1151]},"//"],["app",{sourceInterval:[1153,1160]},"linePad",[]]]],["app",{sourceInterval:[1163,1212]},"stringify",[["app",{sourceInterval:[1173,1211]},"endWith",[["star",{sourceInterval:[1181,1200]},["app",{sourceInterval:[1181,1199]},"escWith",[["app",{sourceInterval:[1189,1198]},"lineBreak",[]]]]],["lookahead",{sourceInterval:[1202,1210]},["app",{sourceInterval:[1203,1210]},"lineEnd",[]]]]]]]]]],comment_multi:["define",{sourceInterval:[1231,1296]},null,[],["app",{sourceInterval:[1231,1281]},"bracketText",[["app",{sourceInterval:[1243,1258]},"join",[["terminal",{sourceInterval:[1248,1251]},"/"],["plus",{sourceInterval:[1253,1257]},["terminal",{sourceInterval:[1253,1256]},"*"]]]],["app",{sourceInterval:[1260,1263]},"any",[]],["app",{sourceInterval:[1265,1280]},"join",[["plus",{sourceInterval:[1270,1274]},["terminal",{sourceInterval:[1270,1273]},"*"]],["terminal",{sourceInterval:[1276,1279]},"/"]]]]]],comment:["define",{sourceInterval:[1007,1296]},null,[],["alt",{sourceInterval:[1022,1296]},["app",{sourceInterval:[1022,1036]},"comment_notes",[]],["app",{sourceInterval:[1059,1108]},"comment_inline",[]],["app",{sourceInterval:[1127,1213]},"comment_single",[]],["app",{sourceInterval:[1231,1281]},"comment_multi",[]]]],block_comment:["define",{sourceInterval:[1302,1425]},"$Comment$",[],["app",{sourceInterval:[1329,1425]},"groupUntil",[["app",{sourceInterval:[1340,1347]},"comment",[]],["lookahead",{sourceInterval:[1349,1424]},["app",{sourceInterval:[1350,1424]},"ignore",[["alt",{sourceInterval:[1357,1423]},["app",{sourceInterval:[1358,1371]},"logicStatment",[]],["app",{sourceInterval:[1374,1387]},"block_command",[]],["app",{sourceInterval:[1390,1406]},"block_textSyntax",[]],["app",{sourceInterval:[1409,1422]},"errorBoundary",[]]]]]]]]],groupUntil:["define",{sourceInterval:[1429,1486]},null,["T","UNTIL"],["app",{sourceInterval:[1452,1486]},"syntaxListOf",[["param",{sourceInterval:[1465,1466]},0],["app",{sourceInterval:[1468,1485]},"blockEndOf",[["param",{sourceInterval:[1479,1484]},1]]]]]],content_empty:["define",{sourceInterval:[1547,1565]},null,[],["app",{sourceInterval:[1547,1556]},"emptyLine",[]]],content:["define",{sourceInterval:[1492,1610]},null,[],["alt",{sourceInterval:[1507,1610]},["app",{sourceInterval:[1507,1518]},"block_logic",[]],["app",{sourceInterval:[1526,1539]},"block_comment",[]],["app",{sourceInterval:[1547,1556]},"content_empty",[]],["app",{sourceInterval:[1573,1586]},"block_command",[]],["app",{sourceInterval:[1594,1610]},"block_textSyntax",[]]]],block_textSyntax:["define",{sourceInterval:[1616,1664]},null,[],["alt",{sourceInterval:[1635,1664]},["app",{sourceInterval:[1635,1649]},"block_dialogue",[]],["app",{sourceInterval:[1652,1664]},"block_action",[]]]],inlineSyntax:["define",{sourceInterval:[1670,1721]},null,[],["alt",{sourceInterval:[1685,1721]},["seq",{sourceInterval:[1685,1711]},["not",{sourceInterval:[1685,1703]},["app",{sourceInterval:[1686,1703]},"command_pageBreak",[]]],["app",{sourceInterval:[1704,1711]},"command",[]]],["app",{sourceInterval:[1714,1721]},"comment",[]]]],contentBlockEnd:["define",{sourceInterval:[1727,1829]},null,[],["app",{sourceInterval:[1745,1829]},"startWith",[["alt",{sourceInterval:[1755,1791]},["app",{sourceInterval:[1756,1780]},"lineOf",[["app",{sourceInterval:[1763,1779]},"textSyntax_space",[]]]],["app",{sourceInterval:[1783,1790]},"lineEnd",[]]],["alt",{sourceInterval:[1793,1828]},["app",{sourceInterval:[1794,1811]},"textSyntax_action",[]],["app",{sourceInterval:[1814,1827]},"logicStatment",[]]]]]],block_action:["define",{sourceInterval:[1835,1926]},"$ActionBlock$",[],["app",{sourceInterval:[1865,1926]},"contentBlockLinesOf",[["app",{sourceInterval:[1885,1897]},"action_start",[]],["app",{sourceInterval:[1899,1913]},"action_content",[]],["app",{sourceInterval:[1915,1925]},"action_end",[]]]]],action_start:["define",{sourceInterval:[1930,1999]},null,[],["seq",{sourceInterval:[1945,1999]},["not",{sourceInterval:[1945,1986]},["alt",{sourceInterval:[1947,1985]},["app",{sourceInterval:[1947,1965]},"command_transition",[]],["app",{sourceInterval:[1968,1985]},"command_pageBreak",[]]]],["app",{sourceInterval:[1987,1999]},"action_plain",[]]]],action_plain:["define",{sourceInterval:[2003,2054]},null,[],["alt",{sourceInterval:[2018,2054]},["app",{sourceInterval:[2018,2035]},"textSyntax_action",[]],["app",{sourceInterval:[2038,2054]},"textSyntax_space",[]]]],action_content:["define",{sourceInterval:[2058,2126]},null,[],["alt",{sourceInterval:[2075,2126]},["app",{sourceInterval:[2075,2087]},"inlineSyntax",[]],["app",{sourceInterval:[2090,2107]},"textSyntax_action",[]],["app",{sourceInterval:[2110,2126]},"textSyntax_space",[]]]],action_end:["define",{sourceInterval:[2130,2171]},null,[],["app",{sourceInterval:[2143,2171]},"blockEndOf",[["lookahead",{sourceInterval:[2154,2170]},["app",{sourceInterval:[2155,2170]},"contentBlockEnd",[]]]]]],block_dialogue:["define",{sourceInterval:[2179,2281]},"$CharacterBlock$",[],["app",{sourceInterval:[2214,2281]},"contentBlockLinesOf",[["app",{sourceInterval:[2234,2248]},"character_call",[]],["app",{sourceInterval:[2250,2266]},"dialogue_content",[]],["app",{sourceInterval:[2268,2280]},"dialogue_end",[]]]]],character_call:["define",{sourceInterval:[2285,2376]},null,[],["seq",{sourceInterval:[2302,2376]},["app",{sourceInterval:[2302,2325]},"padWith",[["app",{sourceInterval:[2310,2324]},"character_name",[]]]],["alt",{sourceInterval:[2327,2375]},["app",{sourceInterval:[2327,2357]},"optional",[["app",{sourceInterval:[2336,2356]},"character_call_macro",[]]]],["app",{sourceInterval:[2360,2375]},"optional",[["app",{sourceInterval:[2369,2374]},"macro",[]]]]]]],character_call_macro:["define",{sourceInterval:[2380,2437]},null,[],["seq",{sourceInterval:[2403,2437]},["app",{sourceInterval:[2403,2421]},"character_modifier",[]],["app",{sourceInterval:[2422,2437]},"optional",[["app",{sourceInterval:[2431,2436]},"macro",[]]]]]],character_modifier:["define",{sourceInterval:[2441,2482]},null,[],["app",{sourceInterval:[2462,2482]},"parenStringWith",[["app",{sourceInterval:[2478,2481]},"any",[]]]]],dialogue_action:["define",{sourceInterval:[2486,2533]},null,[],["app",{sourceInterval:[2504,2533]},"padWith",[["app",{sourceInterval:[2512,2532]},"character_call_macro",[]]]]],dialogue_content:["define",{sourceInterval:[2537,2640]},null,[],["alt",{sourceInterval:[2556,2640]},["app",{sourceInterval:[2556,2571]},"dialogue_action",[]],["app",{sourceInterval:[2574,2586]},"inlineSyntax",[]],["app",{sourceInterval:[2589,2621]},"leftPadWith",[["app",{sourceInterval:[2601,2620]},"textSyntax_dialogue",[]]]],["app",{sourceInterval:[2624,2640]},"textSyntax_space",[]]]],character_name_plain:["define",{sourceInterval:[2666,2706]},null,[],["app",{sourceInterval:[2666,2697]},"join",[["app",{sourceInterval:[2671,2676]},"upper",[]],["plus",{sourceInterval:[2678,2696]},["alt",{sourceInterval:[2679,2694]},["app",{sourceInterval:[2679,2684]},"upper",[]],["app",{sourceInterval:[2685,2690]},"digit",[]],["terminal",{sourceInterval:[2691,2694]},"_"]]]]]],character_name_esc:["define",{sourceInterval:[2714,2783]},null,[],["app",{sourceInterval:[2714,2776]},"startWith",[["terminal",{sourceInterval:[2724,2727]},"@"],["app",{sourceInterval:[2729,2775]},"stringify",[["plus",{sourceInterval:[2739,2774]},["seq",{sourceInterval:[2740,2772]},["not",{sourceInterval:[2740,2768]},["alt",{sourceInterval:[2742,2767]},["app",{sourceInterval:[2742,2760]},"character_modifier",[]],["terminal",{sourceInterval:[2763,2767]},"\n"]]],["app",{sourceInterval:[2769,2772]},"any",[]]]]]]]]],character_name:["define",{sourceInterval:[2644,2783]},null,[],["alt",{sourceInterval:[2666,2783]},["app",{sourceInterval:[2666,2697]},"character_name_plain",[]],["app",{sourceInterval:[2714,2776]},"character_name_esc",[]]]],dialogue_end:["define",{sourceInterval:[2787,2830]},null,[],["app",{sourceInterval:[2802,2830]},"blockEndOf",[["lookahead",{sourceInterval:[2813,2829]},["app",{sourceInterval:[2814,2829]},"contentBlockEnd",[]]]]]],block_command:["define",{sourceInterval:[2838,2901]},"$CommandBlock$",[],["app",{sourceInterval:[2870,2901]},"groupUntil",[["app",{sourceInterval:[2881,2888]},"command",[]],["lookahead",{sourceInterval:[2890,2900]},["app",{sourceInterval:[2892,2899]},"comment",[]]]]]],command:["define",{sourceInterval:[2905,2969]},null,[],["alt",{sourceInterval:[2915,2969]},["app",{sourceInterval:[2915,2933]},"command_transition",[]],["app",{sourceInterval:[2936,2949]},"command_macro",[]],["app",{sourceInterval:[2952,2969]},"command_pageBreak",[]]]],command_transition:["define",{sourceInterval:[2973,3100]},"$Command:Transition$",[],["seq",{sourceInterval:[3016,3100]},["terminal",{sourceInterval:[3016,3019]},">"],["app",{sourceInterval:[3020,3077]},"leftPadWith",[["app",{sourceInterval:[3032,3076]},"stringify",[["plus",{sourceInterval:[3042,3075]},["app",{sourceInterval:[3042,3074]},"escWith",[["alt",{sourceInterval:[3050,3073]},["terminal",{sourceInterval:[3051,3054]},"["],["app",{sourceInterval:[3057,3066]},"lineBreak",[]],["terminal",{sourceInterval:[3069,3072]},"<"]]]]]]]]],["not",{sourceInterval:[3079,3083]},["terminal",{sourceInterval:[3080,3083]},"<"]],["app",{sourceInterval:[3084,3099]},"optional",[["app",{sourceInterval:[3093,3098]},"macro",[]]]]]],command_macro:["define",{sourceInterval:[3104,3146]},"$Command:CallMacro$",[],["app",{sourceInterval:[3141,3146]},"macro",[]]],command_pageBreak:["define",{sourceInterval:[3150,3196]},"$Command:PageBreak$",[],["terminal",{sourceInterval:[3191,3196]},"==="]],sToken:["define",{sourceInterval:[3204,3279]},null,[],["alt",{sourceInterval:[3219,3279]},["app",{sourceInterval:[3221,3237]},"sToken_character",[]],["app",{sourceInterval:[3245,3258]},"sToken_action",[]],["app",{sourceInterval:[3266,3279]},"sToken_lyrics",[]]]],sToken_character:["define",{sourceInterval:[3287,3329]},"$sToken_character$",[],["terminal",{sourceInterval:[3326,3329]},"@"]],sToken_action:["define",{sourceInterval:[3333,3369]},"$sToken_action$",[],["terminal",{sourceInterval:[3366,3369]},"!"]],sToken_lyrics:["define",{sourceInterval:[3373,3392]},null,[],["terminal",{sourceInterval:[3389,3392]},"~"]],textSyntax:["define",{sourceInterval:[3398,3469]},null,[],["alt",{sourceInterval:[3411,3469]},["app",{sourceInterval:[3411,3428]},"textSyntax_action",[]],["app",{sourceInterval:[3431,3450]},"textSyntax_dialogue",[]],["app",{sourceInterval:[3453,3469]},"textSyntax_space",[]]]],textSyntax_action:["define",{sourceInterval:[3475,3608]},null,[],["seq",{sourceInterval:[3495,3608]},["app",{sourceInterval:[3495,3562]},"startWith",[["seq",{sourceInterval:[3505,3527]},["not",{sourceInterval:[3505,3522]},["app",{sourceInterval:[3506,3522]},"sToken_character",[]]],["lookahead",{sourceInterval:[3523,3527]},["app",{sourceInterval:[3524,3527]},"any",[]]]],["opt",{sourceInterval:[3529,3561]},["alt",{sourceInterval:[3530,3559]},["app",{sourceInterval:[3530,3543]},"sToken_action",[]],["app",{sourceInterval:[3546,3559]},"sToken_lyrics",[]]]]]],["app",{sourceInterval:[3563,3588]},"rightPadWith",[["app",{sourceInterval:[3576,3587]},"textContent",[]]]],["app",{sourceInterval:[3589,3608]},"optional",[["app",{sourceInterval:[3598,3607]},"expr_pipe",[]]]]]],textSyntax_dialogue:["define",{sourceInterval:[3614,3718]},null,[],["seq",{sourceInterval:[3636,3718]},["opt",{sourceInterval:[3636,3650]},["app",{sourceInterval:[3636,3649]},"sToken_lyrics",[]]],["lookahead",{sourceInterval:[3651,3672]},["seq",{sourceInterval:[3653,3671]},["not",{sourceInterval:[3653,3667]},["app",{sourceInterval:[3654,3667]},"sToken_action",[]]],["app",{sourceInterval:[3668,3671]},"any",[]]]],["app",{sourceInterval:[3673,3698]},"rightPadWith",[["app",{sourceInterval:[3686,3697]},"textContent",[]]]],["app",{sourceInterval:[3699,3718]},"optional",[["app",{sourceInterval:[3708,3717]},"expr_pipe",[]]]]]],textSyntax_space:["define",{sourceInterval:[3722,3751]},null,[],["plus",{sourceInterval:[3741,3751]},["app",{sourceInterval:[3741,3750]},"lineSpace",[]]]],emptyLine:["define",{sourceInterval:[3757,3792]},"$EmptyLine$",[],["plus",{sourceInterval:[3782,3792]},["app",{sourceInterval:[3782,3791]},"lineBreak",[]]]],blockEnd:["define",{sourceInterval:[3798,3846]},"$blockEnd$",[],["seq",{sourceInterval:[3821,3846]},["app",{sourceInterval:[3821,3828]},"linePad",[]],["alt",{sourceInterval:[3830,3845]},["app",{sourceInterval:[3830,3839]},"lineBreak",[]],["app",{sourceInterval:[3842,3845]},"end",[]]]]],blockEndOf:["define",{sourceInterval:[3850,3907]},"$blockEnd$",["T"],["alt",{sourceInterval:[3878,3907]},["app",{sourceInterval:[3878,3886]},"blockEnd",[]],["param",{sourceInterval:[3889,3890]},0],["lookahead",{sourceInterval:[3893,3907]},["app",{sourceInterval:[3894,3907]},"logicStatment",[]]]]],lineOf:["define",{sourceInterval:[3913,3944]},null,["T"],["app",{sourceInterval:[3925,3944]},"endWith",[["param",{sourceInterval:[3933,3934]},0],["app",{sourceInterval:[3936,3943]},"lineEnd",[]]]]],linesOf:["define",{sourceInterval:[3948,3992]},null,["T"],["app",{sourceInterval:[3961,3992]},"endWith",[["plus",{sourceInterval:[3969,3979]},["app",{sourceInterval:[3969,3978]},"lineOf",[["param",{sourceInterval:[3976,3977]},0]]]],["opt",{sourceInterval:[3981,3991]},["app",{sourceInterval:[3981,3990]},"emptyLine",[]]]]]],syntaxListOf:["define",{sourceInterval:[3998,4096]},null,["Child","End"],["app",{sourceInterval:[4025,4096]},"syntaxBlockLinesOf",[["param",{sourceInterval:[4044,4049]},0],["app",{sourceInterval:[4051,4090]},"syntaxOf",[["alt",{sourceInterval:[4060,4089]},["param",{sourceInterval:[4061,4066]},0],["lookahead",{sourceInterval:[4069,4088]},["app",{sourceInterval:[4070,4088]},"ignore",[["plus",{sourceInterval:[4077,4087]},["app",{sourceInterval:[4077,4086]},"lineSpace",[]]]]]]]]],["param",{sourceInterval:[4092,4095]},1]]]],syntaxOf:["define",{sourceInterval:[4100,4165]},null,["T"],["alt",{sourceInterval:[4114,4165]},["param",{sourceInterval:[4114,4115]},0],["app",{sourceInterval:[4118,4165]},"startWith",[["app",{sourceInterval:[4128,4146]},"ignore",[["plus",{sourceInterval:[4135,4145]},["app",{sourceInterval:[4135,4144]},"emptyLine",[]]]]],["seq",{sourceInterval:[4148,4164]},["not",{sourceInterval:[4148,4162]},["app",{sourceInterval:[4149,4162]},"errorBoundary",[]]],["param",{sourceInterval:[4163,4164]},0]]]]]],contentLinesOf:["define",{sourceInterval:[4171,4238]},null,["Child","End"],["app",{sourceInterval:[4200,4238]},"contentBlockLinesOf",[["param",{sourceInterval:[4220,4225]},0],["param",{sourceInterval:[4227,4232]},0],["param",{sourceInterval:[4234,4237]},1]]]],syntaxBlockLinesOf:["define",{sourceInterval:[4259,4347]},null,["Begin","Child","End"],["app",{sourceInterval:[4299,4347]},"syntaxBlockOf",[["app",{sourceInterval:[4313,4326]},"lineOf",[["param",{sourceInterval:[4320,4325]},0]]],["app",{sourceInterval:[4328,4341]},"lineOf",[["param",{sourceInterval:[4335,4340]},1]]],["param",{sourceInterval:[4343,4346]},2]]]],contentBlockLinesOf:["define",{sourceInterval:[4351,4441]},null,["Begin","Child","End"],["app",{sourceInterval:[4392,4441]},"contentBlockOf",[["app",{sourceInterval:[4407,4420]},"lineOf",[["param",{sourceInterval:[4414,4419]},0]]],["app",{sourceInterval:[4422,4435]},"lineOf",[["param",{sourceInterval:[4429,4434]},1]]],["param",{sourceInterval:[4437,4440]},2]]]],syntaxBlockOf:["define",{sourceInterval:[4451,4502]},null,["Begin","Child","End"],["seq",{sourceInterval:[4486,4502]},["param",{sourceInterval:[4486,4491]},0],["star",{sourceInterval:[4492,4498]},["param",{sourceInterval:[4492,4497]},1]],["param",{sourceInterval:[4499,4502]},2]]],contentBlockOf:["define",{sourceInterval:[4506,4558]},null,["Begin","Child","End"],["seq",{sourceInterval:[4542,4558]},["param",{sourceInterval:[4542,4547]},0],["star",{sourceInterval:[4548,4554]},["param",{sourceInterval:[4548,4553]},1]],["param",{sourceInterval:[4555,4558]},2]]],nonemptyBlockOf:["define",{sourceInterval:[4562,4615]},null,["Begin","Child","End"],["seq",{sourceInterval:[4599,4615]},["param",{sourceInterval:[4599,4604]},0],["plus",{sourceInterval:[4605,4611]},["param",{sourceInterval:[4605,4610]},1]],["param",{sourceInterval:[4612,4615]},2]]],nonemptyContentBlockOf:["define",{sourceInterval:[4619,4679]},null,["Begin","Child","End"],["seq",{sourceInterval:[4663,4679]},["param",{sourceInterval:[4663,4668]},0],["plus",{sourceInterval:[4669,4675]},["param",{sourceInterval:[4669,4674]},1]],["param",{sourceInterval:[4676,4679]},2]]],statmentBreak:["define",{sourceInterval:[4685,4745]},"$StatmentBreak$",[],["alt",{sourceInterval:[4718,4745]},["app",{sourceInterval:[4719,4732]},"block_comment",[]],["app",{sourceInterval:[4735,4744]},"emptyLine",[]]]],startStatmentOf:["define",{sourceInterval:[4749,4827]},null,["T"],["app",{sourceInterval:[4770,4827]},"bracketSyntaxInline",[["lookahead",{sourceInterval:[4790,4807]},["star",{sourceInterval:[4792,4806]},["app",{sourceInterval:[4792,4805]},"statmentBreak",[]]]],["param",{sourceInterval:[4809,4810]},0],["plus",{sourceInterval:[4812,4826]},["app",{sourceInterval:[4812,4825]},"statmentBreak",[]]]]]],statementOf:["define",{sourceInterval:[4831,4933]},null,["T"],["app",{sourceInterval:[4848,4933]},"bracketSyntaxInline",[["lookahead",{sourceInterval:[4868,4885]},["star",{sourceInterval:[4870,4884]},["app",{sourceInterval:[4870,4883]},"statmentBreak",[]]]],["app",{sourceInterval:[4887,4908]},"startWith",[["app",{sourceInterval:[4897,4904]},"linePad",[]],["param",{sourceInterval:[4906,4907]},0]]],["alt",{sourceInterval:[4910,4932]},["plus",{sourceInterval:[4911,4925]},["app",{sourceInterval:[4911,4924]},"statmentBreak",[]]],["app",{sourceInterval:[4928,4931]},"end",[]]]]]],textContent_centered:["define",{sourceInterval:[4953,5011]},null,[],["app",{sourceInterval:[4953,4999]},"styled_centered",[["plus",{sourceInterval:[4969,4998]},["alt",{sourceInterval:[4970,4996]},["app",{sourceInterval:[4970,4985]},"centeredContent",[]],["app",{sourceInterval:[4988,4996]},"escToken",[]]]]]]],textContent_plain:["define",{sourceInterval:[5019,5061]},null,[],["app",{sourceInterval:[5019,5052]},"withText",[["plus",{sourceInterval:[5028,5051]},["alt",{sourceInterval:[5029,5049]},["app",{sourceInterval:[5029,5038]},"textPiece",[]],["app",{sourceInterval:[5041,5049]},"escToken",[]]]]]]],textContent:["define",{sourceInterval:[4939,5061]},null,[],["alt",{sourceInterval:[4953,5061]},["app",{sourceInterval:[4953,4999]},"textContent_centered",[]],["app",{sourceInterval:[5019,5052]},"textContent_plain",[]]]],styled_centered:["define",{sourceInterval:[5102,5144]},null,["T"],["seq",{sourceInterval:[5123,5144]},["app",{sourceInterval:[5123,5132]},"centeredL",[]],["param",{sourceInterval:[5133,5134]},0],["app",{sourceInterval:[5135,5144]},"centeredR",[]]]],centeredL:["define",{sourceInterval:[5148,5177]},null,[],["app",{sourceInterval:[5160,5177]},"rightPadWith",[["terminal",{sourceInterval:[5173,5176]},">"]]]],centeredR:["define",{sourceInterval:[5181,5209]},null,[],["app",{sourceInterval:[5193,5209]},"leftPadWith",[["terminal",{sourceInterval:[5205,5208]},"<"]]]],centeredContent:["define",{sourceInterval:[5215,5326]},null,[],["alt",{sourceInterval:[5233,5326]},["app",{sourceInterval:[5233,5256]},"styled",[["app",{sourceInterval:[5240,5255]},"centeredContent",[]]]],["app",{sourceInterval:[5265,5273]},"template",[]],["app",{sourceInterval:[5281,5326]},"plainTextUntil",[["alt",{sourceInterval:[5296,5325]},["app",{sourceInterval:[5297,5312]},"plainText_until",[]],["app",{sourceInterval:[5315,5324]},"centeredR",[]]]]]]],withText:["define",{sourceInterval:[5334,5349]},null,["T"],["param",{sourceInterval:[5348,5349]},0]],textPiece_styled:["define",{sourceInterval:[5369,5396]},null,[],["app",{sourceInterval:[5369,5386]},"styled",[["app",{sourceInterval:[5376,5385]},"textPiece",[]]]]],textPiece:["define",{sourceInterval:[5353,5429]},null,[],["alt",{sourceInterval:[5369,5429]},["app",{sourceInterval:[5369,5386]},"textPiece_styled",[]],["app",{sourceInterval:[5404,5412]},"template",[]],["app",{sourceInterval:[5420,5429]},"plainText",[]]]],escToken:["define",{sourceInterval:[5435,5470]},null,[],["app",{sourceInterval:[5446,5470]},"oresc",[["seq",{sourceInterval:[5452,5469]},["not",{sourceInterval:[5452,5464]},["app",{sourceInterval:[5453,5464]},"token_split",[]]],["app",{sourceInterval:[5465,5469]},"char",[]]]]]],styled_bold:["define",{sourceInterval:[5538,5588]},null,["T"],["seq",{sourceInterval:[5538,5580]},["terminal",{sourceInterval:[5538,5542]},"**"],["app",{sourceInterval:[5543,5575]},"withText",[["plus",{sourceInterval:[5552,5574]},["seq",{sourceInterval:[5553,5572]},["not",{sourceInterval:[5553,5570]},["app",{sourceInterval:[5555,5569]},"styled_bold",[["param",{sourceInterval:[5567,5568]},0]]]],["param",{sourceInterval:[5571,5572]},0]]]]],["terminal",{sourceInterval:[5576,5580]},"**"]]],styled_italic:["define",{sourceInterval:[5596,5648]},null,["T"],["seq",{sourceInterval:[5596,5638]},["terminal",{sourceInterval:[5596,5599]},"*"],["app",{sourceInterval:[5600,5634]},"withText",[["plus",{sourceInterval:[5609,5633]},["seq",{sourceInterval:[5610,5631]},["not",{sourceInterval:[5610,5629]},["app",{sourceInterval:[5612,5628]},"styled_italic",[["param",{sourceInterval:[5626,5627]},0]]]],["param",{sourceInterval:[5630,5631]},0]]]]],["terminal",{sourceInterval:[5635,5638]},"*"]]],styled_underline:["define",{sourceInterval:[5656,5714]},null,["T"],["seq",{sourceInterval:[5656,5701]},["terminal",{sourceInterval:[5656,5659]},"_"],["app",{sourceInterval:[5660,5697]},"withText",[["plus",{sourceInterval:[5669,5696]},["seq",{sourceInterval:[5670,5694]},["not",{sourceInterval:[5670,5692]},["app",{sourceInterval:[5672,5691]},"styled_underline",[["param",{sourceInterval:[5689,5690]},0]]]],["param",{sourceInterval:[5693,5694]},0]]]]],["terminal",{sourceInterval:[5698,5701]},"_"]]],styled:["define",{sourceInterval:[5507,5714]},"$Emphasis$",["T"],["alt",{sourceInterval:[5536,5714]},["app",{sourceInterval:[5538,5580]},"styled_bold",[["param",{},0]]],["app",{sourceInterval:[5596,5638]},"styled_italic",[["param",{},0]]],["app",{sourceInterval:[5656,5701]},"styled_underline",[["param",{},0]]]]],plainText_until:["define",{sourceInterval:[5720,5800]},null,[],["alt",{sourceInterval:[5738,5800]},["app",{sourceInterval:[5738,5745]},"comment",[]],["app",{sourceInterval:[5748,5756]},"template",[]],["app",{sourceInterval:[5759,5764]},"macro",[]],["app",{sourceInterval:[5767,5778]},"token_split",[]],["app",{sourceInterval:[5781,5788]},"lineEnd",[]],["terminal",{sourceInterval:[5791,5794]},"_"],["terminal",{sourceInterval:[5797,5800]},"*"]]],plainText:["define",{sourceInterval:[5804,5860]},"$plainText$",[],["app",{sourceInterval:[5829,5860]},"plainTextUntil",[["app",{sourceInterval:[5844,5859]},"plainText_until",[]]]]],plainTextUntil:["define",{sourceInterval:[5864,5936]},null,["Until"],["app",{sourceInterval:[5888,5936]},"rawOf",[["plus",{sourceInterval:[5894,5935]},["app",{sourceInterval:[5894,5934]},"strictEscWith",[["app",{sourceInterval:[5908,5912]},"char",[]],["alt",{sourceInterval:[5914,5933]},["param",{sourceInterval:[5915,5920]},0],["app",{sourceInterval:[5923,5932]},"lineBreak",[]]]]]]]]],rawOf:["define",{sourceInterval:[5947,5970]},null,["T"],["app",{sourceInterval:[5958,5970]},"stringify",[["param",{sourceInterval:[5968,5969]},0]]]],expr:["define",{sourceInterval:[5976,6061]},"$Expr$",[],["alt",{sourceInterval:[5996,6061]},["app",{sourceInterval:[5996,6009]},"expr_template",[]],["app",{sourceInterval:[6017,6027]},"expr_logic",[]],["app",{sourceInterval:[6035,6044]},"expr_auto",[]],["app",{sourceInterval:[6052,6061]},"expr_pipe",[]]]],expr_template:["define",{sourceInterval:[6067,6104]},null,[],["app",{sourceInterval:[6083,6104]},"embbedExprUntil",[["terminal",{sourceInterval:[6099,6103]},"}}"]]]],expr_logic:["define",{sourceInterval:[6108,6147]},null,[],["app",{sourceInterval:[6121,6147]},"embbedExprUntil",[["app",{sourceInterval:[6137,6146]},"lineBreak",[]]]]],expr_auto:["define",{sourceInterval:[6151,6183]},null,[],["app",{sourceInterval:[6163,6183]},"embbedExprUntil",[["terminal",{sourceInterval:[6179,6182]},")"]]]],expr_pipe:["define",{sourceInterval:[6187,6251]},"$PipeExp$",[],["seq",{sourceInterval:[6210,6251]},["app",{sourceInterval:[6210,6221]},"token_split",[]],["opt",{sourceInterval:[6222,6251]},["app",{sourceInterval:[6222,6250]},"embbedExprUntil",[["app",{sourceInterval:[6238,6249]},"token_split",[]]]]]]],template_label:["define",{sourceInterval:[6288,6407]},null,[],["seq",{sourceInterval:[6288,6398]},["app",{sourceInterval:[6288,6357]},"bracketSyntaxInline",[["app",{sourceInterval:[6308,6320]},"tokenOf",[["terminal",{sourceInterval:[6316,6319]},"["]]],["app",{sourceInterval:[6322,6342]},"plainTextUntil",[["terminal",{sourceInterval:[6337,6341]},"]("]]],["app",{sourceInterval:[6344,6356]},"tokenOf",[["terminal",{sourceInterval:[6352,6355]},"]"]]]]],["app",{sourceInterval:[6358,6398]},"bracketSyntaxInline",[["terminal",{sourceInterval:[6378,6381]},"("],["app",{sourceInterval:[6383,6392]},"expr_auto",[]],["terminal",{sourceInterval:[6394,6397]},")"]]]]],template_native:["define",{sourceInterval:[6415,6481]},null,[],["app",{sourceInterval:[6415,6471]},"bracketSyntaxInline",[["terminal",{sourceInterval:[6435,6439]},"{{"],["app",{sourceInterval:[6441,6464]},"optional",[["app",{sourceInterval:[6450,6463]},"expr_template",[]]]],["terminal",{sourceInterval:[6466,6470]},"}}"]]]],template_macro:["define",{sourceInterval:[6512,6579]},null,[],["app",{sourceInterval:[6512,6570]},"rawOf",[["app",{sourceInterval:[6518,6569]},"bracketSyntaxInline",[["terminal",{sourceInterval:[6538,6541]},"["],["app",{sourceInterval:[6543,6563]},"embbedExprUntil",[["terminal",{sourceInterval:[6559,6562]},"]"]]],["terminal",{sourceInterval:[6565,6568]},"]"]]]]]],template:["define",{sourceInterval:[6257,6579]},"$TemplateExp$",[],["alt",{sourceInterval:[6288,6579]},["app",{sourceInterval:[6288,6398]},"template_label",[]],["app",{sourceInterval:[6415,6471]},"template_native",[]],["app",{sourceInterval:[6490,6504]},"comment_inline",[]],["app",{sourceInterval:[6512,6570]},"template_macro",[]]]],macro:["define",{sourceInterval:[6585,6662]},null,[],["app",{sourceInterval:[6593,6662]},"bracketSyntaxInline",[["app",{sourceInterval:[6613,6625]},"tokenOf",[["terminal",{sourceInterval:[6621,6624]},"["]]],["app",{sourceInterval:[6627,6647]},"embbedExprUntil",[["terminal",{sourceInterval:[6643,6646]},"]"]]],["app",{sourceInterval:[6649,6661]},"tokenOf",[["terminal",{sourceInterval:[6657,6660]},"]"]]]]]],embbedExprUntil:["define",{sourceInterval:[6760,6877]},"$awesomeExpr$",["Exclude"],["app",{sourceInterval:[6802,6877]},"stringify",[["plus",{sourceInterval:[6812,6876]},["alt",{sourceInterval:[6813,6874]},["app",{sourceInterval:[6813,6829]},"sourceOf",[["app",{sourceInterval:[6822,6828]},"string",[]]]],["app",{sourceInterval:[6832,6874]},"strictEscWith",[["app",{sourceInterval:[6846,6850]},"char",[]],["alt",{sourceInterval:[6852,6873]},["param",{sourceInterval:[6853,6860]},0],["app",{sourceInterval:[6863,6872]},"lineBreak",[]]]]]]]]]],block_logic:["define",{sourceInterval:[6885,7047]},"$LogicStatment$",[],["alt",{sourceInterval:[6921,7047]},["app",{sourceInterval:[6921,6949]},"statementOf",[["app",{sourceInterval:[6933,6948]},"logicSyntax_let",[]]]],["app",{sourceInterval:[6957,6979]},"logic_blockIf",[["app",{sourceInterval:[6971,6978]},"content",[]]]],["app",{sourceInterval:[6987,7014]},"logic_blockForeach",[["app",{sourceInterval:[7006,7013]},"content",[]]]],["app",{sourceInterval:[7022,7047]},"logic_blockWhile",[["app",{sourceInterval:[7039,7046]},"content",[]]]]]],logicSyntax_let:["define",{sourceInterval:[7173,7227]},null,[],["seq",{sourceInterval:[7173,7220]},["app",{sourceInterval:[7173,7196]},"ctlKey",[["app",{sourceInterval:[7180,7195]},"scriptToken_var",[]]]],["app",{sourceInterval:[7197,7220]},"leftPadWith",[["app",{sourceInterval:[7209,7219]},"expr_logic",[]]]]]],logicSyntax:["define",{sourceInterval:[7139,7271]},"$logicSyntax$",[],["alt",{sourceInterval:[7173,7271]},["app",{sourceInterval:[7173,7220]},"logicSyntax_let",[]],["app",{sourceInterval:[7235,7271]},"ctlKey",[["seq",{sourceInterval:[7242,7270]},["not",{sourceInterval:[7242,7258]},["app",{sourceInterval:[7243,7258]},"scriptToken_var",[]]],["app",{sourceInterval:[7259,7270]},"scriptToken",[]]]]]]],logicStatment:["define",{sourceInterval:[7275,7324]},null,[],["app",{sourceInterval:[7291,7324]},"statementOf",[["app",{sourceInterval:[7303,7323]},"padWith",[["app",{sourceInterval:[7311,7322]},"logicSyntax",[]]]]]]],logic_blockIf:["define",{sourceInterval:[7330,7471]},null,["T"],["seq",{sourceInterval:[7349,7471]},["app",{sourceInterval:[7349,7370]},"statementOf",[["app",{sourceInterval:[7361,7369]},"logic_if",[]]]],["star",{sourceInterval:[7371,7386]},["app",{sourceInterval:[7371,7385]},"leftPadWith",[["param",{sourceInterval:[7383,7384]},0]]]],["star",{sourceInterval:[7387,7418]},["seq",{sourceInterval:[7388,7416]},["app",{sourceInterval:[7388,7413]},"statementOf",[["app",{sourceInterval:[7400,7412]},"logic_elseIf",[]]]],["star",{sourceInterval:[7414,7416]},["param",{sourceInterval:[7414,7415]},0]]]],["opt",{sourceInterval:[7419,7448]},["seq",{sourceInterval:[7420,7446]},["app",{sourceInterval:[7420,7443]},"statementOf",[["app",{sourceInterval:[7432,7442]},"logic_else",[]]]],["star",{sourceInterval:[7444,7446]},["param",{sourceInterval:[7444,7445]},0]]]],["app",{sourceInterval:[7449,7471]},"statementOf",[["app",{sourceInterval:[7461,7470]},"logic_end",[]]]]]],logic_if:["define",{sourceInterval:[7475,7528]},null,[],["seq",{sourceInterval:[7486,7528]},["app",{sourceInterval:[7486,7508]},"ctlKey",[["app",{sourceInterval:[7493,7507]},"scriptToken_if",[]]]],["app",{sourceInterval:[7509,7528]},"padWith",[["app",{sourceInterval:[7517,7527]},"expr_logic",[]]]]]],logic_elseIf:["define",{sourceInterval:[7532,7593]},null,[],["seq",{sourceInterval:[7547,7593]},["app",{sourceInterval:[7547,7573]},"ctlKey",[["app",{sourceInterval:[7554,7572]},"scriptToken_elseif",[]]]],["app",{sourceInterval:[7574,7593]},"padWith",[["app",{sourceInterval:[7582,7592]},"expr_logic",[]]]]]],logic_else:["define",{sourceInterval:[7597,7634]},null,[],["app",{sourceInterval:[7610,7634]},"ctlKey",[["app",{sourceInterval:[7617,7633]},"scriptToken_else",[]]]]],scriptToken:["define",{sourceInterval:[7640,7782]},null,[],["alt",{sourceInterval:[7654,7782]},["app",{sourceInterval:[7654,7669]},"scriptToken_var",[]],["app",{sourceInterval:[7672,7686]},"scriptToken_if",[]],["app",{sourceInterval:[7689,7707]},"scriptToken_elseif",[]],["app",{sourceInterval:[7710,7726]},"scriptToken_else",[]],["app",{sourceInterval:[7729,7744]},"scriptToken_end",[]],["app",{sourceInterval:[7747,7762]},"scriptToken_for",[]],["app",{sourceInterval:[7765,7782]},"scriptToken_while",[]]]],scriptToken_var:["define",{sourceInterval:[7788,7811]},null,[],["terminal",{sourceInterval:[7806,7811]},"let"]],scriptToken_if:["define",{sourceInterval:[7815,7836]},null,[],["terminal",{sourceInterval:[7832,7836]},"if"]],scriptToken_elseif:["define",{sourceInterval:[7840,7869]},null,[],["terminal",{sourceInterval:[7861,7869]},"elseif"]],scriptToken_else:["define",{sourceInterval:[7873,7898]},null,[],["terminal",{sourceInterval:[7892,7898]},"else"]],scriptToken_end:["define",{sourceInterval:[7902,7925]},null,[],["terminal",{sourceInterval:[7920,7925]},"end"]],scriptToken_for:["define",{sourceInterval:[7929,7956]},null,[],["terminal",{sourceInterval:[7947,7956]},"foreach"]],scriptToken_in:["define",{sourceInterval:[7960,7981]},null,[],["terminal",{sourceInterval:[7977,7981]},"in"]],scriptToken_while:["define",{sourceInterval:[7985,8012]},null,[],["terminal",{sourceInterval:[8005,8012]},"while"]],logic_blockForeach:["define",{sourceInterval:[8020,8120]},null,["T"],["app",{sourceInterval:[8044,8120]},"syntaxBlockOf",[["app",{sourceInterval:[8058,8079]},"lineOf",[["app",{sourceInterval:[8065,8078]},"logic_foreach",[]]]],["app",{sourceInterval:[8081,8095]},"leftPadWith",[["param",{sourceInterval:[8093,8094]},0]]],["app",{sourceInterval:[8097,8119]},"statementOf",[["app",{sourceInterval:[8109,8118]},"logic_end",[]]]]]]],logic_foreach:["define",{sourceInterval:[8124,8244]},null,[],["seq",{sourceInterval:[8140,8244]},["app",{sourceInterval:[8140,8163]},"ctlKey",[["app",{sourceInterval:[8147,8162]},"scriptToken_for",[]]]],["app",{sourceInterval:[8164,8190]},"preSpaceWith",[["app",{sourceInterval:[8177,8189]},"variableName",[]]]],["app",{sourceInterval:[8191,8219]},"preSpaceWith",[["app",{sourceInterval:[8204,8218]},"scriptToken_in",[]]]],["app",{sourceInterval:[8220,8244]},"preSpaceWith",[["app",{sourceInterval:[8233,8243]},"expr_logic",[]]]]]],logic_blockWhile:["define",{sourceInterval:[8250,8346]},null,["T"],["app",{sourceInterval:[8272,8346]},"syntaxBlockOf",[["app",{sourceInterval:[8286,8305]},"lineOf",[["app",{sourceInterval:[8293,8304]},"logic_while",[]]]],["app",{sourceInterval:[8307,8321]},"leftPadWith",[["param",{sourceInterval:[8319,8320]},0]]],["app",{sourceInterval:[8323,8345]},"statementOf",[["app",{sourceInterval:[8335,8344]},"logic_end",[]]]]]]],logic_while:["define",{sourceInterval:[8350,8414]},null,[],["seq",{sourceInterval:[8364,8414]},["app",{sourceInterval:[8364,8389]},"ctlKey",[["app",{sourceInterval:[8371,8388]},"scriptToken_while",[]]]],["app",{sourceInterval:[8390,8414]},"preSpaceWith",[["app",{sourceInterval:[8403,8413]},"expr_logic",[]]]]]],ctlKey:["define",{sourceInterval:[8420,8469]},null,["key"],["app",{sourceInterval:[8434,8469]},"leftPadWith",[["app",{sourceInterval:[8446,8468]},"join",[["app",{sourceInterval:[8451,8462]},"token_split",[]],["param",{sourceInterval:[8464,8467]},0]]]]]],logic_end:["define",{sourceInterval:[8503,8538]},null,[],["app",{sourceInterval:[8515,8538]},"ctlKey",[["app",{sourceInterval:[8522,8537]},"scriptToken_end",[]]]]],tokens:["define",{sourceInterval:[8544,8564]},null,[],["star",{sourceInterval:[8558,8564]},["app",{sourceInterval:[8558,8563]},"token",[]]]],token:["define",{sourceInterval:[8574,8762]},null,[],["alt",{sourceInterval:[8587,8762]},["app",{sourceInterval:[8587,8594]},"comment",[]],["app",{sourceInterval:[8648,8658]},"valueToken",[]],["app",{sourceInterval:[8667,8674]},"keyword",[]],["app",{sourceInterval:[8759,8762]},"any",[]]]],valueToken:["define",{sourceInterval:[8766,8785]},null,[],["app",{sourceInterval:[8779,8785]},"sToken",[]]],keyword:["define",{sourceInterval:[9029,9058]},null,[],["app",{sourceInterval:[9039,9058]},"ctlKey",[["app",{sourceInterval:[9046,9057]},"scriptToken",[]]]]]}]);const oe=ie.AdvFountain;var ae,ue,se="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ce={exports:{}};function le(e,t,n){const r=e.length;return(e.slice(0,n)+t+e.slice(n+t.length)).substr(0,r)}function pe(e,t,n){return ge(e=e.slice(t,n))}function de(e,...t){const n=e.offset,r=e.line,i=(e,t)=>e.repeat(t);let o="Line "+e.lineNum+", col "+e.colNum+":\n";const a=function(e){let t=0;return e.map((e=>{const n=e.toString();return t=Math.max(t,n.length),n})).map((e=>ce.exports.padStart(e,t)))}([null==e.prevLine?0:e.lineNum-1,e.lineNum,null==e.nextLine?0:e.lineNum+1]),u=(e,t,n)=>{o+=n+a[e]+" | "+t+"\n"};null!=e.prevLine&&u(0,e.prevLine,"  "),u(1,e.line,"> ");const s=ge(e.line),c=e.colNum-1;let l=" ".repeat(s+1);for(let d=0;d<t.length;++d){let[e,o]=t[d];console.assert(e>=0&&e<=o,"range start must be >= 0 and <= end");const a=n-c;e=Math.max(0,e-a),o=Math.min(o-a,s),l=le(l,i("~",pe(r,e,o)),pe(r,0,e))}const p=2+a[1].length+3;return o+=i(" ",p),l=le(l,"^",pe(r,0,c)),o+=l.replace(/ +$/,"")+"\n",null!=e.nextLine&&u(2,e.nextLine,"  "),o}function he(e,t){return Error(function(e){const{source:t}=e;return de(t.getLineAndColumn(),[t.startIdx,t.endIdx])}(t)+"\n"+e)}
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
ae=ce,ue=ce.exports,function(){var e,t="Expected a function",n="__lodash_hash_undefined__",r="__lodash_placeholder__",i=16,o=32,a=64,u=128,s=256,c=1/0,l=9007199254740991,p=NaN,d=4294967295,h=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",i],["flip",512],["partial",o],["partialRight",a],["rearg",s]],m="[object Arguments]",f="[object Array]",g="[object Boolean]",v="[object Date]",D="[object Error]",C="[object Function]",_="[object GeneratorFunction]",y="[object Map]",I="[object Number]",E="[object Object]",A="[object Promise]",x="[object RegExp]",F="[object Set]",b="[object String]",S="[object Symbol]",w="[object WeakMap]",k="[object ArrayBuffer]",R="[object DataView]",T="[object Float32Array]",P="[object Float64Array]",B="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",N="[object Uint8Array]",M="[object Uint8ClampedArray]",q="[object Uint16Array]",W="[object Uint32Array]",j=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,z=RegExp(U.source),G=RegExp(H.source),V=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),ne=/^\s+/,re=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ve=/^\[object .+?Constructor\]$/,De=/^0o[0-7]+$/i,Ce=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,Ie=/['\n\r\u2028\u2029\\]/g,Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ae="\\u2700-\\u27bf",xe="a-z\\xdf-\\xf6\\xf8-\\xff",Fe="A-Z\\xc0-\\xd6\\xd8-\\xde",be="\\ufe0e\\ufe0f",Se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",we="['’]",ke="[\\ud800-\\udfff]",Re="["+Se+"]",Te="["+Ee+"]",Pe="\\d+",Be="[\\u2700-\\u27bf]",Oe="["+xe+"]",Le="[^\\ud800-\\udfff"+Se+Pe+Ae+xe+Fe+"]",Ne="\\ud83c[\\udffb-\\udfff]",Me="[^\\ud800-\\udfff]",qe="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+Fe+"]",Ke="(?:"+Oe+"|"+Le+")",$e="(?:"+je+"|"+Le+")",Ue="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",ze="(?:"+Te+"|"+Ne+")?",Ge="[\\ufe0e\\ufe0f]?",Ve=Ge+ze+"(?:\\u200d(?:"+[Me,qe,We].join("|")+")"+Ge+ze+")*",Je="(?:"+[Be,qe,We].join("|")+")"+Ve,Ze="(?:"+[Me+Te+"?",Te,qe,We,ke].join("|")+")",Qe=RegExp(we,"g"),Ye=RegExp(Te,"g"),Xe=RegExp(Ne+"(?="+Ne+")|"+Ze+Ve,"g"),et=RegExp([je+"?"+Oe+"+"+Ue+"(?="+[Re,je,"$"].join("|")+")",$e+"+"+He+"(?="+[Re,je+Ke,"$"].join("|")+")",je+"?"+Ke+"+"+Ue,je+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,Je].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+Ee+be+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[T]=ot[P]=ot[B]=ot[O]=ot[L]=ot[N]=ot[M]=ot[q]=ot[W]=!0,ot[m]=ot[f]=ot[k]=ot[g]=ot[R]=ot[v]=ot[D]=ot[C]=ot[y]=ot[I]=ot[E]=ot[x]=ot[F]=ot[b]=ot[w]=!1;var at={};at[m]=at[f]=at[k]=at[R]=at[g]=at[v]=at[T]=at[P]=at[B]=at[O]=at[L]=at[y]=at[I]=at[E]=at[x]=at[F]=at[b]=at[S]=at[N]=at[M]=at[q]=at[W]=!0,at[D]=at[C]=at[w]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ct=parseInt,lt="object"==typeof se&&se&&se.Object===Object&&se,pt="object"==typeof self&&self&&self.Object===Object&&self,dt=lt||pt||Function("return this")(),ht=ue&&!ue.nodeType&&ue,mt=ht&&ae&&!ae.nodeType&&ae,ft=mt&&mt.exports===ht,gt=ft&&lt.process,vt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),Dt=vt&&vt.isArrayBuffer,Ct=vt&&vt.isDate,_t=vt&&vt.isMap,yt=vt&&vt.isRegExp,It=vt&&vt.isSet,Et=vt&&vt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function xt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function bt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function St(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function wt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function kt(e,t){return!(null==e||!e.length)&&Wt(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Tt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Bt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Ot(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Nt=Ut("length");function Mt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function qt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Wt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):qt(e,Kt,n)}function jt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Kt(e){return e!=e}function $t(e,t){var n=null==e?0:e.length;return n?Gt(e,t)/n:p}function Ut(t){return function(n){return null==n?e:n[t]}}function Ht(t){return function(n){return null==t?e:t[n]}}function zt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Gt(t,n){for(var r,i=-1,o=t.length;++i<o;){var a=n(t[i]);a!==e&&(r=r===e?a:r+a)}return r}function Vt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,hn(e)+1).replace(ne,""):e}function Zt(e){return function(t){return e(t)}}function Qt(e,t){return Tt(t,(function(t){return e[t]}))}function Yt(e,t){return e.has(t)}function Xt(e,t){for(var n=-1,r=e.length;++n<r&&Wt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&Wt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var nn=Ht({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function an(e){return tt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function sn(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,i=e.length,o=0,a=[];++n<i;){var u=e[n];u!==t&&u!==r||(e[n]=r,a[o++]=n)}return a}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){return an(e)?function(e){for(var t=Xe.lastIndex=0;Xe.test(e);)++t;return t}(e):Nt(e)}function dn(e){return an(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.split("")}(e)}function hn(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var mn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fn=function re(ae){var ue,se=(ae=null==ae?dt:fn.defaults(dt.Object(),ae,fn.pick(dt,rt))).Array,Ee=ae.Date,Ae=ae.Error,xe=ae.Function,Fe=ae.Math,be=ae.Object,Se=ae.RegExp,we=ae.String,ke=ae.TypeError,Re=se.prototype,Te=xe.prototype,Pe=be.prototype,Be=ae["__core-js_shared__"],Oe=Te.toString,Le=Pe.hasOwnProperty,Ne=0,Me=(ue=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",qe=Pe.toString,We=Oe.call(be),je=dt._,Ke=Se("^"+Oe.call(Le).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=ft?ae.Buffer:e,Ue=ae.Symbol,He=ae.Uint8Array,ze=$e?$e.allocUnsafe:e,Ge=sn(be.getPrototypeOf,be),Ve=be.create,Je=Pe.propertyIsEnumerable,Ze=Re.splice,Xe=Ue?Ue.isConcatSpreadable:e,tt=Ue?Ue.iterator:e,ut=Ue?Ue.toStringTag:e,lt=function(){try{var e=ho(be,"defineProperty");return e({},"",{}),e}catch(t){}}(),pt=ae.clearTimeout!==dt.clearTimeout&&ae.clearTimeout,ht=Ee&&Ee.now!==dt.Date.now&&Ee.now,mt=ae.setTimeout!==dt.setTimeout&&ae.setTimeout,gt=Fe.ceil,vt=Fe.floor,Nt=be.getOwnPropertySymbols,Ht=$e?$e.isBuffer:e,gn=ae.isFinite,vn=Re.join,Dn=sn(be.keys,be),Cn=Fe.max,_n=Fe.min,yn=Ee.now,In=ae.parseInt,En=Fe.random,An=Re.reverse,xn=ho(ae,"DataView"),Fn=ho(ae,"Map"),bn=ho(ae,"Promise"),Sn=ho(ae,"Set"),wn=ho(ae,"WeakMap"),kn=ho(be,"create"),Rn=wn&&new wn,Tn={},Pn=$o(xn),Bn=$o(Fn),On=$o(bn),Ln=$o(Sn),Nn=$o(wn),Mn=Ue?Ue.prototype:e,qn=Mn?Mn.valueOf:e,Wn=Mn?Mn.toString:e;function jn(e){if(au(e)&&!Ja(e)&&!(e instanceof Hn)){if(e instanceof Un)return e;if(Le.call(e,"__wrapped__"))return Uo(e)}return new Un(e)}var Kn=function(){function t(){}return function(n){if(!ou(n))return{};if(Ve)return Ve(n);t.prototype=n;var r=new t;return t.prototype=e,r}}();function $n(){}function Un(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Vn;++t<n;)this.add(e[t])}function Zn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Qn(e,t){var n=Ja(e),r=!n&&Va(e),i=!n&&!r&&Xa(e),o=!n&&!r&&!i&&mu(e),a=n||r||i||o,u=a?Vt(e.length,we):[],s=u.length;for(var c in e)!t&&!Le.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_o(c,s))||u.push(c);return u}function Yn(t){var n=t.length;return n?t[Jr(0,n-1)]:e}function Xn(e,t){return No(ki(e),sr(t,0,e.length))}function er(e){return No(ki(e))}function tr(t,n,r){(r!==e&&!Ha(t[n],r)||r===e&&!(n in t))&&ar(t,n,r)}function nr(t,n,r){var i=t[n];Le.call(t,n)&&Ha(i,r)&&(r!==e||n in t)||ar(t,n,r)}function rr(e,t){for(var n=e.length;n--;)if(Ha(e[n][0],t))return n;return-1}function ir(e,t,n,r){return hr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Ri(t,Lu(t),e)}function ar(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ur(t,n){for(var r=-1,i=n.length,o=se(i),a=null==t;++r<i;)o[r]=a?e:Ru(t,n[r]);return o}function sr(t,n,r){return t==t&&(r!==e&&(t=t<=r?t:r),n!==e&&(t=t>=n?t:n)),t}function cr(t,n,r,i,o,a){var u,s=1&n,c=2&n,l=4&n;if(r&&(u=o?r(t,i,o,a):r(t)),u!==e)return u;if(!ou(t))return t;var p=Ja(t);if(p){if(u=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!s)return ki(t,u)}else{var d=go(t),h=d==C||d==_;if(Xa(t))return Ai(t,s);if(d==E||d==m||h&&!o){if(u=c||h?{}:Do(t),!s)return c?function(e,t){return Ri(e,fo(e),t)}(t,function(e,t){return e&&Ri(t,Nu(t),e)}(u,t)):function(e,t){return Ri(e,mo(e),t)}(t,or(u,t))}else{if(!at[d])return o?t:{};u=function(e,t,n){var r,i=e.constructor;switch(t){case k:return xi(e);case g:case v:return new i(+e);case R:return function(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case T:case P:case B:case O:case L:case N:case M:case q:case W:return Fi(e,n);case y:return new i;case I:case b:return new i(e);case x:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case F:return new i;case S:return r=e,qn?be(qn.call(r)):{}}}(t,d,s)}}a||(a=new Zn);var f=a.get(t);if(f)return f;a.set(t,u),pu(t)?t.forEach((function(e){u.add(cr(e,n,r,e,t,a))})):uu(t)&&t.forEach((function(e,i){u.set(i,cr(e,n,r,i,t,a))}));var D=p?e:(l?c?oo:io:c?Nu:Lu)(t);return Ft(D||t,(function(e,i){D&&(e=t[i=e]),nr(u,i,cr(e,n,r,i,t,a))})),u}function lr(t,n,r){var i=r.length;if(null==t)return!i;for(t=be(t);i--;){var o=r[i],a=n[o],u=t[o];if(u===e&&!(o in t)||!a(u))return!1}return!0}function pr(n,r,i){if("function"!=typeof n)throw new ke(t);return Po((function(){n.apply(e,i)}),r)}function dr(e,t,n,r){var i=-1,o=kt,a=!0,u=e.length,s=[],c=t.length;if(!u)return s;n&&(t=Tt(t,Zt(n))),r?(o=Rt,a=!1):t.length>=200&&(o=Yt,a=!1,t=new Jn(t));e:for(;++i<u;){var l=e[i],p=null==n?l:n(l);if(l=r||0!==l?l:0,a&&p==p){for(var d=c;d--;)if(t[d]===p)continue e;s.push(l)}else o(t,p,r)||s.push(l)}return s}jn.templateSettings={escape:V,evaluate:J,interpolate:Z,variable:"",imports:{_:jn}},jn.prototype=$n.prototype,jn.prototype.constructor=jn,Un.prototype=Kn($n.prototype),Un.prototype.constructor=Un,Hn.prototype=Kn($n.prototype),Hn.prototype.constructor=Hn,zn.prototype.clear=function(){this.__data__=kn?kn(null):{},this.size=0},zn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zn.prototype.get=function(t){var r=this.__data__;if(kn){var i=r[t];return i===n?e:i}return Le.call(r,t)?r[t]:e},zn.prototype.has=function(t){var n=this.__data__;return kn?n[t]!==e:Le.call(n,t)},zn.prototype.set=function(t,r){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=kn&&r===e?n:r,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0||(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,0))},Gn.prototype.get=function(t){var n=this.__data__,r=rr(n,t);return r<0?e:n[r][1]},Gn.prototype.has=function(e){return rr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new zn,map:new(Fn||Gn),string:new zn}},Vn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Vn.prototype.get=function(e){return lo(this,e).get(e)},Vn.prototype.has=function(e){return lo(this,e).has(e)},Vn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Jn.prototype.add=Jn.prototype.push=function(e){return this.__data__.set(e,n),this},Jn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Zn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Zn.prototype.get=function(e){return this.__data__.get(e)},Zn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Fn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vn(r)}return n.set(e,t),this.size=n.size,this};var hr=Bi(yr),mr=Bi(Ir,!0);function fr(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(t,n,r){for(var i=-1,o=t.length;++i<o;){var a=t[i],u=n(a);if(null!=u&&(s===e?u==u&&!hu(u):r(u,s)))var s=u,c=a}return c}function vr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function Dr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Co),i||(i=[]);++o<a;){var u=e[o];t>0&&n(u)?t>1?Dr(u,t-1,n,r,i):Pt(i,u):r||(i[i.length]=u)}return i}var Cr=Oi(),_r=Oi(!0);function yr(e,t){return e&&Cr(e,t,Lu)}function Ir(e,t){return e&&_r(e,t,Lu)}function Er(e,t){return wt(t,(function(t){return nu(e[t])}))}function Ar(t,n){for(var r=0,i=(n=_i(n,t)).length;null!=t&&r<i;)t=t[Ko(n[r++])];return r&&r==i?t:e}function xr(e,t,n){var r=t(e);return Ja(e)?r:Pt(r,n(e))}function Fr(t){return null==t?t===e?"[object Undefined]":"[object Null]":ut&&ut in be(t)?function(t){var n=Le.call(t,ut),r=t[ut];try{t[ut]=e;var i=!0}catch(a){}var o=qe.call(t);return i&&(n?t[ut]=r:delete t[ut]),o}(t):function(e){return qe.call(e)}(t)}function br(e,t){return e>t}function Sr(e,t){return null!=e&&Le.call(e,t)}function wr(e,t){return null!=e&&t in be(e)}function kr(t,n,r){for(var i=r?Rt:kt,o=t[0].length,a=t.length,u=a,s=se(a),c=1/0,l=[];u--;){var p=t[u];u&&n&&(p=Tt(p,Zt(n))),c=_n(p.length,c),s[u]=!r&&(n||o>=120&&p.length>=120)?new Jn(u&&p):e}p=t[0];var d=-1,h=s[0];e:for(;++d<o&&l.length<c;){var m=p[d],f=n?n(m):m;if(m=r||0!==m?m:0,!(h?Yt(h,f):i(l,f,r))){for(u=a;--u;){var g=s[u];if(!(g?Yt(g,f):i(t[u],f,r)))continue e}h&&h.push(f),l.push(m)}}return l}function Rr(t,n,r){var i=null==(t=wo(t,n=_i(n,t)))?t:t[Ko(ta(n))];return null==i?e:At(i,t,r)}function Tr(e){return au(e)&&Fr(e)==m}function Pr(t,n,r,i,o){return t===n||(null==t||null==n||!au(t)&&!au(n)?t!=t&&n!=n:function(t,n,r,i,o,a){var u=Ja(t),s=Ja(n),c=u?f:go(t),l=s?f:go(n),p=(c=c==m?E:c)==E,d=(l=l==m?E:l)==E,h=c==l;if(h&&Xa(t)){if(!Xa(n))return!1;u=!0,p=!1}if(h&&!p)return a||(a=new Zn),u||mu(t)?no(t,n,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case g:case v:case I:return Ha(+e,+t);case D:return e.name==t.name&&e.message==t.message;case x:case b:return e==t+"";case y:var u=un;case F:var s=1&r;if(u||(u=ln),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=no(u(e),u(t),r,i,o,a);return a.delete(e),l;case S:if(qn)return qn.call(e)==qn.call(t)}return!1}(t,n,c,r,i,o,a);if(!(1&r)){var C=p&&Le.call(t,"__wrapped__"),_=d&&Le.call(n,"__wrapped__");if(C||_){var A=C?t.value():t,w=_?n.value():n;return a||(a=new Zn),o(A,w,r,i,a)}}return!!h&&(a||(a=new Zn),function(t,n,r,i,o,a){var u=1&r,s=io(t),c=s.length,l=io(n).length;if(c!=l&&!u)return!1;for(var p=c;p--;){var d=s[p];if(!(u?d in n:Le.call(n,d)))return!1}var h=a.get(t),m=a.get(n);if(h&&m)return h==n&&m==t;var f=!0;a.set(t,n),a.set(n,t);for(var g=u;++p<c;){var v=t[d=s[p]],D=n[d];if(i)var C=u?i(D,v,d,n,t,a):i(v,D,d,t,n,a);if(!(C===e?v===D||o(v,D,r,i,a):C)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var _=t.constructor,y=n.constructor;_==y||!("constructor"in t)||!("constructor"in n)||"function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y||(f=!1)}return a.delete(t),a.delete(n),f}(t,n,r,i,o,a))}(t,n,r,i,Pr,o))}function Br(t,n,r,i){var o=r.length,a=o,u=!i;if(null==t)return!a;for(t=be(t);o--;){var s=r[o];if(u&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<a;){var c=(s=r[o])[0],l=t[c],p=s[1];if(u&&s[2]){if(l===e&&!(c in t))return!1}else{var d=new Zn;if(i)var h=i(l,p,c,t,n,d);if(!(h===e?Pr(p,l,3,i,d):h))return!1}}return!0}function Or(e){return!(!ou(e)||(t=e,Me&&Me in t))&&(nu(e)?Ke:ve).test($o(e));var t}function Lr(e){return"function"==typeof e?e:null==e?ss:"object"==typeof e?Ja(e)?Kr(e[0],e[1]):jr(e):vs(e)}function Nr(e){if(!xo(e))return Dn(e);var t=[];for(var n in be(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Mr(e){if(!ou(e))return function(e){var t=[];if(null!=e)for(var n in be(e))t.push(n);return t}(e);var t=xo(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function qr(e,t){return e<t}function Wr(e,t){var n=-1,r=Qa(e)?se(e.length):[];return hr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function jr(e){var t=po(e);return 1==t.length&&t[0][2]?bo(t[0][0],t[0][1]):function(n){return n===e||Br(n,e,t)}}function Kr(t,n){return Io(t)&&Fo(n)?bo(Ko(t),n):function(r){var i=Ru(r,t);return i===e&&i===n?Tu(r,t):Pr(n,i,3)}}function $r(t,n,r,i,o){t!==n&&Cr(n,(function(a,u){if(o||(o=new Zn),ou(a))!function(t,n,r,i,o,a,u){var s=Ro(t,r),c=Ro(n,r),l=u.get(c);if(l)tr(t,r,l);else{var p=a?a(s,c,r+"",t,n,u):e,d=p===e;if(d){var h=Ja(c),m=!h&&Xa(c),f=!h&&!m&&mu(c);p=c,h||m||f?Ja(s)?p=s:Ya(s)?p=ki(s):m?(d=!1,p=Ai(c,!0)):f?(d=!1,p=Fi(c,!0)):p=[]:cu(c)||Va(c)?(p=s,Va(s)?p=Iu(s):ou(s)&&!nu(s)||(p=Do(c))):d=!1}d&&(u.set(c,p),o(p,c,i,a,u),u.delete(c)),tr(t,r,p)}}(t,n,u,r,$r,i,o);else{var s=i?i(Ro(t,u),a,u+"",t,n,o):e;s===e&&(s=a),tr(t,u,s)}}),Nu)}function Ur(t,n){var r=t.length;if(r)return _o(n+=n<0?r:0,r)?t[n]:e}function Hr(e,t,n){t=t.length?Tt(t,(function(e){return Ja(e)?function(t){return Ar(t,1===e.length?e[0]:e)}:e})):[ss];var r=-1;return t=Tt(t,Zt(co())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Wr(e,(function(e,n,i){return{criteria:Tt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,u=n.length;++r<a;){var s=bi(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function zr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],u=Ar(e,a);n(u,a)&&ei(o,_i(a,e),u)}return o}function Gr(e,t,n,r){var i=r?jt:Wt,o=-1,a=t.length,u=e;for(e===t&&(t=ki(t)),n&&(u=Tt(e,Zt(n)));++o<a;)for(var s=0,c=t[o],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==e&&Ze.call(u,s,1),Ze.call(e,s,1);return e}function Vr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;_o(i)?Ze.call(e,i,1):di(e,i)}}return e}function Jr(e,t){return e+vt(En()*(t-e+1))}function Zr(e,t){var n="";if(!e||t<1||t>l)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Bo(So(e,t,ss),e+"")}function Yr(e){return Yn(Hu(e))}function Xr(e,t){var n=Hu(e);return No(n,sr(t,0,n.length))}function ei(t,n,r,i){if(!ou(t))return t;for(var o=-1,a=(n=_i(n,t)).length,u=a-1,s=t;null!=s&&++o<a;){var c=Ko(n[o]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=u){var p=s[c];(l=i?i(p,c,s):e)===e&&(l=ou(p)?p:_o(n[o+1])?[]:{})}nr(s,c,l),s=s[c]}return t}var ti=Rn?function(e,t){return Rn.set(e,t),e}:ss,ni=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:os(t),writable:!0})}:ss;function ri(e){return No(Hu(e))}function ii(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=se(i);++r<i;)o[r]=e[r+t];return o}function oi(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!hu(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ui(e,t,ss,n)}function ui(t,n,r,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var u=(n=r(n))!=n,s=null===n,c=hu(n),l=n===e;o<a;){var p=vt((o+a)/2),d=r(t[p]),h=d!==e,m=null===d,f=d==d,g=hu(d);if(u)var v=i||f;else v=l?f&&(i||h):s?f&&h&&(i||!m):c?f&&h&&!m&&(i||!g):!m&&!g&&(i?d<=n:d<n);v?o=p+1:a=p}return _n(a,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],u=t?t(a):a;if(!n||!Ha(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function ci(e){return"number"==typeof e?e:hu(e)?p:+e}function li(e){if("string"==typeof e)return e;if(Ja(e))return Tt(e,li)+"";if(hu(e))return Wn?Wn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function pi(e,t,n){var r=-1,i=kt,o=e.length,a=!0,u=[],s=u;if(n)a=!1,i=Rt;else if(o>=200){var c=t?null:Zi(e);if(c)return ln(c);a=!1,i=Yt,s=new Jn}else s=t?[]:u;e:for(;++r<o;){var l=e[r],p=t?t(l):l;if(l=n||0!==l?l:0,a&&p==p){for(var d=s.length;d--;)if(s[d]===p)continue e;t&&s.push(p),u.push(l)}else i(s,p,n)||(s!==u&&s.push(p),u.push(l))}return u}function di(e,t){return null==(e=wo(e,t=_i(t,e)))||delete e[Ko(ta(t))]}function hi(e,t,n,r){return ei(e,t,n(Ar(e,t)),r)}function mi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function fi(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Bt(t,(function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))}),n)}function gi(e,t,n){var r=e.length;if(r<2)return r?pi(e[0]):[];for(var i=-1,o=se(r);++i<r;)for(var a=e[i],u=-1;++u<r;)u!=i&&(o[i]=dr(o[i]||a,e[u],t,n));return pi(Dr(o,1),t,n)}function vi(t,n,r){for(var i=-1,o=t.length,a=n.length,u={};++i<o;){var s=i<a?n[i]:e;r(u,t[i],s)}return u}function Di(e){return Ya(e)?e:[]}function Ci(e){return"function"==typeof e?e:ss}function _i(e,t){return Ja(e)?e:Io(e,t)?[e]:jo(Eu(e))}var yi=Qr;function Ii(t,n,r){var i=t.length;return r=r===e?i:r,!n&&r>=i?t:ii(t,n,r)}var Ei=pt||function(e){return dt.clearTimeout(e)};function Ai(e,t){if(t)return e.slice();var n=e.length,r=ze?ze(n):new e.constructor(n);return e.copy(r),r}function xi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Fi(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function bi(t,n){if(t!==n){var r=t!==e,i=null===t,o=t==t,a=hu(t),u=n!==e,s=null===n,c=n==n,l=hu(n);if(!s&&!l&&!a&&t>n||a&&u&&c&&!s&&!l||i&&u&&c||!r&&c||!o)return 1;if(!i&&!a&&!l&&t<n||l&&r&&o&&!i&&!a||s&&r&&o||!u&&o||!c)return-1}return 0}function Si(e,t,n,r){for(var i=-1,o=e.length,a=n.length,u=-1,s=t.length,c=Cn(o-a,0),l=se(s+c),p=!r;++u<s;)l[u]=t[u];for(;++i<a;)(p||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[u++]=e[i++];return l}function wi(e,t,n,r){for(var i=-1,o=e.length,a=-1,u=n.length,s=-1,c=t.length,l=Cn(o-u,0),p=se(l+c),d=!r;++i<l;)p[i]=e[i];for(var h=i;++s<c;)p[h+s]=t[s];for(;++a<u;)(d||i<o)&&(p[h+n[a]]=e[i++]);return p}function ki(e,t){var n=-1,r=e.length;for(t||(t=se(r));++n<r;)t[n]=e[n];return t}function Ri(t,n,r,i){var o=!r;r||(r={});for(var a=-1,u=n.length;++a<u;){var s=n[a],c=i?i(r[s],t[s],s,r,t):e;c===e&&(c=t[s]),o?ar(r,s,c):nr(r,s,c)}return r}function Ti(e,t){return function(n,r){var i=Ja(n)?xt:ir,o=t?t():{};return i(n,e,co(r,2),o)}}function Pi(t){return Qr((function(n,r){var i=-1,o=r.length,a=o>1?r[o-1]:e,u=o>2?r[2]:e;for(a=t.length>3&&"function"==typeof a?(o--,a):e,u&&yo(r[0],r[1],u)&&(a=o<3?e:a,o=1),n=be(n);++i<o;){var s=r[i];s&&t(n,s,i,a)}return n}))}function Bi(e,t){return function(n,r){if(null==n)return n;if(!Qa(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=be(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Oi(e){return function(t,n,r){for(var i=-1,o=be(t),a=r(t),u=a.length;u--;){var s=a[e?u:++i];if(!1===n(o[s],s,o))break}return t}}function Li(t){return function(n){var r=an(n=Eu(n))?dn(n):e,i=r?r[0]:n.charAt(0),o=r?Ii(r,1).join(""):n.slice(1);return i[t]()+o}}function Ni(e){return function(t){return Bt(ns(Vu(t).replace(Qe,"")),e,"")}}function Mi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Kn(e.prototype),r=e.apply(n,t);return ou(r)?r:n}}function qi(t){return function(n,r,i){var o=be(n);if(!Qa(n)){var a=co(r,3);n=Lu(n),r=function(e){return a(o[e],e,o)}}var u=t(n,r,i);return u>-1?o[a?n[u]:u]:e}}function Wi(n){return ro((function(r){var i=r.length,o=i,a=Un.prototype.thru;for(n&&r.reverse();o--;){var u=r[o];if("function"!=typeof u)throw new ke(t);if(a&&!s&&"wrapper"==uo(u))var s=new Un([],!0)}for(o=s?o:i;++o<i;){var c=uo(u=r[o]),l="wrapper"==c?ao(u):e;s=l&&Eo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[uo(l[0])].apply(s,l[3]):1==u.length&&Eo(u)?s[c]():s.thru(u)}return function(){var e=arguments,t=e[0];if(s&&1==e.length&&Ja(t))return s.plant(t).value();for(var n=0,o=i?r[n].apply(this,e):t;++n<i;)o=r[n].call(this,o);return o}}))}function ji(t,n,r,i,o,a,s,c,l,p){var d=n&u,h=1&n,m=2&n,f=24&n,g=512&n,v=m?e:Mi(t);return function e(){for(var u=arguments.length,D=se(u),C=u;C--;)D[C]=arguments[C];if(f)var _=so(e),y=tn(D,_);if(i&&(D=Si(D,i,o,f)),a&&(D=wi(D,a,s,f)),u-=y,f&&u<p){var I=cn(D,_);return Vi(t,n,ji,e.placeholder,r,D,I,c,l,p-u)}var E=h?r:this,A=m?E[t]:t;return u=D.length,c?D=ko(D,c):g&&u>1&&D.reverse(),d&&l<u&&(D.length=l),this&&this!==dt&&this instanceof e&&(A=v||Mi(A)),A.apply(E,D)}}function Ki(e,t){return function(n,r){return function(e,t,n,r){return yr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function $i(t,n){return function(r,i){var o;if(r===e&&i===e)return n;if(r!==e&&(o=r),i!==e){if(o===e)return i;"string"==typeof r||"string"==typeof i?(r=li(r),i=li(i)):(r=ci(r),i=ci(i)),o=t(r,i)}return o}}function Ui(e){return ro((function(t){return t=Tt(t,Zt(co())),Qr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Hi(t,n){var r=(n=n===e?" ":li(n)).length;if(r<2)return r?Zr(n,t):n;var i=Zr(n,gt(t/pn(n)));return an(n)?Ii(dn(i),0,t).join(""):i.slice(0,t)}function zi(t){return function(n,r,i){return i&&"number"!=typeof i&&yo(n,r,i)&&(r=i=e),n=Du(n),r===e?(r=n,n=0):r=Du(r),function(e,t,n,r){for(var i=-1,o=Cn(gt((t-e)/(n||1)),0),a=se(o);o--;)a[r?o:++i]=e,e+=n;return a}(n,r,i=i===e?n<r?1:-1:Du(i),t)}}function Gi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=yu(t),n=yu(n)),e(t,n)}}function Vi(t,n,r,i,u,s,c,l,p,d){var h=8&n;n|=h?o:a,4&(n&=~(h?a:o))||(n&=-4);var m=[t,n,u,h?s:e,h?c:e,h?e:s,h?e:c,l,p,d],f=r.apply(e,m);return Eo(t)&&To(f,m),f.placeholder=i,Oo(f,t,n)}function Ji(e){var t=Fe[e];return function(e,n){if(e=yu(e),(n=null==n?0:_n(Cu(n),292))&&gn(e)){var r=(Eu(e)+"e").split("e");return+((r=(Eu(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Zi=Sn&&1/ln(new Sn([,-0]))[1]==c?function(e){return new Sn(e)}:hs;function Qi(e){return function(t){var n=go(t);return n==y?un(t):n==F?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return Tt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Yi(n,c,l,p,d,h,m,f){var g=2&c;if(!g&&"function"!=typeof n)throw new ke(t);var v=p?p.length:0;if(v||(c&=-97,p=d=e),m=m===e?m:Cn(Cu(m),0),f=f===e?f:Cu(f),v-=d?d.length:0,c&a){var D=p,C=d;p=d=e}var _=g?e:ao(n),y=[n,c,l,p,d,D,C,h,m,f];if(_&&function(e,t){var n=e[1],i=t[1],o=n|i,a=o<131,c=i==u&&8==n||i==u&&n==s&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!a&&!c)return e;1&i&&(e[2]=t[2],o|=1&n?0:4);var l=t[3];if(l){var p=e[3];e[3]=p?Si(p,l,t[4]):l,e[4]=p?cn(e[3],r):t[4]}(l=t[5])&&(p=e[5],e[5]=p?wi(p,l,t[6]):l,e[6]=p?cn(e[5],r):t[6]),(l=t[7])&&(e[7]=l),i&u&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(y,_),n=y[0],c=y[1],l=y[2],p=y[3],d=y[4],!(f=y[9]=y[9]===e?g?0:n.length:Cn(y[9]-v,0))&&24&c&&(c&=-25),c&&1!=c)I=8==c||c==i?function(t,n,r){var i=Mi(t);return function o(){for(var a=arguments.length,u=se(a),s=a,c=so(o);s--;)u[s]=arguments[s];var l=a<3&&u[0]!==c&&u[a-1]!==c?[]:cn(u,c);return(a-=l.length)<r?Vi(t,n,ji,o.placeholder,e,u,l,e,e,r-a):At(this&&this!==dt&&this instanceof o?i:t,this,u)}}(n,c,f):c!=o&&33!=c||d.length?ji.apply(e,y):function(e,t,n,r){var i=1&t,o=Mi(e);return function t(){for(var a=-1,u=arguments.length,s=-1,c=r.length,l=se(c+u),p=this&&this!==dt&&this instanceof t?o:e;++s<c;)l[s]=r[s];for(;u--;)l[s++]=arguments[++a];return At(p,i?n:this,l)}}(n,c,l,p);else var I=function(e,t,n){var r=1&t,i=Mi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(n,c,l);return Oo((_?ti:To)(I,y),n,c)}function Xi(t,n,r,i){return t===e||Ha(t,Pe[r])&&!Le.call(i,r)?n:t}function eo(t,n,r,i,o,a){return ou(t)&&ou(n)&&(a.set(n,t),$r(t,n,e,eo,a),a.delete(n)),t}function to(t){return cu(t)?e:t}function no(t,n,r,i,o,a){var u=1&r,s=t.length,c=n.length;if(s!=c&&!(u&&c>s))return!1;var l=a.get(t),p=a.get(n);if(l&&p)return l==n&&p==t;var d=-1,h=!0,m=2&r?new Jn:e;for(a.set(t,n),a.set(n,t);++d<s;){var f=t[d],g=n[d];if(i)var v=u?i(g,f,d,n,t,a):i(f,g,d,t,n,a);if(v!==e){if(v)continue;h=!1;break}if(m){if(!Lt(n,(function(e,t){if(!Yt(m,t)&&(f===e||o(f,e,r,i,a)))return m.push(t)}))){h=!1;break}}else if(f!==g&&!o(f,g,r,i,a)){h=!1;break}}return a.delete(t),a.delete(n),h}function ro(t){return Bo(So(t,e,Zo),t+"")}function io(e){return xr(e,Lu,mo)}function oo(e){return xr(e,Nu,fo)}var ao=Rn?function(e){return Rn.get(e)}:hs;function uo(e){for(var t=e.name+"",n=Tn[t],r=Le.call(Tn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function so(e){return(Le.call(jn,"placeholder")?jn:e).placeholder}function co(){var e=jn.iteratee||cs;return e=e===cs?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function po(e){for(var t=Lu(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Fo(i)]}return t}function ho(t,n){var r=function(t,n){return null==t?e:t[n]}(t,n);return Or(r)?r:e}var mo=Nt?function(e){return null==e?[]:(e=be(e),wt(Nt(e),(function(t){return Je.call(e,t)})))}:_s,fo=Nt?function(e){for(var t=[];e;)Pt(t,mo(e)),e=Ge(e);return t}:_s,go=Fr;function vo(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,o=!1;++r<i;){var a=Ko(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&iu(i)&&_o(a,i)&&(Ja(e)||Va(e))}function Do(e){return"function"!=typeof e.constructor||xo(e)?{}:Kn(Ge(e))}function Co(e){return Ja(e)||Va(e)||!!(Xe&&e&&e[Xe])}function _o(e,t){var n=typeof e;return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&Ce.test(e))&&e>-1&&e%1==0&&e<t}function yo(e,t,n){if(!ou(n))return!1;var r=typeof t;return!!("number"==r?Qa(n)&&_o(t,n.length):"string"==r&&t in n)&&Ha(n[t],e)}function Io(e,t){if(Ja(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!hu(e))||Y.test(e)||!Q.test(e)||null!=t&&e in be(t)}function Eo(e){var t=uo(e),n=jn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(xn&&go(new xn(new ArrayBuffer(1)))!=R||Fn&&go(new Fn)!=y||bn&&go(bn.resolve())!=A||Sn&&go(new Sn)!=F||wn&&go(new wn)!=w)&&(go=function(t){var n=Fr(t),r=n==E?t.constructor:e,i=r?$o(r):"";if(i)switch(i){case Pn:return R;case Bn:return y;case On:return A;case Ln:return F;case Nn:return w}return n});var Ao=Be?nu:ys;function xo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function Fo(e){return e==e&&!ou(e)}function bo(t,n){return function(r){return null!=r&&r[t]===n&&(n!==e||t in be(r))}}function So(t,n,r){return n=Cn(n===e?t.length-1:n,0),function(){for(var e=arguments,i=-1,o=Cn(e.length-n,0),a=se(o);++i<o;)a[i]=e[n+i];i=-1;for(var u=se(n+1);++i<n;)u[i]=e[i];return u[n]=r(a),At(t,this,u)}}function wo(e,t){return t.length<2?e:Ar(e,ii(t,0,-1))}function ko(t,n){for(var r=t.length,i=_n(n.length,r),o=ki(t);i--;){var a=n[i];t[i]=_o(a,r)?o[a]:e}return t}function Ro(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var To=Lo(ti),Po=mt||function(e,t){return dt.setTimeout(e,t)},Bo=Lo(ni);function Oo(e,t,n){var r=t+"";return Bo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ft(h,(function(n){var r="_."+n[0];t&n[1]&&!kt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(ce):[]}(r),n)))}function Lo(t){var n=0,r=0;return function(){var i=yn(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(e,arguments)}}function No(t,n){var r=-1,i=t.length,o=i-1;for(n=n===e?i:n;++r<n;){var a=Jr(r,o),u=t[a];t[a]=t[r],t[r]=u}return t.length=n,t}var Mo,qo,Wo,jo=(Mo=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(X,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t},qo=qa(Mo,(function(e){return 500===Wo.size&&Wo.clear(),e})),Wo=qo.cache,qo);function Ko(e){if("string"==typeof e||hu(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $o(e){if(null!=e){try{return Oe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Uo(e){if(e instanceof Hn)return e.clone();var t=new Un(e.__wrapped__,e.__chain__);return t.__actions__=ki(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ho=Qr((function(e,t){return Ya(e)?dr(e,Dr(t,1,Ya,!0)):[]})),zo=Qr((function(t,n){var r=ta(n);return Ya(r)&&(r=e),Ya(t)?dr(t,Dr(n,1,Ya,!0),co(r,2)):[]})),Go=Qr((function(t,n){var r=ta(n);return Ya(r)&&(r=e),Ya(t)?dr(t,Dr(n,1,Ya,!0),e,r):[]}));function Vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Cu(n);return i<0&&(i=Cn(r+i,0)),qt(e,co(t,3),i)}function Jo(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return r!==e&&(o=Cu(r),o=r<0?Cn(i+o,0):_n(o,i-1)),qt(t,co(n,3),o,!0)}function Zo(e){return null!=e&&e.length?Dr(e,1):[]}function Qo(t){return t&&t.length?t[0]:e}var Yo=Qr((function(e){var t=Tt(e,Di);return t.length&&t[0]===e[0]?kr(t):[]})),Xo=Qr((function(t){var n=ta(t),r=Tt(t,Di);return n===ta(r)?n=e:r.pop(),r.length&&r[0]===t[0]?kr(r,co(n,2)):[]})),ea=Qr((function(t){var n=ta(t),r=Tt(t,Di);return(n="function"==typeof n?n:e)&&r.pop(),r.length&&r[0]===t[0]?kr(r,e,n):[]}));function ta(t){var n=null==t?0:t.length;return n?t[n-1]:e}var na=Qr(ra);function ra(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var ia=ro((function(e,t){var n=null==e?0:e.length,r=ur(e,t);return Vr(e,Tt(t,(function(e){return _o(e,n)?+e:e})).sort(bi)),r}));function oa(e){return null==e?e:An.call(e)}var aa=Qr((function(e){return pi(Dr(e,1,Ya,!0))})),ua=Qr((function(t){var n=ta(t);return Ya(n)&&(n=e),pi(Dr(t,1,Ya,!0),co(n,2))})),sa=Qr((function(t){var n=ta(t);return n="function"==typeof n?n:e,pi(Dr(t,1,Ya,!0),e,n)}));function ca(e){if(!e||!e.length)return[];var t=0;return e=wt(e,(function(e){if(Ya(e))return t=Cn(e.length,t),!0})),Vt(t,(function(t){return Tt(e,Ut(t))}))}function la(t,n){if(!t||!t.length)return[];var r=ca(t);return null==n?r:Tt(r,(function(t){return At(n,e,t)}))}var pa=Qr((function(e,t){return Ya(e)?dr(e,t):[]})),da=Qr((function(e){return gi(wt(e,Ya))})),ha=Qr((function(t){var n=ta(t);return Ya(n)&&(n=e),gi(wt(t,Ya),co(n,2))})),ma=Qr((function(t){var n=ta(t);return n="function"==typeof n?n:e,gi(wt(t,Ya),e,n)})),fa=Qr(ca),ga=Qr((function(t){var n=t.length,r=n>1?t[n-1]:e;return r="function"==typeof r?(t.pop(),r):e,la(t,r)}));function va(e){var t=jn(e);return t.__chain__=!0,t}function Da(e,t){return t(e)}var Ca=ro((function(t){var n=t.length,r=n?t[0]:0,i=this.__wrapped__,o=function(e){return ur(e,t)};return!(n>1||this.__actions__.length)&&i instanceof Hn&&_o(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:Da,args:[o],thisArg:e}),new Un(i,this.__chain__).thru((function(t){return n&&!t.length&&t.push(e),t}))):this.thru(o)})),_a=Ti((function(e,t,n){Le.call(e,n)?++e[n]:ar(e,n,1)})),ya=qi(Vo),Ia=qi(Jo);function Ea(e,t){return(Ja(e)?Ft:hr)(e,co(t,3))}function Aa(e,t){return(Ja(e)?bt:mr)(e,co(t,3))}var xa=Ti((function(e,t,n){Le.call(e,n)?e[n].push(t):ar(e,n,[t])})),Fa=Qr((function(e,t,n){var r=-1,i="function"==typeof t,o=Qa(e)?se(e.length):[];return hr(e,(function(e){o[++r]=i?At(t,e,n):Rr(e,t,n)})),o})),ba=Ti((function(e,t,n){ar(e,n,t)}));function Sa(e,t){return(Ja(e)?Tt:Wr)(e,co(t,3))}var wa=Ti((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ka=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&yo(e,t[0],t[1])?t=[]:n>2&&yo(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,Dr(t,1),[])})),Ra=ht||function(){return dt.Date.now()};function Ta(t,n,r){return n=r?e:n,n=t&&null==n?t.length:n,Yi(t,u,e,e,e,e,n)}function Pa(n,r){var i;if("function"!=typeof r)throw new ke(t);return n=Cu(n),function(){return--n>0&&(i=r.apply(this,arguments)),n<=1&&(r=e),i}}var Ba=Qr((function(e,t,n){var r=1;if(n.length){var i=cn(n,so(Ba));r|=o}return Yi(e,r,t,n,i)})),Oa=Qr((function(e,t,n){var r=3;if(n.length){var i=cn(n,so(Oa));r|=o}return Yi(t,r,e,n,i)}));function La(n,r,i){var o,a,u,s,c,l,p=0,d=!1,h=!1,m=!0;if("function"!=typeof n)throw new ke(t);function f(t){var r=o,i=a;return o=a=e,p=t,s=n.apply(i,r)}function g(e){return p=e,c=Po(D,r),d?f(e):s}function v(t){var n=t-l;return l===e||n>=r||n<0||h&&t-p>=u}function D(){var e=Ra();if(v(e))return C(e);c=Po(D,function(e){var t=r-(e-l);return h?_n(t,u-(e-p)):t}(e))}function C(t){return c=e,m&&o?f(t):(o=a=e,s)}function _(){var t=Ra(),n=v(t);if(o=arguments,a=this,l=t,n){if(c===e)return g(l);if(h)return Ei(c),c=Po(D,r),f(l)}return c===e&&(c=Po(D,r)),s}return r=yu(r)||0,ou(i)&&(d=!!i.leading,u=(h="maxWait"in i)?Cn(yu(i.maxWait)||0,r):u,m="trailing"in i?!!i.trailing:m),_.cancel=function(){c!==e&&Ei(c),p=0,o=l=a=c=e},_.flush=function(){return c===e?s:C(Ra())},_}var Na=Qr((function(e,t){return pr(e,1,t)})),Ma=Qr((function(e,t,n){return pr(e,yu(t)||0,n)}));function qa(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new ke(t);var r=function(){var t=arguments,i=n?n.apply(this,t):t[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,t);return r.cache=o.set(i,a)||o,a};return r.cache=new(qa.Cache||Vn),r}function Wa(e){if("function"!=typeof e)throw new ke(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}qa.Cache=Vn;var ja=yi((function(e,t){var n=(t=1==t.length&&Ja(t[0])?Tt(t[0],Zt(co())):Tt(Dr(t,1),Zt(co()))).length;return Qr((function(r){for(var i=-1,o=_n(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return At(e,this,r)}))})),Ka=Qr((function(t,n){var r=cn(n,so(Ka));return Yi(t,o,e,n,r)})),$a=Qr((function(t,n){var r=cn(n,so($a));return Yi(t,a,e,n,r)})),Ua=ro((function(t,n){return Yi(t,s,e,e,e,n)}));function Ha(e,t){return e===t||e!=e&&t!=t}var za=Gi(br),Ga=Gi((function(e,t){return e>=t})),Va=Tr(function(){return arguments}())?Tr:function(e){return au(e)&&Le.call(e,"callee")&&!Je.call(e,"callee")},Ja=se.isArray,Za=Dt?Zt(Dt):function(e){return au(e)&&Fr(e)==k};function Qa(e){return null!=e&&iu(e.length)&&!nu(e)}function Ya(e){return au(e)&&Qa(e)}var Xa=Ht||ys,eu=Ct?Zt(Ct):function(e){return au(e)&&Fr(e)==v};function tu(e){if(!au(e))return!1;var t=Fr(e);return t==D||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!cu(e)}function nu(e){if(!ou(e))return!1;var t=Fr(e);return t==C||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ru(e){return"number"==typeof e&&e==Cu(e)}function iu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function ou(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function au(e){return null!=e&&"object"==typeof e}var uu=_t?Zt(_t):function(e){return au(e)&&go(e)==y};function su(e){return"number"==typeof e||au(e)&&Fr(e)==I}function cu(e){if(!au(e)||Fr(e)!=E)return!1;var t=Ge(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==We}var lu=yt?Zt(yt):function(e){return au(e)&&Fr(e)==x},pu=It?Zt(It):function(e){return au(e)&&go(e)==F};function du(e){return"string"==typeof e||!Ja(e)&&au(e)&&Fr(e)==b}function hu(e){return"symbol"==typeof e||au(e)&&Fr(e)==S}var mu=Et?Zt(Et):function(e){return au(e)&&iu(e.length)&&!!ot[Fr(e)]},fu=Gi(qr),gu=Gi((function(e,t){return e<=t}));function vu(e){if(!e)return[];if(Qa(e))return du(e)?dn(e):ki(e);if(tt&&e[tt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[tt]());var t=go(e);return(t==y?un:t==F?ln:Hu)(e)}function Du(e){return e?(e=yu(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Cu(e){var t=Du(e),n=t%1;return t==t?n?t-n:t:0}function _u(e){return e?sr(Cu(e),0,d):0}function yu(e){if("number"==typeof e)return e;if(hu(e))return p;if(ou(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ou(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ge.test(e);return n||De.test(e)?ct(e.slice(2),n?2:8):fe.test(e)?p:+e}function Iu(e){return Ri(e,Nu(e))}function Eu(e){return null==e?"":li(e)}var Au=Pi((function(e,t){if(xo(t)||Qa(t))Ri(t,Lu(t),e);else for(var n in t)Le.call(t,n)&&nr(e,n,t[n])})),xu=Pi((function(e,t){Ri(t,Nu(t),e)})),Fu=Pi((function(e,t,n,r){Ri(t,Nu(t),e,r)})),bu=Pi((function(e,t,n,r){Ri(t,Lu(t),e,r)})),Su=ro(ur),wu=Qr((function(t,n){t=be(t);var r=-1,i=n.length,o=i>2?n[2]:e;for(o&&yo(n[0],n[1],o)&&(i=1);++r<i;)for(var a=n[r],u=Nu(a),s=-1,c=u.length;++s<c;){var l=u[s],p=t[l];(p===e||Ha(p,Pe[l])&&!Le.call(t,l))&&(t[l]=a[l])}return t})),ku=Qr((function(t){return t.push(e,eo),At(qu,e,t)}));function Ru(t,n,r){var i=null==t?e:Ar(t,n);return i===e?r:i}function Tu(e,t){return null!=e&&vo(e,t,wr)}var Pu=Ki((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=qe.call(t)),e[t]=n}),os(ss)),Bu=Ki((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=qe.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),co),Ou=Qr(Rr);function Lu(e){return Qa(e)?Qn(e):Nr(e)}function Nu(e){return Qa(e)?Qn(e,!0):Mr(e)}var Mu=Pi((function(e,t,n){$r(e,t,n)})),qu=Pi((function(e,t,n,r){$r(e,t,n,r)})),Wu=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Tt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Ri(e,oo(e),n),r&&(n=cr(n,7,to));for(var i=t.length;i--;)di(n,t[i]);return n})),ju=ro((function(e,t){return null==e?{}:function(e,t){return zr(e,t,(function(t,n){return Tu(e,n)}))}(e,t)}));function Ku(e,t){if(null==e)return{};var n=Tt(oo(e),(function(e){return[e]}));return t=co(t),zr(e,n,(function(e,n){return t(e,n[0])}))}var $u=Qi(Lu),Uu=Qi(Nu);function Hu(e){return null==e?[]:Qt(e,Lu(e))}var zu=Ni((function(e,t,n){return t=t.toLowerCase(),e+(n?Gu(t):t)}));function Gu(e){return ts(Eu(e).toLowerCase())}function Vu(e){return(e=Eu(e))&&e.replace(_e,nn).replace(Ye,"")}var Ju=Ni((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Zu=Ni((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Qu=Li("toLowerCase"),Yu=Ni((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Xu=Ni((function(e,t,n){return e+(n?" ":"")+ts(t)})),es=Ni((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),ts=Li("toUpperCase");function ns(t,n,r){return t=Eu(t),(n=r?e:n)===e?function(e){return nt.test(e)}(t)?function(e){return e.match(et)||[]}(t):function(e){return e.match(le)||[]}(t):t.match(n)||[]}var rs=Qr((function(t,n){try{return At(t,e,n)}catch(r){return tu(r)?r:new Ae(r)}})),is=ro((function(e,t){return Ft(t,(function(t){t=Ko(t),ar(e,t,Ba(e[t],e))})),e}));function os(e){return function(){return e}}var as=Wi(),us=Wi(!0);function ss(e){return e}function cs(e){return Lr("function"==typeof e?e:cr(e,1))}var ls=Qr((function(e,t){return function(n){return Rr(n,e,t)}})),ps=Qr((function(e,t){return function(n){return Rr(e,n,t)}}));function ds(e,t,n){var r=Lu(t),i=Er(t,r);null!=n||ou(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Er(t,Lu(t)));var o=!(ou(n)&&"chain"in n&&!n.chain),a=nu(e);return Ft(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=ki(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Pt([this.value()],arguments))})})),e}function hs(){}var ms=Ui(Tt),fs=Ui(St),gs=Ui(Lt);function vs(e){return Io(e)?Ut(Ko(e)):function(e){return function(t){return Ar(t,e)}}(e)}var Ds=zi(),Cs=zi(!0);function _s(){return[]}function ys(){return!1}var Is,Es=$i((function(e,t){return e+t}),0),As=Ji("ceil"),xs=$i((function(e,t){return e/t}),1),Fs=Ji("floor"),bs=$i((function(e,t){return e*t}),1),Ss=Ji("round"),ws=$i((function(e,t){return e-t}),0);return jn.after=function(e,n){if("function"!=typeof n)throw new ke(t);return e=Cu(e),function(){if(--e<1)return n.apply(this,arguments)}},jn.ary=Ta,jn.assign=Au,jn.assignIn=xu,jn.assignInWith=Fu,jn.assignWith=bu,jn.at=Su,jn.before=Pa,jn.bind=Ba,jn.bindAll=is,jn.bindKey=Oa,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ja(e)?e:[e]},jn.chain=va,jn.chunk=function(t,n,r){n=(r?yo(t,n,r):n===e)?1:Cn(Cu(n),0);var i=null==t?0:t.length;if(!i||n<1)return[];for(var o=0,a=0,u=se(gt(i/n));o<i;)u[a++]=ii(t,o,o+=n);return u},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=se(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Pt(Ja(n)?ki(n):[n],Dr(t,1))},jn.cond=function(e){var n=null==e?0:e.length,r=co();return e=n?Tt(e,(function(e){if("function"!=typeof e[1])throw new ke(t);return[r(e[0]),e[1]]})):[],Qr((function(t){for(var r=-1;++r<n;){var i=e[r];if(At(i[0],this,t))return At(i[1],this,t)}}))},jn.conforms=function(e){return function(e){var t=Lu(e);return function(n){return lr(n,e,t)}}(cr(e,1))},jn.constant=os,jn.countBy=_a,jn.create=function(e,t){var n=Kn(e);return null==t?n:or(n,t)},jn.curry=function t(n,r,i){var o=Yi(n,8,e,e,e,e,e,r=i?e:r);return o.placeholder=t.placeholder,o},jn.curryRight=function t(n,r,o){var a=Yi(n,i,e,e,e,e,e,r=o?e:r);return a.placeholder=t.placeholder,a},jn.debounce=La,jn.defaults=wu,jn.defaultsDeep=ku,jn.defer=Na,jn.delay=Ma,jn.difference=Ho,jn.differenceBy=zo,jn.differenceWith=Go,jn.drop=function(t,n,r){var i=null==t?0:t.length;return i?ii(t,(n=r||n===e?1:Cu(n))<0?0:n,i):[]},jn.dropRight=function(t,n,r){var i=null==t?0:t.length;return i?ii(t,0,(n=i-(n=r||n===e?1:Cu(n)))<0?0:n):[]},jn.dropRightWhile=function(e,t){return e&&e.length?mi(e,co(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?mi(e,co(t,3),!0):[]},jn.fill=function(t,n,r,i){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&yo(t,n,r)&&(r=0,i=o),function(t,n,r,i){var o=t.length;for((r=Cu(r))<0&&(r=-r>o?0:o+r),(i=i===e||i>o?o:Cu(i))<0&&(i+=o),i=r>i?0:_u(i);r<i;)t[r++]=n;return t}(t,n,r,i)):[]},jn.filter=function(e,t){return(Ja(e)?wt:vr)(e,co(t,3))},jn.flatMap=function(e,t){return Dr(Sa(e,t),1)},jn.flatMapDeep=function(e,t){return Dr(Sa(e,t),c)},jn.flatMapDepth=function(t,n,r){return r=r===e?1:Cu(r),Dr(Sa(t,n),r)},jn.flatten=Zo,jn.flattenDeep=function(e){return null!=e&&e.length?Dr(e,c):[]},jn.flattenDepth=function(t,n){return null!=t&&t.length?Dr(t,n=n===e?1:Cu(n)):[]},jn.flip=function(e){return Yi(e,512)},jn.flow=as,jn.flowRight=us,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},jn.functions=function(e){return null==e?[]:Er(e,Lu(e))},jn.functionsIn=function(e){return null==e?[]:Er(e,Nu(e))},jn.groupBy=xa,jn.initial=function(e){return null!=e&&e.length?ii(e,0,-1):[]},jn.intersection=Yo,jn.intersectionBy=Xo,jn.intersectionWith=ea,jn.invert=Pu,jn.invertBy=Bu,jn.invokeMap=Fa,jn.iteratee=cs,jn.keyBy=ba,jn.keys=Lu,jn.keysIn=Nu,jn.map=Sa,jn.mapKeys=function(e,t){var n={};return t=co(t,3),yr(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},jn.mapValues=function(e,t){var n={};return t=co(t,3),yr(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},jn.matches=function(e){return jr(cr(e,1))},jn.matchesProperty=function(e,t){return Kr(e,cr(t,1))},jn.memoize=qa,jn.merge=Mu,jn.mergeWith=qu,jn.method=ls,jn.methodOf=ps,jn.mixin=ds,jn.negate=Wa,jn.nthArg=function(e){return e=Cu(e),Qr((function(t){return Ur(t,e)}))},jn.omit=Wu,jn.omitBy=function(e,t){return Ku(e,Wa(co(t)))},jn.once=function(e){return Pa(2,e)},jn.orderBy=function(t,n,r,i){return null==t?[]:(Ja(n)||(n=null==n?[]:[n]),Ja(r=i?e:r)||(r=null==r?[]:[r]),Hr(t,n,r))},jn.over=ms,jn.overArgs=ja,jn.overEvery=fs,jn.overSome=gs,jn.partial=Ka,jn.partialRight=$a,jn.partition=wa,jn.pick=ju,jn.pickBy=Ku,jn.property=vs,jn.propertyOf=function(t){return function(n){return null==t?e:Ar(t,n)}},jn.pull=na,jn.pullAll=ra,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,co(n,2)):e},jn.pullAllWith=function(t,n,r){return t&&t.length&&n&&n.length?Gr(t,n,e,r):t},jn.pullAt=ia,jn.range=Ds,jn.rangeRight=Cs,jn.rearg=Ua,jn.reject=function(e,t){return(Ja(e)?wt:vr)(e,Wa(co(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=co(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Vr(e,i),n},jn.rest=function(n,r){if("function"!=typeof n)throw new ke(t);return Qr(n,r=r===e?r:Cu(r))},jn.reverse=oa,jn.sampleSize=function(t,n,r){return n=(r?yo(t,n,r):n===e)?1:Cu(n),(Ja(t)?Xn:Xr)(t,n)},jn.set=function(e,t,n){return null==e?e:ei(e,t,n)},jn.setWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:ei(t,n,r,i)},jn.shuffle=function(e){return(Ja(e)?er:ri)(e)},jn.slice=function(t,n,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&yo(t,n,r)?(n=0,r=i):(n=null==n?0:Cu(n),r=r===e?i:Cu(r)),ii(t,n,r)):[]},jn.sortBy=ka,jn.sortedUniq=function(e){return e&&e.length?si(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?si(e,co(t,2)):[]},jn.split=function(t,n,r){return r&&"number"!=typeof r&&yo(t,n,r)&&(n=r=e),(r=r===e?d:r>>>0)?(t=Eu(t))&&("string"==typeof n||null!=n&&!lu(n))&&!(n=li(n))&&an(t)?Ii(dn(t),0,r):t.split(n,r):[]},jn.spread=function(e,n){if("function"!=typeof e)throw new ke(t);return n=null==n?0:Cn(Cu(n),0),Qr((function(t){var r=t[n],i=Ii(t,0,n);return r&&Pt(i,r),At(e,this,i)}))},jn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},jn.take=function(t,n,r){return t&&t.length?ii(t,0,(n=r||n===e?1:Cu(n))<0?0:n):[]},jn.takeRight=function(t,n,r){var i=null==t?0:t.length;return i?ii(t,(n=i-(n=r||n===e?1:Cu(n)))<0?0:n,i):[]},jn.takeRightWhile=function(e,t){return e&&e.length?mi(e,co(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?mi(e,co(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,n,r){var i=!0,o=!0;if("function"!=typeof e)throw new ke(t);return ou(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),La(e,n,{leading:i,maxWait:n,trailing:o})},jn.thru=Da,jn.toArray=vu,jn.toPairs=$u,jn.toPairsIn=Uu,jn.toPath=function(e){return Ja(e)?Tt(e,Ko):hu(e)?[e]:ki(jo(Eu(e)))},jn.toPlainObject=Iu,jn.transform=function(e,t,n){var r=Ja(e),i=r||Xa(e)||mu(e);if(t=co(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ou(e)&&nu(o)?Kn(Ge(e)):{}}return(i?Ft:yr)(e,(function(e,r,i){return t(n,e,r,i)})),n},jn.unary=function(e){return Ta(e,1)},jn.union=aa,jn.unionBy=ua,jn.unionWith=sa,jn.uniq=function(e){return e&&e.length?pi(e):[]},jn.uniqBy=function(e,t){return e&&e.length?pi(e,co(t,2)):[]},jn.uniqWith=function(t,n){return n="function"==typeof n?n:e,t&&t.length?pi(t,e,n):[]},jn.unset=function(e,t){return null==e||di(e,t)},jn.unzip=ca,jn.unzipWith=la,jn.update=function(e,t,n){return null==e?e:hi(e,t,Ci(n))},jn.updateWith=function(t,n,r,i){return i="function"==typeof i?i:e,null==t?t:hi(t,n,Ci(r),i)},jn.values=Hu,jn.valuesIn=function(e){return null==e?[]:Qt(e,Nu(e))},jn.without=pa,jn.words=ns,jn.wrap=function(e,t){return Ka(Ci(t),e)},jn.xor=da,jn.xorBy=ha,jn.xorWith=ma,jn.zip=fa,jn.zipObject=function(e,t){return vi(e||[],t||[],nr)},jn.zipObjectDeep=function(e,t){return vi(e||[],t||[],ei)},jn.zipWith=ga,jn.entries=$u,jn.entriesIn=Uu,jn.extend=xu,jn.extendWith=Fu,ds(jn,jn),jn.add=Es,jn.attempt=rs,jn.camelCase=zu,jn.capitalize=Gu,jn.ceil=As,jn.clamp=function(t,n,r){return r===e&&(r=n,n=e),r!==e&&(r=(r=yu(r))==r?r:0),n!==e&&(n=(n=yu(n))==n?n:0),sr(yu(t),n,r)},jn.clone=function(e){return cr(e,4)},jn.cloneDeep=function(e){return cr(e,5)},jn.cloneDeepWith=function(t,n){return cr(t,5,n="function"==typeof n?n:e)},jn.cloneWith=function(t,n){return cr(t,4,n="function"==typeof n?n:e)},jn.conformsTo=function(e,t){return null==t||lr(e,t,Lu(t))},jn.deburr=Vu,jn.defaultTo=function(e,t){return null==e||e!=e?t:e},jn.divide=xs,jn.endsWith=function(t,n,r){t=Eu(t),n=li(n);var i=t.length,o=r=r===e?i:sr(Cu(r),0,i);return(r-=n.length)>=0&&t.slice(r,o)==n},jn.eq=Ha,jn.escape=function(e){return(e=Eu(e))&&G.test(e)?e.replace(H,rn):e},jn.escapeRegExp=function(e){return(e=Eu(e))&&te.test(e)?e.replace(ee,"\\$&"):e},jn.every=function(t,n,r){var i=Ja(t)?St:fr;return r&&yo(t,n,r)&&(n=e),i(t,co(n,3))},jn.find=ya,jn.findIndex=Vo,jn.findKey=function(e,t){return Mt(e,co(t,3),yr)},jn.findLast=Ia,jn.findLastIndex=Jo,jn.findLastKey=function(e,t){return Mt(e,co(t,3),Ir)},jn.floor=Fs,jn.forEach=Ea,jn.forEachRight=Aa,jn.forIn=function(e,t){return null==e?e:Cr(e,co(t,3),Nu)},jn.forInRight=function(e,t){return null==e?e:_r(e,co(t,3),Nu)},jn.forOwn=function(e,t){return e&&yr(e,co(t,3))},jn.forOwnRight=function(e,t){return e&&Ir(e,co(t,3))},jn.get=Ru,jn.gt=za,jn.gte=Ga,jn.has=function(e,t){return null!=e&&vo(e,t,Sr)},jn.hasIn=Tu,jn.head=Qo,jn.identity=ss,jn.includes=function(e,t,n,r){e=Qa(e)?e:Hu(e),n=n&&!r?Cu(n):0;var i=e.length;return n<0&&(n=Cn(i+n,0)),du(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wt(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Cu(n);return i<0&&(i=Cn(r+i,0)),Wt(e,t,i)},jn.inRange=function(t,n,r){return n=Du(n),r===e?(r=n,n=0):r=Du(r),function(e,t,n){return e>=_n(t,n)&&e<Cn(t,n)}(t=yu(t),n,r)},jn.invoke=Ou,jn.isArguments=Va,jn.isArray=Ja,jn.isArrayBuffer=Za,jn.isArrayLike=Qa,jn.isArrayLikeObject=Ya,jn.isBoolean=function(e){return!0===e||!1===e||au(e)&&Fr(e)==g},jn.isBuffer=Xa,jn.isDate=eu,jn.isElement=function(e){return au(e)&&1===e.nodeType&&!cu(e)},jn.isEmpty=function(e){if(null==e)return!0;if(Qa(e)&&(Ja(e)||"string"==typeof e||"function"==typeof e.splice||Xa(e)||mu(e)||Va(e)))return!e.length;var t=go(e);if(t==y||t==F)return!e.size;if(xo(e))return!Nr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Pr(e,t)},jn.isEqualWith=function(t,n,r){var i=(r="function"==typeof r?r:e)?r(t,n):e;return i===e?Pr(t,n,e,r):!!i},jn.isError=tu,jn.isFinite=function(e){return"number"==typeof e&&gn(e)},jn.isFunction=nu,jn.isInteger=ru,jn.isLength=iu,jn.isMap=uu,jn.isMatch=function(e,t){return e===t||Br(e,t,po(t))},jn.isMatchWith=function(t,n,r){return r="function"==typeof r?r:e,Br(t,n,po(n),r)},jn.isNaN=function(e){return su(e)&&e!=+e},jn.isNative=function(e){if(Ao(e))throw new Ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=su,jn.isObject=ou,jn.isObjectLike=au,jn.isPlainObject=cu,jn.isRegExp=lu,jn.isSafeInteger=function(e){return ru(e)&&e>=-9007199254740991&&e<=l},jn.isSet=pu,jn.isString=du,jn.isSymbol=hu,jn.isTypedArray=mu,jn.isUndefined=function(t){return t===e},jn.isWeakMap=function(e){return au(e)&&go(e)==w},jn.isWeakSet=function(e){return au(e)&&"[object WeakSet]"==Fr(e)},jn.join=function(e,t){return null==e?"":vn.call(e,t)},jn.kebabCase=Ju,jn.last=ta,jn.lastIndexOf=function(t,n,r){var i=null==t?0:t.length;if(!i)return-1;var o=i;return r!==e&&(o=(o=Cu(r))<0?Cn(i+o,0):_n(o,i-1)),n==n?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(t,n,o):qt(t,Kt,o,!0)},jn.lowerCase=Zu,jn.lowerFirst=Qu,jn.lt=fu,jn.lte=gu,jn.max=function(t){return t&&t.length?gr(t,ss,br):e},jn.maxBy=function(t,n){return t&&t.length?gr(t,co(n,2),br):e},jn.mean=function(e){return $t(e,ss)},jn.meanBy=function(e,t){return $t(e,co(t,2))},jn.min=function(t){return t&&t.length?gr(t,ss,qr):e},jn.minBy=function(t,n){return t&&t.length?gr(t,co(n,2),qr):e},jn.stubArray=_s,jn.stubFalse=ys,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=bs,jn.nth=function(t,n){return t&&t.length?Ur(t,Cu(n)):e},jn.noConflict=function(){return dt._===this&&(dt._=je),this},jn.noop=hs,jn.now=Ra,jn.pad=function(e,t,n){e=Eu(e);var r=(t=Cu(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(vt(i),n)+e+Hi(gt(i),n)},jn.padEnd=function(e,t,n){e=Eu(e);var r=(t=Cu(t))?pn(e):0;return t&&r<t?e+Hi(t-r,n):e},jn.padStart=function(e,t,n){e=Eu(e);var r=(t=Cu(t))?pn(e):0;return t&&r<t?Hi(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),In(Eu(e).replace(ne,""),t||0)},jn.random=function(t,n,r){if(r&&"boolean"!=typeof r&&yo(t,n,r)&&(n=r=e),r===e&&("boolean"==typeof n?(r=n,n=e):"boolean"==typeof t&&(r=t,t=e)),t===e&&n===e?(t=0,n=1):(t=Du(t),n===e?(n=t,t=0):n=Du(n)),t>n){var i=t;t=n,n=i}if(r||t%1||n%1){var o=En();return _n(t+o*(n-t+st("1e-"+((o+"").length-1))),n)}return Jr(t,n)},jn.reduce=function(e,t,n){var r=Ja(e)?Bt:zt,i=arguments.length<3;return r(e,co(t,4),n,i,hr)},jn.reduceRight=function(e,t,n){var r=Ja(e)?Ot:zt,i=arguments.length<3;return r(e,co(t,4),n,i,mr)},jn.repeat=function(t,n,r){return n=(r?yo(t,n,r):n===e)?1:Cu(n),Zr(Eu(t),n)},jn.replace=function(){var e=arguments,t=Eu(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(t,n,r){var i=-1,o=(n=_i(n,t)).length;for(o||(o=1,t=e);++i<o;){var a=null==t?e:t[Ko(n[i])];a===e&&(i=o,a=r),t=nu(a)?a.call(t):a}return t},jn.round=Ss,jn.runInContext=re,jn.sample=function(e){return(Ja(e)?Yn:Yr)(e)},jn.size=function(e){if(null==e)return 0;if(Qa(e))return du(e)?pn(e):e.length;var t=go(e);return t==y||t==F?e.size:Nr(e).length},jn.snakeCase=Yu,jn.some=function(t,n,r){var i=Ja(t)?Lt:oi;return r&&yo(t,n,r)&&(n=e),i(t,co(n,3))},jn.sortedIndex=function(e,t){return ai(e,t)},jn.sortedIndexBy=function(e,t,n){return ui(e,t,co(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Ha(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return ai(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return ui(e,t,co(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ai(e,t,!0)-1;if(Ha(e[n],t))return n}return-1},jn.startCase=Xu,jn.startsWith=function(e,t,n){return e=Eu(e),n=null==n?0:sr(Cu(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},jn.subtract=ws,jn.sum=function(e){return e&&e.length?Gt(e,ss):0},jn.sumBy=function(e,t){return e&&e.length?Gt(e,co(t,2)):0},jn.template=function(t,n,r){var i=jn.templateSettings;r&&yo(t,n,r)&&(n=e),t=Eu(t),n=Fu({},n,i,Xi);var o,a,u=Fu({},n.imports,i.imports,Xi),s=Lu(u),c=Qt(u,s),l=0,p=n.interpolate||ye,d="__p += '",h=Se((n.escape||ye).source+"|"+p.source+"|"+(p===Z?he:ye).source+"|"+(n.evaluate||ye).source+"|$","g"),m="//# sourceURL="+(Le.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";t.replace(h,(function(e,n,r,i,u,s){return r||(r=i),d+=t.slice(l,s).replace(Ie,on),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),u&&(a=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e})),d+="';\n";var f=Le.call(n,"variable")&&n.variable;if(f){if(pe.test(f))throw new Ae("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(j,""):d).replace(K,"$1").replace($,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=rs((function(){return xe(s,m+"return "+d).apply(e,c)}));if(g.source=d,tu(g))throw g;return g},jn.times=function(e,t){if((e=Cu(e))<1||e>l)return[];var n=d,r=_n(e,d);t=co(t),e-=d;for(var i=Vt(r,t);++n<e;)t(n);return i},jn.toFinite=Du,jn.toInteger=Cu,jn.toLength=_u,jn.toLower=function(e){return Eu(e).toLowerCase()},jn.toNumber=yu,jn.toSafeInteger=function(e){return e?sr(Cu(e),-9007199254740991,l):0===e?e:0},jn.toString=Eu,jn.toUpper=function(e){return Eu(e).toUpperCase()},jn.trim=function(t,n,r){if((t=Eu(t))&&(r||n===e))return Jt(t);if(!t||!(n=li(n)))return t;var i=dn(t),o=dn(n);return Ii(i,Xt(i,o),en(i,o)+1).join("")},jn.trimEnd=function(t,n,r){if((t=Eu(t))&&(r||n===e))return t.slice(0,hn(t)+1);if(!t||!(n=li(n)))return t;var i=dn(t);return Ii(i,0,en(i,dn(n))+1).join("")},jn.trimStart=function(t,n,r){if((t=Eu(t))&&(r||n===e))return t.replace(ne,"");if(!t||!(n=li(n)))return t;var i=dn(t);return Ii(i,Xt(i,dn(n))).join("")},jn.truncate=function(t,n){var r=30,i="...";if(ou(n)){var o="separator"in n?n.separator:o;r="length"in n?Cu(n.length):r,i="omission"in n?li(n.omission):i}var a=(t=Eu(t)).length;if(an(t)){var u=dn(t);a=u.length}if(r>=a)return t;var s=r-pn(i);if(s<1)return i;var c=u?Ii(u,0,s).join(""):t.slice(0,s);if(o===e)return c+i;if(u&&(s+=c.length-s),lu(o)){if(t.slice(s).search(o)){var l,p=c;for(o.global||(o=Se(o.source,Eu(me.exec(o))+"g")),o.lastIndex=0;l=o.exec(p);)var d=l.index;c=c.slice(0,d===e?s:d)}}else if(t.indexOf(li(o),s)!=s){var h=c.lastIndexOf(o);h>-1&&(c=c.slice(0,h))}return c+i},jn.unescape=function(e){return(e=Eu(e))&&z.test(e)?e.replace(U,mn):e},jn.uniqueId=function(e){var t=++Ne;return Eu(e)+t},jn.upperCase=es,jn.upperFirst=ts,jn.each=Ea,jn.eachRight=Aa,jn.first=Qo,ds(jn,(Is={},yr(jn,(function(e,t){Le.call(jn.prototype,t)||(Is[t]=e)})),Is),{chain:!1}),jn.VERSION="4.17.21",Ft(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){jn[e].placeholder=jn})),Ft(["drop","take"],(function(t,n){Hn.prototype[t]=function(r){r=r===e?1:Cn(Cu(r),0);var i=this.__filtered__&&!n?new Hn(this):this.clone();return i.__filtered__?i.__takeCount__=_n(r,i.__takeCount__):i.__views__.push({size:_n(r,d),type:t+(i.__dir__<0?"Right":"")}),i},Hn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ft(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:co(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Ft(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Ft(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ss)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Rr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Wa(co(e)))},Hn.prototype.slice=function(t,n){t=Cu(t);var r=this;return r.__filtered__&&(t>0||n<0)?new Hn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),n!==e&&(r=(n=Cu(n))<0?r.dropRight(-n):r.take(n-t)),r)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(d)},yr(Hn.prototype,(function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),o=jn[i?"take"+("last"==n?"Right":""):n],a=i||/^find/.test(n);o&&(jn.prototype[n]=function(){var n=this.__wrapped__,u=i?[1]:arguments,s=n instanceof Hn,c=u[0],l=s||Ja(n),p=function(e){var t=o.apply(jn,Pt([e],u));return i&&d?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(s=l=!1);var d=this.__chain__,h=!!this.__actions__.length,m=a&&!d,f=s&&!h;if(!a&&l){n=f?n:new Hn(this);var g=t.apply(n,u);return g.__actions__.push({func:Da,args:[p],thisArg:e}),new Un(g,d)}return m&&f?t.apply(this,u):(g=this.thru(p),m?i?g.value()[0]:g.value():g)})})),Ft(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ja(i)?i:[],e)}return this[n]((function(n){return t.apply(Ja(n)?n:[],e)}))}})),yr(Hn.prototype,(function(e,t){var n=jn[t];if(n){var r=n.name+"";Le.call(Tn,r)||(Tn[r]=[]),Tn[r].push({name:t,func:n})}})),Tn[ji(e,2).name]=[{name:"wrapper",func:e}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=ki(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ki(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ki(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ja(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_n(t,e+a);break;case"takeRight":e=Cn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,p=l.length,d=0,h=_n(s,this.__takeCount__);if(!n||!r&&i==s&&h==s)return fi(e,this.__actions__);var m=[];e:for(;s--&&d<h;){for(var f=-1,g=e[c+=t];++f<p;){var v=l[f],D=v.iteratee,C=v.type,_=D(g);if(2==C)g=_;else if(!_){if(1==C)continue e;break e}}m[d++]=g}return m},jn.prototype.at=Ca,jn.prototype.chain=function(){return va(this)},jn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===e&&(this.__values__=vu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var n,r=this;r instanceof $n;){var i=Uo(r);i.__index__=0,i.__values__=e,n?o.__wrapped__=i:n=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,n},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hn){var n=t;return this.__actions__.length&&(n=new Hn(this)),(n=n.reverse()).__actions__.push({func:Da,args:[oa],thisArg:e}),new Un(n,this.__chain__)}return this.thru(oa)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,tt&&(jn.prototype[tt]=function(){return this}),jn}();mt?((mt.exports=fn)._=fn,ht._=fn):dt._=fn}.call(se);class me{constructor(e){const t=e[0],n=e[e.length-1]||t,r={sourceString:t.source.sourceString,startIdx:t.source.startIdx,endIdx:n.source.endIdx};this.sourceFile=r,this._internalRange={start:t.source.getLineAndColumn(),end:n.source.collapsedRight().getLineAndColumn()},this.ctorName=e.map((e=>e.ctorName)).join(" + "),this.context=t.parserContext}get range(){const{start:e,end:t}=this._internalRange,{lineNum:n,colNum:r}=e,{lineNum:i,colNum:o}=t;return{line:n,col:r,lineEnd:i,colEnd:o}}get sourceString(){const{sourceString:e,startIdx:t,endIdx:n}=this.sourceFile;return e.slice(t,n)}get printError(){const{startIdx:e,endIdx:t}=this.sourceFile;return n=Error(de(this._internalRange.start,[e,t])),void console.error("%c"+n.stack,"font-family: monospace; font-size: 13px;font-style: normal;");var n}}function fe(...e){return new me(e.filter(Boolean))}function ge(e,t=0){let n=0;const r=e.length;let i=-1,o=!1;for(let a=0;a<r;a++)i=e.charCodeAt(a),i>=0&&i<=128?n+=1:(n+=2,o||(n+=t,o=!0));return n}function ve(e,t,n){if(!e)return t;const r=Object.getOwnPropertyDescriptors(e),i={};if(n)F(i,n);else{const t=Object.getPrototypeOf(e);Object.setPrototypeOf(i,t)}return Object.defineProperties(i,{...r,...Object.getOwnPropertyDescriptors(t)})}class De extends Error{constructor(e,t){super(),this.name="SyntaxError";const n="string"!=typeof e,r=n?e.message:e;if(this.message=t?this.transformMessage(r,t):r,n){const t=e.stack.split("\n").filter((e=>e.trimStart().startsWith("at"))).join("\n");this.stack=this.name+"\n"+this.message+"\n"+t}}transformKeyword(e,t){switch(e){case Ae.End:return;default:return t[e]||e.replace(/(\$(.+?)\$)/g,((e,n,r)=>t[n]?this.transformKeyword(t[n],t):`${r}`)).replace(/^not (.+)/,`${t[Ae.Not]??Ie} - ($1)`).replaceAll("["," - (").replaceAll("]",")")}}transformMessage(e,t){const[n,r]=e.split(Ce),i=r.split(/, +or +|,| +or +/g).map((e=>this.transformKeyword(e.trim(),t))).filter(Boolean),o=i.length>0?i.filter((e=>e!==t[Ae.Exp]&&e!==Ee)).length>0?i.join(2===i.length?" 或 ":"、").replace(/^(.+)$/,t[Ae.Expected]??Ce+": $1"):t[Ae.ExpectedExp]??ye:t[Ae.ExpectedEndOfInput]??_e;return n+o+`\n${" ".repeat(ge(o))}    ——鲁迅`}}const Ce="Expected",_e="Unexpected end of input",ye="Unexpected expression syntax",Ie="not",Ee="Exp",Ae={Not:"$Not$",ExpectedEndOfInput:"$ExpectedEndOfInput$",Expected:"$Expected$",End:"$END$",Exp:"$Exp$",ExpectedExp:"$ExpectedExp$"};function xe(e,t,n){return Z(e.parse(),t.parse(),n.parse(),e.sourceString+t.sourceString+n.sourceString)}const Fe={identifier:(e,t)=>e.sourceString+t.sourceString,variableName(e,t){const n=t.sourceString;return te(e.sourceString||null,n)},literalOf:e=>ne("null"===e.sourceString?null:e.parse(),fe(e)),boolean:e=>"true"===e.parse().toLowerCase(),number(e){const t=e.parse();return"number"==typeof t?t:Number(t)},sign_apply:e=>+e.parse(),sign_signed(e,t){const n=t.parse();return"-"===e.sourceString?-n:+n},number_fract:(e,t,n)=>(e.sourceString??"")+"."+n.sourceString,hex:(e,t)=>"0x"+t.sourceString,percet(e,t){return n=e.parse(),R(w.PrecetLiteral,{value:n},r??n+"%");var n,r},ArrayElements:e=>({type:C.Expression,kind:w.ArrayLiteral,value:e.parse()}),Array:(e,t,n)=>t.parse(),AddExp_add:xe,MulExp_mul:xe,ExpExp_pow:xe,LogicExp_logic:xe,OrNullExp_or:xe,RelationExp_rel:xe,EqualExp_eq:xe,SpreadExp_spread:xe,IncrementExp_before:(e,t)=>Q(t.parse(),e.sourceString,!0,fe(e,t)),IncrementExp_after:(e,t)=>Q(e.parse(),t.sourceString,!1,fe(e,t)),ExpExp_invert(e,t){const n=t.parse();return Z(null,e.parse(),n,e.sourceString+t.sourceString)},ExpExp_sign(e,t){const n=t.parse();if(console.log(t,t.source.getLineAndColumn(),n),n.kind===w.Literal)throw he("Expected $number$ or $Exp$",t);return Z(ne(0),e.parse(),n,e.sourceString+t.sourceString)},PriExp_paren:(e,t,n)=>t.parse()};function be(e,t){return e.kind===w.Comma?e.value.map(t):[t(e)]}const Se={Template:(e,t,n,r)=>({type:C.Expression,kind:w.Template,value:t.parse(),pipe:n.parse()}),CallExpression:(e,t,n,r)=>X(e.parse(),n.parse(),fe(e,t,n,r)),TopExp_ArraySpread(e){const{value:t}=e.parse();return{type:C.Expression,kind:w.ArraySpreadLiteral,start:t.left,end:t.right}},Exp_Comma(e,t,n){const r=e.parse(),i=n.parse();return R(w.Comma,{value:i.kind===w.Comma?[r,...i.value]:[r,i]})},TopExp_assign:(e,t,n)=>R(w.Assign,{value:{left:e.parse(),right:n.parse()}})};function we(e){let t=e.parse();return t instanceof Array&&1===(t=t.flat()).length&&D(t[0])?t[0].value??"":t??""}function ke(e,t=0,n){const r=[];let i=!1;const o=[];let a,u=-1,s=-1;for(const p of e){let e=p&&(D(p)?p:p.parse())||p;if(o[++u]=e,D(e))!a&&(a=e.sourceType),e=e.value;else{if(e instanceof Array){const{result:n,hasObject:o}=ke(e,t+1);if(n)for(let e=0;e<n.length;e++){const t=n[e];D(t)?(a=t.sourceType,r[++s]=t.value):r[++s]=t}!i&&(i=o);continue}!i&&(i="object"==typeof e),!a&&(a=(c=p)?.type===C.Source?c.sourceType:c.ctorName)}e&&(r[++s]=e)}var c;let l;if(i)l=r;else if(r.length>0){const e=1===r.length?r[0]:r.join(""),t=D(e)?e.value:e;l=[{type:C.Source,kind:y.Content,value:t,sourceType:(a||"")+""||void 0}]}return{hasObject:i,result:l}}const Re={NonemptyListOf(e,t,n){const r=n.parse();return r instanceof Array?[e.parse(),...r.flat(1)]:[e.parse()]},nonemptyListOf(e,t,n){const r=n.parse();return r instanceof Array?[e.parse(),...r.flat(1)]:[e.parse()]},EmptyListOf:()=>[],emptyListOf:()=>[],oresc(e,{sourceString:t}){if(e.parse())switch(t){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"\\":return"\\"}return t},centerOf:(e,t,n)=>t.parse(),sourceOf:e=>e.sourceString,stringify:we,join:(e,t)=>we(e)+we(t),startWith:(e,t)=>t.parse(),endWith:(e,t)=>e.parse(),ignore(e){return t=fe(e),F({type:C.Source,kind:0},t);var t},optional:function(e){const t=e.parse();if(t instanceof Array&&t.length>1)throw Error();const n=t?.[0];return D(n)?n.value:n||void 0},_iter:(...e)=>ke(e,0).result,_terminal(){return this.sourceString}},Te={comment_single:e=>S(e.parse(),fe(e)),comment_multi:e=>S(e.parse(),fe(e)),comment_notes:e=>S(e.parse().value,fe(e)),comment_inline(e){const t=e.parse();return{type:C.Expression,kind:w.Comment,kindName:w[w.Comment],sourceString:e.sourceString,value:t}}},Pe={logic_blockForeach(e){const t=e.parse(),[n,...r]=t.value;return function(e,t,n,r){return $e(2,{child:e,children:t?.kind===w.Comma?{...t,kind:w.ArrayLiteral}:t,block:n},r)}(n.child,n.children,r,fe(...arguments))},logic_foreach:(e,t,n,r)=>({child:t.parse(),children:r.parse()}),logic_if:(e,t)=>t,logic_elseIf:(e,t)=>t,logic_end:e=>e,logic_else:e=>e,logic_blockIf(e,t,n,r,i,o,a){const u=e.parse(),s=[],c=i.children[0]?.parse(),l=a.parse(),p=[u.parse()];for(const m of n.children){const e=m.parse();s.push(e),p.push(e.parse())}const d=[],h=[];for(const m of t.children)h.push(m.parse());d.push(Ve(h,fe(u,t,s[0]||c||l)));for(let m=0;m<r.children.length;m++){const e=r.children[m],t=[];for(const n of e.children)t.push(n.parse());d.push(Ve(t,fe(s[m],e,s[m+1]||c||l)))}if(o.child(0)){const e=[];for(const t of o.child(0).children)e.push(t.parse());d.push(Ve(e,fe(i,o.child(0),a.parse())))}return function(e,t,n){return $e(0,{conditions:e,blocks:t},n)}(p,d,fe(e,t,n,r,i,o,a.parse()))},logicSyntax_let(e,t){const n=e.parse().length>1;return function(e,t,n){return $e(3,{explicit:t,statements:be(e,(e=>{if(e.type===C.Expression)switch(e.kind){case w.Assign:{const{value:n,...r}=e;return{type:C.Logic,...r,kind:4,explicit:t,left:n.left,right:n.right}}case w.VariableIdentifier:return{type:C.Logic,kind:4,explicit:t,left:e,right:ne(null)}}}))},n)}(t.parse(),n,fe(...arguments))}},Be={...{},...{expr_pipe(e,t){try{return We(`|${t.sourceString}`)}catch(n){return console.warn(n),We(`|=${t.sourceString}`)}},expr_logic:e=>We(`(${e.parse()})`),expr_template:e=>We(`{{${e.parse()}}}`),expr_auto(e){try{return We(`@${e.sourceString};`)}catch(t){return console.warn(t),X("link",[e.sourceString],fe(e))}}},...{errorBoundary:e=>"ignoreError"===e.ctorName?e.parse():{source:e.parse(),error:e.ctorName},nonemptyBlockOf(e,t,n){const r=e.parse(),i=t.parse()||[];return i?.length>0?Ve([r,...i,n.parse()],fe(e,t,n)):r},emptyLine(e){return t=fe(e),ze(7,{command:"empty"},t);var t},blockEnd:(e,t)=>Ge("end",[],null,fe(t)),blockEndOf:e=>Ge("end",[],null,fe(e)),linesOf:e=>Ve(e.parse(),fe(e)),syntaxBlockOf:(e,t,n)=>Ve([e.parse(),...t.parse()||[]].filter(Boolean),fe(e,t,n)),contentBlockOf:(e,t,n)=>Ve([e.parse(),...t.parse()||[],n.parse()].filter(Boolean),fe(e,t,n)),character_call_macro:(e,t)=>ve(t.parse(),{text:e.parse(),source:fe(e,t)}),macro:e=>ee(We(`@${e.parse()};`),fe(e)),rawOf(e){return t=e.parse(),n=fe(e),ze(0,{value:t},n);var t,n},withText:e=>Je(e.parse(),null,fe(e)),styled_centered:(e,t,n)=>function(e,t,n){return Je(e.parse(),"centered",fe(t,e,n))}(t,e,n),styled_italic(e,t,n){const r=n.parse();return Je(r?t.parse():[e.parse(),t.parse()],r?"italic":null,fe(e,t,n))},styled_bold(e,t,n){const r=n.parse();return Je(r?t.parse():[e.parse(),t.parse()],r?"bold":null,fe(e,t,n))},styled_underline(e,t,n){const r=n.parse();return Je(r?t.parse():[e.parse(),t.parse()],r?"underline":null,fe(e,t,n))},template_macro:e=>function(e,t){t&&t.context.addInlayHint("=MACRO","pre",t,1);return ze(3,{pipe:e},t)}(e.parse(),fe(e)),template_label:(e,t)=>(e.parserContext.addInlayHint("=END","post",fe(e),1),function(e,t,n){n&&n.context.addInlayHint("=LABEL","pre",n,1);return ze(4,{value:e,pipe:t instanceof Object?ve(t,{text:e}):t},n)}(e.parse(),t.parse(),fe(e,t))),template_native:e=>function(e,t){t&&t.context.addInlayHint("=EXPR","pre",t,2);return ze(2,{value:e},t)}(e.parse(),fe(e))},...{textSyntax_dialogue:(e,t,n,r)=>Ge("text:dialogue",[n.parse()],r.parse(),fe(e,n,r)),textSyntax_action:(e,t,n)=>Ge("text:action",[t.parse()],n.parse(),fe(e,t,n)),command_macro(e){const t=e.parse(),{name:n,...r}=t;return Ge(n,r.argumentList,r.pipe,fe(e))},command_transition:(e,t,n)=>Ge("transition",[t.parse()],n.parse(),fe(e,t,n)),textSyntax_space:e=>Ge("text:space",[],null,fe(e)),dialogue_end:e=>(e.parserContext.addInlayHint(":dialogue_end","pre",fe(e)),e.parse()),action_end:e=>(e.parserContext.addInlayHint(":action_end","pre",fe(e)),e.parse()),character_call:(e,t)=>(t.parserContext.addInlayHint(":dialogue_begin","post",fe(t)),Ge("character",[e.parse()],t.parse(),fe(e,t))),action_start:e=>(e.parserContext.addInlayHint(":action_begin","post",fe(e)),"textSyntax_space"===e.child(0).ctorName&&e.parserContext.addInlayHint(":space x"+e.children.length,"post",fe(e)),e.parse()),action_content:e=>("textSyntax_space"===e.ctorName&&e.parserContext.addInlayHint(":action_space x"+e.child(0).children.length,"post",fe(e)),e.parse()),dialogue_content(e){const t=e.parse();return"textSyntax_space"===e.ctorName&&e.parserContext.addInlayHint(":space x"+e.child(0).children.length,"post",fe(e)),t},dialogue_action:e=>(e.parserContext.addInlayHint(":@dialogue_action","post",fe(e)),Ge("character-action",[e.parse()],null,fe(e))),command_pageBreak:e=>Ge("pageBreak",[],null,fe(e)),command:e=>(e.parserContext.addInlayHint(":@"+e.ctorName,"post",fe(e)),e.parse())}};const Oe={...Re,...Be,...Te,...Pe,variableName:Fe.variableName},Le={Params_multiple(e,t,n){const r={type:"Params",flags:[],params:{}},i=e.parse().value;1===i.length?r.flags.push(i[0]):r.params[i[0]]=i[1];const o=n.parse();return r.flags=r.flags.concat(o.flags),Object.assign(r.params,o.params),r},Params_single(e,t){const n={type:"Params",flags:[],params:{}},r=e.parse().value;return 1===r.length?n.flags.push(r[0]):n.params[r[0]]=r[1],n},Param_setValue:(e,t,n)=>({type:"NodeArray",value:[e.parse(),n.parse()]}),Param_setFlag:e=>({type:"NodeArray",value:[e.parse()]})},Ne={...Fe,...Se,...Le,...Re,Statement:e=>ve(e.parse(),{},fe(e)),Statement_Exp:(e,t)=>e.parse(),Statement_Macro:(e,t,n,r)=>ve(t.parse(),{pipe:n.parse()}),Statement_Inline:(e,t)=>e.parse(),Statement_Pipe:(e,t)=>e.parse(),Statement_AnonymousPipe:(e,t)=>e.parse(),Macro_Pipe_Call:(e,t)=>t.parse()||e.parse(),Macro_Pipe_Expr:(e,t,n)=>ve(e.parse(),{argumentList:[n.parse()]}),pipeFlag:e=>X(),Macro_Call:e=>e.parse(),End(e){},exprEnd(e){},Macro_Call_Expr(e,t){const n=t.parse()||{};return Y(e.parse(),n,fe(e,t))}},Me=oe.createSemantics();function qe(e){const t=oe.matcher().replaceInputRange(0,0,e);return console.log(t,e),t.match("Main")}function We(e,t){try{const t=oe.match(e,"Main");if(t.succeeded()){return Me(t).parse()}throw Error(t.message)}catch(n){if(n instanceof Error&&!n.message.startsWith("Missing semantic action"))throw new De(n,t);throw n}}var je,Ke;Me.addOperation("parse",{...Ne,...Oe}),Me.addAttribute("parseExpression",{_nonterminal(...e){return qe(this.sourceString)},_terminal(){return qe(this.sourceString)},_iter(...e){return qe(this.sourceString)}}),(Ke=je||(je={}))[Ke.IF=0]="IF",Ke[Ke.WHILE=1]="WHILE",Ke[Ke.FOREACH=2]="FOREACH",Ke[Ke.LET=3]="LET",Ke[Ke.ASSIGN=4]="ASSIGN";const $e=x(C.Logic,je);var Ue,He;(He=Ue||(Ue={}))[He.Raw=0]="Raw",He[He.Styled=1]="Styled",He[He.Expr=2]="Expr",He[He.InlineMacro=3]="InlineMacro",He[He.Label=4]="Label",He[He.Array=5]="Array",He[He.Line=6]="Line",He[He.Empty=7]="Empty";const ze=x(C.Content,Ue);function Ge(e,t,n,r){return ze(6,{command:e,argumentList:t,pipe:n},r)}function Ve(e,t){return ze(5,{value:e},t)}function Je(e,t,n){if(!e)return null;const r=function(e){return e.type===C.Content&&1===e.kind}(e),i=r?e.value:e;return ze(1,{value:i,pipe:"string"==typeof t?Y("styled",{flags:r&&e.pipe?[...e.pipe.flags,t]:[t]}):t},n)}var Ze,Qe;(Qe=Ze||(Ze={}))[Qe.character=0]="character",Qe[Qe.parenthetical=1]="parenthetical",Qe[Qe.dialogue=2]="dialogue",Qe[Qe.separator=3]="separator",Qe[Qe.dialogue_end=4]="dialogue_end",Qe[Qe.dual_dialogue_end=5]="dual_dialogue_end",Qe[Qe.action=6]="action",Qe[Qe.centered=7]="centered",Qe[Qe.transition=8]="transition",Qe[Qe.synopsis=9]="synopsis",Qe[Qe.section=10]="section",Qe[Qe.page_break=11]="page_break",Qe[Qe.dual_dialogue_begin=12]="dual_dialogue_begin",Qe[Qe.dialogue_begin=13]="dialogue_begin",Qe[Qe.lyric=14]="lyric",Qe[Qe.scene_heading=15]="scene_heading",Qe[Qe.title=16]="title",Qe[Qe.credit=17]="credit",Qe[Qe.source=18]="source",Qe[Qe.authors=19]="authors",Qe[Qe.author=20]="author",Qe[Qe.notes=21]="notes",Qe[Qe.draft_date=22]="draft_date",Qe[Qe.revision=23]="revision",Qe[Qe.date=24]="date",Qe[Qe.contact=25]="contact",Qe[Qe.contact_info=26]="contact_info",Qe[Qe.copyright=27]="copyright",Qe[Qe.boneyard_begin=28]="boneyard_begin",Qe[Qe.boneyard_end=29]="boneyard_end",Qe[Qe.note=30]="note";const Ye=window.MonacoEnvironment.getWorkerUrl,Xe=window.MonacoEnvironment.getWorker;window.MonacoEnvironment={getWorkerUrl:function(e,t){console.debug("getWorker",e,t);const n=Ye(e,t)??("string"==typeof et[t]?et[t]:et[t]());return console.debug("getWorkerUrl",e,t,"=>",n),n},getWorker(e,t){console.debug("getWorker",e,t);const n=window.MonacoEnvironment.getWorkerUrl(e,t);return"string"==typeof n?Xe(e,t):n}};const et={};!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(1));let o=null,a=!1;class u{constructor(e){const t=e.length,n=u._utf8ByteLength(e),r=n!==t,i=r?new Uint32Array(t+1):null;r&&(i[t]=n);const o=r?new Uint32Array(n+1):null;r&&(o[n]=t);const a=new Uint8Array(n);let s=0;for(let u=0;u<t;u++){const n=e.charCodeAt(u);let c=n,l=!1;if(n>=55296&&n<=56319&&u+1<t){const t=e.charCodeAt(u+1);t>=56320&&t<=57343&&(c=65536+(n-55296<<10)|t-56320,l=!0)}r&&(i[u]=s,l&&(i[u+1]=s),c<=127?o[s+0]=u:c<=2047?(o[s+0]=u,o[s+1]=u):c<=65535?(o[s+0]=u,o[s+1]=u,o[s+2]=u):(o[s+0]=u,o[s+1]=u,o[s+2]=u,o[s+3]=u)),c<=127?a[s++]=c:c<=2047?(a[s++]=192|(1984&c)>>>6,a[s++]=128|(63&c)>>>0):c<=65535?(a[s++]=224|(61440&c)>>>12,a[s++]=128|(4032&c)>>>6,a[s++]=128|(63&c)>>>0):(a[s++]=240|(1835008&c)>>>18,a[s++]=128|(258048&c)>>>12,a[s++]=128|(4032&c)>>>6,a[s++]=128|(63&c)>>>0),l&&u++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){const i=e.charCodeAt(n);let o=i,a=!1;if(i>=55296&&i<=56319&&n+1<r){const t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(o=65536+(i-55296<<10)|t-56320,a=!0)}t+=o<=127?1:o<=2047?2:o<=65535?3:4,a&&n++}return t}createString(e){const t=e._malloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}class s{constructor(e){if(this.id=++s.LAST_ID,!o)throw new Error("Must invoke loadWASM first.");this._onigBinding=o,this.content=e;const t=new u(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!s._sharedPtrInUse?(s._sharedPtr||(s._sharedPtr=o._malloc(1e4)),s._sharedPtrInUse=!0,o.HEAPU8.set(t.utf8Value,s._sharedPtr),this.ptr=s._sharedPtr):this.ptr=t.createString(o)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===s._sharedPtr?s._sharedPtrInUse=!1:this._onigBinding._free(this.ptr)}}t.OnigString=s,s.LAST_ID=0,s._sharedPtr=0,s._sharedPtrInUse=!1;class c{constructor(e){if(!o)throw new Error("Must invoke loadWASM first.");const t=[],n=[];for(let s=0,c=e.length;s<c;s++){const r=new u(e[s]);t[s]=r.createString(o),n[s]=r.utf8Length}const r=o._malloc(4*e.length);o.HEAPU32.set(t,r/4);const i=o._malloc(4*e.length);o.HEAPU32.set(n,i/4);const a=o._createOnigScanner(r,i,e.length);for(let u=0,s=e.length;u<s;u++)o._free(t[u]);o._free(i),o._free(r),0===a&&function(e){throw new Error(e.UTF8ToString(e._getLastOnigError()))}(o),this._onigBinding=o,this._ptr=a}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n=a){if("string"==typeof e){e=new s(e);const r=this._findNextMatchSync(e,t,n);return e.dispose(),r}return this._findNextMatchSync(e,t,n)}_findNextMatchSync(e,t,n){const r=this._onigBinding;let i;if(i=n?r._findNextOnigScannerMatchDbg(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t)):r._findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t)),0===i)return null;const o=r.HEAPU32;let a=i/4;const u=o[a++],s=o[a++];let c=[];for(let l=0;l<s;l++){const t=e.convertUtf8OffsetToUtf16(o[a++]),n=e.convertUtf8OffsetToUtf16(o[a++]);c[l]={start:t,end:n,length:n-t}}return{index:u,captureIndices:c}}}t.OnigScanner=c;let l=!1;t.loadWASM=function(e){if(l)throw new Error("Cannot invoke loadWASM more than once.");let t,n,r,a;l=!0,e instanceof ArrayBuffer||e instanceof Response?t=e:(t=e.data,n=e.print);const u=new Promise(((e,t)=>{r=e,a=t}));let s;return s=t instanceof ArrayBuffer?(c=t,e=>WebAssembly.instantiate(c,e)):t instanceof Response&&"function"==typeof WebAssembly.instantiateStreaming?function(e){return t=>WebAssembly.instantiateStreaming(e,t)}(t):function(e){return async t=>{const n=await e.arrayBuffer();return WebAssembly.instantiate(n,t)}}(t),function(e,t,n,r){i.default({print:t,instantiateWasm:(t,n)=>{if("undefined"==typeof performance){const e=()=>Date.now();t.env.emscripten_get_now=e,t.wasi_snapshot_preview1.emscripten_get_now=e}return e(t).then((e=>n(e.instance)),r),{}}}).then((e=>{o=e,n()}))}(s,n,r,a),u;var c},t.createOnigString=function(e){return new s(e)},t.createOnigScanner=function(e){return new c(e)},t.setDefaultDebugCall=function(e){a=e}},function(e,t,n){var r=("undefined"!=typeof document&&document.currentScript&&document.currentScript.src,function(e){var t,n=void 0!==(e=e||{})?e:{},r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);var i,o=!1,a="";function u(e){return n.locateFile?n.locateFile(e,a):a+e}i=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(m("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof onig_print&&("undefined"==typeof console&&(console={}),console.log=onig_print,console.warn=console.error="undefined"!=typeof printErr?printErr:onig_print);var s,c,l=n.print||console.log.bind(console),p=n.printErr||console.warn.bind(console);for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=null,n.arguments&&n.arguments,n.thisProgram&&n.thisProgram,n.quit&&n.quit,n.wasmBinary&&(s=n.wasmBinary),n.noExitRuntime&&n.noExitRuntime,"object"!=typeof WebAssembly&&p("no native wasm support detected");var d=new WebAssembly.Table({initial:51,maximum:51,element:"anyfunc"}),h=!1;function m(e,t){e||K("Assertion failed: "+t)}var f="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function g(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&f)return f.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var u=63&e[t++];if(192!=(224&a)){var s=63&e[t++];if((a=224==(240&a)?(15&a)<<12|u<<6|s:(7&a)<<18|u<<12|s<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|u)}else o+=String.fromCharCode(a)}return o}function v(e,t){return e?g(C,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var D,C,_,y=65536;function I(e,t){return e%t>0&&(e+=t-e%t),e}function E(e){D=e,n.HEAP8=new Int8Array(e),n.HEAP16=new Int16Array(e),n.HEAP32=_=new Int32Array(e),n.HEAPU8=C=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=new Float32Array(e),n.HEAPF64=new Float64Array(e)}var A=5547200,x=304160,F=n.INITIAL_MEMORY||16777216;function b(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?n.dynCall_v(r):n.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t(n)}}(c=n.wasmMemory?n.wasmMemory:new WebAssembly.Memory({initial:F/y,maximum:2147483648/y}))&&(D=c.buffer),F=D.byteLength,E(D),_[x>>2]=A;var S=[],w=[],k=[],R=[];function T(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)L(n.preRun.shift());b(S)}function P(){b(w)}function B(){b(k)}function O(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)N(n.postRun.shift());b(R)}function L(e){S.unshift(e)}function N(e){R.unshift(e)}var M=0,q=null;function W(e){M++,n.monitorRunDependencies&&n.monitorRunDependencies(M)}function j(e){if(M--,n.monitorRunDependencies&&n.monitorRunDependencies(M),0==M&&q){var t=q;q=null,t()}}function K(e){throw n.onAbort&&n.onAbort(e),l(e+=""),p(e),h=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}n.preloadedImages={},n.preloadedAudios={};var $="data:application/octet-stream;base64,";function U(e){return String.prototype.startsWith?e.startsWith($):0===e.indexOf($)}var H,z="onig.wasm";function G(){try{if(s)return new Uint8Array(s);if(i)return i(z);throw"both async and sync fetching of the wasm failed"}catch(e){K(e)}}function V(){return s||!o||"function"!=typeof fetch?new Promise((function(e,t){e(G())})):fetch(z,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+z+"'";return e.arrayBuffer()})).catch((function(){return G()}))}function J(){var e={env:ie,wasi_snapshot_preview1:ie};function t(e,t){var r=e.exports;n.asm=r,j()}function r(e){t(e.instance)}function i(t){return V().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),K(e)}))}if(W(),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(o){return p("Module.instantiateWasm callback failed with error: "+o),!1}return function(){if(s||"function"!=typeof WebAssembly.instantiateStreaming||U(z)||"function"!=typeof fetch)return i(r);fetch(z,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),i(r)}))}))}(),{}}function Z(){return 304160}function Q(e,t,n){C.copyWithin(e,t,t+n)}function Y(){return C.length}function X(e){try{return c.grow(e-D.byteLength+65535>>>16),E(c.buffer),1}catch(t){}}function ee(e){var t=Y();if(e>2147483648)return!1;for(var n=1;n<=4;n*=2){var r=t*(1+.2/n);if(r=Math.min(r,e+100663296),X(Math.min(2147483648,I(Math.max(16777216,e,r),65536))))return!0}return!1}U(z)||(z=u(z)),w.push({func:function(){ue()}}),H="undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var te={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=te.buffers[e];0===t||10===t?((1===e?l:p)(g(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return te.varargs+=4,_[te.varargs-4>>2]},getStr:function(e){return v(e)},get64:function(e,t){return e}};function ne(e,t,n,r){for(var i=0,o=0;o<n;o++){for(var a=_[t+8*o>>2],u=_[t+(8*o+4)>>2],s=0;s<u;s++)te.printChar(e,C[a+s]);i+=u}return _[r>>2]=i,0}function re(e){}var ie={emscripten_get_now:H,emscripten_get_sbrk_ptr:Z,emscripten_memcpy_big:Q,emscripten_resize_heap:ee,fd_write:ne,memory:c,setTempRet0:re,table:d},oe=J();n.asm=oe;var ae,ue=n.___wasm_call_ctors=function(){return(ue=n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)};function se(e){function t(){ae||(ae=!0,n.calledRun=!0,h||(P(),B(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),O()))}M>0||(T(),M>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}if(n._malloc=function(){return(n._malloc=n.asm.malloc).apply(null,arguments)},n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n._getLastOnigError=function(){return(n._getLastOnigError=n.asm.getLastOnigError).apply(null,arguments)},n._createOnigScanner=function(){return(n._createOnigScanner=n.asm.createOnigScanner).apply(null,arguments)},n._freeOnigScanner=function(){return(n._freeOnigScanner=n.asm.freeOnigScanner).apply(null,arguments)},n._findNextOnigScannerMatch=function(){return(n._findNextOnigScannerMatch=n.asm.findNextOnigScannerMatch).apply(null,arguments)},n._findNextOnigScannerMatchDbg=function(){return(n._findNextOnigScannerMatchDbg=n.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},n.stackSave=function(){return(n.stackSave=n.asm.stackSave).apply(null,arguments)},n.stackAlloc=function(){return(n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)},n.stackRestore=function(){return(n.stackRestore=n.asm.stackRestore).apply(null,arguments)},n.__growWasmMemory=function(){return(n.__growWasmMemory=n.asm.__growWasmMemory).apply(null,arguments)},n.dynCall_vi=function(){return(n.dynCall_vi=n.asm.dynCall_vi).apply(null,arguments)},n.dynCall_iiii=function(){return(n.dynCall_iiii=n.asm.dynCall_iiii).apply(null,arguments)},n.dynCall_iiiii=function(){return(n.dynCall_iiiii=n.asm.dynCall_iiiii).apply(null,arguments)},n.dynCall_iii=function(){return(n.dynCall_iii=n.asm.dynCall_iii).apply(null,arguments)},n.dynCall_iidiiii=function(){return(n.dynCall_iidiiii=n.asm.dynCall_iidiiii).apply(null,arguments)},n.dynCall_vii=function(){return(n.dynCall_vii=n.asm.dynCall_vii).apply(null,arguments)},n.dynCall_ii=function(){return(n.dynCall_ii=n.asm.dynCall_ii).apply(null,arguments)},n.dynCall_i=function(){return(n.dynCall_i=n.asm.dynCall_i).apply(null,arguments)},n.dynCall_jiji=function(){return(n.dynCall_jiji=n.asm.dynCall_jiji).apply(null,arguments)},n.asm=oe,n.UTF8ToString=v,n.then=function(e){if(ae)e(n);else{var t=n.onRuntimeInitialized;n.onRuntimeInitialized=function(){t&&t(),e(n)}}return n},q=function e(){ae||se(),ae||(q=e)},n.run=se,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return se(),e});e.exports=r}]);var tt="/advscript-playground/assets/language-configuration.0bce86b7.json";n.parse(tt),n.parse(tt),n.parse(tt);var nt,rt,it,ot,at,ut,st,ct,lt,pt,dt,ht,mt,ft;!function(e){e.exports&&(e.exports=function(){var e={};function n(n,r){var i={exports:{}},o=function(n){return e[n]?e[n].exports:t(n)};r.call(this,o,i,i.exports),e[n]=i}return n("./utils",(function(e,t,n){function r(e){return i(e)}function i(e){return Array.isArray(e)?o(e):"object"==typeof e?a(e):e}function o(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=i(e[n]);return t}function a(e){var t={};for(var n in e)t[n]=i(e[n]);return t}function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)e[n]=t[n]})),e}function s(e){var t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t==e.length-1?s(e.substring(0,e.length-1)):e.substr(1+~t)}Object.defineProperty(n,"__esModule",{value:!0}),n.clone=r,n.mergeObjects=u,n.basename=s;var c=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/,l=function(){function e(){}return e.hasCaptures=function(e){return null!==e&&c.test(e)},e.replaceCaptures=function(e,t,n){return e.replace(c,(function(e,r,i,o){var a=n[parseInt(r||i,10)];if(!a)return e;for(var u=t.substring(a.start,a.end);"."===u[0];)u=u.substring(1);switch(o){case"downcase":return u.toLowerCase();case"upcase":return u.toUpperCase();default:return u}}))},e}();n.RegexSource=l})),n("./theme",(function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t,n,r,i,o){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=i,this.background=o}return e}();function i(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function o(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];for(var t=e.settings,n=[],o=0,a=0,u=t.length;a<u;a++){var s=t[a];if(s.settings){var c=void 0;c="string"==typeof s.scope?s.scope.replace(/^[,]+/,"").replace(/[,]+$/,"").split(","):Array.isArray(s.scope)?s.scope:[""];var l=-1;if("string"==typeof s.settings.fontStyle){l=0;for(var p=0,d=(f=s.settings.fontStyle.split(" ")).length;p<d;p++)switch(f[p]){case"italic":l|=1;break;case"bold":l|=2;break;case"underline":l|=4}}var h=null;"string"==typeof s.settings.foreground&&i(s.settings.foreground)&&(h=s.settings.foreground);var m=null;for("string"==typeof s.settings.background&&i(s.settings.background)&&(m=s.settings.background),p=0,d=c.length;p<d;p++){var f,g=(f=c[p].trim().split(" "))[f.length-1],v=null;f.length>1&&(v=f.slice(0,f.length-1)).reverse(),n[o++]=new r(g,v,a,l,h,m)}}}return n}function a(e,t){e.sort((function(e,t){var n=c(e.scope,t.scope);return 0!==n||0!==(n=l(e.parentScopes,t.parentScopes))?n:e.index-t.index}));for(var n=0,r="#000000",i="#ffffff";e.length>=1&&""===e[0].scope;){var o=e.shift();-1!==o.fontStyle&&(n=o.fontStyle),null!==o.foreground&&(r=o.foreground),null!==o.background&&(i=o.background)}for(var a=new u(t),h=new p(0,null,n,a.getId(r),a.getId(i)),m=new d(new p(0,null,-1,0,0),[]),f=0,g=e.length;f<g;f++){var v=e[f];m.insert(0,v.scope,v.parentScopes,v.fontStyle,a.getId(v.foreground),a.getId(v.background))}return new s(a,h,m)}n.ParsedThemeRule=r,n.parseTheme=o;var u=function(){function e(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(var t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}return e.prototype.getId=function(e){if(null===e)return 0;e=e.toUpperCase();var t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error("Missing color in color map - "+e);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t},e.prototype.getColorMap=function(){return this._id2color.slice(0)},e}();n.ColorMap=u;var s=function(){function e(e,t,n){this._colorMap=e,this._root=n,this._defaults=t,this._cache={}}return e.createFromRawTheme=function(e,t){return this.createFromParsedTheme(o(e),t)},e.createFromParsedTheme=function(e,t){return a(e,t)},e.prototype.getColorMap=function(){return this._colorMap.getColorMap()},e.prototype.getDefaults=function(){return this._defaults},e.prototype.match=function(e){return this._cache.hasOwnProperty(e)||(this._cache[e]=this._root.match(e)),this._cache[e]},e}();function c(e,t){return e<t?-1:e>t?1:0}function l(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;var n=e.length,r=t.length;if(n===r){for(var i=0;i<n;i++){var o=c(e[i],t[i]);if(0!==o)return o}return 0}return n-r}n.Theme=s,n.strcmp=c,n.strArrCmp=l;var p=function(){function e(e,t,n,r,i){this.scopeDepth=e,this.parentScopes=t,this.fontStyle=n,this.foreground=r,this.background=i}return e.prototype.clone=function(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)},e.cloneArr=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t},e.prototype.acceptOverwrite=function(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)},e}();n.ThemeTrieElementRule=p;var d=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={}),this._mainRule=e,this._rulesWithParentScopes=t,this._children=n}return e._sortBySpecificity=function(e){return 1===e.length||e.sort(this._cmpBySpecificity),e},e._cmpBySpecificity=function(e,t){if(e.scopeDepth===t.scopeDepth){var n=e.parentScopes,r=t.parentScopes,i=null===n?0:n.length,o=null===r?0:r.length;if(i===o)for(var a=0;a<i;a++){var u=n[a].length,s=r[a].length;if(u!==s)return s-u}return o-i}return t.scopeDepth-e.scopeDepth},e.prototype.match=function(t){if(""===t)return e._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));var n,r,i=t.indexOf(".");return-1===i?(n=t,r=""):(n=t.substring(0,i),r=t.substring(i+1)),this._children.hasOwnProperty(n)?this._children[n].match(r):e._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))},e.prototype.insert=function(t,n,r,i,o,a){if(""!==n){var u,s,c,l=n.indexOf(".");-1===l?(u=n,s=""):(u=n.substring(0,l),s=n.substring(l+1)),this._children.hasOwnProperty(u)?c=this._children[u]:(c=new e(this._mainRule.clone(),p.cloneArr(this._rulesWithParentScopes)),this._children[u]=c),c.insert(t+1,s,r,i,o,a)}else this._doInsertHere(t,r,i,o,a)},e.prototype._doInsertHere=function(e,t,n,r,i){if(null!==t){for(var o=0,a=this._rulesWithParentScopes.length;o<a;o++){var u=this._rulesWithParentScopes[o];if(0===l(u.parentScopes,t))return void u.acceptOverwrite(e,n,r,i)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===i&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new p(e,t,n,r,i))}else this._mainRule.acceptOverwrite(e,n,r,i)},e}();n.ThemeTrieElement=d})),n("./matcher",(function(e,t,n){function r(e,t){for(var n=[],r=o(e),a=r.next();null!==a;){var u=0;if(2===a.length&&":"===a.charAt(1)){switch(a.charAt(0)){case"R":u=1;break;case"L":u=-1;break;default:console.log("Unknown priority "+a+" in scope selector")}a=r.next()}var s=l();if(n.push({matcher:s,priority:u}),","!==a)break;a=r.next()}return n;function c(){if("-"===a){a=r.next();var e=c();return function(t){return!!e&&!e(t)}}if("("===a){a=r.next();var n=p();return")"===a&&(a=r.next()),n}if(i(a)){var o=[];do{o.push(a),a=r.next()}while(i(a));return function(e){return t(o,e)}}return null}function l(){for(var e=[],t=c();t;)e.push(t),t=c();return function(t){return e.every((function(e){return e(t)}))}}function p(){for(var e=[],t=l();t&&(e.push(t),"|"===a||","===a);){do{a=r.next()}while("|"===a||","===a);t=l()}return function(t){return e.some((function(e){return e(t)}))}}}function i(e){return!!e&&!!e.match(/[\w\.:]+/)}function o(e){var t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=t.exec(e);return{next:function(){if(!n)return null;var r=n[0];return n=t.exec(e),r}}}Object.defineProperty(n,"__esModule",{value:!0}),n.createMatchers=r})),n("./debug",(function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DebugFlags={InDebugMode:"undefined"!=typeof process&&!!process.env.VSCODE_TEXTMATE_DEBUG}})),n("./json",(function(e,t,n){function r(e,t){throw new Error("Near offset "+e.pos+": "+t+" ~~~"+e.source.substr(e.pos,50)+"~~~")}function i(e,t,n){var i=new o(e),s=new a,c=0,l=null,p=[],d=[];function h(){p.push(c),d.push(l)}function m(){c=p.pop(),l=d.pop()}function f(e){r(i,e)}for(;u(i,s);){if(0===c){if(null!==l&&f("too many constructs in root"),3===s.type){l={},n&&(l.$vscodeTextmateLocation=s.toLocation(t)),h(),c=1;continue}if(2===s.type){l=[],h(),c=4;continue}f("unexpected token in root")}if(2===c){if(5===s.type){m();continue}if(7===s.type){c=3;continue}f("expected , or }")}if(1===c||3===c){if(1===c&&5===s.type){m();continue}if(1===s.type){var g=s.value;if(u(i,s)&&6===s.type||f("expected colon"),u(i,s)||f("expected value"),c=2,1===s.type){l[g]=s.value;continue}if(8===s.type){l[g]=null;continue}if(9===s.type){l[g]=!0;continue}if(10===s.type){l[g]=!1;continue}if(11===s.type){l[g]=parseFloat(s.value);continue}if(2===s.type){var v=[];l[g]=v,h(),c=4,l=v;continue}if(3===s.type){var D={};n&&(D.$vscodeTextmateLocation=s.toLocation(t)),l[g]=D,h(),c=1,l=D;continue}}f("unexpected token in dict")}if(5===c){if(4===s.type){m();continue}if(7===s.type){c=6;continue}f("expected , or ]")}if(4===c||6===c){if(4===c&&4===s.type){m();continue}if(c=5,1===s.type){l.push(s.value);continue}if(8===s.type){l.push(null);continue}if(9===s.type){l.push(!0);continue}if(10===s.type){l.push(!1);continue}if(11===s.type){l.push(parseFloat(s.value));continue}if(2===s.type){v=[],l.push(v),h(),c=4,l=v;continue}if(3===s.type){D={},n&&(D.$vscodeTextmateLocation=s.toLocation(t)),l.push(D),h(),c=1,l=D;continue}f("unexpected token in array")}f("unknown state")}return 0!==d.length&&f("unclosed constructs"),l}Object.defineProperty(n,"__esModule",{value:!0}),n.parse=i;var o=function(){function e(e){this.source=e,this.pos=0,this.len=e.length,this.line=1,this.char=0}return e}(),a=function(){function e(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}return e.prototype.toLocation=function(e){return{filename:e,line:this.line,char:this.char}},e}();function u(e,t){t.value=null,t.type=0,t.offset=-1,t.len=-1,t.line=-1,t.char=-1;for(var n,i=e.source,o=e.pos,a=e.len,u=e.line,s=e.char;;){if(o>=a)return!1;if(32!==(n=i.charCodeAt(o))&&9!==n&&13!==n){if(10!==n)break;o++,u++,s=0}else o++,s++}if(t.offset=o,t.line=u,t.char=s,34===n){for(t.type=1,o++,s++;;){if(o>=a)return!1;if(n=i.charCodeAt(o),o++,s++,92!==n){if(34===n)break}else o++,s++}t.value=i.substring(t.offset+1,o-1).replace(/\\u([0-9A-Fa-f]{4})/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/\\(.)/g,(function(t,n){switch(n){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:r(e,"invalid escape sequence")}throw new Error("unreachable")}))}else if(91===n)t.type=2,o++,s++;else if(123===n)t.type=3,o++,s++;else if(93===n)t.type=4,o++,s++;else if(125===n)t.type=5,o++,s++;else if(58===n)t.type=6,o++,s++;else if(44===n)t.type=7,o++,s++;else if(110===n){if(t.type=8,o++,s++,117!==(n=i.charCodeAt(o)))return!1;if(o++,s++,108!==(n=i.charCodeAt(o)))return!1;if(o++,s++,108!==(n=i.charCodeAt(o)))return!1;o++,s++}else if(116===n){if(t.type=9,o++,s++,114!==(n=i.charCodeAt(o)))return!1;if(o++,s++,117!==(n=i.charCodeAt(o)))return!1;if(o++,s++,101!==(n=i.charCodeAt(o)))return!1;o++,s++}else if(102===n){if(t.type=10,o++,s++,97!==(n=i.charCodeAt(o)))return!1;if(o++,s++,108!==(n=i.charCodeAt(o)))return!1;if(o++,s++,115!==(n=i.charCodeAt(o)))return!1;if(o++,s++,101!==(n=i.charCodeAt(o)))return!1;o++,s++}else for(t.type=11;;){if(o>=a)return!1;if(!(46===(n=i.charCodeAt(o))||n>=48&&n<=57||101===n||69===n||45===n||43===n))break;o++,s++}return t.len=o-t.offset,null===t.value&&(t.value=i.substr(t.offset,t.len)),e.pos=o,e.line=u,e.char=s,!0}})),n("./plist",(function(e,t,n){function r(e,t,n){return o(e,t,n)}function i(e){return o(e,null,null)}function o(e,t,n){var r=e.length,i=0,o=1,a=0;function u(t){if(null===n)i+=t;else for(;t>0;)10===e.charCodeAt(i)?(i++,o++,a=0):(i++,a++),t--}function s(e){null===n?i=e:u(e-i)}function c(){for(;i<r;){var t=e.charCodeAt(i);if(32!==t&&9!==t&&13!==t&&10!==t)break;u(1)}}function l(t){return e.substr(i,t.length)===t&&(u(t.length),!0)}function p(t){var n=e.indexOf(t,i);s(-1!==n?n+t.length:r)}function d(t){var n=e.indexOf(t,i);if(-1!==n){var o=e.substring(i,n);return s(n+t.length),o}return o=e.substr(i),s(r),o}r>0&&65279===e.charCodeAt(0)&&(i=1);var h=0,m=null,f=[],g=[],v=null;function D(e,t){f.push(h),g.push(m),h=e,m=t}function C(){if(0===f.length)return _("illegal state stack");h=f.pop(),m=g.pop()}function _(t){throw new Error("Near offset "+i+": "+t+" ~~~"+e.substr(i,50)+"~~~")}var y={enterDict:function(){if(null===v)return _("missing <key>");var e={};null!==n&&(e[n]={filename:t,line:o,char:a}),m[v]=e,v=null,D(1,e)},enterArray:function(){if(null===v)return _("missing <key>");var e=[];m[v]=e,v=null,D(2,e)}},I={enterDict:function(){var e={};null!==n&&(e[n]={filename:t,line:o,char:a}),m.push(e),D(1,e)},enterArray:function(){var e=[];m.push(e),D(2,e)}};function E(){1===h?y.enterDict():2===h?I.enterDict():(m={},null!==n&&(m[n]={filename:t,line:o,char:a}),D(1,m))}function A(){if(1!==h)return _("unexpected </dict>");C()}function x(){1===h?y.enterArray():2===h?I.enterArray():D(2,m=[])}function F(){return 1===h||2!==h?_("unexpected </array>"):void C()}function b(e){return 1!==h?_("unexpected <key>"):null!==v?_("too many <key>"):void(v=e)}function S(e){if(1===h){if(null===v)return _("missing <key>");m[v]=e,v=null}else 2===h?m.push(e):m=e}function w(e){if(isNaN(e))return _("cannot parse float");if(1===h){if(null===v)return _("missing <key>");m[v]=e,v=null}else 2===h?m.push(e):m=e}function k(e){if(isNaN(e))return _("cannot parse integer");if(1===h){if(null===v)return _("missing <key>");m[v]=e,v=null}else 2===h?m.push(e):m=e}function R(e){if(1===h){if(null===v)return _("missing <key>");m[v]=e,v=null}else 2===h?m.push(e):m=e}function T(e){if(1===h){if(null===v)return _("missing <key>");m[v]=e,v=null}else 2===h?m.push(e):m=e}function P(e){if(1===h){if(null===v)return _("missing <key>");m[v]=e,v=null}else 2===h?m.push(e):m=e}function B(e){return e.replace(/&#([0-9]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,10))})).replace(/&#x([0-9a-f]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,(function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e}))}function O(){var e=d(">"),t=!1;return 47===e.charCodeAt(e.length-1)&&(t=!0,e=e.substring(0,e.length-1)),{name:e.trim(),isClosed:t}}function L(e){if(e.isClosed)return"";var t=d("</");return p(">"),B(t)}for(;i<r&&(c(),!(i>=r));){var N=e.charCodeAt(i);if(u(1),60!==N)return _("expected <");if(i>=r)return _("unexpected end of input");var M=e.charCodeAt(i);if(63!==M)if(33!==M){if(47===M){if(u(1),c(),l("plist")){p(">");continue}if(l("dict")){p(">"),A();continue}if(l("array")){p(">"),F();continue}return _("unexpected closed tag")}var q=O();switch(q.name){case"dict":E(),q.isClosed&&A();continue;case"array":x(),q.isClosed&&F();continue;case"key":b(L(q));continue;case"string":S(L(q));continue;case"real":w(parseFloat(L(q)));continue;case"integer":k(parseInt(L(q),10));continue;case"date":R(new Date(L(q)));continue;case"data":T(L(q));continue;case"true":L(q),P(!0);continue;case"false":L(q),P(!1);continue}if(!/^plist/.test(q.name))return _("unexpected opened tag "+q.name)}else{if(u(1),l("--")){p("--\x3e");continue}p(">")}else u(1),p("?>")}return m}Object.defineProperty(n,"__esModule",{value:!0}),n.parseWithLocation=r,n.parse=i})),n("./grammarReader",(function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./plist"),i=e("./debug"),o=e("./json");function a(e,t){return void 0===t&&(t=null),null!==t&&/\.json$/.test(t)?u(e,t):s(e,t)}function u(e,t){return i.DebugFlags.InDebugMode?o.parse(e,t,!0):JSON.parse(e)}function s(e,t){return i.DebugFlags.InDebugMode?r.parseWithLocation(e,t,"$vscodeTextmateLocation"):r.parse(e)}n.parseRawGrammar=a})),n("./rule",(function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("./utils"),a=/\\(\d+)/,u=/\\(\d+)/g,s=function(){function e(e,t,n){this.debugRegExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}return e.prototype.dispose=function(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()},e}();n.CompiledRule=s;var c=function(){function e(e,t,n,r){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=o.RegexSource.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=o.RegexSource.hasCaptures(this._contentName)}return Object.defineProperty(e.prototype,"debugName",{get:function(){var e=this.$location?o.basename(this.$location.filename)+":"+this.$location.line:"unknown";return this.constructor.name+"#"+this.id+" @ "+e},enumerable:!0,configurable:!0}),e.prototype.getName=function(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?o.RegexSource.replaceCaptures(this._name,e,t):this._name},e.prototype.getContentName=function(e,t){return this._contentNameIsCapturing&&null!==this._contentName?o.RegexSource.replaceCaptures(this._contentName,e,t):this._contentName},e}();n.Rule=c;var l=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.retokenizeCapturedWithRuleId=o,a}return i(t,e),t.prototype.dispose=function(){},t.prototype.collectPatternsRecursive=function(e,t,n){throw new Error("Not supported!")},t.prototype.compile=function(e,t,n,r){throw new Error("Not supported!")},t}(c);n.CaptureRule=l;var p=function(){function e(e,t,n){if(void 0===n&&(n=!0),n)if(e){for(var r=e.length,i=0,o=[],u=!1,s=0;s<r;s++)if("\\"===e.charAt(s)&&s+1<r){var c=e.charAt(s+1);"z"===c?(o.push(e.substring(i,s)),o.push("$(?!\\n)(?<!\\n)"),i=s+2):"A"!==c&&"G"!==c||(u=!0),s++}this.hasAnchor=u,0===i?this.source=e:(o.push(e.substring(i,r)),this.source=o.join(""))}else this.hasAnchor=!1,this.source=e;else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,this.hasBackReferences=a.test(this.source)}return e.prototype.clone=function(){return new e(this.source,this.ruleId,!0)},e.prototype.setSource=function(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))},e.prototype.resolveBackReferences=function(e,t){var n=t.map((function(t){return e.substring(t.start,t.end)}));return u.lastIndex=0,this.source.replace(u,(function(e,t){return f(n[parseInt(t,10)]||"")}))},e.prototype._buildAnchorCache=function(){var e,t,n,r,i=[],o=[],a=[],u=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),i[e]=n,o[e]=n,a[e]=n,u[e]=n,"\\"===n&&e+1<t&&("A"===(r=this.source.charAt(e+1))?(i[e+1]="￿",o[e+1]="￿",a[e+1]="A",u[e+1]="A"):"G"===r?(i[e+1]="￿",o[e+1]="G",a[e+1]="￿",u[e+1]="G"):(i[e+1]=r,o[e+1]=r,a[e+1]=r,u[e+1]=r),e++);return{A0_G0:i.join(""),A0_G1:o.join(""),A1_G0:a.join(""),A1_G1:u.join("")}},e.prototype.resolveAnchors=function(e,t){return this.hasAnchor&&this._anchorCache?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source},e}();n.RegExpSource=p;var d=function(){function e(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}return e.prototype.dispose=function(){this._disposeCaches()},e.prototype._disposeCaches=function(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)},e.prototype.push=function(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},e.prototype.unshift=function(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},e.prototype.length=function(){return this._items.length},e.prototype.setSource=function(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))},e.prototype.compile=function(e,t,n){if(this._hasAnchors)return t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0);if(!this._cached){var r=this._items.map((function(e){return e.source}));this._cached=new s(e,r,this._items.map((function(e){return e.ruleId})))}return this._cached},e.prototype._resolveAnchors=function(e,t,n){var r=this._items.map((function(e){return e.resolveAnchors(t,n)}));return new s(e,r,this._items.map((function(e){return e.ruleId})))},e}();n.RegExpSourceList=d;var h=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,null)||this;return a._match=new p(i,a.id),a.captures=o,a._cachedCompiledPatterns=null,a}return i(t,e),t.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},Object.defineProperty(t.prototype,"debugMatchRegExp",{get:function(){return""+this._match.source},enumerable:!0,configurable:!0}),t.prototype.collectPatternsRecursive=function(e,t,n){t.push(this._match)},t.prototype.compile=function(e,t,n,r){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new d,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(e,n,r)},t}(c);n.MatchRule=h;var m=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.patterns=o.patterns,a.hasMissingPatterns=o.hasMissingPatterns,a._cachedCompiledPatterns=null,a}return i(t,e),t.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},t.prototype.collectPatternsRecursive=function(e,t,n){var r,i;for(r=0,i=this.patterns.length;r<i;r++)e.getRule(this.patterns[r]).collectPatternsRecursive(e,t,!1)},t.prototype.compile=function(e,t,n,r){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new d,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(e,n,r)},t}(c);function f(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}n.IncludeOnlyRule=m;var g=function(e){function t(t,n,r,i,o,a,u,s,c,l){var d=e.call(this,t,n,r,i)||this;return d._begin=new p(o,d.id),d.beginCaptures=a,d._end=new p(u||"￿",-1),d.endHasBackReferences=d._end.hasBackReferences,d.endCaptures=s,d.applyEndPatternLast=c||!1,d.patterns=l.patterns,d.hasMissingPatterns=l.hasMissingPatterns,d._cachedCompiledPatterns=null,d}return i(t,e),t.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)},Object.defineProperty(t.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debugEndRegExp",{get:function(){return""+this._end.source},enumerable:!0,configurable:!0}),t.prototype.getEndWithResolvedBackReferences=function(e,t){return this._end.resolveBackReferences(e,t)},t.prototype.collectPatternsRecursive=function(e,t,n){if(n){var r=void 0,i=void 0;for(r=0,i=this.patterns.length;r<i;r++)e.getRule(this.patterns[r]).collectPatternsRecursive(e,t,!1)}else t.push(this._begin)},t.prototype.compile=function(e,t,n,r){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new d,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0),this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)),this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns.compile(e,n,r)},t}(c);n.BeginEndRule=g;var v=function(e){function t(t,n,r,i,o,a,u,s,c){var l=e.call(this,t,n,r,i)||this;return l._begin=new p(o,l.id),l.beginCaptures=a,l.whileCaptures=s,l._while=new p(u,-2),l.whileHasBackReferences=l._while.hasBackReferences,l.patterns=c.patterns,l.hasMissingPatterns=c.hasMissingPatterns,l._cachedCompiledPatterns=null,l._cachedCompiledWhilePatterns=null,l}return i(t,e),t.prototype.dispose=function(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)},Object.defineProperty(t.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debugWhileRegExp",{get:function(){return""+this._while.source},enumerable:!0,configurable:!0}),t.prototype.getWhileWithResolvedBackReferences=function(e,t){return this._while.resolveBackReferences(e,t)},t.prototype.collectPatternsRecursive=function(e,t,n){if(n){var r=void 0,i=void 0;for(r=0,i=this.patterns.length;r<i;r++)e.getRule(this.patterns[r]).collectPatternsRecursive(e,t,!1)}else t.push(this._begin)},t.prototype.compile=function(e,t,n,r){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new d,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(e,n,r)},t.prototype.compileWhile=function(e,t,n,r){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new d,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns.compile(e,n,r)},t}(c);n.BeginWhileRule=v;var D=function(){function e(){}return e.createCaptureRule=function(e,t,n,r,i){return e.registerRule((function(e){return new l(t,e,n,r,i)}))},e.getCompiledRuleId=function(t,n,r){return t.id||n.registerRule((function(i){if(t.id=i,t.match)return new h(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r));if(void 0===t.begin){t.repository&&(r=o.mergeObjects({},r,t.repository));var a=t.patterns;return void 0===a&&t.include&&(a=[{include:t.include}]),new m(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(a,n,r))}return t.while?new v(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new g(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r))})),t.id},e._compileCaptures=function(t,n,r){var i=[];if(t){var o=0;for(var a in t)"$vscodeTextmateLocation"!==a&&(s=parseInt(a,10))>o&&(o=s);for(var u=0;u<=o;u++)i[u]=null;for(var a in t)if("$vscodeTextmateLocation"!==a){var s=parseInt(a,10),c=0;t[a].patterns&&(c=e.getCompiledRuleId(t[a],n,r)),i[s]=e.createCaptureRule(n,t[a].$vscodeTextmateLocation,t[a].name,t[a].contentName,c)}}return i},e._compilePatterns=function(t,n,r){var i=[];if(t)for(var o=0,a=t.length;o<a;o++){var u=t[o],s=-1;if(u.include)if("#"===u.include.charAt(0)){var c=r[u.include.substr(1)];c&&(s=e.getCompiledRuleId(c,n,r))}else if("$base"===u.include||"$self"===u.include)s=e.getCompiledRuleId(r[u.include],n,r);else{var l=null,p=null,d=u.include.indexOf("#");d>=0?(l=u.include.substring(0,d),p=u.include.substring(d+1)):l=u.include;var h=n.getExternalGrammar(l,r);if(h)if(p){var f=h.repository[p];f&&(s=e.getCompiledRuleId(f,n,h.repository))}else s=e.getCompiledRuleId(h.repository.$self,n,h.repository)}else s=e.getCompiledRuleId(u,n,r);if(-1!==s){var D=n.getRule(s),C=!1;if((D instanceof m||D instanceof g||D instanceof v)&&D.hasMissingPatterns&&0===D.patterns.length&&(C=!0),C)continue;i.push(s)}}return{patterns:i,hasMissingPatterns:(t?t.length:0)!==i.length}},e}();n.RuleFactory=D})),n("./grammar",(function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./utils"),i=e("./rule"),o=e("./matcher"),a=e("./debug"),u="undefined"==typeof performance?function(){return Date.now()}:function(){return performance.now()};function s(e,t,n,r,i,o){return new _(e,t,n,r,i,o)}n.createGrammar=s;var c=function(){function e(e){this.scopeName=e}return e}();n.FullScopeDependency=c;var l=function(){function e(e,t){this.scopeName=e,this.include=t}return e.prototype.toKey=function(){return this.scopeName+"#"+this.include},e}();n.PartialScopeDependency=l;var p=function(){function e(){this.full=[],this.partial=[],this.visitedRule=new Set,this._seenFull=new Set,this._seenPartial=new Set}return e.prototype.add=function(e){e instanceof c?this._seenFull.has(e.scopeName)||(this._seenFull.add(e.scopeName),this.full.push(e)):this._seenPartial.has(e.toKey())||(this._seenPartial.add(e.toKey()),this.partial.push(e))},e}();function d(e,t,n,i,o){for(var a=0,u=i;a<u.length;a++){var s=u[a];if(!e.visitedRule.has(s)){e.visitedRule.add(s);var p=s.repository?r.mergeObjects({},o,s.repository):o;Array.isArray(s.patterns)&&d(e,t,n,s.patterns,p);var f=s.include;if(f)if("$base"===f||f===t.scopeName)m(e,t,t);else if("$self"===f||f===n.scopeName)m(e,t,n);else if("#"===f.charAt(0))h(e,t,n,f.substring(1),p);else{var g=f.indexOf("#");if(g>=0){var v=f.substring(0,g),D=f.substring(g+1);v===t.scopeName?h(e,t,t,D,p):v===n.scopeName?h(e,t,n,D,p):e.add(new l(v,f.substring(g+1)))}else e.add(new c(f))}}}}function h(e,t,n,r,i){void 0===i&&(i=n.repository),i&&i[r]&&d(e,t,n,[i[r]],i)}function m(e,t,n){if(n.patterns&&Array.isArray(n.patterns)&&d(e,t,n,n.patterns,n.repository),n.injections){var r=[];for(var i in n.injections)r.push(n.injections[i]);d(e,t,n,r,n.repository)}}function f(e,t){if(!e)return!1;if(e===t)return!0;var n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}function g(e,t){if(t.length<e.length)return!1;var n=0;return e.every((function(e){for(var r=n;r<t.length;r++)if(f(t[r],e))return n=r+1,!0;return!1}))}function v(e,t,n,r,a){for(var u=o.createMatchers(t,g),s=i.RuleFactory.getCompiledRuleId(n,r,a.repository),c=0,l=u;c<l.length;c++){var p=l[c];e.push({matcher:p.matcher,ruleId:s,grammar:a,priority:p.priority})}}n.ScopeDependencyCollector=p,n.collectSpecificDependencies=h,n.collectDependencies=m;var D=function(){function e(e,t,n,r){this.scopeName=e,this.languageId=t,this.tokenType=n,this.themeData=r}return e}();n.ScopeMetadata=D;var C=function(){function e(t,n,r){if(this._initialLanguage=t,this._themeProvider=n,this._cache=new Map,this._defaultMetaData=new D("",this._initialLanguage,0,[this._themeProvider.getDefaults()]),this._embeddedLanguages=Object.create(null),r)for(var i=Object.keys(r),o=0,a=i.length;o<a;o++){var u=i[o],s=r[u];"number"==typeof s&&0!==s?this._embeddedLanguages[u]=s:console.warn("Invalid embedded language found at scope "+u+": <<"+s+">>")}var c=Object.keys(this._embeddedLanguages).map((function(t){return e._escapeRegExpCharacters(t)}));0===c.length?this._embeddedLanguagesRegex=null:(c.sort(),c.reverse(),this._embeddedLanguagesRegex=new RegExp("^(("+c.join(")|(")+"))($|\\.)",""))}return e.prototype.onDidChangeTheme=function(){this._cache=new Map,this._defaultMetaData=new D("",this._initialLanguage,0,[this._themeProvider.getDefaults()])},e.prototype.getDefaultMetadata=function(){return this._defaultMetaData},e._escapeRegExpCharacters=function(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},e.prototype.getMetadataForScope=function(t){if(null===t)return e._NULL_SCOPE_METADATA;var n=this._cache.get(t);return n||(n=this._doGetMetadataForScope(t),this._cache.set(t,n),n)},e.prototype._doGetMetadataForScope=function(e){var t=this._scopeToLanguage(e),n=this._toStandardTokenType(e),r=this._themeProvider.themeMatch(e);return new D(e,t,n,r)},e.prototype._scopeToLanguage=function(e){if(!e)return 0;if(!this._embeddedLanguagesRegex)return 0;var t=e.match(this._embeddedLanguagesRegex);if(!t)return 0;var n=this._embeddedLanguages[t[1]]||0;return n||0},e.prototype._toStandardTokenType=function(t){var n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 0;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"meta.embedded":return 8}throw new Error("Unexpected match for standard token type!")},e._NULL_SCOPE_METADATA=new D("",0,0,null),e.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/,e}(),_=function(){function e(e,t,n,r,i,a){if(this._scopeMetadataProvider=new C(t,i,n),this._onigLib=a,this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=i,this._grammar=I(e,null),this._injections=null,this._tokenTypeMatchers=[],r)for(var u=0,s=Object.keys(r);u<s.length;u++)for(var c=s[u],l=0,p=o.createMatchers(c,g);l<p.length;l++){var d=p[l];this._tokenTypeMatchers.push({matcher:d.matcher,type:r[c]})}}return e.prototype.dispose=function(){for(var e=0,t=this._ruleId2desc;e<t.length;e++){var n=t[e];n&&n.dispose()}},e.prototype.createOnigScanner=function(e){return this._onigLib.createOnigScanner(e)},e.prototype.createOnigString=function(e){return this._onigLib.createOnigString(e)},e.prototype.onDidChangeTheme=function(){this._scopeMetadataProvider.onDidChangeTheme()},e.prototype.getMetadataForScope=function(e){return this._scopeMetadataProvider.getMetadataForScope(e)},e.prototype.getInjections=function(){var e=this;if(null===this._injections){this._injections=[];var t=this._grammar.injections;if(t)for(var n in t)v(this._injections,n,t[n],this,this._grammar);if(this._grammarRepository){var r=this._grammarRepository.injections(this._grammar.scopeName);r&&r.forEach((function(t){var n=e.getExternalGrammar(t);if(n){var r=n.injectionSelector;r&&v(e._injections,r,n,e,n)}}))}this._injections.sort((function(e,t){return e.priority-t.priority}))}return this._injections},e.prototype.registerRule=function(e){var t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n},e.prototype.getRule=function(e){return this._ruleId2desc[e]},e.prototype.getExternalGrammar=function(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){var n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=I(n,t&&t.$base),this._includedGrammars[e]}return null},e.prototype.tokenizeLine=function(e,t){var n=this._tokenize(e,t,!1);return{tokens:n.lineTokens.getResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack}},e.prototype.tokenizeLine2=function(e,t){var n=this._tokenize(e,t,!0);return{tokens:n.lineTokens.getBinaryResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack}},e.prototype._tokenize=function(e,t,n){var r;if(-1===this._rootId&&(this._rootId=i.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository)),t&&t!==T.NULL)r=!1,t.reset();else{r=!0;var o=this._scopeMetadataProvider.getDefaultMetadata(),a=o.themeData[0],u=k.set(0,o.languageId,o.tokenType,a.fontStyle,a.foreground,a.background),s=this.getRule(this._rootId).getName(null,null),c=this._scopeMetadataProvider.getMetadataForScope(s),l=R.mergeMetadata(u,null,c),p=new R(null,null===s?"unknown":s,l);t=new T(null,this._rootId,-1,-1,!1,null,p,p)}e+="\n";var d=this.createOnigString(e),h=d.content.length,m=new B(n,e,this._tokenTypeMatchers),f=w(this,d,r,0,t,m,!0);return y(d),{lineLength:h,lineTokens:m,ruleStack:f}},e}();function y(e){"function"==typeof e.dispose&&e.dispose()}function I(e,t){return(e=r.clone(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}function E(e,t,n,r,i,o,a){if(0!==o.length){for(var u=t.content,s=Math.min(o.length,a.length),c=[],l=a[0].end,p=0;p<s;p++){var d=o[p];if(null!==d){var h=a[p];if(0!==h.length){if(h.start>l)break;for(;c.length>0&&c[c.length-1].endPos<=h.start;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?i.produceFromScopes(c[c.length-1].scopes,h.start):i.produce(r,h.start),d.retokenizeCapturedWithRuleId){var m=d.getName(u,a),f=r.contentNameScopesList.push(e,m),g=d.getContentName(u,a),v=f.push(e,g),D=r.push(d.retokenizeCapturedWithRuleId,h.start,-1,!1,null,f,v),C=e.createOnigString(u.substring(0,h.end));w(e,C,n&&0===h.start,h.start,D,i,!1),y(C)}else{var _=d.getName(u,a);if(null!==_){var I=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).push(e,_);c.push(new P(I,h.end))}}}}}for(;c.length>0;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}}function A(e){for(var t=[],n=0,r=e.rules.length;n<r;n++)t.push("   - "+e.rules[n]+": "+e.debugRegExps[n]);return t.join("\n")}function x(e,t,n,r,i,o,u){for(var s,c=Number.MAX_VALUE,l=null,p=0,d=o.contentNameScopesList.generateScopes(),h=0,m=e.length;h<m;h++){var f=e[h];if(f.matcher(d)){var g=t.getRule(f.ruleId).compile(t,null,r,i===u),v=g.scanner.findNextMatchSync(n,i);if(a.DebugFlags.InDebugMode&&(console.log("  scanning for injections"),console.log(A(g))),v){var D=v.captureIndices[0].start;if(!(D>=c)&&(c=D,l=v.captureIndices,s=g.rules[v.index],p=f.priority,c===i))break}}}return l?{priorityMatch:-1===p,captureIndices:l,matchedRuleId:s}:null}function F(e,t,n,r,i,o){var s=i.getRule(e),c=s.compile(e,i.endRule,n,r===o),l=0;a.DebugFlags.InDebugMode&&(l=u());var p=c.scanner.findNextMatchSync(t,r);if(a.DebugFlags.InDebugMode){var d=u()-l;d>5&&console.warn("Rule "+s.debugName+" ("+s.id+") matching took "+d+" against '"+t+"'"),p&&console.log("matched rule id: "+c.rules[p.index]+" from "+p.captureIndices[0].start+" to "+p.captureIndices[0].end)}return p?{captureIndices:p.captureIndices,matchedRuleId:c.rules[p.index]}:null}function b(e,t,n,r,i,o){var a=F(e,t,n,r,i,o),u=e.getInjections();if(0===u.length)return a;var s=x(u,e,t,n,r,i,o);if(!s)return a;if(!a)return s;var c=a.captureIndices[0].start,l=s.captureIndices[0].start;return l<c||s.priorityMatch&&l===c?s:a}function S(e,t,n,r,o,u){for(var s=o.beginRuleCapturedEOL?0:-1,c=[],l=o;l;l=l.pop()){var p=l.getRule(e);p instanceof i.BeginWhileRule&&c.push({rule:p,stack:l})}for(var d=c.pop();d;d=c.pop()){var h=d.rule.compileWhile(e,d.stack.endRule,n,s===r),m=h.scanner.findNextMatchSync(t,r);if(a.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(A(h))),!m){a.DebugFlags.InDebugMode&&console.log("  popping "+d.rule.debugName+" - "+d.rule.debugWhileRegExp),o=d.stack.pop();break}if(-2!==h.rules[m.index]){o=d.stack.pop();break}m.captureIndices&&m.captureIndices.length&&(u.produce(d.stack,m.captureIndices[0].start),E(e,t,n,d.stack,u,d.rule.whileCaptures,m.captureIndices),u.produce(d.stack,m.captureIndices[0].end),s=m.captureIndices[0].end,m.captureIndices[0].end>r&&(r=m.captureIndices[0].end,n=!1))}return{stack:o,linePos:r,anchorPosition:s,isFirstLine:n}}function w(e,t,n,r,o,u,s){var c=t.content.length,l=!1,p=-1;if(s){var d=S(e,t,n,r,o,u);o=d.stack,r=d.linePos,n=d.isFirstLine,p=d.anchorPosition}for(;!l;)h();function h(){a.DebugFlags.InDebugMode&&(console.log(""),console.log("@@scanNext "+r+": |"+t.content.substr(r).replace(/\n$/,"\\n")+"|"));var s=b(e,t,n,r,o,p);if(!s)return a.DebugFlags.InDebugMode&&console.log("  no more matches."),u.produce(o,c),void(l=!0);var d=s.captureIndices,h=s.matchedRuleId,m=!!(d&&d.length>0)&&d[0].end>r;if(-1===h){var f=o.getRule(e);a.DebugFlags.InDebugMode&&console.log("  popping "+f.debugName+" - "+f.debugEndRegExp),u.produce(o,d[0].start),o=o.setContentNameScopesList(o.nameScopesList),E(e,t,n,o,u,f.endCaptures,d),u.produce(o,d[0].end);var g=o;if(o=o.pop(),p=g.getAnchorPos(),!m&&g.getEnterPos()===r)return a.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),o=g,u.produce(o,c),void(l=!0)}else{var v=e.getRule(h);u.produce(o,d[0].start);var D=o,C=v.getName(t.content,d),_=o.contentNameScopesList.push(e,C);if(o=o.push(h,r,p,d[0].end===c,null,_,_),v instanceof i.BeginEndRule){var y=v;a.DebugFlags.InDebugMode&&console.log("  pushing "+y.debugName+" - "+y.debugBeginRegExp),E(e,t,n,o,u,y.beginCaptures,d),u.produce(o,d[0].end),p=d[0].end;var I=y.getContentName(t.content,d),A=_.push(e,I);if(o=o.setContentNameScopesList(A),y.endHasBackReferences&&(o=o.setEndRule(y.getEndWithResolvedBackReferences(t.content,d))),!m&&D.hasSameRuleAs(o))return a.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),o=o.pop(),u.produce(o,c),void(l=!0)}else if(v instanceof i.BeginWhileRule){if(y=v,a.DebugFlags.InDebugMode&&console.log("  pushing "+y.debugName),E(e,t,n,o,u,y.beginCaptures,d),u.produce(o,d[0].end),p=d[0].end,I=y.getContentName(t.content,d),A=_.push(e,I),o=o.setContentNameScopesList(A),y.whileHasBackReferences&&(o=o.setEndRule(y.getWhileWithResolvedBackReferences(t.content,d))),!m&&D.hasSameRuleAs(o))return a.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),o=o.pop(),u.produce(o,c),void(l=!0)}else{var x=v;if(a.DebugFlags.InDebugMode&&console.log("  matched "+x.debugName+" - "+x.debugMatchRegExp),E(e,t,n,o,u,x.captures,d),u.produce(o,d[0].end),o=o.pop(),!m)return a.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),o=o.safePop(),u.produce(o,c),void(l=!0)}}d[0].end>r&&(r=d[0].end,n=!1)}return o}n.Grammar=_;var k=function(){function e(){}return e.toBinaryStr=function(e){for(var t=e.toString(2);t.length<32;)t="0"+t;return t},e.printMetadata=function(t){var n=e.getLanguageId(t),r=e.getTokenType(t),i=e.getFontStyle(t),o=e.getForeground(t),a=e.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:o,background:a})},e.getLanguageId=function(e){return(255&e)>>>0},e.getTokenType=function(e){return(1792&e)>>>8},e.getFontStyle=function(e){return(14336&e)>>>11},e.getForeground=function(e){return(8372224&e)>>>14},e.getBackground=function(e){return(4286578688&e)>>>23},e.set=function(t,n,r,i,o,a){var u=e.getLanguageId(t),s=e.getTokenType(t),c=e.getFontStyle(t),l=e.getForeground(t),p=e.getBackground(t);return 0!==n&&(u=n),0!==r&&(s=8===r?0:r),-1!==i&&(c=i),0!==o&&(l=o),0!==a&&(p=a),(u<<0|s<<8|c<<11|l<<14|p<<23)>>>0},e}();n.StackElementMetadata=k;var R=function(){function e(e,t,n){this.parent=e,this.scope=t,this.metadata=n}return e._equals=function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scope!==t.scope||e.metadata!==t.metadata)return!1;e=e.parent,t=t.parent}},e.prototype.equals=function(t){return e._equals(this,t)},e._matchesScope=function(e,t,n){return t===e||e.substring(0,n.length)===n},e._matches=function(e,t){if(null===t)return!0;for(var n=t.length,r=0,i=t[r],o=i+".";e;){if(this._matchesScope(e.scope,i,o)){if(++r===n)return!0;o=(i=t[r])+"."}e=e.parent}return!1},e.mergeMetadata=function(e,t,n){if(null===n)return e;var r=-1,i=0,o=0;if(null!==n.themeData)for(var a=0,u=n.themeData.length;a<u;a++){var s=n.themeData[a];if(this._matches(t,s.parentScopes)){r=s.fontStyle,i=s.foreground,o=s.background;break}}return k.set(e,n.languageId,n.tokenType,r,i,o)},e._push=function(t,n,r){for(var i=0,o=r.length;i<o;i++){var a=r[i],u=n.getMetadataForScope(a),s=e.mergeMetadata(t.metadata,t,u);t=new e(t,a,s)}return t},e.prototype.push=function(t,n){return null===n?this:n.indexOf(" ")>=0?e._push(this,t,n.split(/ /g)):e._push(this,t,[n])},e._generateScopes=function(e){for(var t=[],n=0;e;)t[n++]=e.scope,e=e.parent;return t.reverse(),t},e.prototype.generateScopes=function(){return e._generateScopes(this)},e}();n.ScopeListElement=R;var T=function(){function e(e,t,n,r,i,o,a,u){this.parent=e,this.depth=this.parent?this.parent.depth+1:1,this.ruleId=t,this._enterPos=n,this._anchorPos=r,this.beginRuleCapturedEOL=i,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=u}return e._structuralEquals=function(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}},e._equals=function(e,t){return e===t||!!this._structuralEquals(e,t)&&e.contentNameScopesList.equals(t.contentNameScopesList)},e.prototype.clone=function(){return this},e.prototype.equals=function(t){return null!==t&&e._equals(this,t)},e._reset=function(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent},e.prototype.reset=function(){e._reset(this)},e.prototype.pop=function(){return this.parent},e.prototype.safePop=function(){return this.parent?this.parent:this},e.prototype.push=function(t,n,r,i,o,a,u){return new e(this,t,n,r,i,o,a,u)},e.prototype.getEnterPos=function(){return this._enterPos},e.prototype.getAnchorPos=function(){return this._anchorPos},e.prototype.getRule=function(e){return e.getRule(this.ruleId)},e.prototype._writeString=function(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]="("+this.ruleId+", TODO-"+this.nameScopesList+", TODO-"+this.contentNameScopesList+")",t},e.prototype.toString=function(){var e=[];return this._writeString(e,0),"["+e.join(",")+"]"},e.prototype.setContentNameScopesList=function(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)},e.prototype.setEndRule=function(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)},e.prototype.hasSameRuleAs=function(e){return this.ruleId===e.ruleId},e.NULL=new e(null,0,0,0,!1,null,null,null),e}();n.StackElement=T;var P=function(){function e(e,t){this.scopes=e,this.endPos=t}return e}();n.LocalStackElement=P;var B=function(){function e(e,t,n){this._emitBinaryTokens=e,this._tokenTypeOverrides=n,a.DebugFlags.InDebugMode?this._lineText=t:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}return e.prototype.produce=function(e,t){this.produceFromScopes(e.contentNameScopesList,t)},e.prototype.produceFromScopes=function(e,t){if(!(this._lastTokenEndIndex>=t)){if(this._emitBinaryTokens){for(var n=e.metadata,r=0,i=this._tokenTypeOverrides;r<i.length;r++){var o=i[r];o.matcher(e.generateScopes())&&(n=k.set(n,0,O(o.type),-1,0,0))}return this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n||(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n)),void(this._lastTokenEndIndex=t)}var u=e.generateScopes();if(a.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(var s=0;s<u.length;s++)console.log("      * "+u[s])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:u}),this._lastTokenEndIndex=t}},e.prototype.getResult=function(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens},e.prototype.getBinaryResult=function(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);for(var n=new Uint32Array(this._binaryTokens.length),r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n},e}();function O(e){switch(e){case 4:return 4;case 2:return 2;case 1:return 1;case 0:default:return 8}}})),n("./registry",(function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function u(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){e.done?n(e.value):i(e.value).then(a,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./grammar"),a=function(){function e(e,t){this._theme=e,this._grammars={},this._rawGrammars={},this._injectionGrammars={},this._onigLibPromise=t}return e.prototype.dispose=function(){for(var e in this._grammars)this._grammars.hasOwnProperty(e)&&this._grammars[e].dispose()},e.prototype.setTheme=function(e){var t=this;this._theme=e,Object.keys(this._grammars).forEach((function(e){t._grammars[e].onDidChangeTheme()}))},e.prototype.getColorMap=function(){return this._theme.getColorMap()},e.prototype.addGrammar=function(e,t){this._rawGrammars[e.scopeName]=e,t&&(this._injectionGrammars[e.scopeName]=t)},e.prototype.lookup=function(e){return this._rawGrammars[e]},e.prototype.injections=function(e){return this._injectionGrammars[e]},e.prototype.getDefaults=function(){return this._theme.getDefaults()},e.prototype.themeMatch=function(e){return this._theme.match(e)},e.prototype.grammarForScopeName=function(e,t,n,a){return r(this,void 0,void 0,(function(){var r,u,s,c,l;return i(this,(function(i){switch(i.label){case 0:return this._grammars[e]?[3,2]:(r=this._rawGrammars[e])?(u=this._grammars,s=e,c=o.createGrammar,l=[r,t,n,a,this],[4,this._onigLibPromise]):[2,null];case 1:u[s]=c.apply(void 0,l.concat([i.sent()])),i.label=2;case 2:return[2,this._grammars[e]]}}))}))},e}();n.SyncRegistry=a})),n("./main",(function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function u(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){e.done?n(e.value):i(e.value).then(a,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./registry"),a=e("./grammarReader"),u=e("./theme"),s=e("./grammar"),c=function(){function e(e){this._options=e,this._syncRegistry=new o.SyncRegistry(u.Theme.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}return e.prototype.dispose=function(){this._syncRegistry.dispose()},e.prototype.setTheme=function(e,t){this._syncRegistry.setTheme(u.Theme.createFromRawTheme(e,t))},e.prototype.getColorMap=function(){return this._syncRegistry.getColorMap()},e.prototype.loadGrammarWithEmbeddedLanguages=function(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})},e.prototype.loadGrammarWithConfiguration=function(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes)},e.prototype.loadGrammar=function(e){return this._loadGrammar(e,0,null,null)},e.prototype._doLoadSingleGrammar=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return[4,this._options.loadGrammar(e)];case 1:return(t=r.sent())&&(n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0,this._syncRegistry.addGrammar(t,n)),[2]}}))}))},e.prototype._loadSingleGrammar=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return this._ensureGrammarCache.has(e)||this._ensureGrammarCache.set(e,this._doLoadSingleGrammar(e)),[2,this._ensureGrammarCache.get(e)]}))}))},e.prototype._collectDependenciesForDep=function(e,t,n){var r=this._syncRegistry.lookup(n.scopeName);if(r){n instanceof s.FullScopeDependency?s.collectDependencies(t,this._syncRegistry.lookup(e),r):s.collectSpecificDependencies(t,this._syncRegistry.lookup(e),r,n.include);var i=this._syncRegistry.injections(n.scopeName);if(i)for(var o=0,a=i;o<a.length;o++){var u=a[o];t.add(new s.FullScopeDependency(u))}}else if(n.scopeName===e)throw new Error("No grammar provided for <"+e+">")},e.prototype._loadGrammar=function(e,t,n,o){return r(this,void 0,void 0,(function(){var r,a,u,c,l,p,d,h,m,f,g,v,D=this;return i(this,(function(i){switch(i.label){case 0:r=new Set,a=new Set,r.add(e),u=[new s.FullScopeDependency(e)],i.label=1;case 1:return u.length>0?(c=u,u=[],[4,Promise.all(c.map((function(e){return D._loadSingleGrammar(e.scopeName)})))]):[3,3];case 2:for(i.sent(),l=new s.ScopeDependencyCollector,p=0,d=c;p<d.length;p++)v=d[p],this._collectDependenciesForDep(e,l,v);for(h=0,m=l.full;h<m.length;h++)v=m[h],r.has(v.scopeName)||(r.add(v.scopeName),u.push(v));for(f=0,g=l.partial;f<g.length;f++)v=g[f],r.has(v.scopeName)||a.has(v.toKey())||(a.add(v.toKey()),u.push(v));return[3,1];case 3:return[2,this.grammarForScopeName(e,t,n,o)]}}))}))},e.prototype.addGrammar=function(e,t,n,o){return void 0===t&&(t=[]),void 0===n&&(n=0),void 0===o&&(o=null),r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return this._syncRegistry.addGrammar(e,t),[4,this.grammarForScopeName(e.scopeName,n,o)];case 1:return[2,r.sent()]}}))}))},e.prototype.grammarForScopeName=function(e,t,n,r){return void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),this._syncRegistry.grammarForScopeName(e,t,n,r)},e}();n.Registry=c,n.INITIAL=s.StackElement.NULL,n.parseRawGrammar=a.parseRawGrammar})),e["./main"].exports}())}({exports:{}}),Object.freeze([{settings:{foreground:"#D4D4D4",background:"#1E1E1E"}}]),(nt||(nt={})).is=function(e){return!!e&&"data"in e},(rt||(rt={})).is=function(e){return!!e&&"data"in e},(it||(it={})).is=function(e){return!!e&&"data"in e},(ot||(ot={})).is=function(e){return!!e&&"data"in e};class gt{constructor(e){this._monaco=e}asPosition(e,t){return{line:null==e?void 0:e-1,character:null==t?void 0:t-1}}asRange(e){if(void 0!==e){if(null===e)return null;if(void 0!==e.insert)return this.asRange(e.insert);return{start:this.asPosition(e.startLineNumber,e.startColumn),end:this.asPosition(e.endLineNumber,e.endColumn)}}}asTextDocumentIdentifier(e){return{uri:e.uri.toString()}}asTextDocumentPositionParams(e,t){return{textDocument:this.asTextDocumentIdentifier(e),position:this.asPosition(t.lineNumber,t.column)}}asCompletionParams(e,t,n){return Object.assign(this.asTextDocumentPositionParams(e,t),{context:this.asCompletionContext(n)})}asCompletionContext(e){return{triggerKind:this.asCompletionTriggerKind(e.triggerKind),triggerCharacter:e.triggerCharacter}}asSignatureHelpContext(e){return{triggerKind:this.asSignatureHelpTriggerKind(e.triggerKind),triggerCharacter:e.triggerCharacter,isRetrigger:e.isRetrigger,activeSignatureHelp:this.asSignatureHelp(e.activeSignatureHelp)}}asSignatureHelp(e){if(void 0!==e)return{signatures:e.signatures.map((e=>this.asSignatureInformation(e))),activeParameter:e.activeParameter,activeSignature:e.activeSignature}}asSignatureInformation(e){return{documentation:this.asMarkupContent(e.documentation),label:e.label,parameters:e.parameters.map((e=>this.asParameterInformation(e))),activeParameter:e.activeParameter}}asParameterInformation(e){return{documentation:this.asMarkupContent(e.documentation),label:e.label}}asMarkupContent(e){if(void 0!==e)return"string"==typeof e?e:{kind:r.MarkupKind.Markdown,value:e.value}}asSignatureHelpTriggerKind(e){switch(e){case this._monaco.languages.SignatureHelpTriggerKind.ContentChange:return r.SignatureHelpTriggerKind.ContentChange;case this._monaco.languages.SignatureHelpTriggerKind.TriggerCharacter:return r.SignatureHelpTriggerKind.TriggerCharacter;default:return r.SignatureHelpTriggerKind.Invoked}}asCompletionTriggerKind(e){switch(e){case this._monaco.languages.CompletionTriggerKind.TriggerCharacter:return r.CompletionTriggerKind.TriggerCharacter;case this._monaco.languages.CompletionTriggerKind.TriggerForIncompleteCompletions:return r.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return r.CompletionTriggerKind.Invoked}}asCompletionItem(e){const t={label:e.label},n=it.is(e)?e:void 0;return e.detail&&(t.detail=e.detail),e.documentation&&("string"==typeof e.documentation?t.documentation=e.documentation:t.documentation=this.asDocumentation(n?.documentationFormat??r.MarkupKind.Markdown,e.documentation)),e.filterText&&(t.filterText=e.filterText),this.fillPrimaryInsertText(t,e),i(e.kind)&&(t.kind=this.asCompletionItemKind(e.kind,n?.originalItemKind)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=this.asTextEdits(e.additionalTextEdits)),e.command&&(t.command=this.asCommand(e.command)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=this.asCommand(e.command)),n&&(void 0!==n.data&&(t.data=n.data),!0!==n.deprecated&&!1!==n.deprecated||(t.deprecated=n.deprecated)),t}asCompletionItemKind(e,t){if(void 0!==t)return t;switch(e){case this._monaco.languages.CompletionItemKind.Method:return r.CompletionItemKind.Method;case this._monaco.languages.CompletionItemKind.Function:return r.CompletionItemKind.Function;case this._monaco.languages.CompletionItemKind.Constructor:return r.CompletionItemKind.Constructor;case this._monaco.languages.CompletionItemKind.Field:return r.CompletionItemKind.Field;case this._monaco.languages.CompletionItemKind.Variable:return r.CompletionItemKind.Variable;case this._monaco.languages.CompletionItemKind.Class:return r.CompletionItemKind.Class;case this._monaco.languages.CompletionItemKind.Struct:return r.CompletionItemKind.Struct;case this._monaco.languages.CompletionItemKind.Interface:return r.CompletionItemKind.Interface;case this._monaco.languages.CompletionItemKind.Module:return r.CompletionItemKind.Module;case this._monaco.languages.CompletionItemKind.Property:return r.CompletionItemKind.Property;case this._monaco.languages.CompletionItemKind.Event:return r.CompletionItemKind.Event;case this._monaco.languages.CompletionItemKind.Operator:return r.CompletionItemKind.Operator;case this._monaco.languages.CompletionItemKind.Unit:return r.CompletionItemKind.Unit;case this._monaco.languages.CompletionItemKind.Value:return r.CompletionItemKind.Value;case this._monaco.languages.CompletionItemKind.Constant:return r.CompletionItemKind.Constant;case this._monaco.languages.CompletionItemKind.Enum:return r.CompletionItemKind.Enum;case this._monaco.languages.CompletionItemKind.EnumMember:return r.CompletionItemKind.EnumMember;case this._monaco.languages.CompletionItemKind.Keyword:return r.CompletionItemKind.Keyword;case this._monaco.languages.CompletionItemKind.Text:return r.CompletionItemKind.Text;case this._monaco.languages.CompletionItemKind.Color:return r.CompletionItemKind.Color;case this._monaco.languages.CompletionItemKind.File:return r.CompletionItemKind.File;case this._monaco.languages.CompletionItemKind.Reference:return r.CompletionItemKind.Reference;case this._monaco.languages.CompletionItemKind.Customcolor:return r.CompletionItemKind.Color;case this._monaco.languages.CompletionItemKind.Folder:return r.CompletionItemKind.Folder;case this._monaco.languages.CompletionItemKind.TypeParameter:return r.CompletionItemKind.TypeParameter;case this._monaco.languages.CompletionItemKind.Snippet:return r.CompletionItemKind.Snippet;default:return e+1}}asDocumentation(e,t){switch(e){case r.MarkupKind.PlainText:return{kind:e,value:t};case r.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}fillPrimaryInsertText(e,t){let n,i,o=r.InsertTextFormat.PlainText;void 0!==t.insertTextRules&&0==(t.insertTextRules&this._monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet)&&(o=r.InsertTextFormat.Snippet,n=t.insertText),e.insertTextFormat=o,n=t.insertText,t.range&&(i=this.asRange(t.range)),e.insertTextFormat=o,t.fromEdit&&n&&i?e.textEdit={newText:n,range:i}:e.insertText=n,e.insertTextMode=t.insertTextMode}asTextEdit(e){return{range:this.asRange(e.range),newText:e.text||""}}asTextEdits(e){if(e)return e.map((e=>this.asTextEdit(e)))}asReferenceParams(e,t,n){return{textDocument:this.asTextDocumentIdentifier(e),position:this.asPosition(t.lineNumber,t.column),context:{includeDeclaration:n.includeDeclaration}}}asDocumentSymbolParams(e){return{textDocument:this.asTextDocumentIdentifier(e)}}asCodeLensParams(e){return{textDocument:this.asTextDocumentIdentifier(e)}}asDiagnosticSeverity(e){switch(e){case this._monaco.MarkerSeverity.Error:return r.DiagnosticSeverity.Error;case this._monaco.MarkerSeverity.Warning:return r.DiagnosticSeverity.Warning;case this._monaco.MarkerSeverity.Info:return r.DiagnosticSeverity.Information;case this._monaco.MarkerSeverity.Hint:return r.DiagnosticSeverity.Hint}}asDiagnostic(e){const t=this.asRange(new this._monaco.Range(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)),n=this.asDiagnosticSeverity(e.severity);return r.Diagnostic.create(t,e.message,n,e.code,e.source)}asDiagnostics(e){if(e)return e.map((e=>this.asDiagnostic(e)))}asCodeActionContext(e){if(!e)return;const t=this.asDiagnostics(e.markers);return r.CodeActionContext.create(t,o(e.only)?[e.only]:void 0)}asCodeActionParams(e,t,n){return{textDocument:this.asTextDocumentIdentifier(e),range:this.asRange(t),context:this.asCodeActionContext(n)}}asCommand(e){if(e){const t=e.arguments||[];return r.Command.create(e.title,e.id,...t)}}asCodeLens(e){const t=r.CodeLens.create(this.asRange(e.range));return e.command&&(t.command=this.asCommand(e.command)),rt.is(e)&&e.data&&(t.data=e.data),t}asFormattingOptions(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}}asDocumentFormattingParams(e,t){return{textDocument:this.asTextDocumentIdentifier(e),options:this.asFormattingOptions(t)}}asDocumentRangeFormattingParams(e,t,n){return{textDocument:this.asTextDocumentIdentifier(e),range:this.asRange(t),options:this.asFormattingOptions(n)}}asDocumentOnTypeFormattingParams(e,t,n,r){return{textDocument:this.asTextDocumentIdentifier(e),position:this.asPosition(t.lineNumber,t.column),ch:n,options:this.asFormattingOptions(r)}}asRenameParams(e,t,n){return{textDocument:this.asTextDocumentIdentifier(e),position:this.asPosition(t.lineNumber,t.column),newName:n}}asDocumentLinkParams(e){return{textDocument:this.asTextDocumentIdentifier(e)}}asDocumentLink(e){const t=r.DocumentLink.create(this.asRange(e.range));return e.url&&(t.target="string"==typeof e.url?e.url:e.url.toString()),nt.is(e)&&e.data&&(t.data=e.data),e.tooltip&&(t.tooltip=e.tooltip),t}asCodeAction(e){const t={title:e.title},n=ot.is(e)?e:void 0;if(i(e.kind)&&(t.kind=e.kind),e.diagnostics&&(t.diagnostics=this.asDiagnostics(e.diagnostics)),e.edit)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return e.command&&(t.command=this.asCommand(e.command)),void 0!==e.isPreferred&&(t.isPreferred=e.isPreferred),e.disabled&&(t.disabled={reason:e.disabled}),n&&void 0!==n.data&&(t.data=n.data),t}}class vt{constructor(e){this._monaco=e}asResourceEdits(e,t,n,i){return t.map((t=>({resource:e,edit:this.asTextEdit(t),modelVersionId:i,metadata:r.AnnotatedTextEdit.is(t)?n(t.annotationId):void 0})))}asWorkspaceEditMetadata(e){return{needsConfirmation:!0===e.needsConfirmation,label:e.label,description:e.description}}asWorkspaceEdit(e){if(!e)return;const t=new Map;if(void 0!==e.changeAnnotations)for(const r of Object.keys(e.changeAnnotations)){const n=this.asWorkspaceEditMetadata(e.changeAnnotations[r]);t.set(r,n)}const n=e=>void 0===e?void 0:t.get(e),i=[];if(e.documentChanges)e.documentChanges.forEach((e=>{if(r.CreateFile.is(e))i.push({newUri:this._monaco.Uri.parse(e.uri),options:e.options,metadata:n(e.annotationId)});else if(r.RenameFile.is(e))i.push({oldUri:this._monaco.Uri.parse(e.oldUri),newUri:this._monaco.Uri.parse(e.newUri),options:e.options,metadata:n(e.annotationId)});else if(r.DeleteFile.is(e))i.push({oldUri:this._monaco.Uri.parse(e.uri),options:e.options,metadata:n(e.annotationId)});else if(r.TextDocumentEdit.is(e)){const t=this._monaco.Uri.parse(e.textDocument.uri),r="number"==typeof e.textDocument.version?e.textDocument.version:void 0;i.push(...this.asResourceEdits(t,e.edits,n,r))}else console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`)}));else if(e.changes)for(const r of Object.keys(e.changes)){const t=this._monaco.Uri.parse(r);i.push(...this.asResourceEdits(t,e.changes[r],n))}return{edits:i}}asTextEdit(e){if(!e)return;return{range:this.asRange(e.range),text:e.newText}}asTextEdits(e){if(e)return e.map((e=>this.asTextEdit(e)))}asCodeLens(e){if(!e)return;const t={range:this.asRange(e.range)};return e.command&&(t.command=this.asCommand(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}asCodeLensList(e){if(e)return{lenses:e.map((e=>this.asCodeLens(e))),dispose:()=>{}}}asCodeActionList(e){return{actions:e.map((e=>this.asCodeAction(e))),dispose:()=>{}}}asCodeAction(e){return r.CodeAction.is(e)?{title:e.title,command:this.asCommand(e.command),edit:this.asWorkspaceEdit(e.edit),diagnostics:this.asDiagnostics(e.diagnostics),kind:e.kind,disabled:e.disabled?e.disabled.reason:void 0,isPreferred:e.isPreferred,data:e.data}:{command:{id:e.command,title:e.title,arguments:e.arguments},title:e.title}}asCommand(e){if(e)return{id:e.command,title:e.title,arguments:e.arguments}}asDocumentSymbol(e){const t=e.children&&e.children.map((e=>this.asDocumentSymbol(e)));return{name:e.name,detail:e.detail||"",kind:this.asSymbolKind(e.kind),tags:e.tags||[],range:this.asRange(e.range),selectionRange:this.asRange(e.selectionRange),children:t}}asDocumentSymbols(e){return r.DocumentSymbol.is(e[0])?e.map((e=>this.asDocumentSymbol(e))):this.asSymbolInformations(e)}asSymbolInformations(e,t){if(e)return e.map((e=>this.asSymbolInformation(e,t)))}asSymbolInformation(e,t){const n=this.asLocation(t?{...e.location,uri:t.toString()}:e.location);return{name:e.name,detail:"",containerName:e.containerName,kind:this.asSymbolKind(e.kind),tags:e.tags||[],range:n.range,selectionRange:n.range}}asSymbolKind(e){return e<=r.SymbolKind.TypeParameter?e-1:this._monaco.languages.SymbolKind.Property}asDocumentHighlights(e){if(e)return e.map((e=>this.asDocumentHighlight(e)))}asDocumentHighlight(e){return{range:this.asRange(e.range),kind:i(e.kind)?this.asDocumentHighlightKind(e.kind):void 0}}asDocumentHighlightKind(e){switch(e){case r.DocumentHighlightKind.Text:return this._monaco.languages.DocumentHighlightKind.Text;case r.DocumentHighlightKind.Read:return this._monaco.languages.DocumentHighlightKind.Read;case r.DocumentHighlightKind.Write:return this._monaco.languages.DocumentHighlightKind.Write}return this._monaco.languages.DocumentHighlightKind.Text}asReferences(e){if(e)return e.map((e=>this.asLocation(e)))}asDefinitionResult(e){if(e){if(a(e)){if(0==e.length)return;if(r.LocationLink.is(e[0])){return e.map((e=>this.asLocationLink(e)))}return e.map((e=>this.asLocation(e)))}return this.asLocation(e)}}asLocation(e){if(!e)return;return{uri:this._monaco.Uri.parse(e.uri),range:this.asRange(e.range)}}asLocationLink(e){if(!e)return;const t={uri:this._monaco.Uri.parse(e.targetUri),range:this.asRange(e.targetSelectionRange),originSelectionRange:this.asRange(e.originSelectionRange),targetSelectionRange:this.asRange(e.targetSelectionRange)};if(!t.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return t}asSignatureHelpResult(e){if(!e)return;const t={};return i(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,i(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures?t.signatures=this.asSignatureInformations(e.signatures):t.signatures=[],{value:t,dispose:()=>{}}}asSignatureInformations(e){return e.map((e=>this.asSignatureInformation(e)))}asSignatureInformation(e){const t={label:e.label};return e.documentation&&(t.documentation=this.asDocumentation(e.documentation)),e.parameters?t.parameters=this.asParameterInformations(e.parameters):t.parameters=[],e.activeParameter&&(t.activeParameter=e.activeParameter),t}asParameterInformations(e){return e.map((e=>this.asParameterInformation(e)))}asParameterInformation(e){const t={label:e.label};return e.documentation&&(t.documentation=this.asDocumentation(e.documentation)),t}asHover(e){if(e)return{contents:this.asHoverContent(e.contents),range:this.asRange(e.range)}}asHoverContent(e){return Array.isArray(e)?e.map((e=>this.asMarkdownString(e))):[this.asMarkdownString(e)]}asDocumentation(e){return o(e)?e:e.kind===r.MarkupKind.PlainText?e.value:this.asMarkdownString(e)}asMarkdownString(e){if(r.MarkupContent.is(e))return{value:e.value};if(o(e))return{value:e};const{language:t,value:n}=e;return{value:"```"+t+"\n"+n+"\n```"}}asSeverity(e){return 1===e?this._monaco.MarkerSeverity.Error:2===e?this._monaco.MarkerSeverity.Warning:3===e?this._monaco.MarkerSeverity.Info:this._monaco.MarkerSeverity.Hint}asDiagnostics(e){if(e)return e.map((e=>this.asDiagnostic(e)))}asDiagnostic(e){return{code:"number"==typeof e.code?e.code.toString():e.code,severity:this.asSeverity(e.severity),message:e.message,source:e.source,startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,relatedInformation:this.asRelatedInformations(e.relatedInformation)}}asRelatedInformations(e){if(e)return e.map((e=>this.asRelatedInformation(e)))}asRelatedInformation(e){return{resource:this._monaco.Uri.parse(e.location.uri),startLineNumber:e.location.range.start.line+1,startColumn:e.location.range.start.character+1,endLineNumber:e.location.range.end.line+1,endColumn:e.location.range.end.character+1,message:e.message}}asCompletionResult(e,t){if(!e)return{incomplete:!1,suggestions:[]};if(Array.isArray(e)){return{incomplete:!1,suggestions:e.map((e=>this.asCompletionItem(e,t)))}}return{incomplete:e.isIncomplete,suggestions:e.items.map((e=>this.asCompletionItem(e,t)))}}asCompletionItem(e,t){const n={label:e.label};e.detail&&(n.detail=e.detail),e.documentation&&(n.documentation=this.asDocumentation(e.documentation),n.documentationFormat=o(e.documentation)?void 0:e.documentation.kind),e.filterText&&(n.filterText=e.filterText);const r=this.asCompletionInsertText(e,t);if(n.insertText=r.insertText,n.range=r.range,n.fromEdit=r.fromEdit,r.isSnippet&&(n.insertTextRules=this._monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet),i(e.kind)){const[t,r]=this.asCompletionItemKind(e.kind);n.kind=t,r&&(n.originalItemKind=r)}return e.sortText&&(n.sortText=e.sortText),e.additionalTextEdits&&(n.additionalTextEdits=this.asTextEdits(e.additionalTextEdits)),u(e.commitCharacters)&&(n.commitCharacters=e.commitCharacters.slice()),e.command&&(n.command=this.asCommand(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(n.deprecated=e.deprecated),!0!==e.preselect&&!1!==e.preselect||(n.preselect=e.preselect),void 0!==e.data&&(n.data=e.data),!0!==e.deprecated&&!1!==e.deprecated||(n.deprecated=e.deprecated),n.insertTextMode=e.insertTextMode,n}asCompletionItemKind(e){if(r.CompletionItemKind.Text<=e&&e<=r.CompletionItemKind.TypeParameter)switch(e){case r.CompletionItemKind.Text:return[this._monaco.languages.CompletionItemKind.Text,void 0];case r.CompletionItemKind.Method:return[this._monaco.languages.CompletionItemKind.Method,void 0];case r.CompletionItemKind.Function:return[this._monaco.languages.CompletionItemKind.Function,void 0];case r.CompletionItemKind.Constructor:return[this._monaco.languages.CompletionItemKind.Constructor,void 0];case r.CompletionItemKind.Field:return[this._monaco.languages.CompletionItemKind.Field,void 0];case r.CompletionItemKind.Variable:return[this._monaco.languages.CompletionItemKind.Variable,void 0];case r.CompletionItemKind.Class:return[this._monaco.languages.CompletionItemKind.Class,void 0];case r.CompletionItemKind.Interface:return[this._monaco.languages.CompletionItemKind.Interface,void 0];case r.CompletionItemKind.Module:return[this._monaco.languages.CompletionItemKind.Module,void 0];case r.CompletionItemKind.Property:return[this._monaco.languages.CompletionItemKind.Property,void 0];case r.CompletionItemKind.Unit:return[this._monaco.languages.CompletionItemKind.Unit,void 0];case r.CompletionItemKind.Value:return[this._monaco.languages.CompletionItemKind.Value,void 0];case r.CompletionItemKind.Enum:return[this._monaco.languages.CompletionItemKind.Enum,void 0];case r.CompletionItemKind.Keyword:return[this._monaco.languages.CompletionItemKind.Keyword,void 0];case r.CompletionItemKind.Snippet:return[this._monaco.languages.CompletionItemKind.Snippet,void 0];case r.CompletionItemKind.Color:return[this._monaco.languages.CompletionItemKind.Color,void 0];case r.CompletionItemKind.File:return[this._monaco.languages.CompletionItemKind.File,void 0];case r.CompletionItemKind.Reference:return[this._monaco.languages.CompletionItemKind.Reference,void 0];case r.CompletionItemKind.Folder:return[this._monaco.languages.CompletionItemKind.Folder,void 0];case r.CompletionItemKind.EnumMember:return[this._monaco.languages.CompletionItemKind.EnumMember,void 0];case r.CompletionItemKind.Constant:return[this._monaco.languages.CompletionItemKind.Constant,void 0];case r.CompletionItemKind.Struct:return[this._monaco.languages.CompletionItemKind.Struct,void 0];case r.CompletionItemKind.Event:return[this._monaco.languages.CompletionItemKind.Event,void 0];case r.CompletionItemKind.Operator:return[this._monaco.languages.CompletionItemKind.Operator,void 0];case r.CompletionItemKind.TypeParameter:return[this._monaco.languages.CompletionItemKind.TypeParameter,void 0];default:return[e-1,void 0]}return[r.CompletionItemKind.Text,e]}asCompletionInsertText(e,t){const n=e.insertTextFormat===r.InsertTextFormat.Snippet;if(e.textEdit){if(r.TextEdit.is(e.textEdit)){const t=this.asRange(e.textEdit.range);return{isSnippet:n,insertText:e.textEdit.newText,range:t,fromEdit:!0}}{const t={insert:this.asRange(e.textEdit.insert),replace:this.asRange(e.textEdit.replace)};return{isSnippet:n,insertText:e.textEdit.newText,range:t,fromEdit:!0}}}return e.insertText?{isSnippet:n,insertText:e.insertText,fromEdit:!1,range:t}:{insertText:e.label,range:t,fromEdit:!1,isSnippet:!1}}asDocumentLinks(e){return{links:e.map((e=>this.asDocumentLink(e)))}}asDocumentLink(e){return{range:this.asRange(e.range),url:e.target,data:e.data,tooltip:e.tooltip}}asRange(e){if(void 0===e)return;if(null===e)return null;const t=this.asPosition(e.start),n=this.asPosition(e.end);if(t instanceof this._monaco.Position&&n instanceof this._monaco.Position)return new this._monaco.Range(t.lineNumber,t.column,n.lineNumber,n.column);return{startLineNumber:t&&void 0!==t.lineNumber?t.lineNumber:void 0,startColumn:t&&void 0!==t.column?t.column:void 0,endLineNumber:n&&void 0!==n.lineNumber?n.lineNumber:void 0,endColumn:n&&void 0!==n.column?n.column:void 0}}asPosition(e){if(void 0===e)return;if(null===e)return null;const{line:t,character:n}=e,r=void 0===t?void 0:t+1,i=void 0===n?void 0:n+1;return void 0!==r&&void 0!==i?new this._monaco.Position(r,i):{lineNumber:r,column:i}}asColorInformations(e){return e.map((e=>this.asColorInformation(e)))}asColorInformation(e){return{range:this.asRange(e.range),color:e.color}}asColorPresentations(e){return e.map((e=>this.asColorPresentation(e)))}asColorPresentation(e){return{label:e.label,textEdit:this.asTextEdit(e.textEdit),additionalTextEdits:this.asTextEdits(e.additionalTextEdits)}}asFoldingRanges(e){if(e)return e.map((e=>this.asFoldingRange(e)))}asFoldingRange(e){return{start:e.startLine+1,end:e.endLine+1,kind:this.asFoldingRangeKind(e.kind)}}asFoldingRangeKind(e){if(e)switch(e){case r.FoldingRangeKind.Comment:return this._monaco.languages.FoldingRangeKind.Comment;case r.FoldingRangeKind.Imports:return this._monaco.languages.FoldingRangeKind.Imports;case r.FoldingRangeKind.Region:return this._monaco.languages.FoldingRangeKind.Region}}asSemanticTokens(e){return{resultId:e.resultId,data:Uint32Array.from(e.data)}}}!function(e){const t=globalThis,n=Symbol.for("Services");e.get=()=>{const e=t[n];if(!e)throw new Error("Language Client services has not been installed");return e},e.install=function(e){return t[n]&&console.warn("Language Client services have been overridden"),t[n]=e,s.Disposable.create((()=>t[n]=void 0))}}(at||(at={})),(st=ut||(ut={}))[st.Invoke=1]="Invoke",st[st.TriggerCharacter=2]="TriggerCharacter",st[st.ContentChange=3]="ContentChange",(lt=ct||(ct={}))[lt.Error=0]="Error",lt[lt.Warning=1]="Warning",lt[lt.Information=2]="Information",lt[lt.Hint=3]="Hint",(pt||(pt={})).is=function(e){return!!e&&"uri"in e&&"languageId"in e},(ht=dt||(dt={}))[ht.Global=1]="Global",ht[ht.Workspace=2]="Workspace",ht[ht.WorkspaceFolder=3]="WorkspaceFolder";class Dt{constructor(){this.disposables=[]}dispose(){for(;0!==this.disposables.length;)this.disposables.pop().dispose()}push(e){const t=this.disposables;return t.push(e),{dispose(){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}}class Ct{constructor(e,t,n){this._monaco=e,this.name=t,this.p2m=n,this.diagnostics=new Map,this.toDispose=new Dt}dispose(){this.toDispose.dispose()}get(e){const t=this.diagnostics.get(e);return t?t.diagnostics:[]}set(e,t){const n=this.diagnostics.get(e);if(n)n.diagnostics=t;else{const n=new _t(this._monaco,e,t,this.name,this.p2m);this.diagnostics.set(e,n),this.toDispose.push(s.Disposable.create((()=>{this.diagnostics.delete(e),n.dispose()})))}}}class _t{constructor(e,t,n,r,i){this._monaco=e,this.owner=r,this.p2m=i,this._markers=[],this._diagnostics=[],this.toDispose=new Dt,this.uri=this._monaco.Uri.parse(t),this.diagnostics=n,this.toDispose.push(this._monaco.editor.onDidCreateModel((e=>this.doUpdateModelMarkers(e))))}set diagnostics(e){this._diagnostics=e,this._markers=this.p2m.asDiagnostics(e),this.updateModelMarkers()}get diagnostics(){return this._diagnostics}get markers(){return this._markers}dispose(){this._markers=[],this.updateModelMarkers(),this.toDispose.dispose()}updateModelMarkers(){const e=this._monaco.editor.getModel(this.uri);this.doUpdateModelMarkers(e||void 0)}doUpdateModelMarkers(e){e&&this.uri.toString()===e.uri.toString()&&this._monaco.editor.setModelMarkers(e,this.owner,this._markers)}}(ft=mt||(mt={})).fromDocument=function(e,t){return{uri:e.Uri.parse(t.uri),languageId:t.languageId}},ft.fromModel=function(e){return{uri:e.uri,languageId:e.getLanguageId()}};class yt{constructor(e,t,n){this._monaco=e,this.p2m=t,this.m2p=n}match(e,t){return this.matchModel(e,mt.fromDocument(this._monaco,t))}createDiagnosticCollection(e){return new Ct(this._monaco,e||"default",this.p2m)}registerCompletionItemProvider(e,t,...n){const r=this.createCompletionProvider(e,t,...n),i=new Dt;for(const o of this.matchLanguage(e))i.push(this._monaco.languages.registerCompletionItemProvider(o,r));return i}createCompletionProvider(e,t,...n){return{triggerCharacters:n,provideCompletionItems:async(n,r,i,o)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const a=n.getWordUntilPosition(r),u=new this._monaco.Range(r.lineNumber,a.startColumn,r.lineNumber,a.endColumn),s=this.m2p.asCompletionParams(n,r,i),c=await t.provideCompletionItems(s,o);return c&&this.p2m.asCompletionResult(c,u)},resolveCompletionItem:t.resolveCompletionItem?async(e,n)=>{const r=this.m2p.asCompletionItem(e),i=await t.resolveCompletionItem(r,n);if(i){const t=this.p2m.asCompletionItem(i,e.range);Object.assign(e,t)}return e}:void 0}}registerHoverProvider(e,t){const n=this.createHoverProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerHoverProvider(i,n));return r}createHoverProvider(e,t){return{provideHover:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentPositionParams(n,r),a=await t.provideHover(o,i);return a&&this.p2m.asHover(a)}}}registerSignatureHelpProvider(e,t,...n){const r=this.createSignatureHelpProvider(e,t,...n),i=new Dt;for(const o of this.matchLanguage(e))i.push(this._monaco.languages.registerSignatureHelpProvider(o,r));return i}createSignatureHelpProvider(e,t,...n){return{signatureHelpTriggerCharacters:[...t.triggerCharacters||n||[]],signatureHelpRetriggerCharacters:t.retriggerCharacters,provideSignatureHelp:async(n,r,i,o)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const a=this.m2p.asTextDocumentPositionParams(n,r),u=await t.provideSignatureHelp(a,i,this.m2p.asSignatureHelpContext(o));return u&&this.p2m.asSignatureHelpResult(u)}}}registerDefinitionProvider(e,t){const n=this.createDefinitionProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerDefinitionProvider(i,n));return r}createDefinitionProvider(e,t){return{provideDefinition:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentPositionParams(n,r),a=await t.provideDefinition(o,i);return a&&this.p2m.asDefinitionResult(a)}}}registerReferenceProvider(e,t){const n=this.createReferenceProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerReferenceProvider(i,n));return r}createReferenceProvider(e,t){return{provideReferences:async(n,r,i,o)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const a=this.m2p.asReferenceParams(n,r,i),u=await t.provideReferences(a,o);return u&&this.p2m.asReferences(u)}}}registerDocumentHighlightProvider(e,t){const n=this.createDocumentHighlightProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerDocumentHighlightProvider(i,n));return r}createDocumentHighlightProvider(e,t){return{provideDocumentHighlights:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentPositionParams(n,r),a=await t.provideDocumentHighlights(o,i);return a&&this.p2m.asDocumentHighlights(a)}}}registerDocumentSymbolProvider(e,t){const n=this.createDocumentSymbolProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerDocumentSymbolProvider(i,n));return r}createDocumentSymbolProvider(e,t){return{provideDocumentSymbols:async(n,r)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const i=this.m2p.asDocumentSymbolParams(n),o=await t.provideDocumentSymbols(i,r);return o&&this.p2m.asDocumentSymbols(o)}}}registerCodeActionsProvider(e,t){const n=this.createCodeActionProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerCodeActionProvider(i,n));return r}createCodeActionProvider(e,t){return{provideCodeActions:async(n,r,i,o)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const a=this.m2p.asCodeActionParams(n,r,i),u=await t.provideCodeActions(a,o);return u&&this.p2m.asCodeActionList(u)||void 0}}}registerCodeLensProvider(e,t){const n=this.createCodeLensProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerCodeLensProvider(i,n));return r}createCodeLensProvider(e,t){return{provideCodeLenses:async(n,r)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const i=this.m2p.asCodeLensParams(n),o=await t.provideCodeLenses(i,r);return o&&this.p2m.asCodeLensList(o)},resolveCodeLens:t.resolveCodeLens?async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return r;const o=this.m2p.asCodeLens(r),a=await t.resolveCodeLens(o,i);if(a){const e=this.p2m.asCodeLens(a);Object.assign(r,e)}return r}:(e,t)=>t}}registerDocumentFormattingEditProvider(e,t){const n=this.createDocumentFormattingEditProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerDocumentFormattingEditProvider(i,n));return r}createDocumentFormattingEditProvider(e,t){return{provideDocumentFormattingEdits:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asDocumentFormattingParams(n,r),a=await t.provideDocumentFormattingEdits(o,i);return a&&this.p2m.asTextEdits(a)}}}registerDocumentRangeFormattingEditProvider(e,t){const n=this.createDocumentRangeFormattingEditProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerDocumentRangeFormattingEditProvider(i,n));return r}createDocumentRangeFormattingEditProvider(e,t){return{provideDocumentRangeFormattingEdits:async(n,r,i,o)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const a=this.m2p.asDocumentRangeFormattingParams(n,r,i),u=await t.provideDocumentRangeFormattingEdits(a,o);return u&&this.p2m.asTextEdits(u)}}}registerOnTypeFormattingEditProvider(e,t,n,...r){const i=this.createOnTypeFormattingEditProvider(e,t,n,...r),o=new Dt;for(const a of this.matchLanguage(e))o.push(this._monaco.languages.registerOnTypeFormattingEditProvider(a,i));return o}createOnTypeFormattingEditProvider(e,t,n,...r){return{autoFormatTriggerCharacters:[n].concat(r),provideOnTypeFormattingEdits:async(n,r,i,o,a)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const u=this.m2p.asDocumentOnTypeFormattingParams(n,r,i,o),s=await t.provideOnTypeFormattingEdits(u,a);return s&&this.p2m.asTextEdits(s)}}}registerRenameProvider(e,t){const n=this.createRenameProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerRenameProvider(i,n));return r}createRenameProvider(e,t){return{provideRenameEdits:async(n,r,i,o)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const a=this.m2p.asRenameParams(n,r,i),u=await t.provideRenameEdits(a,o);return u&&this.p2m.asWorkspaceEdit(u)}}}registerDocumentLinkProvider(e,t){const n=this.createDocumentLinkProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerLinkProvider(i,n));return r}createDocumentLinkProvider(e,t){return{provideLinks:async(n,r)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const i=this.m2p.asDocumentLinkParams(n),o=await t.provideDocumentLinks(i,r);return o&&this.p2m.asDocumentLinks(o)},resolveLink:async(e,n)=>{if(t.resolveDocumentLink&&(null===e.url||void 0===e.url)){const r=this.m2p.asDocumentLink(e),i=await t.resolveDocumentLink(r,n);if(i){const t=this.p2m.asDocumentLink(i);Object.assign(e,t)}}return e}}}registerImplementationProvider(e,t){const n=this.createImplementationProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerImplementationProvider(i,n));return r}createImplementationProvider(e,t){return{provideImplementation:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentPositionParams(n,r),a=await t.provideImplementation(o,i);return a&&this.p2m.asDefinitionResult(a)}}}registerTypeDefinitionProvider(e,t){const n=this.createTypeDefinitionProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerTypeDefinitionProvider(i,n));return r}createTypeDefinitionProvider(e,t){return{provideTypeDefinition:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentPositionParams(n,r),a=await t.provideTypeDefinition(o,i);return a&&this.p2m.asDefinitionResult(a)}}}registerColorProvider(e,t){const n=this.createDocumentColorProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerColorProvider(i,n));return r}createDocumentColorProvider(e,t){return{provideDocumentColors:async(n,r)=>{if(!this.matchModel(e,mt.fromModel(n)))return;console.log(n,r);const i=this.m2p.asTextDocumentIdentifier(n),o=await t.provideDocumentColors({textDocument:i},r);return o&&this.p2m.asColorInformations(o)},provideColorPresentations:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentIdentifier(n),a=this.m2p.asRange(r.range),u=await t.provideColorPresentations({textDocument:o,color:r.color,range:a},i);return u&&this.p2m.asColorPresentations(u)}}}registerFoldingRangeProvider(e,t){const n=this.createFoldingRangeProvider(e,t),r=new Dt;for(const i of this.matchLanguage(e))r.push(this._monaco.languages.registerFoldingRangeProvider(i,n));return r}createFoldingRangeProvider(e,t){return{provideFoldingRanges:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentIdentifier(n),a=await t.provideFoldingRanges({textDocument:o},i);return a&&this.p2m.asFoldingRanges(a)}}}registerDocumentSemanticTokensProvider(e,t,n){const r=this.createSemanticTokensProvider(e,t,n),i=new Dt;for(const o of this.matchLanguage(e))i.push(this._monaco.languages.registerDocumentSemanticTokensProvider(o,r));return i}createSemanticTokensProvider(e,t,n){return{getLegend:()=>n,provideDocumentSemanticTokens:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentIdentifier(n),a=await t.provideDocumentSemanticTokens({textDocument:o},i);return a&&this.p2m.asSemanticTokens(a)},releaseDocumentSemanticTokens:e=>{}}}registerDocumentRangeSemanticTokensProvider(e,t,n){const r=this.createRangeSemanticTokensProvider(e,t,n),i=new Dt;for(const o of this.matchLanguage(e))i.push(this._monaco.languages.registerDocumentRangeSemanticTokensProvider(o,r));return i}createRangeSemanticTokensProvider(e,t,n){return{getLegend:()=>n,provideDocumentRangeSemanticTokens:async(n,r,i)=>{if(!this.matchModel(e,mt.fromModel(n)))return;const o=this.m2p.asTextDocumentIdentifier(n),a=await t.provideDocumentRangeSemanticTokens({textDocument:o,range:this.m2p.asRange(r)},i);return a&&this.p2m.asSemanticTokens(a)}}}matchModel(e,t){return Array.isArray(e)?e.some((e=>this.matchModel(e,t))):r.DocumentFilter.is(e)?(!e.language||e.language===t.languageId)&&((!e.scheme||e.scheme===t.uri.scheme)&&(!e.pattern||(e.pattern,t.uri.path,!1))):e===t.languageId}matchLanguage(e){const t=new Set;if(Array.isArray(e))for(const n of e)t.add(this.matchLanguageByFilter(n));else t.add(this.matchLanguageByFilter(e));return t}matchLanguageByFilter(e){return r.DocumentFilter.is(e)?e.language?e.language:"*":e}}var It={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DisposableCollection=e.Disposable=void 0;const t=c;Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return t.Disposable}});e.DisposableCollection=class{constructor(){this.disposables=[]}dispose(){for(;0!==this.disposables.length;)this.disposables.pop().dispose()}push(e){const t=this.disposables;return t.push(e),{dispose(){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}}}(It);var Et={},At={};Object.defineProperty(At,"__esModule",{value:!0});var xt={};Object.defineProperty(xt,"__esModule",{value:!0}),xt.WebSocketMessageReader=void 0;const Ft=l;class bt extends Ft.AbstractMessageReader{constructor(e){super(),this.socket=e,this.state="initial",this.events=[],this.socket.onMessage((e=>this.readMessage(e))),this.socket.onError((e=>this.fireError(e))),this.socket.onClose(((e,t)=>{if(1e3!==e){const n={name:""+e,message:`Error during socket reconnect: code = ${e}, reason = ${t}`};this.fireError(n)}this.fireClose()}))}listen(e){if("initial"===this.state)for(this.state="listening",this.callback=e;0!==this.events.length;){const e=this.events.pop();e.message?this.readMessage(e.message):e.error?this.fireError(e.error):this.fireClose()}return{dispose:()=>{this.callback===e&&(this.callback=void 0)}}}readMessage(e){if("initial"===this.state)this.events.splice(0,0,{message:e});else if("listening"===this.state){const t=JSON.parse(e);this.callback(t)}}fireError(e){"initial"===this.state?this.events.splice(0,0,{error:e}):"listening"===this.state&&super.fireError(e)}fireClose(){"initial"===this.state?this.events.splice(0,0,{}):"listening"===this.state&&super.fireClose(),this.state="closed"}}xt.WebSocketMessageReader=bt;var St={},wt=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function u(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(St,"__esModule",{value:!0}),St.WebSocketMessageWriter=void 0;const kt=p;class Rt extends kt.AbstractMessageWriter{constructor(e){super(),this.socket=e,this.errorCount=0}end(){}write(e){return wt(this,void 0,void 0,(function*(){try{const t=JSON.stringify(e);this.socket.send(t)}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}))}}St.WebSocketMessageWriter=Rt;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.createWebSocketConnection=void 0;const Pt=s,Bt=xt,Ot=St;Tt.createWebSocketConnection=function(e,t){const n=new Bt.WebSocketMessageReader(e),r=new Ot.WebSocketMessageWriter(e),i=Pt.createMessageConnection(n,r,t);return i.onClose((()=>i.dispose())),i},function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(At,t),r(xt,t),r(St,t),r(Tt,t)}(Et);var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.ConsoleLogger=void 0;Lt.ConsoleLogger=class{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}debug(e){console.debug(e)}};var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.toSocket=Nt.listen=void 0;const Mt=Et,qt=Lt;function Wt(e){return{send:t=>e.send(t),onMessage:t=>e.onmessage=e=>t(e.data),onError:t=>e.onerror=e=>{"message"in e&&t(e.message)},onClose:t=>e.onclose=e=>t(e.code,e.reason),dispose:()=>e.close()}}Nt.listen=function(e){const{webSocket:t,onConnection:n}=e,r=e.logger||new qt.ConsoleLogger;t.onopen=()=>{const e=Wt(t),i=Mt.createWebSocketConnection(e,r);n(i)}},Nt.toSocket=Wt,function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(s,t),r(d,t),r(It,t),r(Et,t),r(Lt,t),r(Nt,t)}({});var jt={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.toJSONObject=Ht=Kt.ConfigurationFeature=void 0;const $t=h,Ut=r;var Ht=Kt.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Ut.ConfigurationRequest.type,((t,n)=>{let r=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},i=e.clientOptions.middleware.workspace;return i&&i.configuration?i.configuration(t,n,r):r(t)}))}getConfiguration(e,t){let n=null;if(t){let r=t.lastIndexOf(".");if(-1===r)n=zt($t.workspace.getConfiguration(void 0,e).get(t));else{let i=$t.workspace.getConfiguration(t.substr(0,r),e);i&&(n=zt(i.get(t.substr(r+1))))}}else{let t=$t.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=zt(t.get(e)))}return void 0===n&&(n=null),n}dispose(){}};function zt(e){if(e){if(Array.isArray(e))return e.map(zt);if("object"==typeof e){const t=Object.create(null);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=zt(e[n]));return t}}return e}Kt.toJSONObject=zt;var Gt={},Vt={};function Jt(e){return"string"==typeof e||e instanceof String}function Zt(e){return"function"==typeof e}function Qt(e){return Array.isArray(e)}function Yt(e){return e&&Zt(e.then)}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.asPromise=Vt.thenable=Vt.typedArray=Vt.stringArray=Vt.array=Vt.func=Vt.error=Vt.number=Vt.string=Vt.boolean=void 0,Vt.boolean=function(e){return!0===e||!1===e},Vt.string=Jt,Vt.number=function(e){return"number"==typeof e||e instanceof Number},Vt.error=function(e){return e instanceof Error},Vt.func=Zt,Vt.array=Qt,Vt.stringArray=function(e){return Qt(e)&&e.every((e=>Jt(e)))},Vt.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},Vt.thenable=Yt,Vt.asPromise=function(e){return e instanceof Promise?e:Yt(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)};var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});const en=h;class tn extends en.CompletionItem{constructor(e){super(e)}}Xt.default=tn;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});const rn=h;class on extends rn.CodeLens{constructor(e){super(e)}}nn.default=on;var an={};Object.defineProperty(an,"__esModule",{value:!0});const un=h;class sn extends un.DocumentLink{constructor(e,t){super(e,t)}}an.default=sn;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});const ln=h;class pn extends ln.CodeAction{constructor(e,t){super(e),this.data=t}}cn.default=pn;var dn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolDiagnostic=e.DiagnosticCode=void 0;const t=h,n=Vt;(e.DiagnosticCode||(e.DiagnosticCode={})).is=function(e){const t=e;return null!=t&&(n.number(t.value)||n.string(t.value))&&n.string(t.target)};class r extends t.Diagnostic{constructor(e,t,n,r){super(e,t,n),this.data=r,this.hasDiagnosticCode=!1}}e.ProtocolDiagnostic=r}(dn);var hn={};Object.defineProperty(hn,"__esModule",{value:!0});const mn=h;class fn extends mn.CallHierarchyItem{constructor(e,t,n,r,i,o,a){super(e,t,n,r,i,o),void 0!==a&&(this.data=a)}}hn.default=fn,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createConverter=void 0;const gn=h,vn=r,Dn=Vt,Cn=Xt,_n=nn,yn=an,In=cn,En=dn,An=hn,xn=r;var Fn;(Fn||(Fn={})).is=function(e){const t=e;return t&&!!t.inserting&&!!t.replacing},Gt.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function r(e){return{uri:t(e.uri)}}function i(e){switch(e){case gn.TextDocumentSaveReason.Manual:return vn.TextDocumentSaveReason.Manual;case gn.TextDocumentSaveReason.AfterDelay:return vn.TextDocumentSaveReason.AfterDelay;case gn.TextDocumentSaveReason.FocusOut:return vn.TextDocumentSaveReason.FocusOut}return vn.TextDocumentSaveReason.Manual}function o(e){switch(e){case gn.CompletionTriggerKind.TriggerCharacter:return vn.CompletionTriggerKind.TriggerCharacter;case gn.CompletionTriggerKind.TriggerForIncompleteCompletions:return vn.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return vn.CompletionTriggerKind.Invoked}}function a(e){switch(e){case gn.SignatureHelpTriggerKind.Invoke:return vn.SignatureHelpTriggerKind.Invoked;case gn.SignatureHelpTriggerKind.TriggerCharacter:return vn.SignatureHelpTriggerKind.TriggerCharacter;case gn.SignatureHelpTriggerKind.ContentChange:return vn.SignatureHelpTriggerKind.ContentChange}}function u(e){return{label:e.label}}function s(e){return{label:e.label,parameters:(t=e.parameters,t.map(u))};var t}function c(e){return{line:e.line,character:e.character}}function l(e){return null==e?e:{line:e.line,character:e.character}}function p(e){return null==e?e:{start:l(e.start),end:l(e.end)}}function d(e){return null==e?e:vn.Location.create(n(e.uri),p(e.range))}function h(e){switch(e){case gn.DiagnosticSeverity.Error:return vn.DiagnosticSeverity.Error;case gn.DiagnosticSeverity.Warning:return vn.DiagnosticSeverity.Warning;case gn.DiagnosticSeverity.Information:return vn.DiagnosticSeverity.Information;case gn.DiagnosticSeverity.Hint:return vn.DiagnosticSeverity.Hint}}function m(e){switch(e){case gn.DiagnosticTag.Unnecessary:return vn.DiagnosticTag.Unnecessary;case gn.DiagnosticTag.Deprecated:return vn.DiagnosticTag.Deprecated;default:return}}function f(e){return{message:e.message,location:d(e.location)}}function g(e){const t=vn.Diagnostic.create(p(e.range),e.message),r=e instanceof En.ProtocolDiagnostic?e:void 0;void 0!==r&&void 0!==r.data&&(t.data=r.data);const i=function(e){if(null!=e)return Dn.number(e)||Dn.string(e)?e:{value:e.value,target:n(e.target)}}(e.code);return En.DiagnosticCode.is(i)?void 0!==r&&r.hasDiagnosticCode?t.code=i:(t.code=i.value,t.codeDescription={href:i.target}):t.code=i,Dn.number(e.severity)&&(t.severity=h(e.severity)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=m(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(f)),e.source&&(t.source=e.source),t}function v(e){return null==e?e:e.map(g)}function D(e){switch(e){case gn.CompletionItemTag.Deprecated:return vn.CompletionItemTag.Deprecated}}function C(e){return{range:p(e.range),newText:e.newText}}function _(e){return e<=gn.SymbolKind.TypeParameter?e+1:vn.SymbolKind.Property}function y(e){return e}function I(e){return e.map(y)}function E(e){let t=vn.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:n,asTextDocumentIdentifier:r,asVersionedTextDocumentIdentifier:function(e){return{uri:t(e.uri),version:e.version}},asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e)){return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]}}if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map((e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:r(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:r(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:r(e.document),reason:i(e.reason)}},asDidCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asDidRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asDidDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillCreateFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asWillRenameFilesParams:function(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}},asWillDeleteFilesParams:function(e){return{files:e.files.map((e=>({uri:t(e)})))}},asTextDocumentPositionParams:function(e,t){return{textDocument:r(e),position:c(t)}},asCompletionParams:function(e,t,n){return{textDocument:r(e),position:c(t),context:{triggerKind:o(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asSignatureHelpParams:function(e,t,n){return{textDocument:r(e),position:c(t),context:{isRetrigger:n.isRetrigger,triggerCharacter:n.triggerCharacter,triggerKind:a(n.triggerKind),activeSignatureHelp:(i=n.activeSignatureHelp,void 0===i?i:{signatures:(o=i.signatures,o.map(s)),activeSignature:i.activeSignature,activeParameter:i.activeParameter})}};var i,o},asWorkerPosition:c,asRange:p,asPosition:l,asPositions:function(e){let t=[];for(let n of e)t.push(l(n));return t},asLocation:d,asDiagnosticSeverity:h,asDiagnosticTag:m,asDiagnostic:g,asDiagnostics:v,asCompletionItem:function(e){let t={label:e.label},n=e instanceof Cn.default?e:void 0;var r,i;e.detail&&(t.detail=e.detail),e.documentation&&(n&&"$string"!==n.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case vn.MarkupKind.PlainText:return{kind:e,value:t};case vn.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(n.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let n,r,i=vn.InsertTextFormat.PlainText;t.textEdit?(n=t.textEdit.newText,r=t.textEdit.range):t.insertText instanceof gn.SnippetString?(i=vn.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText;t.range&&(r=t.range);e.insertTextFormat=i,t.fromEdit&&void 0!==n&&void 0!==r?e.textEdit=function(e,t){return Fn.is(t)?vn.InsertReplaceEdit.create(e,p(t.inserting),p(t.replacing)):{newText:e,range:p(t)}}(n,r):e.insertText=n}(t,e),Dn.number(e.kind)&&(t.kind=(r=e.kind,void 0!==(i=n&&n.originalItemKind)?i:r+1)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=function(e){if(null==e)return e;return e.map(C)}(e.additionalTextEdits)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=E(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect);const o=function(e){if(void 0===e)return e;const t=[];for(let n of e){const e=D(n);void 0!==e&&t.push(e)}return t}(e.tags);if(n){if(void 0!==n.data&&(t.data=n.data),!0===n.deprecated||!1===n.deprecated){if(!0===n.deprecated&&void 0!==o&&o.length>0){const e=o.indexOf(gn.CompletionItemTag.Deprecated);-1!==e&&o.splice(e,1)}t.deprecated=n.deprecated}void 0!==n.insertTextMode&&(t.insertTextMode=n.insertTextMode)}return void 0!==o&&o.length>0&&(t.tags=o),void 0===t.insertTextMode&&!0===e.keepWhitespace&&(t.insertTextMode=xn.InsertTextMode.adjustIndentation),t},asTextEdit:C,asSymbolKind:_,asSymbolTag:y,asSymbolTags:I,asReferenceParams:function(e,t,n){return{textDocument:r(e),position:c(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeAction:function(e){let t=vn.CodeAction.create(e.title);if(e instanceof In.default&&void 0!==e.data&&(t.data=e.data),void 0!==e.kind&&(t.kind=function(e){if(null==e)return;return e.value}(e.kind)),void 0!==e.diagnostics&&(t.diagnostics=v(e.diagnostics)),void 0!==e.edit)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return void 0!==e.command&&(t.command=E(e.command)),void 0!==e.isPreferred&&(t.isPreferred=e.isPreferred),void 0!==e.disabled&&(t.disabled={reason:e.disabled.reason}),t},asCodeActionContext:function(e){if(null==e)return e;let t;return e.only&&Dn.string(e.only.value)&&(t=[e.only.value]),vn.CodeActionContext.create(v(e.diagnostics),t)},asCommand:E,asCodeLens:function(e){let t=vn.CodeLens.create(p(e.range));return e.command&&(t.command=E(e.command)),e instanceof _n.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e,t){const n={tabSize:e.tabSize,insertSpaces:e.insertSpaces};return t.trimTrailingWhitespace&&(n.trimTrailingWhitespace=!0),t.trimFinalNewlines&&(n.trimFinalNewlines=!0),t.insertFinalNewline&&(n.insertFinalNewline=!0),n},asDocumentSymbolParams:function(e){return{textDocument:r(e)}},asCodeLensParams:function(e){return{textDocument:r(e)}},asDocumentLink:function(e){let t=vn.DocumentLink.create(p(e.range));e.target&&(t.target=n(e.target)),void 0!==e.tooltip&&(t.tooltip=e.tooltip);let r=e instanceof yn.default?e:void 0;return r&&r.data&&(t.data=r.data),t},asDocumentLinkParams:function(e){return{textDocument:r(e)}},asCallHierarchyItem:function(e){const t={name:e.name,kind:_(e.kind),uri:n(e.uri),range:p(e.range),selectionRange:p(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=I(e.tags)),e instanceof An.default&&void 0!==e.data&&(t.data=e.data),t}}};var bn={};Object.defineProperty(bn,"__esModule",{value:!0}),bn.createConverter=void 0;const Sn=h,wn=r,kn=Vt,Rn=Xt,Tn=nn,Pn=an,Bn=cn,On=dn,Ln=hn,Nn=r;var Mn;(Mn||(Mn={})).is=function(e){let t=e;return t&&kn.string(t.language)&&kn.string(t.value)},bn.createConverter=function(e,t){const n=e||(e=>Sn.Uri.parse(e));function r(e){return n(e)}function i(e){return e.map(o)}function o(e){let t=new On.ProtocolDiagnostic(c(e.range),e.message,p(e.severity),e.data);return void 0!==e.code&&(wn.CodeDescription.is(e.codeDescription)?t.code={value:e.code,target:r(e.codeDescription.href)}:On.DiagnosticCode.is(e.code)?(t.hasDiagnosticCode=!0,t.code={value:e.code.value,target:r(e.code.target)}):t.code=e.code),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(a)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=u(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),t}function a(e){return new Sn.DiagnosticRelatedInformation(E(e.location),e.message)}function u(e){switch(e){case wn.DiagnosticTag.Unnecessary:return Sn.DiagnosticTag.Unnecessary;case wn.DiagnosticTag.Deprecated:return Sn.DiagnosticTag.Deprecated;default:return}}function s(e){if(e)return new Sn.Position(e.line,e.character)}function c(e){if(e)return new Sn.Range(s(e.start),s(e.end))}function l(e){return e.map((e=>c(e)))}function p(e){if(null==e)return Sn.DiagnosticSeverity.Error;switch(e){case wn.DiagnosticSeverity.Error:return Sn.DiagnosticSeverity.Error;case wn.DiagnosticSeverity.Warning:return Sn.DiagnosticSeverity.Warning;case wn.DiagnosticSeverity.Information:return Sn.DiagnosticSeverity.Information;case wn.DiagnosticSeverity.Hint:return Sn.DiagnosticSeverity.Hint}return Sn.DiagnosticSeverity.Error}function d(e){if(kn.string(e))return e;switch(e.kind){case wn.MarkupKind.Markdown:return h(e.value);case wn.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function h(e){const n=new Sn.MarkdownString(e);return!0===t&&(n.isTrusted=t),n}function m(e){switch(e){case wn.CompletionItemTag.Deprecated:return Sn.CompletionItemTag.Deprecated}}function f(e){let t=function(e){if(null==e)return[];const t=[];for(let n of e){const e=m(n);void 0!==e&&t.push(e)}return t}(e.tags),n=new Rn.default(e.label);e.detail&&(n.detail=e.detail),e.documentation&&(n.documentation=d(e.documentation),n.documentationFormat=kn.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(n.filterText=e.filterText);let r=function(e){return e.textEdit?e.insertTextFormat===wn.InsertTextFormat.Snippet?{text:new Sn.SnippetString(e.textEdit.newText),range:g(e.textEdit),fromEdit:!0}:{text:e.textEdit.newText,range:g(e.textEdit),fromEdit:!0}:e.insertText?e.insertTextFormat===wn.InsertTextFormat.Snippet?{text:new Sn.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(r&&(n.insertText=r.text,n.range=r.range,n.fromEdit=r.fromEdit),kn.number(e.kind)){let[t,r]=(i=e.kind,wn.CompletionItemKind.Text<=i&&i<=wn.CompletionItemKind.TypeParameter?[i-1,void 0]:[Sn.CompletionItemKind.Text,i]);n.kind=t,r&&(n.originalItemKind=r)}var i;return e.sortText&&(n.sortText=e.sortText),e.additionalTextEdits&&(n.additionalTextEdits=D(e.additionalTextEdits)),kn.stringArray(e.commitCharacters)&&(n.commitCharacters=e.commitCharacters.slice()),e.command&&(n.command=B(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(n.deprecated=e.deprecated,!0===e.deprecated&&t.push(Sn.CompletionItemTag.Deprecated)),!0!==e.preselect&&!1!==e.preselect||(n.preselect=e.preselect),void 0!==e.data&&(n.data=e.data),t.length>0&&(n.tags=t),void 0!==e.insertTextMode&&(n.insertTextMode=e.insertTextMode,e.insertTextMode===Nn.InsertTextMode.asIs&&(n.keepWhitespace=!0)),n}function g(e){return wn.InsertReplaceEdit.is(e)?{inserting:c(e.insert),replacing:c(e.replace)}:c(e.range)}function v(e){if(e)return new Sn.TextEdit(c(e.range),e.newText)}function D(e){if(e)return e.map(v)}function C(e){return e.map(_)}function _(e){let t=new Sn.SignatureInformation(e.label);return void 0!==e.documentation&&(t.documentation=d(e.documentation)),void 0!==e.parameters&&(t.parameters=y(e.parameters)),void 0!==e.activeParameter&&(t.activeParameter=e.activeParameter),t}function y(e){return e.map(I)}function I(e){let t=new Sn.ParameterInformation(e.label);return e.documentation&&(t.documentation=d(e.documentation)),t}function E(e){if(e)return new Sn.Location(n(e.uri),c(e.range))}function A(e){if(!e)return;let t={targetUri:n(e.targetUri),targetRange:c(e.targetRange),originSelectionRange:c(e.originSelectionRange),targetSelectionRange:c(e.targetSelectionRange)};if(!t.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return t}function x(e){if(e){if(kn.array(e)){if(0===e.length)return[];if(wn.LocationLink.is(e[0])){return e.map((e=>A(e)))}return e.map((e=>E(e)))}return wn.LocationLink.is(e)?[A(e)]:E(e)}}function F(e){let t=new Sn.DocumentHighlight(c(e.range));return kn.number(e.kind)&&(t.kind=b(e.kind)),t}function b(e){switch(e){case wn.DocumentHighlightKind.Text:return Sn.DocumentHighlightKind.Text;case wn.DocumentHighlightKind.Read:return Sn.DocumentHighlightKind.Read;case wn.DocumentHighlightKind.Write:return Sn.DocumentHighlightKind.Write}return Sn.DocumentHighlightKind.Text}function S(e){return e<=wn.SymbolKind.TypeParameter?e-1:Sn.SymbolKind.Property}function w(e){switch(e){case wn.SymbolTag.Deprecated:return Sn.SymbolTag.Deprecated;default:return}}function k(e){if(null==e)return;const t=[];for(const n of e){const e=w(n);void 0!==e&&t.push(e)}return 0===t.length?void 0:t}function R(e,t){let r=new Sn.SymbolInformation(e.name,S(e.kind),c(e.location.range),e.location.uri?n(e.location.uri):t);return P(r,e),e.containerName&&(r.containerName=e.containerName),r}function T(e){let t=new Sn.DocumentSymbol(e.name,e.detail||"",S(e.kind),c(e.range),c(e.selectionRange));if(P(t,e),void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(T(t));t.children=n}return t}function P(e,t){e.tags=k(t.tags),t.deprecated&&(e.tags?e.tags.includes(Sn.SymbolTag.Deprecated)||(e.tags=e.tags.concat(Sn.SymbolTag.Deprecated)):e.tags=[Sn.SymbolTag.Deprecated])}function B(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const O=new Map;function L(e){if(null==e)return;let t=O.get(e);if(t)return t;let n=e.split(".");t=Sn.CodeActionKind.Empty;for(let r of n)t=t.append(r);return t}function N(e){if(!e)return;let t=new Tn.default(c(e.range));return e.command&&(t.command=B(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function M(e){if(!e)return;const t=new Map;if(void 0!==e.changeAnnotations)for(const n of Object.keys(e.changeAnnotations)){const r=q(e.changeAnnotations[n]);t.set(n,r)}const r=e=>void 0===e?void 0:t.get(e),i=new Sn.WorkspaceEdit;if(e.documentChanges)for(const o of e.documentChanges)if(wn.CreateFile.is(o))i.createFile(n(o.uri),o.options,r(o.annotationId));else if(wn.RenameFile.is(o))i.renameFile(n(o.oldUri),n(o.newUri),o.options,r(o.annotationId));else if(wn.DeleteFile.is(o))i.deleteFile(n(o.uri),o.options,r(o.annotationId));else{if(!wn.TextDocumentEdit.is(o))throw new Error(`Unknown workspace edit change received:\n${JSON.stringify(o,void 0,4)}`);{const e=n(o.textDocument.uri);for(const t of o.edits)Nn.AnnotatedTextEdit.is(t)?i.replace(e,c(t.range),t.newText,r(t.annotationId)):i.replace(e,c(t.range),t.newText)}}else e.changes&&Object.keys(e.changes).forEach((t=>{i.set(n(t),D(e.changes[t]))}));return i}function q(e){if(void 0!==e)return{label:e.label,needsConfirmation:!!e.needsConfirmation,description:e.description}}function W(e){let t=c(e.range),n=e.target?r(e.target):void 0,i=new Pn.default(t,n);return void 0!==e.tooltip&&(i.tooltip=e.tooltip),void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function j(e){return new Sn.Color(e.red,e.green,e.blue,e.alpha)}function K(e){return new Sn.ColorInformation(c(e.range),j(e.color))}function $(e){let t=new Sn.ColorPresentation(e.label);return t.additionalTextEdits=D(e.additionalTextEdits),e.textEdit&&(t.textEdit=v(e.textEdit)),t}function U(e){if(e)switch(e){case wn.FoldingRangeKind.Comment:return Sn.FoldingRangeKind.Comment;case wn.FoldingRangeKind.Imports:return Sn.FoldingRangeKind.Imports;case wn.FoldingRangeKind.Region:return Sn.FoldingRangeKind.Region}}function H(e){return new Sn.FoldingRange(e.startLine,e.endLine,U(e.kind))}function z(e){return new Sn.SelectionRange(c(e.range),e.parent?z(e.parent):void 0)}function G(e){if(null===e)return;let t=new Ln.default(S(e.kind),e.name,e.detail||"",r(e.uri),c(e.range),c(e.selectionRange),e.data);return void 0!==e.tags&&(t.tags=k(e.tags)),t}function V(e){return new Sn.CallHierarchyIncomingCall(G(e.from),l(e.fromRanges))}function J(e){return new Sn.CallHierarchyOutgoingCall(G(e.to),l(e.fromRanges))}function Z(e){return new Sn.SemanticTokensEdit(e.start,e.deleteCount,void 0!==e.data?new Uint32Array(e.data):void 0)}return O.set(wn.CodeActionKind.Empty,Sn.CodeActionKind.Empty),O.set(wn.CodeActionKind.QuickFix,Sn.CodeActionKind.QuickFix),O.set(wn.CodeActionKind.Refactor,Sn.CodeActionKind.Refactor),O.set(wn.CodeActionKind.RefactorExtract,Sn.CodeActionKind.RefactorExtract),O.set(wn.CodeActionKind.RefactorInline,Sn.CodeActionKind.RefactorInline),O.set(wn.CodeActionKind.RefactorRewrite,Sn.CodeActionKind.RefactorRewrite),O.set(wn.CodeActionKind.Source,Sn.CodeActionKind.Source),O.set(wn.CodeActionKind.SourceOrganizeImports,Sn.CodeActionKind.SourceOrganizeImports),{asUri:r,asDiagnostics:i,asDiagnostic:o,asRange:c,asRanges:l,asPosition:s,asDiagnosticSeverity:p,asDiagnosticTag:u,asHover:function(e){if(e)return new Sn.Hover(function(e){if(kn.string(e))return h(e);if(Mn.is(e))return h().appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let n of e){let e=h();Mn.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}{let t;switch(e.kind){case wn.MarkupKind.Markdown:return h(e.value);case wn.MarkupKind.PlainText:return t=h(),t.appendText(e.value),t;default:return t=h(),t.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`),t}}}(e.contents),c(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e)){return e.map(f)}let t=e;return new Sn.CompletionList(t.items.map(f),t.isIncomplete)},asCompletionItem:f,asTextEdit:v,asTextEdits:D,asSignatureHelp:function(e){if(!e)return;let t=new Sn.SignatureHelp;return kn.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,kn.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=C(e.signatures)),t},asSignatureInformations:C,asSignatureInformation:_,asParameterInformations:y,asParameterInformation:I,asDeclarationResult:function(e){if(e)return x(e)},asDefinitionResult:function(e){if(e)return x(e)},asLocation:E,asReferences:function(e){if(e)return e.map((e=>E(e)))},asDocumentHighlights:function(e){if(e)return e.map(F)},asDocumentHighlight:F,asDocumentHighlightKind:b,asSymbolKind:S,asSymbolTag:w,asSymbolTags:k,asSymbolInformations:function(e,t){if(e)return e.map((e=>R(e,t)))},asSymbolInformation:R,asDocumentSymbols:function(e){if(null!=e)return e.map(T)},asDocumentSymbol:T,asCommand:B,asCommands:function(e){if(e)return e.map(B)},asCodeAction:function(e){if(null==e)return;let t=new Bn.default(e.title,e.data);return void 0!==e.kind&&(t.kind=L(e.kind)),void 0!==e.diagnostics&&(t.diagnostics=i(e.diagnostics)),void 0!==e.edit&&(t.edit=M(e.edit)),void 0!==e.command&&(t.command=B(e.command)),void 0!==e.isPreferred&&(t.isPreferred=e.isPreferred),void 0!==e.disabled&&(t.disabled={reason:e.disabled.reason}),t},asCodeActionKind:L,asCodeActionKinds:function(e){if(null!=e)return e.map((e=>L(e)))},asCodeLens:N,asCodeLenses:function(e){if(e)return e.map((e=>N(e)))},asWorkspaceEdit:M,asDocumentLink:W,asDocumentLinks:function(e){if(e)return e.map(W)},asFoldingRangeKind:U,asFoldingRange:H,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(H)},asColor:j,asColorInformation:K,asColorInformations:function(e){if(Array.isArray(e))return e.map(K)},asColorPresentation:$,asColorPresentations:function(e){if(Array.isArray(e))return e.map($)},asSelectionRange:z,asSelectionRanges:function(e){if(!Array.isArray(e))return[];let t=[];for(let n of e)t.push(z(n));return t},asSemanticTokensLegend:function(e){return e},asSemanticTokens:function(e){if(null!=e)return new Sn.SemanticTokens(new Uint32Array(e.data),e.resultId)},asSemanticTokensEdit:Z,asSemanticTokensEdits:function(e){if(null!=e)return new Sn.SemanticTokensEdits(e.edits.map(Z),e.resultId)},asCallHierarchyItem:G,asCallHierarchyItems:function(e){if(null!==e)return e.map((e=>G(e)))},asCallHierarchyIncomingCall:V,asCallHierarchyIncomingCalls:function(e){if(null!==e)return e.map((e=>V(e)))},asCallHierarchyOutgoingCall:J,asCallHierarchyOutgoingCalls:function(e){if(null!==e)return e.map((e=>J(e)))},asLinkedEditingRanges:function(e){if(null!=e)return new Sn.LinkedEditingRanges(l(e.ranges),function(e){if(null==e)return;return new RegExp(e)}(e.wordPattern))}}};var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.Delayer=void 0;const Wn=r;qn.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e}))),(t>=0||void 0===this.timeout)&&(this.timeout=Wn.RAL().timer.setTimeout((()=>{this.timeout=void 0,this.onSuccess(void 0)}),t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(Wn.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.generateUuid=jn.parse=jn.isUUID=jn.v4=jn.empty=void 0;class Kn{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class $n extends Kn{constructor(){super([$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),"-",$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),"-","4",$n._randomHex(),$n._randomHex(),$n._randomHex(),"-",$n._oneOf($n._timeHighBits),$n._randomHex(),$n._randomHex(),$n._randomHex(),"-",$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex(),$n._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return $n._oneOf($n._chars)}}function Un(){return new $n}$n._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],$n._timeHighBits=["8","9","a","b"],jn.empty=new Kn("00000000-0000-0000-0000-000000000000"),jn.v4=Un;const Hn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function zn(e){return Hn.test(e)}jn.isUUID=zn,jn.parse=function(e){if(!zn(e))throw new Error("invalid uuid");return new Kn(e)},jn.generateUuid=function(){return Un().asHex()};var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.ProgressPart=void 0;const Vn=h,Jn=r,Zn=Vt;Gn.ProgressPart=class{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._disposable=this._client.onProgress(Jn.WorkDoneProgress.type,this._token,(e=>{switch(e.kind){case"begin":this.begin(e);break;case"report":this.report(e);break;case"end":this.done(),n&&n(this)}}))}begin(e){Vn.window.withProgress({location:Vn.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},(async(t,n)=>(this._progress=t,this._infinite=void 0===e.percentage,this._cancellationToken=n,this._cancellationToken.onCancellationRequested((()=>{this._client.sendNotification(Jn.WorkDoneProgressCancelNotification.type,{token:this._token})})),this.report(e),new Promise(((e,t)=>{this._resolve=e,this._reject=t})))))}report(e){if(this._infinite&&Zn.string(e.message))this._progress.report({message:e.message});else if(Zn.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BaseLanguageClient=e.MessageTransports=e.TextDocumentFeature=e.State=e.RevealOutputChannelOn=e.CloseAction=e.ErrorAction=void 0;const t=h,n=r,i=Kt,o=Gt,a=bn,u=Vt,s=qn,c=jn,l=Gn;class p{error(e){n.RAL().console.error(e)}warn(e){n.RAL().console.warn(e)}info(e){n.RAL().console.info(e)}log(e){n.RAL().console.log(e)}}var d,m,f,g,v,D,C,_,y,I;(m=d=e.ErrorAction||(e.ErrorAction={}))[m.Continue=1]="Continue",m[m.Shutdown=2]="Shutdown",(g=f=e.CloseAction||(e.CloseAction={}))[g.DoNotRestart=1]="DoNotRestart",g[g.Restart=2]="Restart";class E{constructor(e,t){this.name=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,n){return n&&n<=3?d.Continue:d.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount)return f.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(t.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),f.DoNotRestart):(this.restarts.shift(),f.Restart)}}(D=v=e.RevealOutputChannelOn||(e.RevealOutputChannelOn={}))[D.Info=1]="Info",D[D.Warn=2]="Warn",D[D.Error=3]="Error",D[D.Never=4]="Never",(_=C=e.State||(e.State={}))[_.Stopped=1]="Stopped",_[_.Starting=3]="Starting",_[_.Running=2]="Running",(I=y||(y={}))[I.Initial=0]="Initial",I[I.Starting=1]="Starting",I[I.StartFailed=2]="StartFailed",I[I.Running=3]="Running",I[I.Stopping=4]="Stopping",I[I.Stopped=5]="Stopped";const A=[n.SymbolKind.File,n.SymbolKind.Module,n.SymbolKind.Namespace,n.SymbolKind.Package,n.SymbolKind.Class,n.SymbolKind.Method,n.SymbolKind.Property,n.SymbolKind.Field,n.SymbolKind.Constructor,n.SymbolKind.Enum,n.SymbolKind.Interface,n.SymbolKind.Function,n.SymbolKind.Variable,n.SymbolKind.Constant,n.SymbolKind.String,n.SymbolKind.Number,n.SymbolKind.Boolean,n.SymbolKind.Array,n.SymbolKind.Object,n.SymbolKind.Key,n.SymbolKind.Null,n.SymbolKind.EnumMember,n.SymbolKind.Struct,n.SymbolKind.Event,n.SymbolKind.Operator,n.SymbolKind.TypeParameter],x=[n.CompletionItemKind.Text,n.CompletionItemKind.Method,n.CompletionItemKind.Function,n.CompletionItemKind.Constructor,n.CompletionItemKind.Field,n.CompletionItemKind.Variable,n.CompletionItemKind.Class,n.CompletionItemKind.Interface,n.CompletionItemKind.Module,n.CompletionItemKind.Property,n.CompletionItemKind.Unit,n.CompletionItemKind.Value,n.CompletionItemKind.Enum,n.CompletionItemKind.Keyword,n.CompletionItemKind.Snippet,n.CompletionItemKind.Color,n.CompletionItemKind.File,n.CompletionItemKind.Reference,n.CompletionItemKind.Folder,n.CompletionItemKind.EnumMember,n.CompletionItemKind.Constant,n.CompletionItemKind.Struct,n.CompletionItemKind.Event,n.CompletionItemKind.Operator,n.CompletionItemKind.TypeParameter],F=[n.SymbolTag.Deprecated];function b(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var S,w;(S||(S={})).fromConfiguration=function(e){const n=t.workspace.getConfiguration("files",e);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}},(w||(w={})).is=function(e){let t=e;return t&&u.func(t.register)&&u.func(t.unregister)&&u.func(t.dispose)&&void 0!==t.registrationType};class k{constructor(e,t,n,r,i,o){this._client=e,this._event=t,this._type=n,this._middleware=r,this._createParams=i,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,n){for(const r of e)if(t.languages.match(r,n))return!0;return!1}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,(e=>this._client.sendNotification(this._type,this._createParams(e)))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(const n of this._selectors.values())if(t.languages.match(n,e))return{send:e=>{this.callback(e)}}}}class R extends k{constructor(e,r){super(e,t.workspace.onDidOpenTextDocument,n.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),k.textDocumentFilter),this._syncedDocuments=r}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:c.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return n.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=e.registerOptions.documentSelector;t.workspace.textDocuments.forEach((e=>{let r=e.uri.toString();if(!this._syncedDocuments.has(r)&&t.languages.match(n,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};t.didOpen?t.didOpen(e,n):n(e),this._syncedDocuments.set(r,e)}}))}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class T extends k{constructor(e,r){super(e,t.workspace.onDidCloseTextDocument,n.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),k.textDocumentFilter),this._syncedDocuments=r}get registrationType(){return n.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:c.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach((e=>{if(t.languages.match(n,e)&&!this._selectorFilter(r,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,n):n(e)}}))}}class P{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return n.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&void 0!==r.change&&r.change!==n.TextDocumentSyncKind.None&&this.register({id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=t.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const r of this._changeData.values())if(t.languages.match(r.documentSelector,e.document)){let t=this._client.clientOptions.middleware;if(r.syncKind===n.TextDocumentSyncKind.Incremental){let r=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);t.didChange?t.didChange(e,(()=>this._client.sendNotification(n.DidChangeTextDocumentNotification.type,r))):this._client.sendNotification(n.DidChangeTextDocumentNotification.type,r)}else if(r.syncKind===n.TextDocumentSyncKind.Full){let r=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger((()=>{this._client.sendNotification(n.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))}))):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new s.Delayer(200)},this._changeDelayer.delayer.trigger((()=>{this._client.sendNotification(n.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))}),-1))};t.didChange?t.didChange(e,r):r(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(const n of this._changeData.values())if(t.languages.match(n.documentSelector,e))return{send:e=>{this.callback(e)}}}}class B extends k{constructor(e){super(e,t.workspace.onWillSaveTextDocument,n.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),((e,t)=>k.textDocumentFilter(e,t.document)))}get registrationType(){return n.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:c.generateUuid(),registerOptions:{documentSelector:t}})}}class O{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return n.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:c.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=t.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(k.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,r=e=>this._client.sendRequest(n.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then((e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t}));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class L extends k{constructor(e){super(e,t.workspace.onDidSaveTextDocument,n.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText)),k.textDocumentFilter),this._includeText=!1}get registrationType(){return n.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;if(t&&n&&n.save){const e="boolean"==typeof n.save?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}}class N{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get registrationType(){return n.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){b(b(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let r=[];for(let i of e.registerOptions.watchers){if(!u.string(i.globPattern))continue;let e=!0,o=!0,a=!0;void 0!==i.kind&&null!==i.kind&&(e=0!=(i.kind&n.WatchKind.Create),o=0!=(i.kind&n.WatchKind.Change),a=0!=(i.kind&n.WatchKind.Delete));let s=t.workspace.createFileSystemWatcher(i.globPattern,!e,!o,!a);this.hookListeners(s,e,o,a),r.push(s)}this._watchers.set(e.id,r)}registerRaw(e,t){let n=[];for(let r of t)this.hookListeners(r,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,r,i,o){t&&e.onDidCreate((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:n.FileChangeType.Created})),null,o),r&&e.onDidChange((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:n.FileChangeType.Changed})),null,o),i&&e.onDidDelete((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:n.FileChangeType.Deleted})),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}dispose(){this._watchers.forEach((e=>{for(let t of e)t.dispose()})),this._watchers.clear()}}class M{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getRegistration(e,t){if(!t)return[void 0,void 0];if(n.TextDocumentRegistrationOptions.is(t)){const r=n.StaticRegistrationOptions.hasId(t)?t.id:c.generateUuid(),i=t.documentSelector||e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(u.boolean(t)&&!0===t||n.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let n=u.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[c.generateUuid(),n]}return[void 0,void 0]}getRegistrationOptions(e,t){if(e&&t)return u.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(const n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(null!==r&&t.languages.match(r,e))return n.provider}}getAllProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}}e.TextDocumentFeature=M;class q extends M{constructor(e){super(e,n.CompletionRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[n.MarkupKind.Markdown,n.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[n.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[n.InsertTextMode.asIs,n.InsertTextMode.adjustIndentation]}},t.completionItemKind={valueSet:x}}initialize(e,t){const n=this.getRegistrationOptions(t,e.completionProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r=e.triggerCharacters||[],i={provideCompletionItems:(e,t,r,i)=>{const o=this._client,a=this._client.clientOptions.middleware,u=(e,t,r,i)=>o.sendRequest(n.CompletionRequest.type,o.code2ProtocolConverter.asCompletionParams(e,t,r),i).then(o.protocol2CodeConverter.asCompletionResult,(e=>o.handleFailedRequest(n.CompletionRequest.type,e,null)));return a.provideCompletionItem?a.provideCompletionItem(e,t,i,r,u):u(e,t,i,r)},resolveCompletionItem:e.resolveProvider?(e,t)=>{const r=this._client,i=this._client.clientOptions.middleware,o=(e,t)=>r.sendRequest(n.CompletionResolveRequest.type,r.code2ProtocolConverter.asCompletionItem(e),t).then(r.protocol2CodeConverter.asCompletionItem,(t=>r.handleFailedRequest(n.CompletionResolveRequest.type,t,e)));return i.resolveCompletionItem?i.resolveCompletionItem(e,t,o):o(e,t)}:void 0};return[t.languages.registerCompletionItemProvider(e.documentSelector,i,...r),i]}}class W extends M{constructor(e){super(e,n.HoverRequest.type)}fillClientCapabilities(e){const t=b(b(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[n.MarkupKind.Markdown,n.MarkupKind.PlainText]}initialize(e,t){const n=this.getRegistrationOptions(t,e.hoverProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideHover:(e,t,r)=>{const i=this._client,o=(e,t,r)=>i.sendRequest(n.HoverRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then(i.protocol2CodeConverter.asHover,(e=>i.handleFailedRequest(n.HoverRequest.type,e,null))),a=i.clientOptions.middleware;return a.provideHover?a.provideHover(e,t,r,o):o(e,t,r)}};return[t.languages.registerHoverProvider(e.documentSelector,r),r]}}class j extends M{constructor(e){super(e,n.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[n.MarkupKind.Markdown,n.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.signatureHelpProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideSignatureHelp:(e,t,r,i)=>{const o=this._client,a=(e,t,r,i)=>o.sendRequest(n.SignatureHelpRequest.type,o.code2ProtocolConverter.asSignatureHelpParams(e,t,r),i).then(o.protocol2CodeConverter.asSignatureHelp,(e=>o.handleFailedRequest(n.SignatureHelpRequest.type,e,null))),u=o.clientOptions.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(e,t,i,r,a):a(e,t,i,r)}};let i;if(void 0===e.retriggerCharacters){const n=e.triggerCharacters||[];i=t.languages.registerSignatureHelpProvider(e.documentSelector,r,...n)}else{const n={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};i=t.languages.registerSignatureHelpProvider(e.documentSelector,r,n)}return[i,r]}}class K extends M{constructor(e){super(e,n.DefinitionRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.definitionProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideDefinition:(e,t,r)=>{const i=this._client,o=(e,t,r)=>i.sendRequest(n.DefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then(i.protocol2CodeConverter.asDefinitionResult,(e=>i.handleFailedRequest(n.DefinitionRequest.type,e,null))),a=i.clientOptions.middleware;return a.provideDefinition?a.provideDefinition(e,t,r,o):o(e,t,r)}};return[t.languages.registerDefinitionProvider(e.documentSelector,r),r]}}class $ extends M{constructor(e){super(e,n.ReferencesRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.referencesProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideReferences:(e,t,r,i)=>{const o=this._client,a=(e,t,r,i)=>o.sendRequest(n.ReferencesRequest.type,o.code2ProtocolConverter.asReferenceParams(e,t,r),i).then(o.protocol2CodeConverter.asReferences,(e=>o.handleFailedRequest(n.ReferencesRequest.type,e,null))),u=o.clientOptions.middleware;return u.provideReferences?u.provideReferences(e,t,r,i,a):a(e,t,r,i)}};return[t.languages.registerReferenceProvider(e.documentSelector,r),r]}}class U extends M{constructor(e){super(e,n.DocumentHighlightRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentHighlightProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideDocumentHighlights:(e,t,r)=>{const i=this._client,o=(e,t,r)=>i.sendRequest(n.DocumentHighlightRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(e,t),r).then(i.protocol2CodeConverter.asDocumentHighlights,(e=>i.handleFailedRequest(n.DocumentHighlightRequest.type,e,null))),a=i.clientOptions.middleware;return a.provideDocumentHighlights?a.provideDocumentHighlights(e,t,r,o):o(e,t,r)}};return[t.languages.registerDocumentHighlightProvider(e.documentSelector,r),r]}}class H extends M{constructor(e){super(e,n.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:A},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:F},t.labelSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentSymbolProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideDocumentSymbols:(e,t)=>{const r=this._client,i=(e,t)=>r.sendRequest(n.DocumentSymbolRequest.type,r.code2ProtocolConverter.asDocumentSymbolParams(e),t).then((e=>{if(null!==e){if(0===e.length)return[];{let t=e[0];return n.DocumentSymbol.is(t)?r.protocol2CodeConverter.asDocumentSymbols(e):r.protocol2CodeConverter.asSymbolInformations(e)}}}),(e=>r.handleFailedRequest(n.DocumentSymbolRequest.type,e,null))),o=r.clientOptions.middleware;return o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,i):i(e,t)}},i=void 0!==e.label?{label:e.label}:void 0;return[t.languages.registerDocumentSymbolProvider(e.documentSelector,r,i),r]}}class z extends class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){const t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()})),this._registrations.clear()}getProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}}{constructor(e){super(e,n.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=b(b(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:A},t.tagSupport={valueSet:F}}initialize(e){e.workspaceSymbolProvider&&this.register({id:c.generateUuid(),registerOptions:!0===e.workspaceSymbolProvider?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const r={provideWorkspaceSymbols:(e,t)=>{const r=this._client,i=(e,t)=>r.sendRequest(n.WorkspaceSymbolRequest.type,{query:e},t).then(r.protocol2CodeConverter.asSymbolInformations,(e=>r.handleFailedRequest(n.WorkspaceSymbolRequest.type,e,null))),o=r.clientOptions.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,i):i(e,t)}};return[t.languages.registerWorkspaceSymbolProvider(r),r]}}class G extends M{constructor(e){super(e,n.CodeActionRequest.type)}fillClientCapabilities(e){const t=b(b(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[n.CodeActionKind.Empty,n.CodeActionKind.QuickFix,n.CodeActionKind.Refactor,n.CodeActionKind.RefactorExtract,n.CodeActionKind.RefactorInline,n.CodeActionKind.RefactorRewrite,n.CodeActionKind.Source,n.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){const n=this.getRegistrationOptions(t,e.codeActionProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideCodeActions:(e,t,r,i)=>{const o=this._client,a=(e,t,r,i)=>{const a={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:o.code2ProtocolConverter.asCodeActionContext(r)};return o.sendRequest(n.CodeActionRequest.type,a,i).then((e=>{if(null===e)return;const t=[];for(let r of e)n.Command.is(r)?t.push(o.protocol2CodeConverter.asCommand(r)):t.push(o.protocol2CodeConverter.asCodeAction(r));return t}),(e=>o.handleFailedRequest(n.CodeActionRequest.type,e,null)))},u=o.clientOptions.middleware;return u.provideCodeActions?u.provideCodeActions(e,t,r,i,a):a(e,t,r,i)},resolveCodeAction:e.resolveProvider?(e,t)=>{const r=this._client,i=this._client.clientOptions.middleware,o=(e,t)=>r.sendRequest(n.CodeActionResolveRequest.type,r.code2ProtocolConverter.asCodeAction(e),t).then(r.protocol2CodeConverter.asCodeAction,(t=>r.handleFailedRequest(n.CodeActionResolveRequest.type,t,e)));return i.resolveCodeAction?i.resolveCodeAction(e,t,o):o(e,t)}:void 0};return[t.languages.registerCodeActionsProvider(e.documentSelector,r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}}class V extends M{constructor(e){super(e,n.CodeLensRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"codeLens").dynamicRegistration=!0,b(b(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(n.CodeLensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeCodeLensEmitter.fire()}));const r=this.getRegistrationOptions(t,e.codeLensProvider);r&&this.register({id:c.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const r=new t.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(e,t)=>{const r=this._client,i=(e,t)=>r.sendRequest(n.CodeLensRequest.type,r.code2ProtocolConverter.asCodeLensParams(e),t).then(r.protocol2CodeConverter.asCodeLenses,(e=>r.handleFailedRequest(n.CodeLensRequest.type,e,null))),o=r.clientOptions.middleware;return o.provideCodeLenses?o.provideCodeLenses(e,t,i):i(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{const r=this._client,i=(e,t)=>r.sendRequest(n.CodeLensResolveRequest.type,r.code2ProtocolConverter.asCodeLens(e),t).then(r.protocol2CodeConverter.asCodeLens,(t=>r.handleFailedRequest(n.CodeLensResolveRequest.type,t,e))),o=r.clientOptions.middleware;return o.resolveCodeLens?o.resolveCodeLens(e,t,i):i(e,t)}:void 0};return[t.languages.registerCodeLensProvider(e.documentSelector,i),{provider:i,onDidChangeCodeLensEmitter:r}]}}class J extends M{constructor(e){super(e,n.DocumentFormattingRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentFormattingProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideDocumentFormattingEdits:(e,t,r)=>{const i=this._client,o=(e,t,r)=>{const o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),options:i.code2ProtocolConverter.asFormattingOptions(t,S.fromConfiguration(e))};return i.sendRequest(n.DocumentFormattingRequest.type,o,r).then(i.protocol2CodeConverter.asTextEdits,(e=>i.handleFailedRequest(n.DocumentFormattingRequest.type,e,null)))},a=i.clientOptions.middleware;return a.provideDocumentFormattingEdits?a.provideDocumentFormattingEdits(e,t,r,o):o(e,t,r)}};return[t.languages.registerDocumentFormattingEditProvider(e.documentSelector,r),r]}}class Z extends M{constructor(e){super(e,n.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideDocumentRangeFormattingEdits:(e,t,r,i)=>{const o=this._client,a=(e,t,r,i)=>{const a={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),options:o.code2ProtocolConverter.asFormattingOptions(r,S.fromConfiguration(e))};return o.sendRequest(n.DocumentRangeFormattingRequest.type,a,i).then(o.protocol2CodeConverter.asTextEdits,(e=>o.handleFailedRequest(n.DocumentRangeFormattingRequest.type,e,null)))},u=o.clientOptions.middleware;return u.provideDocumentRangeFormattingEdits?u.provideDocumentRangeFormattingEdits(e,t,r,i,a):a(e,t,r,i)}};return[t.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,r),r]}}class Q extends M{constructor(e){super(e,n.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideOnTypeFormattingEdits:(e,t,r,i,o)=>{const a=this._client,u=(e,t,r,i,o)=>{let u={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(e),position:a.code2ProtocolConverter.asPosition(t),ch:r,options:a.code2ProtocolConverter.asFormattingOptions(i,S.fromConfiguration(e))};return a.sendRequest(n.DocumentOnTypeFormattingRequest.type,u,o).then(a.protocol2CodeConverter.asTextEdits,(e=>a.handleFailedRequest(n.DocumentOnTypeFormattingRequest.type,e,null)))},s=a.clientOptions.middleware;return s.provideOnTypeFormattingEdits?s.provideOnTypeFormattingEdits(e,t,r,i,o,u):u(e,t,r,i,o)}},i=e.moreTriggerCharacter||[];return[t.languages.registerOnTypeFormattingEditProvider(e.documentSelector,r,e.firstTriggerCharacter,...i),r]}}class Y extends M{constructor(e){super(e,n.RenameRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=n.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.renameProvider);n&&(u.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:c.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){const r={provideRenameEdits:(e,t,r,i)=>{const o=this._client,a=(e,t,r,i)=>{let a={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),newName:r};return o.sendRequest(n.RenameRequest.type,a,i).then(o.protocol2CodeConverter.asWorkspaceEdit,(e=>o.handleFailedRequest(n.RenameRequest.type,e,null)))},u=o.clientOptions.middleware;return u.provideRenameEdits?u.provideRenameEdits(e,t,r,i,a):a(e,t,r,i)},prepareRename:e.prepareProvider?(e,t,r)=>{const i=this._client,o=(e,t,r)=>{let o={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(e),position:i.code2ProtocolConverter.asPosition(t)};return i.sendRequest(n.PrepareRenameRequest.type,o,r).then((e=>n.Range.is(e)?i.protocol2CodeConverter.asRange(e):this.isDefaultBehavior(e)?!0===e.defaultBehavior?null:Promise.reject(new Error("The element can't be renamed.")):e&&n.Range.is(e.range)?{range:i.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:Promise.reject(new Error("The element can't be renamed."))),(e=>i.handleFailedRequest(n.PrepareRenameRequest.type,e,void 0)))},a=i.clientOptions.middleware;return a.prepareRename?a.prepareRename(e,t,r,o):o(e,t,r)}:void 0};return[t.languages.registerRenameProvider(e.documentSelector,r),r]}isDefaultBehavior(e){const t=e;return t&&u.boolean(t.defaultBehavior)}}class X extends M{constructor(e){super(e,n.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=b(b(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentLinkProvider);n&&this.register({id:c.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const r={provideDocumentLinks:(e,t)=>{const r=this._client,i=(e,t)=>r.sendRequest(n.DocumentLinkRequest.type,r.code2ProtocolConverter.asDocumentLinkParams(e),t).then(r.protocol2CodeConverter.asDocumentLinks,(e=>r.handleFailedRequest(n.DocumentLinkRequest.type,e,null))),o=r.clientOptions.middleware;return o.provideDocumentLinks?o.provideDocumentLinks(e,t,i):i(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{const r=this._client;let i=(e,t)=>r.sendRequest(n.DocumentLinkResolveRequest.type,r.code2ProtocolConverter.asDocumentLink(e),t).then(r.protocol2CodeConverter.asDocumentLink,(t=>r.handleFailedRequest(n.DocumentLinkResolveRequest.type,t,e)));const o=r.clientOptions.middleware;return o.resolveDocumentLink?o.resolveDocumentLink(e,t,i):i(e,t)}:void 0};return[t.languages.registerDocumentLinkProvider(e.documentSelector,r),r]}}class ee{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return n.DidChangeConfigurationNotification.type}fillClientCapabilities(e){b(b(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register({id:c.generateUuid(),registerOptions:{section:e}})}register(e){let n=t.workspace.onDidChangeConfiguration((t=>{this.onDidChangeConfiguration(e.registerOptions.section,t)}));this._listeners.set(e.id,n),void 0!==e.registerOptions.section&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let r;if(r=u.string(e)?[e]:e,void 0!==r&&void 0!==t){if(!r.some((e=>t.affectsConfiguration(e))))return}let i=e=>{void 0!==e?this._client.sendNotification(n.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(n.DidChangeConfigurationNotification.type,{settings:null})},o=this.getMiddleware();o?o(r,i):i(r)}extractSettingsInformation(e){function n(e,t){let n=e;for(let r=0;r<t.length-1;r++){let e=n[t[r]];e||(e=Object.create(null),n[t[r]]=e),n=e}return n}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,o=Object.create(null);for(let a=0;a<e.length;a++){let u=e[a],s=u.indexOf("."),c=null;if(c=s>=0?t.workspace.getConfiguration(u.substr(0,s),r).get(u.substr(s+1)):t.workspace.getConfiguration(void 0,r).get(u),c){let t=e[a].split(".");n(o,t)[t[t.length-1]]=i.toJSONObject(c)}}return o}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class te{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return n.ExecuteCommandRequest.type}fillClientCapabilities(e){b(b(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:c.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){const r=this._client,i=r.clientOptions.middleware,o=(e,t)=>{let i={command:e,arguments:t};return r.sendRequest(n.ExecuteCommandRequest.type,i).then(void 0,(e=>r.handleFailedRequest(n.ExecuteCommandRequest.type,e,void 0)))};if(e.registerOptions.commands){const n=[];for(const r of e.registerOptions.commands)n.push(t.commands.registerCommand(r,((...e)=>i.executeCommand?i.executeCommand(r,e,o):o(r,e))));this._commands.set(e.id,n)}}unregister(e){let t=this._commands.get(e);t&&t.forEach((e=>e.dispose()))}dispose(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))})),this._commands.clear()}}(e.MessageTransports||(e.MessageTransports={})).is=function(e){return e&&n.MessageReader.is(e.reader)&&n.MessageWriter.is(e.writer)};class ne{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}}class re{constructor(e,t,r){var i;this._traceFormat=n.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=t;const c={isTrusted:!1};void 0!==(r=r||{}).markdown&&!0===r.markdown.isTrusted&&(c.isTrusted=!0),this._clientOptions={documentSelector:r.documentSelector||[],synchronize:r.synchronize||{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName||this._name,revealOutputChannelOn:r.revealOutputChannelOn||v.Error,stdioEncoding:r.stdioEncoding||"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler||this.createDefaultErrorHandler(null===(i=r.connectionOptions)||void 0===i?void 0:i.maxRestartCount),middleware:r.middleware||{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:c},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=y.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new s.Delayer(250),this._onReady=new Promise(((e,t)=>{this._onReadyCallbacks=new ne(e,t)})),this._onStop=void 0,this._telemetryEmitter=new n.Emitter,this._stateChangeEmitter=new n.Emitter,this._trace=n.Trace.Off,this._tracer={log:(e,t)=>{u.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=a.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===y.Running?C.Running:this.state===y.Starting?C.Starting:C.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(n){throw this.error(`Sending request ${u.string(e)?e:e.method} failed.`,n),n}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,t)}catch(n){throw this.error(`Registering request handler ${u.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(n){throw this.error(`Sending notification ${u.string(e)?e:e.method} failed.`,n),n}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,t)}catch(n){throw this.error(`Registering notification handler ${u.string(e)?e:e.method} failed.`,n),n}}onProgress(e,t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(n.WorkDoneProgress.is(e)){const n=this._clientOptions.middleware.handleWorkDoneProgress;if(void 0!==n)return this._resolvedConnection.onProgress(e,t,(e=>{n(t,e,(()=>r(e)))}))}return this._resolvedConnection.onProgress(e,t,r)}catch(i){throw this.error(`Registering progress handler for token ${t} failed.`,i),i}}sendProgress(e,t,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,t,n)}catch(r){throw this.error(`Sending progress for token ${t} failed.`,r),r}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=t.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(void 0!==e&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new E(this._name,null!=e?e:4)}set trace(e){this._trace=e,this.onReady().then((()=>{this.resolveConnection().then((e=>{e.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}))}),(()=>{}))}data2String(e){if(e instanceof n.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?u.string(e.stack)?e.stack:e.message:u.string(e)?e:e.toString()}info(e,t,n=!0){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=v.Info&&this.showNotificationMessage()}warn(e,t,n=!0){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=v.Warn&&this.showNotificationMessage()}error(e,t,n=!0){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=v.Error&&this.showNotificationMessage()}showNotificationMessage(){t.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then((()=>{this.outputChannel.show(!0)}))}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===y.Initial||this.state===y.Stopping||this.state===y.Stopped}needsStop(){return this.state===y.Starting||this.state===y.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===y.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise(((e,t)=>{this._onReadyCallbacks=new ne(e,t)}))),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?t.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):t.languages.createDiagnosticCollection()),this.state=y.Starting,this.resolveConnection().then((e=>(e.onLogMessage((e=>{switch(e.type){case n.MessageType.Error:this.error(e.message,void 0,!1);break;case n.MessageType.Warning:this.warn(e.message,void 0,!1);break;case n.MessageType.Info:this.info(e.message,void 0,!1);break;default:this.outputChannel.appendLine(e.message)}})),e.onShowMessage((e=>{switch(e.type){case n.MessageType.Error:t.window.showErrorMessage(e.message);break;case n.MessageType.Warning:t.window.showWarningMessage(e.message);break;case n.MessageType.Info:t.window.showInformationMessage(e.message);break;default:t.window.showInformationMessage(e.message)}})),e.onRequest(n.ShowMessageRequest.type,(e=>{let r;switch(e.type){case n.MessageType.Error:r=t.window.showErrorMessage;break;case n.MessageType.Warning:r=t.window.showWarningMessage;break;case n.MessageType.Info:r=t.window.showInformationMessage;break;default:r=t.window.showInformationMessage}let i=e.actions||[];return r(e.message,...i)})),e.onTelemetry((e=>{this._telemetryEmitter.fire(e)})),e.onRequest(n.ShowDocumentRequest.type,(async e=>{var n;const r=async e=>{const n=this.protocol2CodeConverter.asUri(e.uri);try{if(!0===e.external){return{success:await t.env.openExternal(n)}}{const r={};return void 0!==e.selection&&(r.selection=this.protocol2CodeConverter.asRange(e.selection)),void 0===e.takeFocus||!1===e.takeFocus?r.preserveFocus=!0:!0===e.takeFocus&&(r.preserveFocus=!1),await t.window.showTextDocument(n,r),{success:!0}}}catch(r){return{success:!0}}},i=null===(n=this._clientOptions.middleware.window)||void 0===n?void 0:n.showDocument;return void 0!==i?i(e,r):r(e)})),e.listen(),this.initialize(e)))).then(void 0,(e=>{this.state=y.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),t.window.showErrorMessage(`Couldn't start client ${this._name}`)})),new t.Disposable((()=>{this.needsStop()&&this.stop()}))}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,i=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:null,clientInfo:{name:t.env.appName,version:t.version},locale:this.getLocale(),rootPath:i||null,rootUri:i?this._c2p.asUri(t.Uri.file(i)):null,capabilities:this.computeClientCapabilities(),initializationOptions:u.func(r)?r():r,trace:n.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){const t=c.generateUuid(),n=new l.ProgressPart(e,t);return o.workDoneToken=t,this.doInitialize(e,o).then((e=>(n.done(),e)),(e=>{throw n.cancel(),e}))}return this.doInitialize(e,o)}doInitialize(e,r){return e.initialize(r).then((t=>{let r;return this._resolvedConnection=e,this._initializeResult=t,this.state=y.Running,u.number(t.capabilities.textDocumentSync)?r=t.capabilities.textDocumentSync===n.TextDocumentSyncKind.None?{openClose:!1,change:n.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(r=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:r}),e.onDiagnostics((e=>this.handleDiagnostics(e))),e.onRequest(n.RegistrationRequest.type,(e=>this.handleRegistrationRequest(e))),e.onRequest("client/registerFeature",(e=>this.handleRegistrationRequest(e))),e.onRequest(n.UnregistrationRequest.type,(e=>this.handleUnregistrationRequest(e))),e.onRequest("client/unregisterFeature",(e=>this.handleUnregistrationRequest(e))),e.onRequest(n.ApplyWorkspaceEditRequest.type,(e=>this.handleApplyWorkspaceEdit(e))),e.sendNotification(n.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t})).then(void 0,(r=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof n.ResponseError&&r.data&&r.data.retry?t.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then((t=>{t&&"retry"===t.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))})):(r&&r.message&&t.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop(),this._onReadyCallbacks.reject(r)),r}))}_clientGetRootPath(){let e=t.workspace.workspaceFolders;if(!e||0===e.length)return;let n=e[0];return"file"===n.uri.scheme?n.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===y.Stopping&&this._onStop?this._onStop:(this.state=y.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then((e=>e.shutdown().then((()=>{e.exit(),e.end(),e.dispose(),this.state=y.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))))):(this.state=y.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach((e=>e.dispose())),this._listeners=void 0),this._providers&&(this._providers.forEach((e=>e.dispose())),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(const n of this._features.values())n.dispose();e&&this.cleanUpChannel(),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var t;const n=this;function r(e){n._fileEvents.push(e),n._fileEventDelayer.trigger((()=>{n.onReady().then((()=>{n.resolveConnection().then((e=>{n.isConnectionActive()&&(n.forceDocumentSync(),e.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]}))}),(e=>{n.error("Notify file events failed.",e)}))}))}const i=null===(t=this.clientOptions.middleware)||void 0===t?void 0:t.workspace;(null==i?void 0:i.didChangeWatchedFile)?i.didChangeWatchedFile(e,r):r(e)}forceDocumentSync(){void 0===this._didChangeTextDocumentFeature&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(n.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),r=this.clientOptions.middleware;r.handleDiagnostics?r.handleDiagnostics(t,n,((e,t)=>this.setDiagnostics(e,t))):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,n)=>{this.handleConnectionError(e,t,n)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then((r=>function(e,t,r,i,o){let a=new p,s=n.createProtocolConnection(e,t,a,o);return s.onError((e=>{r(e[0],e[1],e[2])})),s.onClose(i),{listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(u.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(u.string(e)?e:e.method,t),sendNotification:(e,t)=>s.sendNotification(u.string(e)?e:e.method,t),onNotification:(e,t)=>s.onNotification(u.string(e)?e:e.method,t),onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(e,t,r)=>{const i={sendNotification:!1,traceFormat:n.TraceFormat.Text};void 0===r?s.trace(e,t,i):(u.boolean(r),s.trace(e,t,r))},initialize:e=>s.sendRequest(n.InitializeRequest.type,e),shutdown:()=>s.sendRequest(n.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(n.ExitNotification.type),onLogMessage:e=>s.onNotification(n.LogMessageNotification.type,e),onShowMessage:e=>s.onNotification(n.ShowMessageNotification.type,e),onTelemetry:e=>s.onNotification(n.TelemetryEventNotification.type,e),didChangeConfiguration:e=>s.sendNotification(n.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>s.sendNotification(n.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>s.sendNotification(n.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>s.sendNotification(n.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>s.sendNotification(n.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>s.sendNotification(n.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>s.onNotification(n.PublishDiagnosticsNotification.type,e),end:()=>s.end(),dispose:()=>s.dispose()}}(r.reader,r.writer,e,t,this._clientOptions.connectionOptions)))}handleConnectionClosed(){if(this.state===y.Stopping||this.state===y.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(t){}let e=f.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(t){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===f.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===y.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=y.StartFailed):this.state=y.Stopped,this.cleanUp(!1,!0)):e===f.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=y.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===d.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){t.workspace.onDidChangeConfiguration((()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,r=!1){let i=t.workspace.getConfiguration(this._id),o=n.Trace.Off,a=n.TraceFormat.Text;if(i){const e=i.get("trace.server","off");"string"==typeof e?o=n.Trace.fromString(e):(o=n.Trace.fromString(i.get("trace.server.verbosity","off")),a=n.TraceFormat.fromString(i.get("trace.server.format","text")))}this._trace=o,this._traceFormat=a,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(e){let t,r=this._clientOptions.synchronize.fileEvents;r&&(t=u.array(r)?r:[r],t&&this._dynamicFeatures.get(n.DidChangeWatchedFilesNotification.type.method).registerRaw(c.generateUuid(),t))}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),w.is(e)){const t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new ee(this)),this.registerFeature(new R(this,this._syncedDocuments)),this.registerFeature(new P(this)),this.registerFeature(new B(this)),this.registerFeature(new O(this)),this.registerFeature(new L(this)),this.registerFeature(new T(this,this._syncedDocuments)),this.registerFeature(new N(this,(e=>this.notifyFileEvent(e)))),this.registerFeature(new q(this)),this.registerFeature(new W(this)),this.registerFeature(new j(this)),this.registerFeature(new K(this)),this.registerFeature(new $(this)),this.registerFeature(new U(this)),this.registerFeature(new H(this)),this.registerFeature(new z(this)),this.registerFeature(new G(this)),this.registerFeature(new V(this)),this.registerFeature(new J(this)),this.registerFeature(new Z(this)),this.registerFeature(new Q(this)),this.registerFeature(new Y(this)),this.registerFeature(new X(this)),this.registerFeature(new te(this))}fillInitializeParams(e){for(let t of this._features)u.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){const e={};b(e,"workspace").applyEdit=!0;const t=b(b(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[n.ResourceOperationKind.Create,n.ResourceOperationKind.Rename,n.ResourceOperationKind.Delete],t.failureHandling=n.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};const r=b(b(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[n.DiagnosticTag.Unnecessary,n.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;const i=b(e,"window");b(i,"showMessage").messageActionItem={additionalPropertiesSupport:!0};b(i,"showDocument").support=!0;const o=b(e,"general");o.regularExpressions={engine:"ECMAScript",version:"ES2020"},o.markdown={parser:"marked",version:"1.1.0"};for(let n of this._features)n.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise(((t,n)=>{for(const i of e.registrations){const e=this._dynamicFeatures.get(i.method);if(void 0===e)return void n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));const t=i.registerOptions||{};t.documentSelector=t.documentSelector||this._clientOptions.documentSelector;const o={id:i.id,registerOptions:t};try{e.register(o)}catch(r){return void n(r)}}t()}))}handleUnregistrationRequest(e){return new Promise(((t,n)=>{for(let r of e.unregisterations){const e=this._dynamicFeatures.get(r.method);if(!e)return void n(new Error(`No feature implementation for ${r.method} found. Unregistration failed.`));e.unregister(r.id)}t()}))}handleApplyWorkspaceEdit(e){let r=e.edit,i=new Map;t.workspace.textDocuments.forEach((e=>i.set(e.uri.toString(),e)));let o=!1;if(r.documentChanges)for(const t of r.documentChanges)if(n.TextDocumentEdit.is(t)&&t.textDocument.version&&t.textDocument.version>=0){let e=i.get(t.textDocument.uri);if(e&&e.version!==t.textDocument.version){o=!0;break}}return o?Promise.resolve({applied:!1}):u.asPromise(t.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then((e=>({applied:e}))))}handleFailedRequest(e,t,r){if(t instanceof n.ResponseError){if(t.code===n.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(t.code===n.LSPErrorCodes.ContentModified)return r}throw this.error(`Request ${e.method} failed.`,t),t}makeCancelError(){const e=new Error(re.Canceled);return e.name=re.Canceled,e}}e.BaseLanguageClient=re,re.Canceled="Canceled"}(jt);var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});var Yn=Qn.TypeDefinitionFeature=void 0;const Xn=h,er=r,tr=jt;function nr(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Yn=Qn.TypeDefinitionFeature=class extends tr.TextDocumentFeature{constructor(e){super(e,er.TypeDefinitionRequest.type)}fillClientCapabilities(e){nr(nr(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=nr(nr(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.typeDefinitionProvider);n&&r&&this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideTypeDefinition:(e,t,n)=>{const r=this._client,i=(e,t,n)=>r.sendRequest(er.TypeDefinitionRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDefinitionResult,(e=>r.handleFailedRequest(er.TypeDefinitionRequest.type,e,null))),o=r.clientOptions.middleware;return o.provideTypeDefinition?o.provideTypeDefinition(e,t,n,i):i(e,t,n)}};return[Xn.languages.registerTypeDefinitionProvider(e.documentSelector,t),t]}};var rr={};Object.defineProperty(rr,"__esModule",{value:!0});var ir=rr.ImplementationFeature=void 0;const or=h,ar=r,ur=jt;function sr(e,t){return void 0===e[t]&&(e[t]={}),e[t]}ir=rr.ImplementationFeature=class extends ur.TextDocumentFeature{constructor(e){super(e,ar.ImplementationRequest.type)}fillClientCapabilities(e){let t=sr(sr(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.implementationProvider);n&&r&&this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideImplementation:(e,t,n)=>{const r=this._client,i=(e,t,n)=>r.sendRequest(ar.ImplementationRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDefinitionResult,(e=>r.handleFailedRequest(ar.ImplementationRequest.type,e,null))),o=r.clientOptions.middleware;return o.provideImplementation?o.provideImplementation(e,t,n,i):i(e,t,n)}};return[or.languages.registerImplementationProvider(e.documentSelector,t),t]}};var cr={};Object.defineProperty(cr,"__esModule",{value:!0});var lr=cr.ColorProviderFeature=void 0;const pr=h,dr=r,hr=jt;function mr(e,t){return void 0===e[t]&&(e[t]={}),e[t]}lr=cr.ColorProviderFeature=class extends hr.TextDocumentFeature{constructor(e){super(e,dr.DocumentColorRequest.type)}fillClientCapabilities(e){mr(mr(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.colorProvider);n&&r&&this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideColorPresentations:(e,t,n)=>{const r=this._client,i=(e,t,n)=>{const i={color:e,textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(t.document),range:r.code2ProtocolConverter.asRange(t.range)};return r.sendRequest(dr.ColorPresentationRequest.type,i,n).then(this.asColorPresentations.bind(this),(e=>r.handleFailedRequest(dr.ColorPresentationRequest.type,e,null)))},o=r.clientOptions.middleware;return o.provideColorPresentations?o.provideColorPresentations(e,t,n,i):i(e,t,n)},provideDocumentColors:(e,t)=>{const n=this._client,r=(e,t)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(dr.DocumentColorRequest.type,r,t).then(this.asColorInformations.bind(this),(e=>n.handleFailedRequest(dr.ColorPresentationRequest.type,e,null)))},i=n.clientOptions.middleware;return i.provideDocumentColors?i.provideDocumentColors(e,t,r):r(e,t)}};return[pr.languages.registerColorProvider(e.documentSelector,t),t]}asColor(e){return new pr.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map((e=>new pr.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color)))):[]}asColorPresentations(e){return Array.isArray(e)?e.map((e=>{let t=new pr.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t})):[]}};var fr={};Object.defineProperty(fr,"__esModule",{value:!0});var gr=fr.WorkspaceFoldersFeature=fr.arrayDiff=void 0;const vr=jn,Dr=h,Cr=r;function _r(e,t){if(void 0!==e)return e[t]}function yr(e,t){return e.filter((e=>t.indexOf(e)<0))}fr.arrayDiff=yr;gr=fr.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Cr.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){const t=Dr.workspace.workspaceFolders;this.initializeWithFolders(t),e.workspaceFolders=void 0===t?null:t.map((e=>this.asProtocol(e)))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){const t=this._client;t.onRequest(Cr.WorkspaceFoldersRequest.type,(e=>{const n=()=>{const e=Dr.workspace.workspaceFolders;if(void 0===e)return null;return e.map((e=>this.asProtocol(e)))},r=t.clientOptions.middleware.workspace;return r&&r.workspaceFolders?r.workspaceFolders(e,n):n()}));const n=_r(_r(_r(e,"workspace"),"workspaceFolders"),"changeNotifications");let r;"string"==typeof n?r=n:!0===n&&(r=vr.generateUuid()),r&&this.register({id:r,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){const t=yr(this._initialFolders,e),n=yr(e,this._initialFolders);(n.length>0||t.length>0)&&this.doSendEvent(n,t)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,t){let n={event:{added:e.map((e=>this.asProtocol(e))),removed:t.map((e=>this.asProtocol(e)))}};this._client.sendNotification(Cr.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=this._client,r=Dr.workspace.onDidChangeWorkspaceFolders((e=>{let t=e=>{this.doSendEvent(e.added,e.removed)},r=n.clientOptions.middleware.workspace;r&&r.didChangeWorkspaceFolders?r.didChangeWorkspaceFolders(e,t):t(e)}));this._listeners.set(t,r),this.sendInitialEvent(Dr.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});var Er=Ir.FoldingRangeFeature=void 0;const Ar=h,xr=r,Fr=jt;function br(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class Sr extends Fr.TextDocumentFeature{constructor(e){super(e,xr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=br(br(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.foldingRangeProvider);n&&r&&this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideFoldingRanges:(e,t,n)=>{const r=this._client,i=(e,t,n)=>{const i={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e)};return r.sendRequest(xr.FoldingRangeRequest.type,i,n).then(Sr.asFoldingRanges,(e=>r.handleFailedRequest(xr.FoldingRangeRequest.type,e,null)))},o=r.clientOptions.middleware;return o.provideFoldingRanges?o.provideFoldingRanges(e,t,n,i):i(e,0,n)}};return[Ar.languages.registerFoldingRangeProvider(e.documentSelector,t),t]}static asFoldingRangeKind(e){if(e)switch(e){case xr.FoldingRangeKind.Comment:return Ar.FoldingRangeKind.Comment;case xr.FoldingRangeKind.Imports:return Ar.FoldingRangeKind.Imports;case xr.FoldingRangeKind.Region:return Ar.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map((e=>new Ar.FoldingRange(e.startLine,e.endLine,Sr.asFoldingRangeKind(e.kind)))):[]}}Er=Ir.FoldingRangeFeature=Sr;var wr={};Object.defineProperty(wr,"__esModule",{value:!0});var kr=wr.CallHierarchyFeature=void 0;const Rr=h,Tr=r,Pr=jt;function Br(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class Or{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,n){const r=this.client,i=this.middleware,o=(e,t,n)=>{const i=r.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return r.sendRequest(Tr.CallHierarchyPrepareRequest.type,i,n).then((e=>r.protocol2CodeConverter.asCallHierarchyItems(e)),(e=>r.handleFailedRequest(Tr.CallHierarchyPrepareRequest.type,e,null)))};return i.prepareCallHierarchy?i.prepareCallHierarchy(e,t,n,o):o(e,t,n)}provideCallHierarchyIncomingCalls(e,t){const n=this.client,r=this.middleware,i=(e,t)=>{const r={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(Tr.CallHierarchyIncomingCallsRequest.type,r,t).then((e=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(e)),(e=>n.handleFailedRequest(Tr.CallHierarchyIncomingCallsRequest.type,e,null)))};return r.provideCallHierarchyIncomingCalls?r.provideCallHierarchyIncomingCalls(e,t,i):i(e,t)}provideCallHierarchyOutgoingCalls(e,t){const n=this.client,r=this.middleware,i=(e,t)=>{const r={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(Tr.CallHierarchyOutgoingCallsRequest.type,r,t).then((e=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(e)),(e=>n.handleFailedRequest(Tr.CallHierarchyOutgoingCallsRequest.type,e,null)))};return r.provideCallHierarchyOutgoingCalls?r.provideCallHierarchyOutgoingCalls(e,t,i):i(e,t)}}kr=wr.CallHierarchyFeature=class extends Pr.TextDocumentFeature{constructor(e){super(e,Tr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){Br(Br(e,"textDocument"),"callHierarchy").dynamicRegistration=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.callHierarchyProvider);n&&r&&this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=this._client,n=new Or(t);return[Rr.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});var Nr=Lr.SemanticTokensFeature=void 0;const Mr=h,qr=jt,Wr=r,jr=Vt;function Kr(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Nr=Lr.SemanticTokensFeature=class extends qr.TextDocumentFeature{constructor(e){super(e,Wr.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){const t=Kr(Kr(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[Wr.SemanticTokenTypes.namespace,Wr.SemanticTokenTypes.type,Wr.SemanticTokenTypes.class,Wr.SemanticTokenTypes.enum,Wr.SemanticTokenTypes.interface,Wr.SemanticTokenTypes.struct,Wr.SemanticTokenTypes.typeParameter,Wr.SemanticTokenTypes.parameter,Wr.SemanticTokenTypes.variable,Wr.SemanticTokenTypes.property,Wr.SemanticTokenTypes.enumMember,Wr.SemanticTokenTypes.event,Wr.SemanticTokenTypes.function,Wr.SemanticTokenTypes.method,Wr.SemanticTokenTypes.macro,Wr.SemanticTokenTypes.keyword,Wr.SemanticTokenTypes.modifier,Wr.SemanticTokenTypes.comment,Wr.SemanticTokenTypes.string,Wr.SemanticTokenTypes.number,Wr.SemanticTokenTypes.regexp,Wr.SemanticTokenTypes.operator],t.tokenModifiers=[Wr.SemanticTokenModifiers.declaration,Wr.SemanticTokenModifiers.definition,Wr.SemanticTokenModifiers.readonly,Wr.SemanticTokenModifiers.static,Wr.SemanticTokenModifiers.deprecated,Wr.SemanticTokenModifiers.abstract,Wr.SemanticTokenModifiers.async,Wr.SemanticTokenModifiers.modification,Wr.SemanticTokenModifiers.documentation,Wr.SemanticTokenModifiers.defaultLibrary],t.formats=[Wr.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,Kr(Kr(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Wr.SemanticTokensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders())e.onDidChangeSemanticTokensEmitter.fire()}));const[n,r]=this.getRegistration(t,e.semanticTokensProvider);n&&r&&this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=jr.boolean(e.full)?e.full:void 0!==e.full,n=void 0!==e.full&&"boolean"!=typeof e.full&&!0===e.full.delta,r=new Mr.EventEmitter,i=t?{onDidChangeSemanticTokens:r.event,provideDocumentSemanticTokens:(e,t)=>{const n=this._client,r=n.clientOptions.middleware,i=(e,t)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(Wr.SemanticTokensRequest.type,r,t).then((e=>n.protocol2CodeConverter.asSemanticTokens(e)),(e=>n.handleFailedRequest(Wr.SemanticTokensRequest.type,e,null)))};return r.provideDocumentSemanticTokens?r.provideDocumentSemanticTokens(e,t,i):i(e,t)},provideDocumentSemanticTokensEdits:n?(e,t,n)=>{const r=this._client,i=r.clientOptions.middleware,o=(e,t,n)=>{const i={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),previousResultId:t};return r.sendRequest(Wr.SemanticTokensDeltaRequest.type,i,n).then((e=>Wr.SemanticTokens.is(e)?r.protocol2CodeConverter.asSemanticTokens(e):r.protocol2CodeConverter.asSemanticTokensEdits(e)),(e=>r.handleFailedRequest(Wr.SemanticTokensDeltaRequest.type,e,null)))};return i.provideDocumentSemanticTokensEdits?i.provideDocumentSemanticTokensEdits(e,t,n,o):o(e,t,n)}:void 0}:void 0,o=!0===e.range?{provideDocumentRangeSemanticTokens:(e,t,n)=>{const r=this._client,i=r.clientOptions.middleware,o=(e,t,n)=>{const i={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),range:r.code2ProtocolConverter.asRange(t)};return r.sendRequest(Wr.SemanticTokensRangeRequest.type,i,n).then((e=>r.protocol2CodeConverter.asSemanticTokens(e)),(e=>r.handleFailedRequest(Wr.SemanticTokensRangeRequest.type,e,null)))};return i.provideDocumentRangeSemanticTokens?i.provideDocumentRangeSemanticTokens(e,t,n,o):o(e,t,n)}}:void 0,a=[],u=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return void 0!==i&&a.push(Mr.languages.registerDocumentSemanticTokensProvider(e.documentSelector,i,u)),void 0!==o&&a.push(Mr.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,o,u)),[new Mr.Disposable((()=>a.forEach((e=>e.dispose())))),{range:o,full:i,onDidChangeSemanticTokensEmitter:r}]}};var $r={};Object.defineProperty($r,"__esModule",{value:!0});var Ur=$r.DeclarationFeature=void 0;const Hr=h,zr=r,Gr=jt;function Vr(e,t){return void 0===e[t]&&(e[t]={}),e[t]}Ur=$r.DeclarationFeature=class extends Gr.TextDocumentFeature{constructor(e){super(e,zr.DeclarationRequest.type)}fillClientCapabilities(e){const t=Vr(Vr(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.declarationProvider);n&&r&&this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideDeclaration:(e,t,n)=>{const r=this._client,i=(e,t,n)=>r.sendRequest(zr.DeclarationRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDeclarationResult,(e=>r.handleFailedRequest(zr.DeclarationRequest.type,e,null))),o=r.clientOptions.middleware;return o.provideDeclaration?o.provideDeclaration(e,t,n,i):i(e,t,n)}};return[Hr.languages.registerDeclarationProvider(e.documentSelector,t),t]}};const Jr=class extends jt.BaseLanguageClient{constructor({id:e,name:t,clientOptions:n,connectionProvider:r}){super(e||t.toLowerCase(),t,n),this.connectionProvider=r,this.createConnection=this.doCreateConnection.bind(this);const i=this;i._p2c=new Proxy(i._p2c,{get:(e,t)=>"asUri"===t?e[t]:Jr.bypassConversion}),i._c2p=new Proxy(i._c2p,{get:(e,t)=>"asUri"===t?e[t]:"asCompletionParams"===t?(t,n,r)=>({textDocument:e.asTextDocumentIdentifier(t),position:n,context:r}):"asWillSaveTextDocumentParams"===t?t=>({textDocument:e.asTextDocumentIdentifier(t.document),reason:t.reason}):t.endsWith("Params")?e[t]:Jr.bypassConversion})}doCreateConnection(){const e=this.handleConnectionError.bind(this),t=this.handleConnectionClosed.bind(this);return this.connectionProvider.get(e,t,this.outputChannel)}createMessageTransports(e){throw new Error("Unsupported")}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Ht(this)),this.registerFeature(new Yn(this)),this.registerFeature(new ir(this)),this.registerFeature(new lr(this)),this.registerFeature(new gr(this)),Er.asFoldingRanges=Jr.bypassConversion,this.registerFeature(new Er(this)),this.registerFeature(new Ur(this)),this.registerFeature(new Nr(this)),this.registerFeature(new kr(this));const e=this._features;for(const t of e)t instanceof lr&&(t.asColor=Jr.bypassConversion,t.asColorInformations=Jr.bypassConversion,t.asColorPresentations=Jr.bypassConversion)}registerProposedFeatures(){}getLocale(){return navigator.language||"en-US"}};Jr.bypassConversion=e=>e||void 0;class Zr{constructor(e){this._monaco=e}registerCommand(e,t,n){return this._monaco.editor.registerCommand(e,((e,...r)=>t.call(n,...r)))}}class Qr{constructor(){this.channels=new Map}showMessage(e,t,...n){return e===r.MessageType.Error&&console.error(t),e===r.MessageType.Warning&&console.warn(t),e===r.MessageType.Info&&console.info(t),e===r.MessageType.Log&&console.log(t),Promise.resolve(void 0)}createOutputChannel(e){const t=this.channels.get(e);if(t)return t;const n={append(t){console.log(e+": "+t)},appendLine(t){console.log(e+": "+t)},show(){},dispose(){}};return this.channels.set(e,n),n}}class Yr{constructor(e,t,n,r=null){this._monaco=e,this.p2m=t,this.m2p=n,this._rootUri=r,this.documents=new Map,this.onDidOpenTextDocumentEmitter=new s.Emitter,this.onDidCloseTextDocumentEmitter=new s.Emitter,this.onDidChangeTextDocumentEmitter=new s.Emitter;for(const i of this._monaco.editor.getModels())this.addModel(i);this._monaco.editor.onDidCreateModel((e=>this.addModel(e))),this._monaco.editor.onWillDisposeModel((e=>this.removeModel(e))),this._monaco.editor.onDidChangeModelLanguage((e=>{this.removeModel(e.model),this.addModel(e.model)}))}get rootUri(){return this._rootUri}removeModel(e){const t=e.uri.toString(),n=this.documents.get(t);n&&(this.documents.delete(t),this.onDidCloseTextDocumentEmitter.fire(n))}addModel(e){const t=e.uri.toString(),n=this.setModel(t,e);this.onDidOpenTextDocumentEmitter.fire(n),e.onDidChangeContent((n=>this.onDidChangeContent(t,e,n)))}onDidChangeContent(e,t,n){const r=this.setModel(e,t),i=[];for(const o of n.changes){const e=this.m2p.asRange(o.range),t=o.rangeLength,n=o.text;i.push({range:e,rangeLength:t,text:n})}this.onDidChangeTextDocumentEmitter.fire({textDocument:r,contentChanges:i})}setModel(e,t){const n=m.create(e,t.getLanguageId(),t.getVersionId(),t.getValue());return this.documents.set(e,n),n}get textDocuments(){return Array.from(this.documents.values())}get onDidOpenTextDocument(){return this.onDidOpenTextDocumentEmitter.event}get onDidCloseTextDocument(){return this.onDidCloseTextDocumentEmitter.event}get onDidChangeTextDocument(){return this.onDidChangeTextDocumentEmitter.event}applyEdit(e){const t=this.p2m.asWorkspaceEdit(e),n=t.edits?t.edits.reduce(((e,t)=>{const n=t;return e[n.resource.toString()]=this._monaco.editor.getModel(n.resource),e}),{}):{};if(!Object.keys(n).map((e=>n[e])).every((e=>!!e)))return Promise.resolve(!1);const r=t.edits?t.edits.reduce(((e,t)=>{const n=t,r=n.resource.toString();return r in e||(e[r]=[]),e[r].push({range:this._monaco.Range.lift(n.edit.range),text:n.edit.text}),e}),{}):{};return Object.keys(r).forEach((e=>{n[e].pushEditOperations([],r[e].map((e=>({identifier:{major:1,minor:0},range:e.range,text:e.text,forceMoveMarkers:!0}))),(()=>[]))})),Promise.resolve(!0)}}var Xr,ei,ti,ni,ri,ii,oi,ai;!function(e){function t(e,t={}){const n=new gt(e),r=new vt(e);return{commands:new Zr(e),languages:new yt(e,r,n),workspace:new Yr(e,r,n,t.rootUri),window:new Qr}}e.create=t,e.install=function(e,n={}){const r=t(e,n);return at.install(r),r},e.get=function(){return at.get()}}(Xr||(Xr={})),(ti=ei||(ei={})).identifierNameLowercase="identifier-name-lowercase-first",ti.identifierNameUppercase="identifier-name-uppercase-first",(ri=ni||(ni={}))[ri.comment=0]="comment",ri[ri["keyword.control"]=1]="keyword.control",ri[ri["keyword.operator"]=2]="keyword.operator",ri[ri.regexp=3]="regexp",ri[ri["meta.brace.round"]=4]="meta.brace.round",ri[ri["entity.name.function"]=5]="entity.name.function",ri[ri["entity.name.type"]=6]="entity.name.type",ri[ri["entity.name.tag"]=7]="entity.name.tag",ri[ri["storage.type.property"]=8]="storage.type.property",ri[ri["support.variable.property"]=9]="support.variable.property",ri[ri["constant.property"]=10]="constant.property",ri[ri["constant.boolean"]=11]="constant.boolean",ri[ri["constant.numeric"]=12]="constant.numeric",ri[ri.string=13]="string",ri[ri["markup.raw"]=14]="markup.raw",ri[ri.token=15]="token",(oi=ii||(ii={}))[oi.ts=0]="ts",Object.freeze({tokenTypes:ni,tokenModifiers:(ai=ii,Object.freeze(Object.entries(ai).reduce(((e,[t,n])=>(parseInt(t)>-1&&(e[t]=n),e)),[])))});var ui={},si={};Object.defineProperty(si,"__esModule",{value:!0}),si.SemanticTokensBuilder=si.SemanticTokensFeature=void 0;const ci=r;si.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:e=>{const t=ci.SemanticTokensRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onDelta:e=>{const t=ci.SemanticTokensDeltaRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onRange:e=>{const t=ci.SemanticTokensRangeRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};si.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,i){let o=e,a=t;this._dataLen>0&&(o-=this._prevLine,0===o&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0!==this._prevData){const e=this._prevData.length,t=this._data.length;let n=0;for(;n<t&&n<e&&this._prevData[n]===this._data[n];)n++;if(n<t&&n<e){let r=0;for(;r<t&&r<e&&this._prevData[e-1-r]===this._data[t-1-r];)r++;const i=this._data.slice(n,t-r);return{resultId:this.id,edits:[{start:n,deleteCount:e-r-n,data:i}]}}return n<t?{resultId:this.id,edits:[{start:n,deleteCount:0,data:this._data.slice(n)}]}:n<e?{resultId:this.id,edits:[{start:n,deleteCount:e-n}]}:{resultId:this.id,edits:[]}}return this.build()}};var li={},pi={};function di(e){return"string"==typeof e||e instanceof String}function hi(e){return"function"==typeof e}function mi(e){return Array.isArray(e)}Object.defineProperty(pi,"__esModule",{value:!0}),pi.thenable=pi.typedArray=pi.stringArray=pi.array=pi.func=pi.error=pi.number=pi.string=pi.boolean=void 0,pi.boolean=function(e){return!0===e||!1===e},pi.string=di,pi.number=function(e){return"number"==typeof e||e instanceof Number},pi.error=function(e){return e instanceof Error},pi.func=hi,pi.array=mi,pi.stringArray=function(e){return mi(e)&&e.every((e=>di(e)))},pi.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},pi.thenable=function(e){return e&&hi(e.then)};var fi={};Object.defineProperty(fi,"__esModule",{value:!0}),fi.generateUuid=fi.parse=fi.isUUID=fi.v4=fi.empty=void 0;class gi{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class vi extends gi{constructor(){super([vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),"-",vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),"-","4",vi._randomHex(),vi._randomHex(),vi._randomHex(),"-",vi._oneOf(vi._timeHighBits),vi._randomHex(),vi._randomHex(),vi._randomHex(),"-",vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex(),vi._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return vi._oneOf(vi._chars)}}function Di(){return new vi}vi._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],vi._timeHighBits=["8","9","a","b"],fi.empty=new gi("00000000-0000-0000-0000-000000000000"),fi.v4=Di;const Ci=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function _i(e){return Ci.test(e)}fi.isUUID=_i,fi.parse=function(e){if(!_i(e))throw new Error("invalid uuid");return new gi(e)},fi.generateUuid=function(){return Di().asHex()};var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.attachPartialResult=yi.ProgressFeature=yi.attachWorkDone=void 0;const Ii=r,Ei=fi;class Ai{constructor(e,t){this._connection=e,this._token=t,Ai.Instances.set(this._token,this)}begin(e,t,n,r){let i={kind:"begin",title:e,percentage:t,message:n,cancellable:r};this._connection.sendProgress(Ii.WorkDoneProgress.type,this._token,i)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(Ii.WorkDoneProgress.type,this._token,n)}done(){Ai.Instances.delete(this._token),this._connection.sendProgress(Ii.WorkDoneProgress.type,this._token,{kind:"end"})}}Ai.Instances=new Map;class xi extends Ai{constructor(e,t){super(e,t),this._source=new Ii.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class Fi{constructor(){}begin(){}report(){}done(){}}class bi extends Fi{constructor(){super(),this._source=new Ii.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}yi.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new Fi;const n=t.workDoneToken;return delete t.workDoneToken,new Ai(e,n)};var Si;yi.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){var t;!0===(null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(Ii.WorkDoneProgressCancelNotification.type,(e=>{let t=Ai.Instances.get(e.token);(t instanceof xi||t instanceof bi)&&t.cancel()})))}attachWorkDoneProgress(e){return void 0===e?new Fi:new Ai(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=Ei.generateUuid();return this.connection.sendRequest(Ii.WorkDoneProgressCreateRequest.type,{token:e}).then((()=>new xi(this.connection,e)))}return Promise.resolve(new bi)}},(Si||(Si={})).type=new Ii.ProgressType;class wi{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(Si.type,this._token,e)}}yi.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new wi(e,n)};var ki={};Object.defineProperty(ki,"__esModule",{value:!0}),ki.ConfigurationFeature=void 0;const Ri=r,Ti=pi;ki.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?Ti.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Ri.ConfigurationRequest.type,t).then((t=>Array.isArray(e)?t:t[0]))}};var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.WorkspaceFoldersFeature=void 0;const Bi=r;Pi.WorkspaceFoldersFeature=e=>class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Bi.Emitter,this.connection.onNotification(Bi.DidChangeWorkspaceFoldersNotification.type,(e=>{this._onDidChangeWorkspaceFolders.fire(e.event)})))}getWorkspaceFolders(){return this.connection.sendRequest(Bi.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(Bi.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.CallHierarchyFeature=void 0;const Li=r;Oi.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(Li.CallHierarchyPrepareRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))},onIncomingCalls:e=>{const t=Li.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onOutgoingCalls:e=>{const t=Li.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.ShowDocumentFeature=void 0;const Mi=r;Ni.ShowDocumentFeature=e=>class extends e{showDocument(e){return this.connection.sendRequest(Mi.ShowDocumentRequest.type,e)}};var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),qi.FileOperationsFeature=void 0;const Wi=r;qi.FileOperationsFeature=e=>class extends e{onDidCreateFiles(e){this.connection.onNotification(Wi.DidCreateFilesNotification.type,(t=>{e(t)}))}onDidRenameFiles(e){this.connection.onNotification(Wi.DidRenameFilesNotification.type,(t=>{e(t)}))}onDidDeleteFiles(e){this.connection.onNotification(Wi.DidDeleteFilesNotification.type,(t=>{e(t)}))}onWillCreateFiles(e){return this.connection.onRequest(Wi.WillCreateFilesRequest.type,((t,n)=>e(t,n)))}onWillRenameFiles(e){return this.connection.onRequest(Wi.WillRenameFilesRequest.type,((t,n)=>e(t,n)))}onWillDeleteFiles(e){return this.connection.onRequest(Wi.WillDeleteFilesRequest.type,((t,n)=>e(t,n)))}};var ji={};Object.defineProperty(ji,"__esModule",{value:!0}),ji.LinkedEditingRangeFeature=void 0;const Ki=r;ji.LinkedEditingRangeFeature=e=>class extends e{onLinkedEditingRange(e){this.connection.onRequest(Ki.LinkedEditingRangeRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))}};var $i={};Object.defineProperty($i,"__esModule",{value:!0}),$i.MonikerFeature=void 0;const Ui=r;$i.MonikerFeature=e=>class extends e{get moniker(){return{on:e=>{const t=Ui.MonikerRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=e.combineFeatures=e.combineLanguagesFeatures=e.combineWorkspaceFeatures=e.combineWindowFeatures=e.combineClientFeatures=e.combineTracerFeatures=e.combineTelemetryFeatures=e.combineConsoleFeatures=e._LanguagesImpl=e.BulkUnregistration=e.BulkRegistration=e.ErrorMessageTracker=e.TextDocuments=void 0;const t=r,n=pi,i=fi,o=yi,a=ki,u=Pi,s=Oi,c=si,l=Ni,p=qi,d=ji,h=$i;function m(e){if(null!==e)return e}e.TextDocuments=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map((e=>this._documents[e]))}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=t.TextDocumentSyncKind.Full,e.onDidOpenTextDocument((e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=n;let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)})),e.onDidChangeTextDocument((e=>{let t=e.textDocument,n=e.contentChanges;if(0===n.length)return;let r=this._documents[t.uri];const{version:i}=t;if(null==i)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);r=this._configuration.update(r,n,i),this._documents[t.uri]=r,this._onDidChangeContent.fire(Object.freeze({document:r}))})),e.onDidCloseTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))})),e.onWillSaveTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))})),e.onWillSaveTextDocumentWaitUntil(((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]})),e.onDidSaveTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))}))}};e.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach((t=>{e.window.showErrorMessage(t)}))}};class f{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(t.MessageType.Error,e)}warn(e){this.send(t.MessageType.Warning,e)}info(e){this.send(t.MessageType.Info,e)}log(e){this.send(t.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:e,message:n})}}const g=l.ShowDocumentFeature(o.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(m)}showWarningMessage(e,...n){let r={type:t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(m)}showInformationMessage(e,...n){let r={type:t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(m)}}));(e.BulkRegistration||(e.BulkRegistration={})).create=function(){return new v};class v{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const r=n.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);const o=i.generateUuid();this._registrations.push({id:o,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}}(e.BulkUnregistration||(e.BulkUnregistration={})).create=function(){return new D(void 0,[])};class D{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach((e=>{this._unregistrations.set(e.method,e)}))}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let n={unregisterations:e};this._connection.sendRequest(t.UnregistrationRequest.type,n).then(void 0,(e=>{this._connection.console.info("Bulk unregistration failed.")}))}disposeSingle(e){const r=n.string(e)?e:e.method,i=this._unregistrations.get(r);if(!i)return!1;let o={unregisterations:[i]};return this._connection.sendRequest(t.UnregistrationRequest.type,o).then((()=>{this._unregistrations.delete(r)}),(e=>{this._connection.console.info(`Un-registering request handler for ${i.id} failed.`)})),!0}}class C{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof v?this.registerMany(e):e instanceof D?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,r,o){const a=n.string(r)?r:r.method,u=i.generateUuid();let s={registrations:[{id:u,method:a,registerOptions:o||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,s).then((t=>(e.add({id:u,method:a}),e)),(e=>(this.connection.console.info(`Registering request handler for ${a} failed.`),Promise.reject(e))))}registerSingle2(e,r){const o=n.string(e)?e:e.method,a=i.generateUuid();let u={registrations:[{id:a,method:o,registerOptions:r||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,u).then((e=>t.Disposable.create((()=>{this.unregisterSingle(a,o)}))),(e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e))))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(t.UnregistrationRequest.type,r).then(void 0,(t=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)}))}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,n).then((()=>new D(this._connection,n.registrations.map((e=>({id:e.id,method:e.method}))))),(e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e))))}}const _=p.FileOperationsFeature(u.WorkspaceFoldersFeature(a.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let n=(r=e)&&r.edit?e:{edit:e};var r;return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,n)}})));class y{constructor(){this._trace=t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:e,verbose:this._trace===t.Trace.Verbose?n:void 0})}}class I{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(t.TelemetryEventNotification.type,e)}}class E{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return o.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return o.attachPartialResult(this.connection,t)}}e._LanguagesImpl=E;const A=h.MonikerFeature(d.LinkedEditingRangeFeature(c.SemanticTokensFeature(s.CallHierarchyFeature(E))));function x(e,t){return function(n){return t(e(n))}}function F(e,t){return function(n){return t(e(n))}}function b(e,t){return function(n){return t(e(n))}}function S(e,t){return function(n){return t(e(n))}}function w(e,t){return function(n){return t(e(n))}}function k(e,t){return function(n){return t(e(n))}}e.combineConsoleFeatures=x,e.combineTelemetryFeatures=F,e.combineTracerFeatures=b,e.combineClientFeatures=S,e.combineWindowFeatures=w,e.combineWorkspaceFeatures=k,e.combineLanguagesFeatures=function(e,t){return function(n){return t(e(n))}},e.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,x),tracer:n(e.tracer,t.tracer,b),telemetry:n(e.telemetry,t.telemetry,F),client:n(e.client,t.client,S),window:n(e.window,t.window,w),workspace:n(e.workspace,t.workspace,k)}},e.createConnection=function(e,r,i){const a=i&&i.console?new(i.console(f)):new f,u=e(a);a.rawAttach(u);const s=i&&i.tracer?new(i.tracer(y)):new y,c=i&&i.telemetry?new(i.telemetry(I)):new I,l=i&&i.client?new(i.client(C)):new C,p=i&&i.window?new(i.window(g)):new g,d=i&&i.workspace?new(i.workspace(_)):new _,h=i&&i.languages?new(i.languages(A)):new A,m=[a,s,c,l,p,d,h];function v(e){return e instanceof Promise?e:n.thenable(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}let D,E,x,F={listen:()=>u.listen(),sendRequest:(e,...t)=>u.sendRequest(n.string(e)?e:e.method,...t),onRequest:(e,t)=>u.onRequest(e,t),sendNotification:(e,t)=>{const r=n.string(e)?e:e.method;1===arguments.length?u.sendNotification(r):u.sendNotification(r,t)},onNotification:(e,t)=>u.onNotification(e,t),onProgress:u.onProgress,sendProgress:u.sendProgress,onInitialize:e=>E=e,onInitialized:e=>u.onNotification(t.InitializedNotification.type,e),onShutdown:e=>D=e,onExit:e=>x=e,get console(){return a},get telemetry(){return c},get tracer(){return s},get client(){return l},get window(){return p},get workspace(){return d},get languages(){return h},onDidChangeConfiguration:e=>u.onNotification(t.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>u.onNotification(t.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>u.onNotification(t.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>u.onNotification(t.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>u.onNotification(t.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>u.onNotification(t.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>u.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>u.onNotification(t.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>u.sendNotification(t.PublishDiagnosticsNotification.type,e),onHover:e=>u.onRequest(t.HoverRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),void 0))),onCompletion:e=>u.onRequest(t.CompletionRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onCompletionResolve:e=>u.onRequest(t.CompletionResolveRequest.type,e),onSignatureHelp:e=>u.onRequest(t.SignatureHelpRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),void 0))),onDeclaration:e=>u.onRequest(t.DeclarationRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onDefinition:e=>u.onRequest(t.DefinitionRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onTypeDefinition:e=>u.onRequest(t.TypeDefinitionRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onImplementation:e=>u.onRequest(t.ImplementationRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onReferences:e=>u.onRequest(t.ReferencesRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onDocumentHighlight:e=>u.onRequest(t.DocumentHighlightRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onDocumentSymbol:e=>u.onRequest(t.DocumentSymbolRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onWorkspaceSymbol:e=>u.onRequest(t.WorkspaceSymbolRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onCodeAction:e=>u.onRequest(t.CodeActionRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onCodeActionResolve:e=>u.onRequest(t.CodeActionResolveRequest.type,((t,n)=>e(t,n))),onCodeLens:e=>u.onRequest(t.CodeLensRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onCodeLensResolve:e=>u.onRequest(t.CodeLensResolveRequest.type,((t,n)=>e(t,n))),onDocumentFormatting:e=>u.onRequest(t.DocumentFormattingRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),void 0))),onDocumentRangeFormatting:e=>u.onRequest(t.DocumentRangeFormattingRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),void 0))),onDocumentOnTypeFormatting:e=>u.onRequest(t.DocumentOnTypeFormattingRequest.type,((t,n)=>e(t,n))),onRenameRequest:e=>u.onRequest(t.RenameRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),void 0))),onPrepareRename:e=>u.onRequest(t.PrepareRenameRequest.type,((t,n)=>e(t,n))),onDocumentLinks:e=>u.onRequest(t.DocumentLinkRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onDocumentLinkResolve:e=>u.onRequest(t.DocumentLinkResolveRequest.type,((t,n)=>e(t,n))),onDocumentColor:e=>u.onRequest(t.DocumentColorRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onColorPresentation:e=>u.onRequest(t.ColorPresentationRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onFoldingRanges:e=>u.onRequest(t.FoldingRangeRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onSelectionRanges:e=>u.onRequest(t.SelectionRangeRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),o.attachPartialResult(u,t)))),onExecuteCommand:e=>u.onRequest(t.ExecuteCommandRequest.type,((t,n)=>e(t,n,o.attachWorkDone(u,t),void 0))),dispose:()=>u.dispose()};for(let t of m)t.attach(F);return u.onRequest(t.InitializeRequest.type,(e=>{r.initialize(e),n.string(e.trace)&&(s.trace=t.Trace.fromString(e.trace));for(let t of m)t.initialize(e.capabilities);if(E){return v(E(e,(new t.CancellationTokenSource).token,o.attachWorkDone(u,e),void 0)).then((e=>{if(e instanceof t.ResponseError)return e;let r=e;r||(r={capabilities:{}});let i=r.capabilities;i||(i={},r.capabilities=i),void 0===i.textDocumentSync||null===i.textDocumentSync?i.textDocumentSync=n.number(F.__textDocumentSync)?F.__textDocumentSync:t.TextDocumentSyncKind.None:n.number(i.textDocumentSync)||n.number(i.textDocumentSync.change)||(i.textDocumentSync.change=n.number(F.__textDocumentSync)?F.__textDocumentSync:t.TextDocumentSyncKind.None);for(let t of m)t.fillServerCapabilities(i);return r}))}{let e={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let t of m)t.fillServerCapabilities(e.capabilities);return e}})),u.onRequest(t.ShutdownRequest.type,(()=>(r.shutdownReceived=!0,D?D((new t.CancellationTokenSource).token):void 0))),u.onNotification(t.ExitNotification.type,(()=>{try{x&&x()}finally{r.shutdownReceived?r.exit(0):r.exit(1)}})),u.onNotification(t.SetTraceNotification.type,(e=>{s.trace=t.Trace.fromString(e.value)})),F}}(li),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.SemanticTokensBuilder=void 0;const o=si;Object.defineProperty(t,"SemanticTokensBuilder",{enumerable:!0,get:function(){return o.SemanticTokensBuilder}}),i(r,t),i(li,t),(t.ProposedFeatures||(t.ProposedFeatures={})).all={__brand:"features"}}(ui);var Hi,zi,Gi=r;!function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=void 0;const i=ui;r(Gi,t),r(ui,t);let o=!1;const a={initialize:e=>{},get shutdownReceived(){return o},set shutdownReceived(e){o=e},exit:e=>{}};t.createConnection=function(e,t,n,r){let o,u,s,c;return void 0!==e&&"features"===e.__brand&&(o=e,e=t,t=n,n=r),i.ConnectionStrategy.is(e)||i.ConnectionOptions.is(e)?c=e:(u=e,s=t,c=n),i.createConnection((e=>i.createProtocolConnection(u,s,e,c)),a,o)}}({}),(zi=Hi||(Hi={}))[zi.LineFeed=10]="LineFeed",zi[zi.CarriageReturn=13]="CarriageReturn",console.log(v((()=>import("./workspaces.47dddaac.js").then((function(e){return e._}))),[]).then((e=>e.default)));export{v as _};
